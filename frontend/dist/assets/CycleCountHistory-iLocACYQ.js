import{j as e}from"./index-BYgTg5Ia.js";import{h as t,e as s,r as a}from"./react-vendor-BFe66WFD.js";const r=()=>{const r=t(),{setTitle:c}=s(),[i,n]=a.useState([]),[o,p]=a.useState(!0),[l,d]=a.useState(null),[x,h]=a.useState("");a.useEffect(()=>{c("Logix - Registro de Conteos")},[c]),a.useEffect(()=>{(async()=>{try{const e=await fetch("/api/counts/recordings");if(!e.ok)throw new Error("Error loading recordings");const t=await e.json();n(t)}catch(e){d(e.message)}finally{p(!1)}})()},[]);const w=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),m=i.filter(e=>e.item_code&&e.item_code.toLowerCase().includes(x.toLowerCase())||e.description&&e.description.toLowerCase().includes(x.toLowerCase())||e.username&&e.username.toLowerCase().includes(x.toLowerCase()));return e.jsxs("div",{className:"w-full h-[calc(100vh-110px)] flex flex-col font-sans text-[#333] gap-1 mt-5",children:[e.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center z-20",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:"Registro Histórico"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Detalle de todas las ejecuciones de conteo cíclico"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"text",placeholder:"Buscar...",className:"border border-gray-300 px-3 py-1.5 rounded text-sm w-64 focus:outline-none focus:border-blue-500",value:x,onChange:e=>h(e.target.value)}),e.jsxs("button",{onClick:()=>{window.location.href="/api/counts/export_recordings"},className:"bg-white border border-blue-600 text-blue-600 hover:bg-blue-50 px-4 py-1.5 rounded text-sm font-medium flex items-center gap-2 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 011.414.586l2.914 2.914a1 1 0 01.586 1.414V19a2 2 0 01-2 2z"})}),"Exportar"]}),e.jsx("button",{onClick:()=>r("/counts"),className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})]}),e.jsxs("div",{className:"flex-1 overflow-auto px-6 pb-4 pt-0 relative",children:[o&&e.jsx("div",{className:"text-center p-8 text-sm text-gray-500",children:"Cargando datos..."}),l&&e.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded text-sm mb-4",children:l}),!o&&!l&&e.jsxs("table",{className:"min-w-max text-left border-collapse bg-white shadow-sm text-[11px] leading-tight",children:[e.jsx("thead",{className:"bg-[#34495e] text-white sticky top-0 z-20 shadow",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 font-bold uppercase tracking-wider whitespace-nowrap",children:"STOCKROOM"}),e.jsx("th",{className:"px-3 py-3 font-bold uppercase tracking-wider whitespace-nowrap",children:"ITEM CODE"}),e.jsx("th",{className:"px-3 py-3 font-bold uppercase tracking-wider whitespace-nowrap max-w-xs",children:"DESCRIPTION"}),e.jsx("th",{className:"px-3 py-3 font-bold uppercase tracking-wider whitespace-nowrap",children:"ITEM TYPE"}),e.jsx("th",{className:"px-3 py-3 font-bold uppercase tracking-wider whitespace-nowrap",children:"CLASS"}),e.jsx("th",{className:"px-3 py-3 font-bold uppercase tracking-wider whitespace-nowrap",children:"GROUP"}),e.jsx("th",{className:"px-3 py-3 font-bold uppercase tracking-wider whitespace-nowrap",children:"SIC (CO)"}),e.jsx("th",{className:"px-3 py-3 font-bold uppercase tracking-wider whitespace-nowrap",children:"SIC (STK)"}),e.jsx("th",{className:"px-3 py-3 font-bold uppercase tracking-wider whitespace-nowrap text-right",children:"WEIGHT"}),e.jsx("th",{className:"px-3 py-3 font-bold uppercase tracking-wider whitespace-nowrap text-center",children:"ABC"}),e.jsx("th",{className:"px-3 py-3 font-bold uppercase tracking-wider whitespace-nowrap",children:"BIN"}),e.jsx("th",{className:"px-3 py-3 font-bold uppercase tracking-wider whitespace-nowrap text-right",children:"SYS STOCK"}),e.jsx("th",{className:"px-3 py-3 font-bold uppercase tracking-wider whitespace-nowrap text-right",children:"COUNTED"}),e.jsx("th",{className:"px-3 py-3 font-bold uppercase tracking-wider whitespace-nowrap text-right",children:"DIFF"}),e.jsx("th",{className:"px-3 py-3 font-bold uppercase tracking-wider whitespace-nowrap text-right",children:"VALUE (DIFF)"}),e.jsx("th",{className:"px-3 py-3 font-bold uppercase tracking-wider whitespace-nowrap text-right",children:"ITEM COST"}),e.jsx("th",{className:"px-3 py-3 font-bold uppercase tracking-wider whitespace-nowrap text-right",children:"COUNT VALUE"}),e.jsx("th",{className:"px-3 py-3 font-bold uppercase tracking-wider whitespace-nowrap text-right",children:"DATE"}),e.jsx("th",{className:"px-3 py-3 font-bold uppercase tracking-wider whitespace-nowrap",children:"USER"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-100",children:[m.map((t,s)=>e.jsxs("tr",{className:"hover:bg-blue-50 transition-colors "+(s%2==0?"bg-white":"bg-gray-50/30"),children:[e.jsx("td",{className:"px-3 py-2 font-medium text-gray-900 whitespace-nowrap",children:t.stockroom}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("span",{className:"text-blue-600 font-medium hover:underline cursor-pointer",children:t.item_code})}),e.jsx("td",{className:"px-3 py-2 truncate max-w-xs",title:t.description,children:t.description}),e.jsx("td",{className:"px-3 py-2 text-gray-500 whitespace-nowrap",children:t.item_type}),e.jsx("td",{className:"px-3 py-2 text-gray-500 whitespace-nowrap",children:t.item_class}),e.jsx("td",{className:"px-3 py-2 text-gray-500 whitespace-nowrap",children:t.item_group}),e.jsx("td",{className:"px-3 py-2 text-gray-500 whitespace-nowrap",children:t.sic_company}),e.jsx("td",{className:"px-3 py-2 text-gray-500 whitespace-nowrap",children:t.sic_stockroom}),e.jsx("td",{className:"px-3 py-2 text-right whitespace-nowrap",children:t.weight}),e.jsx("td",{className:"px-3 py-2 text-center whitespace-nowrap",children:t.abc_code&&e.jsx("span",{className:"inline-block w-5 h-5 leading-5 rounded-full text-[9px] font-bold \n                                                "+("A"===t.abc_code?"bg-red-100 text-red-800":"B"===t.abc_code?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:t.abc_code})}),e.jsx("td",{className:"px-3 py-2 font-mono text-gray-700 whitespace-nowrap",children:t.bin_location}),e.jsx("td",{className:"px-3 py-2 text-right font-medium text-gray-600 whitespace-nowrap",children:t.system_qty}),e.jsx("td",{className:"px-3 py-2 text-right font-bold text-gray-900 whitespace-nowrap",children:t.physical_qty}),e.jsx("td",{className:"px-3 py-2 text-right font-bold whitespace-nowrap "+(0!==t.difference?"text-red-600":"text-gray-300"),children:t.difference}),e.jsx("td",{className:"px-3 py-2 text-right text-gray-500 whitespace-nowrap",children:w(t.value_diff)}),e.jsx("td",{className:"px-3 py-2 text-right text-gray-500 whitespace-nowrap",children:w(t.cost)}),e.jsx("td",{className:"px-3 py-2 text-right text-gray-800 font-medium whitespace-nowrap",children:w(t.count_value)}),e.jsx("td",{className:"px-3 py-2 text-right whitespace-nowrap text-gray-500",children:t.executed_date?new Date(t.executed_date).toISOString().slice(0,10):"-"}),e.jsx("td",{className:"px-3 py-2 text-gray-500 whitespace-nowrap",children:t.username})]},t.id)),0===m.length&&e.jsx("tr",{children:e.jsx("td",{colSpan:"19",className:"px-4 py-12 text-center text-gray-400",children:"No se encontraron registros que coincidan con la búsqueda."})})]})]})]})]})};export{r as default};
