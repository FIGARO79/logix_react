import{j as e,L as s}from"./index-wQJwC0jU.js";import{i as a,h as t,r as n}from"./react-vendor-BFe66WFD.js";const d=()=>{const{id:d}=a(),i=t(),[o,r]=n.useState(null),[c,l]=n.useState(""),[x,m]=n.useState(!0),[h,u]=n.useState(null);n.useEffect(()=>{(async()=>{try{const e=await fetch(`/api/counts/${d}`);if(!e.ok)throw new Error("Count not found");const s=await e.json();r(s),l(s.counted_qty)}catch(e){u(e.message)}finally{m(!1)}})()},[d]);return x?e.jsx(s,{children:e.jsx("div",{className:"p-8",children:"Cargando..."})}):h?e.jsx(s,{children:e.jsx("div",{className:"p-8 text-red-600",children:h})}):o?e.jsx(s,{title:`Editar Conteo #${d}`,children:e.jsx("div",{className:"max-w-2xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxs("h1",{className:"text-2xl font-bold mb-6",children:["Editar Conteo #",d]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"Item:"})," ",o.item_code]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"Sesión:"})," ",o.session_id]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"font-bold",children:"Descripción:"})," ",o.item_description]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"Ubicación:"})," ",o.counted_location]})]}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{if(!(await fetch(`/api/counts/${d}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({counted_qty:c})})).ok)throw new Error("Error updating count");i("/counts/manage")}catch(s){u(s.message)}},children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:"Cantidad Contada"}),e.jsx("input",{type:"number",value:c,onChange:e=>l(e.target.value),className:"w-full border p-2 rounded text-lg",required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:()=>i("/counts/manage"),className:"bg-gray-200 text-gray-700 px-4 py-2 rounded hover:bg-gray-300",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 font-bold",children:"Guardar Cambios"})]})]})]})})}):e.jsx(s,{children:e.jsx("div",{className:"p-8",children:"No encontrado"})})};export{d as default};
