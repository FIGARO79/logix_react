function y1(e,t){for(var s=0;s<t.length;s++){const a=t[s];if(typeof a!="string"&&!Array.isArray(a)){for(const u in a)if(u!=="default"&&!(u in e)){const f=Object.getOwnPropertyDescriptor(a,u);f&&Object.defineProperty(e,u,f.get?f:{enumerable:!0,get:()=>a[u]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const f of u)if(f.type==="childList")for(const x of f.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&a(x)}).observe(document,{childList:!0,subtree:!0});function s(u){const f={};return u.integrity&&(f.integrity=u.integrity),u.referrerPolicy&&(f.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?f.credentials="include":u.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function a(u){if(u.ep)return;u.ep=!0;const f=s(u);fetch(u.href,f)}})();var yi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function w1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var v1={exports:{}},Po={},b1={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ca=Symbol.for("react.element"),eg=Symbol.for("react.portal"),tg=Symbol.for("react.fragment"),ng=Symbol.for("react.strict_mode"),rg=Symbol.for("react.profiler"),sg=Symbol.for("react.provider"),ig=Symbol.for("react.context"),ag=Symbol.for("react.forward_ref"),og=Symbol.for("react.suspense"),lg=Symbol.for("react.memo"),cg=Symbol.for("react.lazy"),Pd=Symbol.iterator;function ug(e){return e===null||typeof e!="object"?null:(e=Pd&&e[Pd]||e["@@iterator"],typeof e=="function"?e:null)}var C1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E1=Object.assign,N1={};function ei(e,t,s){this.props=e,this.context=t,this.refs=N1,this.updater=s||C1}ei.prototype.isReactComponent={};ei.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ei.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function A1(){}A1.prototype=ei.prototype;function gu(e,t,s){this.props=e,this.context=t,this.refs=N1,this.updater=s||C1}var pu=gu.prototype=new A1;pu.constructor=gu;E1(pu,ei.prototype);pu.isPureReactComponent=!0;var Fd=Array.isArray,S1=Object.prototype.hasOwnProperty,mu={current:null},_1={key:!0,ref:!0,__self:!0,__source:!0};function I1(e,t,s){var a,u={},f=null,x=null;if(t!=null)for(a in t.ref!==void 0&&(x=t.ref),t.key!==void 0&&(f=""+t.key),t)S1.call(t,a)&&!_1.hasOwnProperty(a)&&(u[a]=t[a]);var m=arguments.length-2;if(m===1)u.children=s;else if(1<m){for(var y=Array(m),w=0;w<m;w++)y[w]=arguments[w+2];u.children=y}if(e&&e.defaultProps)for(a in m=e.defaultProps,m)u[a]===void 0&&(u[a]=m[a]);return{$$typeof:ca,type:e,key:f,ref:x,props:u,_owner:mu.current}}function dg(e,t){return{$$typeof:ca,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function yu(e){return typeof e=="object"&&e!==null&&e.$$typeof===ca}function fg(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var Ud=/\/+/g;function jl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?fg(""+e.key):t.toString(36)}function Za(e,t,s,a,u){var f=typeof e;(f==="undefined"||f==="boolean")&&(e=null);var x=!1;if(e===null)x=!0;else switch(f){case"string":case"number":x=!0;break;case"object":switch(e.$$typeof){case ca:case eg:x=!0}}if(x)return x=e,u=u(x),e=a===""?"."+jl(x,0):a,Fd(u)?(s="",e!=null&&(s=e.replace(Ud,"$&/")+"/"),Za(u,t,s,"",function(w){return w})):u!=null&&(yu(u)&&(u=dg(u,s+(!u.key||x&&x.key===u.key?"":(""+u.key).replace(Ud,"$&/")+"/")+e)),t.push(u)),1;if(x=0,a=a===""?".":a+":",Fd(e))for(var m=0;m<e.length;m++){f=e[m];var y=a+jl(f,m);x+=Za(f,t,s,y,u)}else if(y=ug(e),typeof y=="function")for(e=y.call(e),m=0;!(f=e.next()).done;)f=f.value,y=a+jl(f,m++),x+=Za(f,t,s,y,u);else if(f==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return x}function ka(e,t,s){if(e==null)return e;var a=[],u=0;return Za(e,a,"","",function(f){return t.call(s,f,u++)}),a}function hg(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Gt={current:null},Qa={transition:null},xg={ReactCurrentDispatcher:Gt,ReactCurrentBatchConfig:Qa,ReactCurrentOwner:mu};function T1(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:ka,forEach:function(e,t,s){ka(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return ka(e,function(){t++}),t},toArray:function(e){return ka(e,function(t){return t})||[]},only:function(e){if(!yu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Te.Component=ei;Te.Fragment=tg;Te.Profiler=rg;Te.PureComponent=gu;Te.StrictMode=ng;Te.Suspense=og;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xg;Te.act=T1;Te.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=E1({},e.props),u=e.key,f=e.ref,x=e._owner;if(t!=null){if(t.ref!==void 0&&(f=t.ref,x=mu.current),t.key!==void 0&&(u=""+t.key),e.type&&e.type.defaultProps)var m=e.type.defaultProps;for(y in t)S1.call(t,y)&&!_1.hasOwnProperty(y)&&(a[y]=t[y]===void 0&&m!==void 0?m[y]:t[y])}var y=arguments.length-2;if(y===1)a.children=s;else if(1<y){m=Array(y);for(var w=0;w<y;w++)m[w]=arguments[w+2];a.children=m}return{$$typeof:ca,type:e.type,key:u,ref:f,props:a,_owner:x}};Te.createContext=function(e){return e={$$typeof:ig,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:sg,_context:e},e.Consumer=e};Te.createElement=I1;Te.createFactory=function(e){var t=I1.bind(null,e);return t.type=e,t};Te.createRef=function(){return{current:null}};Te.forwardRef=function(e){return{$$typeof:ag,render:e}};Te.isValidElement=yu;Te.lazy=function(e){return{$$typeof:cg,_payload:{_status:-1,_result:e},_init:hg}};Te.memo=function(e,t){return{$$typeof:lg,type:e,compare:t===void 0?null:t}};Te.startTransition=function(e){var t=Qa.transition;Qa.transition={};try{e()}finally{Qa.transition=t}};Te.unstable_act=T1;Te.useCallback=function(e,t){return Gt.current.useCallback(e,t)};Te.useContext=function(e){return Gt.current.useContext(e)};Te.useDebugValue=function(){};Te.useDeferredValue=function(e){return Gt.current.useDeferredValue(e)};Te.useEffect=function(e,t){return Gt.current.useEffect(e,t)};Te.useId=function(){return Gt.current.useId()};Te.useImperativeHandle=function(e,t,s){return Gt.current.useImperativeHandle(e,t,s)};Te.useInsertionEffect=function(e,t){return Gt.current.useInsertionEffect(e,t)};Te.useLayoutEffect=function(e,t){return Gt.current.useLayoutEffect(e,t)};Te.useMemo=function(e,t){return Gt.current.useMemo(e,t)};Te.useReducer=function(e,t,s){return Gt.current.useReducer(e,t,s)};Te.useRef=function(e){return Gt.current.useRef(e)};Te.useState=function(e){return Gt.current.useState(e)};Te.useSyncExternalStore=function(e,t,s){return Gt.current.useSyncExternalStore(e,t,s)};Te.useTransition=function(){return Gt.current.useTransition()};Te.version="18.3.1";b1.exports=Te;var R=b1.exports;const Pe=w1(R),gg=y1({__proto__:null,default:Pe},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pg=R,mg=Symbol.for("react.element"),yg=Symbol.for("react.fragment"),wg=Object.prototype.hasOwnProperty,vg=pg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bg={key:!0,ref:!0,__self:!0,__source:!0};function j1(e,t,s){var a,u={},f=null,x=null;s!==void 0&&(f=""+s),t.key!==void 0&&(f=""+t.key),t.ref!==void 0&&(x=t.ref);for(a in t)wg.call(t,a)&&!bg.hasOwnProperty(a)&&(u[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)u[a]===void 0&&(u[a]=t[a]);return{$$typeof:mg,type:e,key:f,ref:x,props:u,_owner:vg.current}}Po.Fragment=yg;Po.jsx=j1;Po.jsxs=j1;v1.exports=Po;var c=v1.exports,lc={},k1={exports:{}},hn={},R1={exports:{}},O1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,Z){var Q=$.length;$.push(Z);e:for(;0<Q;){var xe=Q-1>>>1,ye=$[xe];if(0<u(ye,Z))$[xe]=Z,$[Q]=ye,Q=xe;else break e}}function s($){return $.length===0?null:$[0]}function a($){if($.length===0)return null;var Z=$[0],Q=$.pop();if(Q!==Z){$[0]=Q;e:for(var xe=0,ye=$.length,Ie=ye>>>1;xe<Ie;){var He=2*(xe+1)-1,ue=$[He],oe=He+1,nt=$[oe];if(0>u(ue,Q))oe<ye&&0>u(nt,ue)?($[xe]=nt,$[oe]=Q,xe=oe):($[xe]=ue,$[He]=Q,xe=He);else if(oe<ye&&0>u(nt,Q))$[xe]=nt,$[oe]=Q,xe=oe;else break e}}return Z}function u($,Z){var Q=$.sortIndex-Z.sortIndex;return Q!==0?Q:$.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var x=Date,m=x.now();e.unstable_now=function(){return x.now()-m}}var y=[],w=[],N=1,b=null,T=3,j=!1,B=!1,M=!1,H=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E($){for(var Z=s(w);Z!==null;){if(Z.callback===null)a(w);else if(Z.startTime<=$)a(w),Z.sortIndex=Z.expirationTime,t(y,Z);else break;Z=s(w)}}function k($){if(M=!1,E($),!B)if(s(y)!==null)B=!0,le(V);else{var Z=s(w);Z!==null&&ce(k,Z.startTime-$)}}function V($,Z){B=!1,M&&(M=!1,_(X),X=-1),j=!0;var Q=T;try{for(E(Z),b=s(y);b!==null&&(!(b.expirationTime>Z)||$&&!ee());){var xe=b.callback;if(typeof xe=="function"){b.callback=null,T=b.priorityLevel;var ye=xe(b.expirationTime<=Z);Z=e.unstable_now(),typeof ye=="function"?b.callback=ye:b===s(y)&&a(y),E(Z)}else a(y);b=s(y)}if(b!==null)var Ie=!0;else{var He=s(w);He!==null&&ce(k,He.startTime-Z),Ie=!1}return Ie}finally{b=null,T=Q,j=!1}}var U=!1,L=null,X=-1,P=5,J=-1;function ee(){return!(e.unstable_now()-J<P)}function ne(){if(L!==null){var $=e.unstable_now();J=$;var Z=!0;try{Z=L(!0,$)}finally{Z?fe():(U=!1,L=null)}}else U=!1}var fe;if(typeof C=="function")fe=function(){C(ne)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,K=Ne.port2;Ne.port1.onmessage=ne,fe=function(){K.postMessage(null)}}else fe=function(){H(ne,0)};function le($){L=$,U||(U=!0,fe())}function ce($,Z){X=H(function(){$(e.unstable_now())},Z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){B||j||(B=!0,le(V))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_getFirstCallbackNode=function(){return s(y)},e.unstable_next=function($){switch(T){case 1:case 2:case 3:var Z=3;break;default:Z=T}var Q=T;T=Z;try{return $()}finally{T=Q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,Z){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Q=T;T=$;try{return Z()}finally{T=Q}},e.unstable_scheduleCallback=function($,Z,Q){var xe=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?xe+Q:xe):Q=xe,$){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=Q+ye,$={id:N++,callback:Z,priorityLevel:$,startTime:Q,expirationTime:ye,sortIndex:-1},Q>xe?($.sortIndex=Q,t(w,$),s(y)===null&&$===s(w)&&(M?(_(X),X=-1):M=!0,ce(k,Q-xe))):($.sortIndex=ye,t(y,$),B||j||(B=!0,le(V))),$},e.unstable_shouldYield=ee,e.unstable_wrapCallback=function($){var Z=T;return function(){var Q=T;T=Z;try{return $.apply(this,arguments)}finally{T=Q}}}})(O1);R1.exports=O1;var Cg=R1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eg=R,fn=Cg;function se(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var D1=new Set,zi={};function ls(e,t){Vs(e,t),Vs(e+"Capture",t)}function Vs(e,t){for(zi[e]=t,e=0;e<t.length;e++)D1.add(t[e])}var rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cc=Object.prototype.hasOwnProperty,Ng=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zd={},Vd={};function Ag(e){return cc.call(Vd,e)?!0:cc.call(zd,e)?!1:Ng.test(e)?Vd[e]=!0:(zd[e]=!0,!1)}function Sg(e,t,s,a){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function _g(e,t,s,a){if(t===null||typeof t>"u"||Sg(e,t,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Xt(e,t,s,a,u,f,x){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=u,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=x}var Ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ot[e]=new Xt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ot[t]=new Xt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ot[e]=new Xt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ot[e]=new Xt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ot[e]=new Xt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ot[e]=new Xt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ot[e]=new Xt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ot[e]=new Xt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ot[e]=new Xt(e,5,!1,e.toLowerCase(),null,!1,!1)});var wu=/[\-:]([a-z])/g;function vu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(wu,vu);Ot[t]=new Xt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(wu,vu);Ot[t]=new Xt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(wu,vu);Ot[t]=new Xt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ot[e]=new Xt(e,1,!1,e.toLowerCase(),null,!1,!1)});Ot.xlinkHref=new Xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ot[e]=new Xt(e,1,!1,e.toLowerCase(),null,!0,!0)});function bu(e,t,s,a){var u=Ot.hasOwnProperty(t)?Ot[t]:null;(u!==null?u.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(_g(t,s,u,a)&&(s=null),a||u===null?Ag(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):u.mustUseProperty?e[u.propertyName]=s===null?u.type===3?!1:"":s:(t=u.attributeName,a=u.attributeNamespace,s===null?e.removeAttribute(t):(u=u.type,s=u===3||u===4&&s===!0?"":""+s,a?e.setAttributeNS(a,t,s):e.setAttribute(t,s))))}var cr=Eg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ra=Symbol.for("react.element"),Cs=Symbol.for("react.portal"),Es=Symbol.for("react.fragment"),Cu=Symbol.for("react.strict_mode"),uc=Symbol.for("react.profiler"),M1=Symbol.for("react.provider"),L1=Symbol.for("react.context"),Eu=Symbol.for("react.forward_ref"),dc=Symbol.for("react.suspense"),fc=Symbol.for("react.suspense_list"),Nu=Symbol.for("react.memo"),wr=Symbol.for("react.lazy"),B1=Symbol.for("react.offscreen"),Hd=Symbol.iterator;function wi(e){return e===null||typeof e!="object"?null:(e=Hd&&e[Hd]||e["@@iterator"],typeof e=="function"?e:null)}var ot=Object.assign,kl;function _i(e){if(kl===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);kl=t&&t[1]||""}return`
`+kl+e}var Rl=!1;function Ol(e,t){if(!e||Rl)return"";Rl=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(w){var a=w}Reflect.construct(e,[],t)}else{try{t.call()}catch(w){a=w}e.call(t.prototype)}else{try{throw Error()}catch(w){a=w}e()}}catch(w){if(w&&a&&typeof w.stack=="string"){for(var u=w.stack.split(`
`),f=a.stack.split(`
`),x=u.length-1,m=f.length-1;1<=x&&0<=m&&u[x]!==f[m];)m--;for(;1<=x&&0<=m;x--,m--)if(u[x]!==f[m]){if(x!==1||m!==1)do if(x--,m--,0>m||u[x]!==f[m]){var y=`
`+u[x].replace(" at new "," at ");return e.displayName&&y.includes("<anonymous>")&&(y=y.replace("<anonymous>",e.displayName)),y}while(1<=x&&0<=m);break}}}finally{Rl=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?_i(e):""}function Ig(e){switch(e.tag){case 5:return _i(e.type);case 16:return _i("Lazy");case 13:return _i("Suspense");case 19:return _i("SuspenseList");case 0:case 2:case 15:return e=Ol(e.type,!1),e;case 11:return e=Ol(e.type.render,!1),e;case 1:return e=Ol(e.type,!0),e;default:return""}}function hc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Es:return"Fragment";case Cs:return"Portal";case uc:return"Profiler";case Cu:return"StrictMode";case dc:return"Suspense";case fc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case L1:return(e.displayName||"Context")+".Consumer";case M1:return(e._context.displayName||"Context")+".Provider";case Eu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Nu:return t=e.displayName||null,t!==null?t:hc(e.type)||"Memo";case wr:t=e._payload,e=e._init;try{return hc(e(t))}catch{}}return null}function Tg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hc(t);case 8:return t===Cu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Lr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function P1(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function jg(e){var t=P1(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var u=s.get,f=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(x){a=""+x,f.call(this,x)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(x){a=""+x},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Oa(e){e._valueTracker||(e._valueTracker=jg(e))}function F1(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),a="";return e&&(a=P1(e)?e.checked?"true":"false":e.value),e=a,e!==s?(t.setValue(e),!0):!1}function lo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function xc(e,t){var s=t.checked;return ot({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Wd(e,t){var s=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;s=Lr(t.value!=null?t.value:s),e._wrapperState={initialChecked:a,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function U1(e,t){t=t.checked,t!=null&&bu(e,"checked",t,!1)}function gc(e,t){U1(e,t);var s=Lr(t.value),a=t.type;if(s!=null)a==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?pc(e,t.type,s):t.hasOwnProperty("defaultValue")&&pc(e,t.type,Lr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Gd(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function pc(e,t,s){(t!=="number"||lo(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Ii=Array.isArray;function Ls(e,t,s,a){if(e=e.options,t){t={};for(var u=0;u<s.length;u++)t["$"+s[u]]=!0;for(s=0;s<e.length;s++)u=t.hasOwnProperty("$"+e[s].value),e[s].selected!==u&&(e[s].selected=u),u&&a&&(e[s].defaultSelected=!0)}else{for(s=""+Lr(s),t=null,u=0;u<e.length;u++){if(e[u].value===s){e[u].selected=!0,a&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function mc(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(se(91));return ot({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Xd(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(se(92));if(Ii(s)){if(1<s.length)throw Error(se(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:Lr(s)}}function z1(e,t){var s=Lr(t.value),a=Lr(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),a!=null&&(e.defaultValue=""+a)}function Yd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function V1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?V1(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Da,H1=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,a,u){MSApp.execUnsafeLocalFunction(function(){return e(t,s,a,u)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Da=Da||document.createElement("div"),Da.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Da.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Vi(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var ki={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kg=["Webkit","ms","Moz","O"];Object.keys(ki).forEach(function(e){kg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ki[t]=ki[e]})});function W1(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||ki.hasOwnProperty(e)&&ki[e]?(""+t).trim():t+"px"}function G1(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var a=s.indexOf("--")===0,u=W1(s,t[s],a);s==="float"&&(s="cssFloat"),a?e.setProperty(s,u):e[s]=u}}var Rg=ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wc(e,t){if(t){if(Rg[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(se(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(se(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(se(61))}if(t.style!=null&&typeof t.style!="object")throw Error(se(62))}}function vc(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bc=null;function Au(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Cc=null,Bs=null,Ps=null;function qd(e){if(e=fa(e)){if(typeof Cc!="function")throw Error(se(280));var t=e.stateNode;t&&(t=Ho(t),Cc(e.stateNode,e.type,t))}}function X1(e){Bs?Ps?Ps.push(e):Ps=[e]:Bs=e}function Y1(){if(Bs){var e=Bs,t=Ps;if(Ps=Bs=null,qd(e),t)for(e=0;e<t.length;e++)qd(t[e])}}function q1(e,t){return e(t)}function K1(){}var Dl=!1;function Z1(e,t,s){if(Dl)return e(t,s);Dl=!0;try{return q1(e,t,s)}finally{Dl=!1,(Bs!==null||Ps!==null)&&(K1(),Y1())}}function Hi(e,t){var s=e.stateNode;if(s===null)return null;var a=Ho(s);if(a===null)return null;s=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(se(231,t,typeof s));return s}var Ec=!1;if(rr)try{var vi={};Object.defineProperty(vi,"passive",{get:function(){Ec=!0}}),window.addEventListener("test",vi,vi),window.removeEventListener("test",vi,vi)}catch{Ec=!1}function Og(e,t,s,a,u,f,x,m,y){var w=Array.prototype.slice.call(arguments,3);try{t.apply(s,w)}catch(N){this.onError(N)}}var Ri=!1,co=null,uo=!1,Nc=null,Dg={onError:function(e){Ri=!0,co=e}};function Mg(e,t,s,a,u,f,x,m,y){Ri=!1,co=null,Og.apply(Dg,arguments)}function Lg(e,t,s,a,u,f,x,m,y){if(Mg.apply(this,arguments),Ri){if(Ri){var w=co;Ri=!1,co=null}else throw Error(se(198));uo||(uo=!0,Nc=w)}}function cs(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function Q1(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Kd(e){if(cs(e)!==e)throw Error(se(188))}function Bg(e){var t=e.alternate;if(!t){if(t=cs(e),t===null)throw Error(se(188));return t!==e?null:e}for(var s=e,a=t;;){var u=s.return;if(u===null)break;var f=u.alternate;if(f===null){if(a=u.return,a!==null){s=a;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===s)return Kd(u),e;if(f===a)return Kd(u),t;f=f.sibling}throw Error(se(188))}if(s.return!==a.return)s=u,a=f;else{for(var x=!1,m=u.child;m;){if(m===s){x=!0,s=u,a=f;break}if(m===a){x=!0,a=u,s=f;break}m=m.sibling}if(!x){for(m=f.child;m;){if(m===s){x=!0,s=f,a=u;break}if(m===a){x=!0,a=f,s=u;break}m=m.sibling}if(!x)throw Error(se(189))}}if(s.alternate!==a)throw Error(se(190))}if(s.tag!==3)throw Error(se(188));return s.stateNode.current===s?e:t}function J1(e){return e=Bg(e),e!==null?$1(e):null}function $1(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=$1(e);if(t!==null)return t;e=e.sibling}return null}var ef=fn.unstable_scheduleCallback,Zd=fn.unstable_cancelCallback,Pg=fn.unstable_shouldYield,Fg=fn.unstable_requestPaint,xt=fn.unstable_now,Ug=fn.unstable_getCurrentPriorityLevel,Su=fn.unstable_ImmediatePriority,tf=fn.unstable_UserBlockingPriority,fo=fn.unstable_NormalPriority,zg=fn.unstable_LowPriority,nf=fn.unstable_IdlePriority,Fo=null,Yn=null;function Vg(e){if(Yn&&typeof Yn.onCommitFiberRoot=="function")try{Yn.onCommitFiberRoot(Fo,e,void 0,(e.current.flags&128)===128)}catch{}}var Dn=Math.clz32?Math.clz32:Gg,Hg=Math.log,Wg=Math.LN2;function Gg(e){return e>>>=0,e===0?32:31-(Hg(e)/Wg|0)|0}var Ma=64,La=4194304;function Ti(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ho(e,t){var s=e.pendingLanes;if(s===0)return 0;var a=0,u=e.suspendedLanes,f=e.pingedLanes,x=s&268435455;if(x!==0){var m=x&~u;m!==0?a=Ti(m):(f&=x,f!==0&&(a=Ti(f)))}else x=s&~u,x!==0?a=Ti(x):f!==0&&(a=Ti(f));if(a===0)return 0;if(t!==0&&t!==a&&!(t&u)&&(u=a&-a,f=t&-t,u>=f||u===16&&(f&4194240)!==0))return t;if(a&4&&(a|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)s=31-Dn(t),u=1<<s,a|=e[s],t&=~u;return a}function Xg(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yg(e,t){for(var s=e.suspendedLanes,a=e.pingedLanes,u=e.expirationTimes,f=e.pendingLanes;0<f;){var x=31-Dn(f),m=1<<x,y=u[x];y===-1?(!(m&s)||m&a)&&(u[x]=Xg(m,t)):y<=t&&(e.expiredLanes|=m),f&=~m}}function Ac(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function rf(){var e=Ma;return Ma<<=1,!(Ma&4194240)&&(Ma=64),e}function Ml(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function ua(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Dn(t),e[t]=s}function qg(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<s;){var u=31-Dn(s),f=1<<u;t[u]=0,a[u]=-1,e[u]=-1,s&=~f}}function _u(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var a=31-Dn(s),u=1<<a;u&t|e[a]&t&&(e[a]|=t),s&=~u}}var Ue=0;function sf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var af,Iu,of,lf,cf,Sc=!1,Ba=[],_r=null,Ir=null,Tr=null,Wi=new Map,Gi=new Map,br=[],Kg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qd(e,t){switch(e){case"focusin":case"focusout":_r=null;break;case"dragenter":case"dragleave":Ir=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":Wi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gi.delete(t.pointerId)}}function bi(e,t,s,a,u,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:s,eventSystemFlags:a,nativeEvent:f,targetContainers:[u]},t!==null&&(t=fa(t),t!==null&&Iu(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function Zg(e,t,s,a,u){switch(t){case"focusin":return _r=bi(_r,e,t,s,a,u),!0;case"dragenter":return Ir=bi(Ir,e,t,s,a,u),!0;case"mouseover":return Tr=bi(Tr,e,t,s,a,u),!0;case"pointerover":var f=u.pointerId;return Wi.set(f,bi(Wi.get(f)||null,e,t,s,a,u)),!0;case"gotpointercapture":return f=u.pointerId,Gi.set(f,bi(Gi.get(f)||null,e,t,s,a,u)),!0}return!1}function uf(e){var t=Zr(e.target);if(t!==null){var s=cs(t);if(s!==null){if(t=s.tag,t===13){if(t=Q1(s),t!==null){e.blockedOn=t,cf(e.priority,function(){of(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ja(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=_c(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var a=new s.constructor(s.type,s);bc=a,s.target.dispatchEvent(a),bc=null}else return t=fa(s),t!==null&&Iu(t),e.blockedOn=s,!1;t.shift()}return!0}function Jd(e,t,s){Ja(e)&&s.delete(t)}function Qg(){Sc=!1,_r!==null&&Ja(_r)&&(_r=null),Ir!==null&&Ja(Ir)&&(Ir=null),Tr!==null&&Ja(Tr)&&(Tr=null),Wi.forEach(Jd),Gi.forEach(Jd)}function Ci(e,t){e.blockedOn===t&&(e.blockedOn=null,Sc||(Sc=!0,fn.unstable_scheduleCallback(fn.unstable_NormalPriority,Qg)))}function Xi(e){function t(u){return Ci(u,e)}if(0<Ba.length){Ci(Ba[0],e);for(var s=1;s<Ba.length;s++){var a=Ba[s];a.blockedOn===e&&(a.blockedOn=null)}}for(_r!==null&&Ci(_r,e),Ir!==null&&Ci(Ir,e),Tr!==null&&Ci(Tr,e),Wi.forEach(t),Gi.forEach(t),s=0;s<br.length;s++)a=br[s],a.blockedOn===e&&(a.blockedOn=null);for(;0<br.length&&(s=br[0],s.blockedOn===null);)uf(s),s.blockedOn===null&&br.shift()}var Fs=cr.ReactCurrentBatchConfig,xo=!0;function Jg(e,t,s,a){var u=Ue,f=Fs.transition;Fs.transition=null;try{Ue=1,Tu(e,t,s,a)}finally{Ue=u,Fs.transition=f}}function $g(e,t,s,a){var u=Ue,f=Fs.transition;Fs.transition=null;try{Ue=4,Tu(e,t,s,a)}finally{Ue=u,Fs.transition=f}}function Tu(e,t,s,a){if(xo){var u=_c(e,t,s,a);if(u===null)Gl(e,t,a,go,s),Qd(e,a);else if(Zg(u,e,t,s,a))a.stopPropagation();else if(Qd(e,a),t&4&&-1<Kg.indexOf(e)){for(;u!==null;){var f=fa(u);if(f!==null&&af(f),f=_c(e,t,s,a),f===null&&Gl(e,t,a,go,s),f===u)break;u=f}u!==null&&a.stopPropagation()}else Gl(e,t,a,null,s)}}var go=null;function _c(e,t,s,a){if(go=null,e=Au(a),e=Zr(e),e!==null)if(t=cs(e),t===null)e=null;else if(s=t.tag,s===13){if(e=Q1(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return go=e,null}function df(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ug()){case Su:return 1;case tf:return 4;case fo:case zg:return 16;case nf:return 536870912;default:return 16}default:return 16}}var Er=null,ju=null,$a=null;function ff(){if($a)return $a;var e,t=ju,s=t.length,a,u="value"in Er?Er.value:Er.textContent,f=u.length;for(e=0;e<s&&t[e]===u[e];e++);var x=s-e;for(a=1;a<=x&&t[s-a]===u[f-a];a++);return $a=u.slice(e,1<a?1-a:void 0)}function eo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Pa(){return!0}function $d(){return!1}function xn(e){function t(s,a,u,f,x){this._reactName=s,this._targetInst=u,this.type=a,this.nativeEvent=f,this.target=x,this.currentTarget=null;for(var m in e)e.hasOwnProperty(m)&&(s=e[m],this[m]=s?s(f):f[m]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Pa:$d,this.isPropagationStopped=$d,this}return ot(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Pa)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Pa)},persist:function(){},isPersistent:Pa}),t}var ti={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ku=xn(ti),da=ot({},ti,{view:0,detail:0}),e2=xn(da),Ll,Bl,Ei,Uo=ot({},da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ru,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ei&&(Ei&&e.type==="mousemove"?(Ll=e.screenX-Ei.screenX,Bl=e.screenY-Ei.screenY):Bl=Ll=0,Ei=e),Ll)},movementY:function(e){return"movementY"in e?e.movementY:Bl}}),e0=xn(Uo),t2=ot({},Uo,{dataTransfer:0}),n2=xn(t2),r2=ot({},da,{relatedTarget:0}),Pl=xn(r2),s2=ot({},ti,{animationName:0,elapsedTime:0,pseudoElement:0}),i2=xn(s2),a2=ot({},ti,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),o2=xn(a2),l2=ot({},ti,{data:0}),t0=xn(l2),c2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},u2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},d2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function f2(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=d2[e])?!!t[e]:!1}function Ru(){return f2}var h2=ot({},da,{key:function(e){if(e.key){var t=c2[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=eo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?u2[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ru,charCode:function(e){return e.type==="keypress"?eo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?eo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),x2=xn(h2),g2=ot({},Uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),n0=xn(g2),p2=ot({},da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ru}),m2=xn(p2),y2=ot({},ti,{propertyName:0,elapsedTime:0,pseudoElement:0}),w2=xn(y2),v2=ot({},Uo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),b2=xn(v2),C2=[9,13,27,32],Ou=rr&&"CompositionEvent"in window,Oi=null;rr&&"documentMode"in document&&(Oi=document.documentMode);var E2=rr&&"TextEvent"in window&&!Oi,hf=rr&&(!Ou||Oi&&8<Oi&&11>=Oi),r0=" ",s0=!1;function xf(e,t){switch(e){case"keyup":return C2.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ns=!1;function N2(e,t){switch(e){case"compositionend":return gf(t);case"keypress":return t.which!==32?null:(s0=!0,r0);case"textInput":return e=t.data,e===r0&&s0?null:e;default:return null}}function A2(e,t){if(Ns)return e==="compositionend"||!Ou&&xf(e,t)?(e=ff(),$a=ju=Er=null,Ns=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return hf&&t.locale!=="ko"?null:t.data;default:return null}}var S2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function i0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!S2[e.type]:t==="textarea"}function pf(e,t,s,a){X1(a),t=po(t,"onChange"),0<t.length&&(s=new ku("onChange","change",null,s,a),e.push({event:s,listeners:t}))}var Di=null,Yi=null;function _2(e){_f(e,0)}function zo(e){var t=_s(e);if(F1(t))return e}function I2(e,t){if(e==="change")return t}var mf=!1;if(rr){var Fl;if(rr){var Ul="oninput"in document;if(!Ul){var a0=document.createElement("div");a0.setAttribute("oninput","return;"),Ul=typeof a0.oninput=="function"}Fl=Ul}else Fl=!1;mf=Fl&&(!document.documentMode||9<document.documentMode)}function o0(){Di&&(Di.detachEvent("onpropertychange",yf),Yi=Di=null)}function yf(e){if(e.propertyName==="value"&&zo(Yi)){var t=[];pf(t,Yi,e,Au(e)),Z1(_2,t)}}function T2(e,t,s){e==="focusin"?(o0(),Di=t,Yi=s,Di.attachEvent("onpropertychange",yf)):e==="focusout"&&o0()}function j2(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return zo(Yi)}function k2(e,t){if(e==="click")return zo(t)}function R2(e,t){if(e==="input"||e==="change")return zo(t)}function O2(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ln=typeof Object.is=="function"?Object.is:O2;function qi(e,t){if(Ln(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var u=s[a];if(!cc.call(t,u)||!Ln(e[u],t[u]))return!1}return!0}function l0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function c0(e,t){var s=l0(e);e=0;for(var a;s;){if(s.nodeType===3){if(a=e+s.textContent.length,e<=t&&a>=t)return{node:s,offset:t-e};e=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=l0(s)}}function wf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?wf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function vf(){for(var e=window,t=lo();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=lo(e.document)}return t}function Du(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function D2(e){var t=vf(),s=e.focusedElem,a=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&wf(s.ownerDocument.documentElement,s)){if(a!==null&&Du(s)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var u=s.textContent.length,f=Math.min(a.start,u);a=a.end===void 0?f:Math.min(a.end,u),!e.extend&&f>a&&(u=a,a=f,f=u),u=c0(s,f);var x=c0(s,a);u&&x&&(e.rangeCount!==1||e.anchorNode!==u.node||e.anchorOffset!==u.offset||e.focusNode!==x.node||e.focusOffset!==x.offset)&&(t=t.createRange(),t.setStart(u.node,u.offset),e.removeAllRanges(),f>a?(e.addRange(t),e.extend(x.node,x.offset)):(t.setEnd(x.node,x.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var M2=rr&&"documentMode"in document&&11>=document.documentMode,As=null,Ic=null,Mi=null,Tc=!1;function u0(e,t,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Tc||As==null||As!==lo(a)||(a=As,"selectionStart"in a&&Du(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Mi&&qi(Mi,a)||(Mi=a,a=po(Ic,"onSelect"),0<a.length&&(t=new ku("onSelect","select",null,t,s),e.push({event:t,listeners:a}),t.target=As)))}function Fa(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Ss={animationend:Fa("Animation","AnimationEnd"),animationiteration:Fa("Animation","AnimationIteration"),animationstart:Fa("Animation","AnimationStart"),transitionend:Fa("Transition","TransitionEnd")},zl={},bf={};rr&&(bf=document.createElement("div").style,"AnimationEvent"in window||(delete Ss.animationend.animation,delete Ss.animationiteration.animation,delete Ss.animationstart.animation),"TransitionEvent"in window||delete Ss.transitionend.transition);function Vo(e){if(zl[e])return zl[e];if(!Ss[e])return e;var t=Ss[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in bf)return zl[e]=t[s];return e}var Cf=Vo("animationend"),Ef=Vo("animationiteration"),Nf=Vo("animationstart"),Af=Vo("transitionend"),Sf=new Map,d0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Sf.set(e,t),ls(t,[e])}for(var Vl=0;Vl<d0.length;Vl++){var Hl=d0[Vl],L2=Hl.toLowerCase(),B2=Hl[0].toUpperCase()+Hl.slice(1);Pr(L2,"on"+B2)}Pr(Cf,"onAnimationEnd");Pr(Ef,"onAnimationIteration");Pr(Nf,"onAnimationStart");Pr("dblclick","onDoubleClick");Pr("focusin","onFocus");Pr("focusout","onBlur");Pr(Af,"onTransitionEnd");Vs("onMouseEnter",["mouseout","mouseover"]);Vs("onMouseLeave",["mouseout","mouseover"]);Vs("onPointerEnter",["pointerout","pointerover"]);Vs("onPointerLeave",["pointerout","pointerover"]);ls("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ls("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ls("onBeforeInput",["compositionend","keypress","textInput","paste"]);ls("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ls("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ls("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ji="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),P2=new Set("cancel close invalid load scroll toggle".split(" ").concat(ji));function f0(e,t,s){var a=e.type||"unknown-event";e.currentTarget=s,Lg(a,t,void 0,e),e.currentTarget=null}function _f(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var a=e[s],u=a.event;a=a.listeners;e:{var f=void 0;if(t)for(var x=a.length-1;0<=x;x--){var m=a[x],y=m.instance,w=m.currentTarget;if(m=m.listener,y!==f&&u.isPropagationStopped())break e;f0(u,m,w),f=y}else for(x=0;x<a.length;x++){if(m=a[x],y=m.instance,w=m.currentTarget,m=m.listener,y!==f&&u.isPropagationStopped())break e;f0(u,m,w),f=y}}}if(uo)throw e=Nc,uo=!1,Nc=null,e}function Qe(e,t){var s=t[Dc];s===void 0&&(s=t[Dc]=new Set);var a=e+"__bubble";s.has(a)||(If(t,e,2,!1),s.add(a))}function Wl(e,t,s){var a=0;t&&(a|=4),If(s,e,a,t)}var Ua="_reactListening"+Math.random().toString(36).slice(2);function Ki(e){if(!e[Ua]){e[Ua]=!0,D1.forEach(function(s){s!=="selectionchange"&&(P2.has(s)||Wl(s,!1,e),Wl(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ua]||(t[Ua]=!0,Wl("selectionchange",!1,t))}}function If(e,t,s,a){switch(df(t)){case 1:var u=Jg;break;case 4:u=$g;break;default:u=Tu}s=u.bind(null,t,s,e),u=void 0,!Ec||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),a?u!==void 0?e.addEventListener(t,s,{capture:!0,passive:u}):e.addEventListener(t,s,!0):u!==void 0?e.addEventListener(t,s,{passive:u}):e.addEventListener(t,s,!1)}function Gl(e,t,s,a,u){var f=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var x=a.tag;if(x===3||x===4){var m=a.stateNode.containerInfo;if(m===u||m.nodeType===8&&m.parentNode===u)break;if(x===4)for(x=a.return;x!==null;){var y=x.tag;if((y===3||y===4)&&(y=x.stateNode.containerInfo,y===u||y.nodeType===8&&y.parentNode===u))return;x=x.return}for(;m!==null;){if(x=Zr(m),x===null)return;if(y=x.tag,y===5||y===6){a=f=x;continue e}m=m.parentNode}}a=a.return}Z1(function(){var w=f,N=Au(s),b=[];e:{var T=Sf.get(e);if(T!==void 0){var j=ku,B=e;switch(e){case"keypress":if(eo(s)===0)break e;case"keydown":case"keyup":j=x2;break;case"focusin":B="focus",j=Pl;break;case"focusout":B="blur",j=Pl;break;case"beforeblur":case"afterblur":j=Pl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=e0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=n2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=m2;break;case Cf:case Ef:case Nf:j=i2;break;case Af:j=w2;break;case"scroll":j=e2;break;case"wheel":j=b2;break;case"copy":case"cut":case"paste":j=o2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=n0}var M=(t&4)!==0,H=!M&&e==="scroll",_=M?T!==null?T+"Capture":null:T;M=[];for(var C=w,E;C!==null;){E=C;var k=E.stateNode;if(E.tag===5&&k!==null&&(E=k,_!==null&&(k=Hi(C,_),k!=null&&M.push(Zi(C,k,E)))),H)break;C=C.return}0<M.length&&(T=new j(T,B,null,s,N),b.push({event:T,listeners:M}))}}if(!(t&7)){e:{if(T=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",T&&s!==bc&&(B=s.relatedTarget||s.fromElement)&&(Zr(B)||B[sr]))break e;if((j||T)&&(T=N.window===N?N:(T=N.ownerDocument)?T.defaultView||T.parentWindow:window,j?(B=s.relatedTarget||s.toElement,j=w,B=B?Zr(B):null,B!==null&&(H=cs(B),B!==H||B.tag!==5&&B.tag!==6)&&(B=null)):(j=null,B=w),j!==B)){if(M=e0,k="onMouseLeave",_="onMouseEnter",C="mouse",(e==="pointerout"||e==="pointerover")&&(M=n0,k="onPointerLeave",_="onPointerEnter",C="pointer"),H=j==null?T:_s(j),E=B==null?T:_s(B),T=new M(k,C+"leave",j,s,N),T.target=H,T.relatedTarget=E,k=null,Zr(N)===w&&(M=new M(_,C+"enter",B,s,N),M.target=E,M.relatedTarget=H,k=M),H=k,j&&B)t:{for(M=j,_=B,C=0,E=M;E;E=bs(E))C++;for(E=0,k=_;k;k=bs(k))E++;for(;0<C-E;)M=bs(M),C--;for(;0<E-C;)_=bs(_),E--;for(;C--;){if(M===_||_!==null&&M===_.alternate)break t;M=bs(M),_=bs(_)}M=null}else M=null;j!==null&&h0(b,T,j,M,!1),B!==null&&H!==null&&h0(b,H,B,M,!0)}}e:{if(T=w?_s(w):window,j=T.nodeName&&T.nodeName.toLowerCase(),j==="select"||j==="input"&&T.type==="file")var V=I2;else if(i0(T))if(mf)V=R2;else{V=j2;var U=T2}else(j=T.nodeName)&&j.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(V=k2);if(V&&(V=V(e,w))){pf(b,V,s,N);break e}U&&U(e,T,w),e==="focusout"&&(U=T._wrapperState)&&U.controlled&&T.type==="number"&&pc(T,"number",T.value)}switch(U=w?_s(w):window,e){case"focusin":(i0(U)||U.contentEditable==="true")&&(As=U,Ic=w,Mi=null);break;case"focusout":Mi=Ic=As=null;break;case"mousedown":Tc=!0;break;case"contextmenu":case"mouseup":case"dragend":Tc=!1,u0(b,s,N);break;case"selectionchange":if(M2)break;case"keydown":case"keyup":u0(b,s,N)}var L;if(Ou)e:{switch(e){case"compositionstart":var X="onCompositionStart";break e;case"compositionend":X="onCompositionEnd";break e;case"compositionupdate":X="onCompositionUpdate";break e}X=void 0}else Ns?xf(e,s)&&(X="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(X="onCompositionStart");X&&(hf&&s.locale!=="ko"&&(Ns||X!=="onCompositionStart"?X==="onCompositionEnd"&&Ns&&(L=ff()):(Er=N,ju="value"in Er?Er.value:Er.textContent,Ns=!0)),U=po(w,X),0<U.length&&(X=new t0(X,e,null,s,N),b.push({event:X,listeners:U}),L?X.data=L:(L=gf(s),L!==null&&(X.data=L)))),(L=E2?N2(e,s):A2(e,s))&&(w=po(w,"onBeforeInput"),0<w.length&&(N=new t0("onBeforeInput","beforeinput",null,s,N),b.push({event:N,listeners:w}),N.data=L))}_f(b,t)})}function Zi(e,t,s){return{instance:e,listener:t,currentTarget:s}}function po(e,t){for(var s=t+"Capture",a=[];e!==null;){var u=e,f=u.stateNode;u.tag===5&&f!==null&&(u=f,f=Hi(e,s),f!=null&&a.unshift(Zi(e,f,u)),f=Hi(e,t),f!=null&&a.push(Zi(e,f,u))),e=e.return}return a}function bs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function h0(e,t,s,a,u){for(var f=t._reactName,x=[];s!==null&&s!==a;){var m=s,y=m.alternate,w=m.stateNode;if(y!==null&&y===a)break;m.tag===5&&w!==null&&(m=w,u?(y=Hi(s,f),y!=null&&x.unshift(Zi(s,y,m))):u||(y=Hi(s,f),y!=null&&x.push(Zi(s,y,m)))),s=s.return}x.length!==0&&e.push({event:t,listeners:x})}var F2=/\r\n?/g,U2=/\u0000|\uFFFD/g;function x0(e){return(typeof e=="string"?e:""+e).replace(F2,`
`).replace(U2,"")}function za(e,t,s){if(t=x0(t),x0(e)!==t&&s)throw Error(se(425))}function mo(){}var jc=null,kc=null;function Rc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Oc=typeof setTimeout=="function"?setTimeout:void 0,z2=typeof clearTimeout=="function"?clearTimeout:void 0,g0=typeof Promise=="function"?Promise:void 0,V2=typeof queueMicrotask=="function"?queueMicrotask:typeof g0<"u"?function(e){return g0.resolve(null).then(e).catch(H2)}:Oc;function H2(e){setTimeout(function(){throw e})}function Xl(e,t){var s=t,a=0;do{var u=s.nextSibling;if(e.removeChild(s),u&&u.nodeType===8)if(s=u.data,s==="/$"){if(a===0){e.removeChild(u),Xi(t);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=u}while(s);Xi(t)}function jr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function p0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var ni=Math.random().toString(36).slice(2),Xn="__reactFiber$"+ni,Qi="__reactProps$"+ni,sr="__reactContainer$"+ni,Dc="__reactEvents$"+ni,W2="__reactListeners$"+ni,G2="__reactHandles$"+ni;function Zr(e){var t=e[Xn];if(t)return t;for(var s=e.parentNode;s;){if(t=s[sr]||s[Xn]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=p0(e);e!==null;){if(s=e[Xn])return s;e=p0(e)}return t}e=s,s=e.parentNode}return null}function fa(e){return e=e[Xn]||e[sr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function _s(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(se(33))}function Ho(e){return e[Qi]||null}var Mc=[],Is=-1;function Fr(e){return{current:e}}function $e(e){0>Is||(e.current=Mc[Is],Mc[Is]=null,Is--)}function Ke(e,t){Is++,Mc[Is]=e.current,e.current=t}var Br={},Ft=Fr(Br),tn=Fr(!1),ns=Br;function Hs(e,t){var s=e.type.contextTypes;if(!s)return Br;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var u={},f;for(f in s)u[f]=t[f];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=u),u}function nn(e){return e=e.childContextTypes,e!=null}function yo(){$e(tn),$e(Ft)}function m0(e,t,s){if(Ft.current!==Br)throw Error(se(168));Ke(Ft,t),Ke(tn,s)}function Tf(e,t,s){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var u in a)if(!(u in t))throw Error(se(108,Tg(e)||"Unknown",u));return ot({},s,a)}function wo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Br,ns=Ft.current,Ke(Ft,e),Ke(tn,tn.current),!0}function y0(e,t,s){var a=e.stateNode;if(!a)throw Error(se(169));s?(e=Tf(e,t,ns),a.__reactInternalMemoizedMergedChildContext=e,$e(tn),$e(Ft),Ke(Ft,e)):$e(tn),Ke(tn,s)}var $n=null,Wo=!1,Yl=!1;function jf(e){$n===null?$n=[e]:$n.push(e)}function X2(e){Wo=!0,jf(e)}function Ur(){if(!Yl&&$n!==null){Yl=!0;var e=0,t=Ue;try{var s=$n;for(Ue=1;e<s.length;e++){var a=s[e];do a=a(!0);while(a!==null)}$n=null,Wo=!1}catch(u){throw $n!==null&&($n=$n.slice(e+1)),ef(Su,Ur),u}finally{Ue=t,Yl=!1}}return null}var Ts=[],js=0,vo=null,bo=0,vn=[],bn=0,rs=null,er=1,tr="";function qr(e,t){Ts[js++]=bo,Ts[js++]=vo,vo=e,bo=t}function kf(e,t,s){vn[bn++]=er,vn[bn++]=tr,vn[bn++]=rs,rs=e;var a=er;e=tr;var u=32-Dn(a)-1;a&=~(1<<u),s+=1;var f=32-Dn(t)+u;if(30<f){var x=u-u%5;f=(a&(1<<x)-1).toString(32),a>>=x,u-=x,er=1<<32-Dn(t)+u|s<<u|a,tr=f+e}else er=1<<f|s<<u|a,tr=e}function Mu(e){e.return!==null&&(qr(e,1),kf(e,1,0))}function Lu(e){for(;e===vo;)vo=Ts[--js],Ts[js]=null,bo=Ts[--js],Ts[js]=null;for(;e===rs;)rs=vn[--bn],vn[bn]=null,tr=vn[--bn],vn[bn]=null,er=vn[--bn],vn[bn]=null}var dn=null,un=null,tt=!1,On=null;function Rf(e,t){var s=Cn(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function w0(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,dn=e,un=jr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,dn=e,un=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=rs!==null?{id:er,overflow:tr}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=Cn(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,dn=e,un=null,!0):!1;default:return!1}}function Lc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Bc(e){if(tt){var t=un;if(t){var s=t;if(!w0(e,t)){if(Lc(e))throw Error(se(418));t=jr(s.nextSibling);var a=dn;t&&w0(e,t)?Rf(a,s):(e.flags=e.flags&-4097|2,tt=!1,dn=e)}}else{if(Lc(e))throw Error(se(418));e.flags=e.flags&-4097|2,tt=!1,dn=e}}}function v0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;dn=e}function Va(e){if(e!==dn)return!1;if(!tt)return v0(e),tt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Rc(e.type,e.memoizedProps)),t&&(t=un)){if(Lc(e))throw Of(),Error(se(418));for(;t;)Rf(e,t),t=jr(t.nextSibling)}if(v0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(se(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){un=jr(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}un=null}}else un=dn?jr(e.stateNode.nextSibling):null;return!0}function Of(){for(var e=un;e;)e=jr(e.nextSibling)}function Ws(){un=dn=null,tt=!1}function Bu(e){On===null?On=[e]:On.push(e)}var Y2=cr.ReactCurrentBatchConfig;function Ni(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(se(309));var a=s.stateNode}if(!a)throw Error(se(147,e));var u=a,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(x){var m=u.refs;x===null?delete m[f]:m[f]=x},t._stringRef=f,t)}if(typeof e!="string")throw Error(se(284));if(!s._owner)throw Error(se(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(se(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function b0(e){var t=e._init;return t(e._payload)}function Df(e){function t(_,C){if(e){var E=_.deletions;E===null?(_.deletions=[C],_.flags|=16):E.push(C)}}function s(_,C){if(!e)return null;for(;C!==null;)t(_,C),C=C.sibling;return null}function a(_,C){for(_=new Map;C!==null;)C.key!==null?_.set(C.key,C):_.set(C.index,C),C=C.sibling;return _}function u(_,C){return _=Dr(_,C),_.index=0,_.sibling=null,_}function f(_,C,E){return _.index=E,e?(E=_.alternate,E!==null?(E=E.index,E<C?(_.flags|=2,C):E):(_.flags|=2,C)):(_.flags|=1048576,C)}function x(_){return e&&_.alternate===null&&(_.flags|=2),_}function m(_,C,E,k){return C===null||C.tag!==6?(C=ec(E,_.mode,k),C.return=_,C):(C=u(C,E),C.return=_,C)}function y(_,C,E,k){var V=E.type;return V===Es?N(_,C,E.props.children,k,E.key):C!==null&&(C.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===wr&&b0(V)===C.type)?(k=u(C,E.props),k.ref=Ni(_,C,E),k.return=_,k):(k=oo(E.type,E.key,E.props,null,_.mode,k),k.ref=Ni(_,C,E),k.return=_,k)}function w(_,C,E,k){return C===null||C.tag!==4||C.stateNode.containerInfo!==E.containerInfo||C.stateNode.implementation!==E.implementation?(C=tc(E,_.mode,k),C.return=_,C):(C=u(C,E.children||[]),C.return=_,C)}function N(_,C,E,k,V){return C===null||C.tag!==7?(C=es(E,_.mode,k,V),C.return=_,C):(C=u(C,E),C.return=_,C)}function b(_,C,E){if(typeof C=="string"&&C!==""||typeof C=="number")return C=ec(""+C,_.mode,E),C.return=_,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ra:return E=oo(C.type,C.key,C.props,null,_.mode,E),E.ref=Ni(_,null,C),E.return=_,E;case Cs:return C=tc(C,_.mode,E),C.return=_,C;case wr:var k=C._init;return b(_,k(C._payload),E)}if(Ii(C)||wi(C))return C=es(C,_.mode,E,null),C.return=_,C;Ha(_,C)}return null}function T(_,C,E,k){var V=C!==null?C.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return V!==null?null:m(_,C,""+E,k);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ra:return E.key===V?y(_,C,E,k):null;case Cs:return E.key===V?w(_,C,E,k):null;case wr:return V=E._init,T(_,C,V(E._payload),k)}if(Ii(E)||wi(E))return V!==null?null:N(_,C,E,k,null);Ha(_,E)}return null}function j(_,C,E,k,V){if(typeof k=="string"&&k!==""||typeof k=="number")return _=_.get(E)||null,m(C,_,""+k,V);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Ra:return _=_.get(k.key===null?E:k.key)||null,y(C,_,k,V);case Cs:return _=_.get(k.key===null?E:k.key)||null,w(C,_,k,V);case wr:var U=k._init;return j(_,C,E,U(k._payload),V)}if(Ii(k)||wi(k))return _=_.get(E)||null,N(C,_,k,V,null);Ha(C,k)}return null}function B(_,C,E,k){for(var V=null,U=null,L=C,X=C=0,P=null;L!==null&&X<E.length;X++){L.index>X?(P=L,L=null):P=L.sibling;var J=T(_,L,E[X],k);if(J===null){L===null&&(L=P);break}e&&L&&J.alternate===null&&t(_,L),C=f(J,C,X),U===null?V=J:U.sibling=J,U=J,L=P}if(X===E.length)return s(_,L),tt&&qr(_,X),V;if(L===null){for(;X<E.length;X++)L=b(_,E[X],k),L!==null&&(C=f(L,C,X),U===null?V=L:U.sibling=L,U=L);return tt&&qr(_,X),V}for(L=a(_,L);X<E.length;X++)P=j(L,_,X,E[X],k),P!==null&&(e&&P.alternate!==null&&L.delete(P.key===null?X:P.key),C=f(P,C,X),U===null?V=P:U.sibling=P,U=P);return e&&L.forEach(function(ee){return t(_,ee)}),tt&&qr(_,X),V}function M(_,C,E,k){var V=wi(E);if(typeof V!="function")throw Error(se(150));if(E=V.call(E),E==null)throw Error(se(151));for(var U=V=null,L=C,X=C=0,P=null,J=E.next();L!==null&&!J.done;X++,J=E.next()){L.index>X?(P=L,L=null):P=L.sibling;var ee=T(_,L,J.value,k);if(ee===null){L===null&&(L=P);break}e&&L&&ee.alternate===null&&t(_,L),C=f(ee,C,X),U===null?V=ee:U.sibling=ee,U=ee,L=P}if(J.done)return s(_,L),tt&&qr(_,X),V;if(L===null){for(;!J.done;X++,J=E.next())J=b(_,J.value,k),J!==null&&(C=f(J,C,X),U===null?V=J:U.sibling=J,U=J);return tt&&qr(_,X),V}for(L=a(_,L);!J.done;X++,J=E.next())J=j(L,_,X,J.value,k),J!==null&&(e&&J.alternate!==null&&L.delete(J.key===null?X:J.key),C=f(J,C,X),U===null?V=J:U.sibling=J,U=J);return e&&L.forEach(function(ne){return t(_,ne)}),tt&&qr(_,X),V}function H(_,C,E,k){if(typeof E=="object"&&E!==null&&E.type===Es&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Ra:e:{for(var V=E.key,U=C;U!==null;){if(U.key===V){if(V=E.type,V===Es){if(U.tag===7){s(_,U.sibling),C=u(U,E.props.children),C.return=_,_=C;break e}}else if(U.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===wr&&b0(V)===U.type){s(_,U.sibling),C=u(U,E.props),C.ref=Ni(_,U,E),C.return=_,_=C;break e}s(_,U);break}else t(_,U);U=U.sibling}E.type===Es?(C=es(E.props.children,_.mode,k,E.key),C.return=_,_=C):(k=oo(E.type,E.key,E.props,null,_.mode,k),k.ref=Ni(_,C,E),k.return=_,_=k)}return x(_);case Cs:e:{for(U=E.key;C!==null;){if(C.key===U)if(C.tag===4&&C.stateNode.containerInfo===E.containerInfo&&C.stateNode.implementation===E.implementation){s(_,C.sibling),C=u(C,E.children||[]),C.return=_,_=C;break e}else{s(_,C);break}else t(_,C);C=C.sibling}C=tc(E,_.mode,k),C.return=_,_=C}return x(_);case wr:return U=E._init,H(_,C,U(E._payload),k)}if(Ii(E))return B(_,C,E,k);if(wi(E))return M(_,C,E,k);Ha(_,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,C!==null&&C.tag===6?(s(_,C.sibling),C=u(C,E),C.return=_,_=C):(s(_,C),C=ec(E,_.mode,k),C.return=_,_=C),x(_)):s(_,C)}return H}var Gs=Df(!0),Mf=Df(!1),Co=Fr(null),Eo=null,ks=null,Pu=null;function Fu(){Pu=ks=Eo=null}function Uu(e){var t=Co.current;$e(Co),e._currentValue=t}function Pc(e,t,s){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===s)break;e=e.return}}function Us(e,t){Eo=e,Pu=ks=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(en=!0),e.firstContext=null)}function Nn(e){var t=e._currentValue;if(Pu!==e)if(e={context:e,memoizedValue:t,next:null},ks===null){if(Eo===null)throw Error(se(308));ks=e,Eo.dependencies={lanes:0,firstContext:e}}else ks=ks.next=e;return t}var Qr=null;function zu(e){Qr===null?Qr=[e]:Qr.push(e)}function Lf(e,t,s,a){var u=t.interleaved;return u===null?(s.next=s,zu(t)):(s.next=u.next,u.next=s),t.interleaved=s,ir(e,a)}function ir(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var vr=!1;function Vu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function nr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function kr(e,t,s){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,De&2){var u=a.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),a.pending=t,ir(e,s)}return u=a.interleaved,u===null?(t.next=t,zu(a)):(t.next=u.next,u.next=t),a.interleaved=t,ir(e,s)}function to(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,s|=a,t.lanes=s,_u(e,s)}}function C0(e,t){var s=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var u=null,f=null;if(s=s.firstBaseUpdate,s!==null){do{var x={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};f===null?u=f=x:f=f.next=x,s=s.next}while(s!==null);f===null?u=f=t:f=f.next=t}else u=f=t;s={baseState:a.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:a.shared,effects:a.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function No(e,t,s,a){var u=e.updateQueue;vr=!1;var f=u.firstBaseUpdate,x=u.lastBaseUpdate,m=u.shared.pending;if(m!==null){u.shared.pending=null;var y=m,w=y.next;y.next=null,x===null?f=w:x.next=w,x=y;var N=e.alternate;N!==null&&(N=N.updateQueue,m=N.lastBaseUpdate,m!==x&&(m===null?N.firstBaseUpdate=w:m.next=w,N.lastBaseUpdate=y))}if(f!==null){var b=u.baseState;x=0,N=w=y=null,m=f;do{var T=m.lane,j=m.eventTime;if((a&T)===T){N!==null&&(N=N.next={eventTime:j,lane:0,tag:m.tag,payload:m.payload,callback:m.callback,next:null});e:{var B=e,M=m;switch(T=t,j=s,M.tag){case 1:if(B=M.payload,typeof B=="function"){b=B.call(j,b,T);break e}b=B;break e;case 3:B.flags=B.flags&-65537|128;case 0:if(B=M.payload,T=typeof B=="function"?B.call(j,b,T):B,T==null)break e;b=ot({},b,T);break e;case 2:vr=!0}}m.callback!==null&&m.lane!==0&&(e.flags|=64,T=u.effects,T===null?u.effects=[m]:T.push(m))}else j={eventTime:j,lane:T,tag:m.tag,payload:m.payload,callback:m.callback,next:null},N===null?(w=N=j,y=b):N=N.next=j,x|=T;if(m=m.next,m===null){if(m=u.shared.pending,m===null)break;T=m,m=T.next,T.next=null,u.lastBaseUpdate=T,u.shared.pending=null}}while(!0);if(N===null&&(y=b),u.baseState=y,u.firstBaseUpdate=w,u.lastBaseUpdate=N,t=u.shared.interleaved,t!==null){u=t;do x|=u.lane,u=u.next;while(u!==t)}else f===null&&(u.shared.lanes=0);is|=x,e.lanes=x,e.memoizedState=b}}function E0(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],u=a.callback;if(u!==null){if(a.callback=null,a=s,typeof u!="function")throw Error(se(191,u));u.call(a)}}}var ha={},qn=Fr(ha),Ji=Fr(ha),$i=Fr(ha);function Jr(e){if(e===ha)throw Error(se(174));return e}function Hu(e,t){switch(Ke($i,t),Ke(Ji,e),Ke(qn,ha),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:yc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=yc(t,e)}$e(qn),Ke(qn,t)}function Xs(){$e(qn),$e(Ji),$e($i)}function Pf(e){Jr($i.current);var t=Jr(qn.current),s=yc(t,e.type);t!==s&&(Ke(Ji,e),Ke(qn,s))}function Wu(e){Ji.current===e&&($e(qn),$e(Ji))}var it=Fr(0);function Ao(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ql=[];function Gu(){for(var e=0;e<ql.length;e++)ql[e]._workInProgressVersionPrimary=null;ql.length=0}var no=cr.ReactCurrentDispatcher,Kl=cr.ReactCurrentBatchConfig,ss=0,at=null,bt=null,At=null,So=!1,Li=!1,ea=0,q2=0;function Lt(){throw Error(se(321))}function Xu(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Ln(e[s],t[s]))return!1;return!0}function Yu(e,t,s,a,u,f){if(ss=f,at=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,no.current=e===null||e.memoizedState===null?J2:$2,e=s(a,u),Li){f=0;do{if(Li=!1,ea=0,25<=f)throw Error(se(301));f+=1,At=bt=null,t.updateQueue=null,no.current=ep,e=s(a,u)}while(Li)}if(no.current=_o,t=bt!==null&&bt.next!==null,ss=0,At=bt=at=null,So=!1,t)throw Error(se(300));return e}function qu(){var e=ea!==0;return ea=0,e}function Gn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?at.memoizedState=At=e:At=At.next=e,At}function An(){if(bt===null){var e=at.alternate;e=e!==null?e.memoizedState:null}else e=bt.next;var t=At===null?at.memoizedState:At.next;if(t!==null)At=t,bt=e;else{if(e===null)throw Error(se(310));bt=e,e={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},At===null?at.memoizedState=At=e:At=At.next=e}return At}function ta(e,t){return typeof t=="function"?t(e):t}function Zl(e){var t=An(),s=t.queue;if(s===null)throw Error(se(311));s.lastRenderedReducer=e;var a=bt,u=a.baseQueue,f=s.pending;if(f!==null){if(u!==null){var x=u.next;u.next=f.next,f.next=x}a.baseQueue=u=f,s.pending=null}if(u!==null){f=u.next,a=a.baseState;var m=x=null,y=null,w=f;do{var N=w.lane;if((ss&N)===N)y!==null&&(y=y.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),a=w.hasEagerState?w.eagerState:e(a,w.action);else{var b={lane:N,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};y===null?(m=y=b,x=a):y=y.next=b,at.lanes|=N,is|=N}w=w.next}while(w!==null&&w!==f);y===null?x=a:y.next=m,Ln(a,t.memoizedState)||(en=!0),t.memoizedState=a,t.baseState=x,t.baseQueue=y,s.lastRenderedState=a}if(e=s.interleaved,e!==null){u=e;do f=u.lane,at.lanes|=f,is|=f,u=u.next;while(u!==e)}else u===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Ql(e){var t=An(),s=t.queue;if(s===null)throw Error(se(311));s.lastRenderedReducer=e;var a=s.dispatch,u=s.pending,f=t.memoizedState;if(u!==null){s.pending=null;var x=u=u.next;do f=e(f,x.action),x=x.next;while(x!==u);Ln(f,t.memoizedState)||(en=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),s.lastRenderedState=f}return[f,a]}function Ff(){}function Uf(e,t){var s=at,a=An(),u=t(),f=!Ln(a.memoizedState,u);if(f&&(a.memoizedState=u,en=!0),a=a.queue,Ku(Hf.bind(null,s,a,e),[e]),a.getSnapshot!==t||f||At!==null&&At.memoizedState.tag&1){if(s.flags|=2048,na(9,Vf.bind(null,s,a,u,t),void 0,null),St===null)throw Error(se(349));ss&30||zf(s,t,u)}return u}function zf(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=at.updateQueue,t===null?(t={lastEffect:null,stores:null},at.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Vf(e,t,s,a){t.value=s,t.getSnapshot=a,Wf(t)&&Gf(e)}function Hf(e,t,s){return s(function(){Wf(t)&&Gf(e)})}function Wf(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Ln(e,s)}catch{return!0}}function Gf(e){var t=ir(e,1);t!==null&&Mn(t,e,1,-1)}function N0(e){var t=Gn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ta,lastRenderedState:e},t.queue=e,e=e.dispatch=Q2.bind(null,at,e),[t.memoizedState,e]}function na(e,t,s,a){return e={tag:e,create:t,destroy:s,deps:a,next:null},t=at.updateQueue,t===null?(t={lastEffect:null,stores:null},at.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,t.lastEffect=e)),e}function Xf(){return An().memoizedState}function ro(e,t,s,a){var u=Gn();at.flags|=e,u.memoizedState=na(1|t,s,void 0,a===void 0?null:a)}function Go(e,t,s,a){var u=An();a=a===void 0?null:a;var f=void 0;if(bt!==null){var x=bt.memoizedState;if(f=x.destroy,a!==null&&Xu(a,x.deps)){u.memoizedState=na(t,s,f,a);return}}at.flags|=e,u.memoizedState=na(1|t,s,f,a)}function A0(e,t){return ro(8390656,8,e,t)}function Ku(e,t){return Go(2048,8,e,t)}function Yf(e,t){return Go(4,2,e,t)}function qf(e,t){return Go(4,4,e,t)}function Kf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Zf(e,t,s){return s=s!=null?s.concat([e]):null,Go(4,4,Kf.bind(null,t,e),s)}function Zu(){}function Qf(e,t){var s=An();t=t===void 0?null:t;var a=s.memoizedState;return a!==null&&t!==null&&Xu(t,a[1])?a[0]:(s.memoizedState=[e,t],e)}function Jf(e,t){var s=An();t=t===void 0?null:t;var a=s.memoizedState;return a!==null&&t!==null&&Xu(t,a[1])?a[0]:(e=e(),s.memoizedState=[e,t],e)}function $f(e,t,s){return ss&21?(Ln(s,t)||(s=rf(),at.lanes|=s,is|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,en=!0),e.memoizedState=s)}function K2(e,t){var s=Ue;Ue=s!==0&&4>s?s:4,e(!0);var a=Kl.transition;Kl.transition={};try{e(!1),t()}finally{Ue=s,Kl.transition=a}}function eh(){return An().memoizedState}function Z2(e,t,s){var a=Or(e);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},th(e))nh(t,s);else if(s=Lf(e,t,s,a),s!==null){var u=Wt();Mn(s,e,a,u),rh(s,t,a)}}function Q2(e,t,s){var a=Or(e),u={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(th(e))nh(t,u);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var x=t.lastRenderedState,m=f(x,s);if(u.hasEagerState=!0,u.eagerState=m,Ln(m,x)){var y=t.interleaved;y===null?(u.next=u,zu(t)):(u.next=y.next,y.next=u),t.interleaved=u;return}}catch{}finally{}s=Lf(e,t,u,a),s!==null&&(u=Wt(),Mn(s,e,a,u),rh(s,t,a))}}function th(e){var t=e.alternate;return e===at||t!==null&&t===at}function nh(e,t){Li=So=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function rh(e,t,s){if(s&4194240){var a=t.lanes;a&=e.pendingLanes,s|=a,t.lanes=s,_u(e,s)}}var _o={readContext:Nn,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},J2={readContext:Nn,useCallback:function(e,t){return Gn().memoizedState=[e,t===void 0?null:t],e},useContext:Nn,useEffect:A0,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,ro(4194308,4,Kf.bind(null,t,e),s)},useLayoutEffect:function(e,t){return ro(4194308,4,e,t)},useInsertionEffect:function(e,t){return ro(4,2,e,t)},useMemo:function(e,t){var s=Gn();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var a=Gn();return t=s!==void 0?s(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Z2.bind(null,at,e),[a.memoizedState,e]},useRef:function(e){var t=Gn();return e={current:e},t.memoizedState=e},useState:N0,useDebugValue:Zu,useDeferredValue:function(e){return Gn().memoizedState=e},useTransition:function(){var e=N0(!1),t=e[0];return e=K2.bind(null,e[1]),Gn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var a=at,u=Gn();if(tt){if(s===void 0)throw Error(se(407));s=s()}else{if(s=t(),St===null)throw Error(se(349));ss&30||zf(a,t,s)}u.memoizedState=s;var f={value:s,getSnapshot:t};return u.queue=f,A0(Hf.bind(null,a,f,e),[e]),a.flags|=2048,na(9,Vf.bind(null,a,f,s,t),void 0,null),s},useId:function(){var e=Gn(),t=St.identifierPrefix;if(tt){var s=tr,a=er;s=(a&~(1<<32-Dn(a)-1)).toString(32)+s,t=":"+t+"R"+s,s=ea++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=q2++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$2={readContext:Nn,useCallback:Qf,useContext:Nn,useEffect:Ku,useImperativeHandle:Zf,useInsertionEffect:Yf,useLayoutEffect:qf,useMemo:Jf,useReducer:Zl,useRef:Xf,useState:function(){return Zl(ta)},useDebugValue:Zu,useDeferredValue:function(e){var t=An();return $f(t,bt.memoizedState,e)},useTransition:function(){var e=Zl(ta)[0],t=An().memoizedState;return[e,t]},useMutableSource:Ff,useSyncExternalStore:Uf,useId:eh,unstable_isNewReconciler:!1},ep={readContext:Nn,useCallback:Qf,useContext:Nn,useEffect:Ku,useImperativeHandle:Zf,useInsertionEffect:Yf,useLayoutEffect:qf,useMemo:Jf,useReducer:Ql,useRef:Xf,useState:function(){return Ql(ta)},useDebugValue:Zu,useDeferredValue:function(e){var t=An();return bt===null?t.memoizedState=e:$f(t,bt.memoizedState,e)},useTransition:function(){var e=Ql(ta)[0],t=An().memoizedState;return[e,t]},useMutableSource:Ff,useSyncExternalStore:Uf,useId:eh,unstable_isNewReconciler:!1};function kn(e,t){if(e&&e.defaultProps){t=ot({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function Fc(e,t,s,a){t=e.memoizedState,s=s(a,t),s=s==null?t:ot({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Xo={isMounted:function(e){return(e=e._reactInternals)?cs(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var a=Wt(),u=Or(e),f=nr(a,u);f.payload=t,s!=null&&(f.callback=s),t=kr(e,f,u),t!==null&&(Mn(t,e,u,a),to(t,e,u))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var a=Wt(),u=Or(e),f=nr(a,u);f.tag=1,f.payload=t,s!=null&&(f.callback=s),t=kr(e,f,u),t!==null&&(Mn(t,e,u,a),to(t,e,u))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Wt(),a=Or(e),u=nr(s,a);u.tag=2,t!=null&&(u.callback=t),t=kr(e,u,a),t!==null&&(Mn(t,e,a,s),to(t,e,a))}};function S0(e,t,s,a,u,f,x){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,f,x):t.prototype&&t.prototype.isPureReactComponent?!qi(s,a)||!qi(u,f):!0}function sh(e,t,s){var a=!1,u=Br,f=t.contextType;return typeof f=="object"&&f!==null?f=Nn(f):(u=nn(t)?ns:Ft.current,a=t.contextTypes,f=(a=a!=null)?Hs(e,u):Br),t=new t(s,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Xo,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=f),t}function _0(e,t,s,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,a),t.state!==e&&Xo.enqueueReplaceState(t,t.state,null)}function Uc(e,t,s,a){var u=e.stateNode;u.props=s,u.state=e.memoizedState,u.refs={},Vu(e);var f=t.contextType;typeof f=="object"&&f!==null?u.context=Nn(f):(f=nn(t)?ns:Ft.current,u.context=Hs(e,f)),u.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(Fc(e,t,f,s),u.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(t=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),t!==u.state&&Xo.enqueueReplaceState(u,u.state,null),No(e,s,u,a),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4194308)}function Ys(e,t){try{var s="",a=t;do s+=Ig(a),a=a.return;while(a);var u=s}catch(f){u=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:u,digest:null}}function Jl(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function zc(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var tp=typeof WeakMap=="function"?WeakMap:Map;function ih(e,t,s){s=nr(-1,s),s.tag=3,s.payload={element:null};var a=t.value;return s.callback=function(){To||(To=!0,Qc=a),zc(e,t)},s}function ah(e,t,s){s=nr(-1,s),s.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var u=t.value;s.payload=function(){return a(u)},s.callback=function(){zc(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(s.callback=function(){zc(e,t),typeof a!="function"&&(Rr===null?Rr=new Set([this]):Rr.add(this));var x=t.stack;this.componentDidCatch(t.value,{componentStack:x!==null?x:""})}),s}function I0(e,t,s){var a=e.pingCache;if(a===null){a=e.pingCache=new tp;var u=new Set;a.set(t,u)}else u=a.get(t),u===void 0&&(u=new Set,a.set(t,u));u.has(s)||(u.add(s),e=gp.bind(null,e,t,s),t.then(e,e))}function T0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function j0(e,t,s,a,u){return e.mode&1?(e.flags|=65536,e.lanes=u,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=nr(-1,1),t.tag=2,kr(s,t,1))),s.lanes|=1),e)}var np=cr.ReactCurrentOwner,en=!1;function Vt(e,t,s,a){t.child=e===null?Mf(t,null,s,a):Gs(t,e.child,s,a)}function k0(e,t,s,a,u){s=s.render;var f=t.ref;return Us(t,u),a=Yu(e,t,s,a,f,u),s=qu(),e!==null&&!en?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,ar(e,t,u)):(tt&&s&&Mu(t),t.flags|=1,Vt(e,t,a,u),t.child)}function R0(e,t,s,a,u){if(e===null){var f=s.type;return typeof f=="function"&&!sd(f)&&f.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=f,oh(e,t,f,a,u)):(e=oo(s.type,null,a,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!(e.lanes&u)){var x=f.memoizedProps;if(s=s.compare,s=s!==null?s:qi,s(x,a)&&e.ref===t.ref)return ar(e,t,u)}return t.flags|=1,e=Dr(f,a),e.ref=t.ref,e.return=t,t.child=e}function oh(e,t,s,a,u){if(e!==null){var f=e.memoizedProps;if(qi(f,a)&&e.ref===t.ref)if(en=!1,t.pendingProps=a=f,(e.lanes&u)!==0)e.flags&131072&&(en=!0);else return t.lanes=e.lanes,ar(e,t,u)}return Vc(e,t,s,a,u)}function lh(e,t,s){var a=t.pendingProps,u=a.children,f=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(Os,cn),cn|=s;else{if(!(s&1073741824))return e=f!==null?f.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ke(Os,cn),cn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=f!==null?f.baseLanes:s,Ke(Os,cn),cn|=a}else f!==null?(a=f.baseLanes|s,t.memoizedState=null):a=s,Ke(Os,cn),cn|=a;return Vt(e,t,u,s),t.child}function ch(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Vc(e,t,s,a,u){var f=nn(s)?ns:Ft.current;return f=Hs(t,f),Us(t,u),s=Yu(e,t,s,a,f,u),a=qu(),e!==null&&!en?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,ar(e,t,u)):(tt&&a&&Mu(t),t.flags|=1,Vt(e,t,s,u),t.child)}function O0(e,t,s,a,u){if(nn(s)){var f=!0;wo(t)}else f=!1;if(Us(t,u),t.stateNode===null)so(e,t),sh(t,s,a),Uc(t,s,a,u),a=!0;else if(e===null){var x=t.stateNode,m=t.memoizedProps;x.props=m;var y=x.context,w=s.contextType;typeof w=="object"&&w!==null?w=Nn(w):(w=nn(s)?ns:Ft.current,w=Hs(t,w));var N=s.getDerivedStateFromProps,b=typeof N=="function"||typeof x.getSnapshotBeforeUpdate=="function";b||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(m!==a||y!==w)&&_0(t,x,a,w),vr=!1;var T=t.memoizedState;x.state=T,No(t,a,x,u),y=t.memoizedState,m!==a||T!==y||tn.current||vr?(typeof N=="function"&&(Fc(t,s,N,a),y=t.memoizedState),(m=vr||S0(t,s,m,a,T,y,w))?(b||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(t.flags|=4194308)):(typeof x.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=y),x.props=a,x.state=y,x.context=w,a=m):(typeof x.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{x=t.stateNode,Bf(e,t),m=t.memoizedProps,w=t.type===t.elementType?m:kn(t.type,m),x.props=w,b=t.pendingProps,T=x.context,y=s.contextType,typeof y=="object"&&y!==null?y=Nn(y):(y=nn(s)?ns:Ft.current,y=Hs(t,y));var j=s.getDerivedStateFromProps;(N=typeof j=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(m!==b||T!==y)&&_0(t,x,a,y),vr=!1,T=t.memoizedState,x.state=T,No(t,a,x,u);var B=t.memoizedState;m!==b||T!==B||tn.current||vr?(typeof j=="function"&&(Fc(t,s,j,a),B=t.memoizedState),(w=vr||S0(t,s,w,a,T,B,y)||!1)?(N||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(a,B,y),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(a,B,y)),typeof x.componentDidUpdate=="function"&&(t.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof x.componentDidUpdate!="function"||m===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=B),x.props=a,x.state=B,x.context=y,a=w):(typeof x.componentDidUpdate!="function"||m===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),a=!1)}return Hc(e,t,s,a,f,u)}function Hc(e,t,s,a,u,f){ch(e,t);var x=(t.flags&128)!==0;if(!a&&!x)return u&&y0(t,s,!1),ar(e,t,f);a=t.stateNode,np.current=t;var m=x&&typeof s.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&x?(t.child=Gs(t,e.child,null,f),t.child=Gs(t,null,m,f)):Vt(e,t,m,f),t.memoizedState=a.state,u&&y0(t,s,!0),t.child}function uh(e){var t=e.stateNode;t.pendingContext?m0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&m0(e,t.context,!1),Hu(e,t.containerInfo)}function D0(e,t,s,a,u){return Ws(),Bu(u),t.flags|=256,Vt(e,t,s,a),t.child}var Wc={dehydrated:null,treeContext:null,retryLane:0};function Gc(e){return{baseLanes:e,cachePool:null,transitions:null}}function dh(e,t,s){var a=t.pendingProps,u=it.current,f=!1,x=(t.flags&128)!==0,m;if((m=x)||(m=e!==null&&e.memoizedState===null?!1:(u&2)!==0),m?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(u|=1),Ke(it,u&1),e===null)return Bc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(x=a.children,e=a.fallback,f?(a=t.mode,f=t.child,x={mode:"hidden",children:x},!(a&1)&&f!==null?(f.childLanes=0,f.pendingProps=x):f=Ko(x,a,0,null),e=es(e,a,s,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=Gc(s),t.memoizedState=Wc,e):Qu(t,x));if(u=e.memoizedState,u!==null&&(m=u.dehydrated,m!==null))return rp(e,t,x,a,m,u,s);if(f){f=a.fallback,x=t.mode,u=e.child,m=u.sibling;var y={mode:"hidden",children:a.children};return!(x&1)&&t.child!==u?(a=t.child,a.childLanes=0,a.pendingProps=y,t.deletions=null):(a=Dr(u,y),a.subtreeFlags=u.subtreeFlags&14680064),m!==null?f=Dr(m,f):(f=es(f,x,s,null),f.flags|=2),f.return=t,a.return=t,a.sibling=f,t.child=a,a=f,f=t.child,x=e.child.memoizedState,x=x===null?Gc(s):{baseLanes:x.baseLanes|s,cachePool:null,transitions:x.transitions},f.memoizedState=x,f.childLanes=e.childLanes&~s,t.memoizedState=Wc,a}return f=e.child,e=f.sibling,a=Dr(f,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=s),a.return=t,a.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=a,t.memoizedState=null,a}function Qu(e,t){return t=Ko({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Wa(e,t,s,a){return a!==null&&Bu(a),Gs(t,e.child,null,s),e=Qu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function rp(e,t,s,a,u,f,x){if(s)return t.flags&256?(t.flags&=-257,a=Jl(Error(se(422))),Wa(e,t,x,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=a.fallback,u=t.mode,a=Ko({mode:"visible",children:a.children},u,0,null),f=es(f,u,x,null),f.flags|=2,a.return=t,f.return=t,a.sibling=f,t.child=a,t.mode&1&&Gs(t,e.child,null,x),t.child.memoizedState=Gc(x),t.memoizedState=Wc,f);if(!(t.mode&1))return Wa(e,t,x,null);if(u.data==="$!"){if(a=u.nextSibling&&u.nextSibling.dataset,a)var m=a.dgst;return a=m,f=Error(se(419)),a=Jl(f,a,void 0),Wa(e,t,x,a)}if(m=(x&e.childLanes)!==0,en||m){if(a=St,a!==null){switch(x&-x){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=u&(a.suspendedLanes|x)?0:u,u!==0&&u!==f.retryLane&&(f.retryLane=u,ir(e,u),Mn(a,e,u,-1))}return rd(),a=Jl(Error(se(421))),Wa(e,t,x,a)}return u.data==="$?"?(t.flags|=128,t.child=e.child,t=pp.bind(null,e),u._reactRetry=t,null):(e=f.treeContext,un=jr(u.nextSibling),dn=t,tt=!0,On=null,e!==null&&(vn[bn++]=er,vn[bn++]=tr,vn[bn++]=rs,er=e.id,tr=e.overflow,rs=t),t=Qu(t,a.children),t.flags|=4096,t)}function M0(e,t,s){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Pc(e.return,t,s)}function $l(e,t,s,a,u){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:u}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=a,f.tail=s,f.tailMode=u)}function fh(e,t,s){var a=t.pendingProps,u=a.revealOrder,f=a.tail;if(Vt(e,t,a.children,s),a=it.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&M0(e,s,t);else if(e.tag===19)M0(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Ke(it,a),!(t.mode&1))t.memoizedState=null;else switch(u){case"forwards":for(s=t.child,u=null;s!==null;)e=s.alternate,e!==null&&Ao(e)===null&&(u=s),s=s.sibling;s=u,s===null?(u=t.child,t.child=null):(u=s.sibling,s.sibling=null),$l(t,!1,u,s,f);break;case"backwards":for(s=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&Ao(e)===null){t.child=u;break}e=u.sibling,u.sibling=s,s=u,u=e}$l(t,!0,s,null,f);break;case"together":$l(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function so(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ar(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),is|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(se(153));if(t.child!==null){for(e=t.child,s=Dr(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Dr(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function sp(e,t,s){switch(t.tag){case 3:uh(t),Ws();break;case 5:Pf(t);break;case 1:nn(t.type)&&wo(t);break;case 4:Hu(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,u=t.memoizedProps.value;Ke(Co,a._currentValue),a._currentValue=u;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(Ke(it,it.current&1),t.flags|=128,null):s&t.child.childLanes?dh(e,t,s):(Ke(it,it.current&1),e=ar(e,t,s),e!==null?e.sibling:null);Ke(it,it.current&1);break;case 19:if(a=(s&t.childLanes)!==0,e.flags&128){if(a)return fh(e,t,s);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),Ke(it,it.current),a)break;return null;case 22:case 23:return t.lanes=0,lh(e,t,s)}return ar(e,t,s)}var hh,Xc,xh,gh;hh=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Xc=function(){};xh=function(e,t,s,a){var u=e.memoizedProps;if(u!==a){e=t.stateNode,Jr(qn.current);var f=null;switch(s){case"input":u=xc(e,u),a=xc(e,a),f=[];break;case"select":u=ot({},u,{value:void 0}),a=ot({},a,{value:void 0}),f=[];break;case"textarea":u=mc(e,u),a=mc(e,a),f=[];break;default:typeof u.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=mo)}wc(s,a);var x;s=null;for(w in u)if(!a.hasOwnProperty(w)&&u.hasOwnProperty(w)&&u[w]!=null)if(w==="style"){var m=u[w];for(x in m)m.hasOwnProperty(x)&&(s||(s={}),s[x]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(zi.hasOwnProperty(w)?f||(f=[]):(f=f||[]).push(w,null));for(w in a){var y=a[w];if(m=u!=null?u[w]:void 0,a.hasOwnProperty(w)&&y!==m&&(y!=null||m!=null))if(w==="style")if(m){for(x in m)!m.hasOwnProperty(x)||y&&y.hasOwnProperty(x)||(s||(s={}),s[x]="");for(x in y)y.hasOwnProperty(x)&&m[x]!==y[x]&&(s||(s={}),s[x]=y[x])}else s||(f||(f=[]),f.push(w,s)),s=y;else w==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,m=m?m.__html:void 0,y!=null&&m!==y&&(f=f||[]).push(w,y)):w==="children"?typeof y!="string"&&typeof y!="number"||(f=f||[]).push(w,""+y):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(zi.hasOwnProperty(w)?(y!=null&&w==="onScroll"&&Qe("scroll",e),f||m===y||(f=[])):(f=f||[]).push(w,y))}s&&(f=f||[]).push("style",s);var w=f;(t.updateQueue=w)&&(t.flags|=4)}};gh=function(e,t,s,a){s!==a&&(t.flags|=4)};function Ai(e,t){if(!tt)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Bt(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,a=0;if(t)for(var u=e.child;u!==null;)s|=u.lanes|u.childLanes,a|=u.subtreeFlags&14680064,a|=u.flags&14680064,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)s|=u.lanes|u.childLanes,a|=u.subtreeFlags,a|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=a,e.childLanes=s,t}function ip(e,t,s){var a=t.pendingProps;switch(Lu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(t),null;case 1:return nn(t.type)&&yo(),Bt(t),null;case 3:return a=t.stateNode,Xs(),$e(tn),$e(Ft),Gu(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Va(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,On!==null&&(eu(On),On=null))),Xc(e,t),Bt(t),null;case 5:Wu(t);var u=Jr($i.current);if(s=t.type,e!==null&&t.stateNode!=null)xh(e,t,s,a,u),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(se(166));return Bt(t),null}if(e=Jr(qn.current),Va(t)){a=t.stateNode,s=t.type;var f=t.memoizedProps;switch(a[Xn]=t,a[Qi]=f,e=(t.mode&1)!==0,s){case"dialog":Qe("cancel",a),Qe("close",a);break;case"iframe":case"object":case"embed":Qe("load",a);break;case"video":case"audio":for(u=0;u<ji.length;u++)Qe(ji[u],a);break;case"source":Qe("error",a);break;case"img":case"image":case"link":Qe("error",a),Qe("load",a);break;case"details":Qe("toggle",a);break;case"input":Wd(a,f),Qe("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!f.multiple},Qe("invalid",a);break;case"textarea":Xd(a,f),Qe("invalid",a)}wc(s,f),u=null;for(var x in f)if(f.hasOwnProperty(x)){var m=f[x];x==="children"?typeof m=="string"?a.textContent!==m&&(f.suppressHydrationWarning!==!0&&za(a.textContent,m,e),u=["children",m]):typeof m=="number"&&a.textContent!==""+m&&(f.suppressHydrationWarning!==!0&&za(a.textContent,m,e),u=["children",""+m]):zi.hasOwnProperty(x)&&m!=null&&x==="onScroll"&&Qe("scroll",a)}switch(s){case"input":Oa(a),Gd(a,f,!0);break;case"textarea":Oa(a),Yd(a);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(a.onclick=mo)}a=u,t.updateQueue=a,a!==null&&(t.flags|=4)}else{x=u.nodeType===9?u:u.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=V1(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=x.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=x.createElement(s,{is:a.is}):(e=x.createElement(s),s==="select"&&(x=e,a.multiple?x.multiple=!0:a.size&&(x.size=a.size))):e=x.createElementNS(e,s),e[Xn]=t,e[Qi]=a,hh(e,t,!1,!1),t.stateNode=e;e:{switch(x=vc(s,a),s){case"dialog":Qe("cancel",e),Qe("close",e),u=a;break;case"iframe":case"object":case"embed":Qe("load",e),u=a;break;case"video":case"audio":for(u=0;u<ji.length;u++)Qe(ji[u],e);u=a;break;case"source":Qe("error",e),u=a;break;case"img":case"image":case"link":Qe("error",e),Qe("load",e),u=a;break;case"details":Qe("toggle",e),u=a;break;case"input":Wd(e,a),u=xc(e,a),Qe("invalid",e);break;case"option":u=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},u=ot({},a,{value:void 0}),Qe("invalid",e);break;case"textarea":Xd(e,a),u=mc(e,a),Qe("invalid",e);break;default:u=a}wc(s,u),m=u;for(f in m)if(m.hasOwnProperty(f)){var y=m[f];f==="style"?G1(e,y):f==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,y!=null&&H1(e,y)):f==="children"?typeof y=="string"?(s!=="textarea"||y!=="")&&Vi(e,y):typeof y=="number"&&Vi(e,""+y):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(zi.hasOwnProperty(f)?y!=null&&f==="onScroll"&&Qe("scroll",e):y!=null&&bu(e,f,y,x))}switch(s){case"input":Oa(e),Gd(e,a,!1);break;case"textarea":Oa(e),Yd(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Lr(a.value));break;case"select":e.multiple=!!a.multiple,f=a.value,f!=null?Ls(e,!!a.multiple,f,!1):a.defaultValue!=null&&Ls(e,!!a.multiple,a.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=mo)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Bt(t),null;case 6:if(e&&t.stateNode!=null)gh(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(se(166));if(s=Jr($i.current),Jr(qn.current),Va(t)){if(a=t.stateNode,s=t.memoizedProps,a[Xn]=t,(f=a.nodeValue!==s)&&(e=dn,e!==null))switch(e.tag){case 3:za(a.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&za(a.nodeValue,s,(e.mode&1)!==0)}f&&(t.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[Xn]=t,t.stateNode=a}return Bt(t),null;case 13:if($e(it),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(tt&&un!==null&&t.mode&1&&!(t.flags&128))Of(),Ws(),t.flags|=98560,f=!1;else if(f=Va(t),a!==null&&a.dehydrated!==null){if(e===null){if(!f)throw Error(se(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(se(317));f[Xn]=t}else Ws(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Bt(t),f=!1}else On!==null&&(eu(On),On=null),f=!0;if(!f)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||it.current&1?Ct===0&&(Ct=3):rd())),t.updateQueue!==null&&(t.flags|=4),Bt(t),null);case 4:return Xs(),Xc(e,t),e===null&&Ki(t.stateNode.containerInfo),Bt(t),null;case 10:return Uu(t.type._context),Bt(t),null;case 17:return nn(t.type)&&yo(),Bt(t),null;case 19:if($e(it),f=t.memoizedState,f===null)return Bt(t),null;if(a=(t.flags&128)!==0,x=f.rendering,x===null)if(a)Ai(f,!1);else{if(Ct!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(x=Ao(e),x!==null){for(t.flags|=128,Ai(f,!1),a=x.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=s,s=t.child;s!==null;)f=s,e=a,f.flags&=14680066,x=f.alternate,x===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=x.childLanes,f.lanes=x.lanes,f.child=x.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=x.memoizedProps,f.memoizedState=x.memoizedState,f.updateQueue=x.updateQueue,f.type=x.type,e=x.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Ke(it,it.current&1|2),t.child}e=e.sibling}f.tail!==null&&xt()>qs&&(t.flags|=128,a=!0,Ai(f,!1),t.lanes=4194304)}else{if(!a)if(e=Ao(x),e!==null){if(t.flags|=128,a=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),Ai(f,!0),f.tail===null&&f.tailMode==="hidden"&&!x.alternate&&!tt)return Bt(t),null}else 2*xt()-f.renderingStartTime>qs&&s!==1073741824&&(t.flags|=128,a=!0,Ai(f,!1),t.lanes=4194304);f.isBackwards?(x.sibling=t.child,t.child=x):(s=f.last,s!==null?s.sibling=x:t.child=x,f.last=x)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=xt(),t.sibling=null,s=it.current,Ke(it,a?s&1|2:s&1),t):(Bt(t),null);case 22:case 23:return nd(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?cn&1073741824&&(Bt(t),t.subtreeFlags&6&&(t.flags|=8192)):Bt(t),null;case 24:return null;case 25:return null}throw Error(se(156,t.tag))}function ap(e,t){switch(Lu(t),t.tag){case 1:return nn(t.type)&&yo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Xs(),$e(tn),$e(Ft),Gu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Wu(t),null;case 13:if($e(it),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(se(340));Ws()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return $e(it),null;case 4:return Xs(),null;case 10:return Uu(t.type._context),null;case 22:case 23:return nd(),null;case 24:return null;default:return null}}var Ga=!1,Pt=!1,op=typeof WeakSet=="function"?WeakSet:Set,me=null;function Rs(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){dt(e,t,a)}else s.current=null}function Yc(e,t,s){try{s()}catch(a){dt(e,t,a)}}var L0=!1;function lp(e,t){if(jc=xo,e=vf(),Du(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var u=a.anchorOffset,f=a.focusNode;a=a.focusOffset;try{s.nodeType,f.nodeType}catch{s=null;break e}var x=0,m=-1,y=-1,w=0,N=0,b=e,T=null;t:for(;;){for(var j;b!==s||u!==0&&b.nodeType!==3||(m=x+u),b!==f||a!==0&&b.nodeType!==3||(y=x+a),b.nodeType===3&&(x+=b.nodeValue.length),(j=b.firstChild)!==null;)T=b,b=j;for(;;){if(b===e)break t;if(T===s&&++w===u&&(m=x),T===f&&++N===a&&(y=x),(j=b.nextSibling)!==null)break;b=T,T=b.parentNode}b=j}s=m===-1||y===-1?null:{start:m,end:y}}else s=null}s=s||{start:0,end:0}}else s=null;for(kc={focusedElem:e,selectionRange:s},xo=!1,me=t;me!==null;)if(t=me,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,me=e;else for(;me!==null;){t=me;try{var B=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(B!==null){var M=B.memoizedProps,H=B.memoizedState,_=t.stateNode,C=_.getSnapshotBeforeUpdate(t.elementType===t.type?M:kn(t.type,M),H);_.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var E=t.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(k){dt(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,me=e;break}me=t.return}return B=L0,L0=!1,B}function Bi(e,t,s){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&e)===e){var f=u.destroy;u.destroy=void 0,f!==void 0&&Yc(t,s,f)}u=u.next}while(u!==a)}}function Yo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var a=s.create;s.destroy=a()}s=s.next}while(s!==t)}}function qc(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function ph(e){var t=e.alternate;t!==null&&(e.alternate=null,ph(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Xn],delete t[Qi],delete t[Dc],delete t[W2],delete t[G2])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function mh(e){return e.tag===5||e.tag===3||e.tag===4}function B0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||mh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Kc(e,t,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=mo));else if(a!==4&&(e=e.child,e!==null))for(Kc(e,t,s),e=e.sibling;e!==null;)Kc(e,t,s),e=e.sibling}function Zc(e,t,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Zc(e,t,s),e=e.sibling;e!==null;)Zc(e,t,s),e=e.sibling}var kt=null,Rn=!1;function yr(e,t,s){for(s=s.child;s!==null;)yh(e,t,s),s=s.sibling}function yh(e,t,s){if(Yn&&typeof Yn.onCommitFiberUnmount=="function")try{Yn.onCommitFiberUnmount(Fo,s)}catch{}switch(s.tag){case 5:Pt||Rs(s,t);case 6:var a=kt,u=Rn;kt=null,yr(e,t,s),kt=a,Rn=u,kt!==null&&(Rn?(e=kt,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):kt.removeChild(s.stateNode));break;case 18:kt!==null&&(Rn?(e=kt,s=s.stateNode,e.nodeType===8?Xl(e.parentNode,s):e.nodeType===1&&Xl(e,s),Xi(e)):Xl(kt,s.stateNode));break;case 4:a=kt,u=Rn,kt=s.stateNode.containerInfo,Rn=!0,yr(e,t,s),kt=a,Rn=u;break;case 0:case 11:case 14:case 15:if(!Pt&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){u=a=a.next;do{var f=u,x=f.destroy;f=f.tag,x!==void 0&&(f&2||f&4)&&Yc(s,t,x),u=u.next}while(u!==a)}yr(e,t,s);break;case 1:if(!Pt&&(Rs(s,t),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(m){dt(s,t,m)}yr(e,t,s);break;case 21:yr(e,t,s);break;case 22:s.mode&1?(Pt=(a=Pt)||s.memoizedState!==null,yr(e,t,s),Pt=a):yr(e,t,s);break;default:yr(e,t,s)}}function P0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new op),t.forEach(function(a){var u=mp.bind(null,e,a);s.has(a)||(s.add(a),a.then(u,u))})}}function jn(e,t){var s=t.deletions;if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];try{var f=e,x=t,m=x;e:for(;m!==null;){switch(m.tag){case 5:kt=m.stateNode,Rn=!1;break e;case 3:kt=m.stateNode.containerInfo,Rn=!0;break e;case 4:kt=m.stateNode.containerInfo,Rn=!0;break e}m=m.return}if(kt===null)throw Error(se(160));yh(f,x,u),kt=null,Rn=!1;var y=u.alternate;y!==null&&(y.return=null),u.return=null}catch(w){dt(u,t,w)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)wh(t,e),t=t.sibling}function wh(e,t){var s=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(jn(t,e),Wn(e),a&4){try{Bi(3,e,e.return),Yo(3,e)}catch(M){dt(e,e.return,M)}try{Bi(5,e,e.return)}catch(M){dt(e,e.return,M)}}break;case 1:jn(t,e),Wn(e),a&512&&s!==null&&Rs(s,s.return);break;case 5:if(jn(t,e),Wn(e),a&512&&s!==null&&Rs(s,s.return),e.flags&32){var u=e.stateNode;try{Vi(u,"")}catch(M){dt(e,e.return,M)}}if(a&4&&(u=e.stateNode,u!=null)){var f=e.memoizedProps,x=s!==null?s.memoizedProps:f,m=e.type,y=e.updateQueue;if(e.updateQueue=null,y!==null)try{m==="input"&&f.type==="radio"&&f.name!=null&&U1(u,f),vc(m,x);var w=vc(m,f);for(x=0;x<y.length;x+=2){var N=y[x],b=y[x+1];N==="style"?G1(u,b):N==="dangerouslySetInnerHTML"?H1(u,b):N==="children"?Vi(u,b):bu(u,N,b,w)}switch(m){case"input":gc(u,f);break;case"textarea":z1(u,f);break;case"select":var T=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!f.multiple;var j=f.value;j!=null?Ls(u,!!f.multiple,j,!1):T!==!!f.multiple&&(f.defaultValue!=null?Ls(u,!!f.multiple,f.defaultValue,!0):Ls(u,!!f.multiple,f.multiple?[]:"",!1))}u[Qi]=f}catch(M){dt(e,e.return,M)}}break;case 6:if(jn(t,e),Wn(e),a&4){if(e.stateNode===null)throw Error(se(162));u=e.stateNode,f=e.memoizedProps;try{u.nodeValue=f}catch(M){dt(e,e.return,M)}}break;case 3:if(jn(t,e),Wn(e),a&4&&s!==null&&s.memoizedState.isDehydrated)try{Xi(t.containerInfo)}catch(M){dt(e,e.return,M)}break;case 4:jn(t,e),Wn(e);break;case 13:jn(t,e),Wn(e),u=e.child,u.flags&8192&&(f=u.memoizedState!==null,u.stateNode.isHidden=f,!f||u.alternate!==null&&u.alternate.memoizedState!==null||(ed=xt())),a&4&&P0(e);break;case 22:if(N=s!==null&&s.memoizedState!==null,e.mode&1?(Pt=(w=Pt)||N,jn(t,e),Pt=w):jn(t,e),Wn(e),a&8192){if(w=e.memoizedState!==null,(e.stateNode.isHidden=w)&&!N&&e.mode&1)for(me=e,N=e.child;N!==null;){for(b=me=N;me!==null;){switch(T=me,j=T.child,T.tag){case 0:case 11:case 14:case 15:Bi(4,T,T.return);break;case 1:Rs(T,T.return);var B=T.stateNode;if(typeof B.componentWillUnmount=="function"){a=T,s=T.return;try{t=a,B.props=t.memoizedProps,B.state=t.memoizedState,B.componentWillUnmount()}catch(M){dt(a,s,M)}}break;case 5:Rs(T,T.return);break;case 22:if(T.memoizedState!==null){U0(b);continue}}j!==null?(j.return=T,me=j):U0(b)}N=N.sibling}e:for(N=null,b=e;;){if(b.tag===5){if(N===null){N=b;try{u=b.stateNode,w?(f=u.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(m=b.stateNode,y=b.memoizedProps.style,x=y!=null&&y.hasOwnProperty("display")?y.display:null,m.style.display=W1("display",x))}catch(M){dt(e,e.return,M)}}}else if(b.tag===6){if(N===null)try{b.stateNode.nodeValue=w?"":b.memoizedProps}catch(M){dt(e,e.return,M)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===e)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===e)break e;for(;b.sibling===null;){if(b.return===null||b.return===e)break e;N===b&&(N=null),b=b.return}N===b&&(N=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:jn(t,e),Wn(e),a&4&&P0(e);break;case 21:break;default:jn(t,e),Wn(e)}}function Wn(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(mh(s)){var a=s;break e}s=s.return}throw Error(se(160))}switch(a.tag){case 5:var u=a.stateNode;a.flags&32&&(Vi(u,""),a.flags&=-33);var f=B0(e);Zc(e,f,u);break;case 3:case 4:var x=a.stateNode.containerInfo,m=B0(e);Kc(e,m,x);break;default:throw Error(se(161))}}catch(y){dt(e,e.return,y)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function cp(e,t,s){me=e,vh(e)}function vh(e,t,s){for(var a=(e.mode&1)!==0;me!==null;){var u=me,f=u.child;if(u.tag===22&&a){var x=u.memoizedState!==null||Ga;if(!x){var m=u.alternate,y=m!==null&&m.memoizedState!==null||Pt;m=Ga;var w=Pt;if(Ga=x,(Pt=y)&&!w)for(me=u;me!==null;)x=me,y=x.child,x.tag===22&&x.memoizedState!==null?z0(u):y!==null?(y.return=x,me=y):z0(u);for(;f!==null;)me=f,vh(f),f=f.sibling;me=u,Ga=m,Pt=w}F0(e)}else u.subtreeFlags&8772&&f!==null?(f.return=u,me=f):F0(e)}}function F0(e){for(;me!==null;){var t=me;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Pt||Yo(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Pt)if(s===null)a.componentDidMount();else{var u=t.elementType===t.type?s.memoizedProps:kn(t.type,s.memoizedProps);a.componentDidUpdate(u,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&E0(t,f,a);break;case 3:var x=t.updateQueue;if(x!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}E0(t,x,s)}break;case 5:var m=t.stateNode;if(s===null&&t.flags&4){s=m;var y=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":y.autoFocus&&s.focus();break;case"img":y.src&&(s.src=y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var w=t.alternate;if(w!==null){var N=w.memoizedState;if(N!==null){var b=N.dehydrated;b!==null&&Xi(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}Pt||t.flags&512&&qc(t)}catch(T){dt(t,t.return,T)}}if(t===e){me=null;break}if(s=t.sibling,s!==null){s.return=t.return,me=s;break}me=t.return}}function U0(e){for(;me!==null;){var t=me;if(t===e){me=null;break}var s=t.sibling;if(s!==null){s.return=t.return,me=s;break}me=t.return}}function z0(e){for(;me!==null;){var t=me;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{Yo(4,t)}catch(y){dt(t,s,y)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var u=t.return;try{a.componentDidMount()}catch(y){dt(t,u,y)}}var f=t.return;try{qc(t)}catch(y){dt(t,f,y)}break;case 5:var x=t.return;try{qc(t)}catch(y){dt(t,x,y)}}}catch(y){dt(t,t.return,y)}if(t===e){me=null;break}var m=t.sibling;if(m!==null){m.return=t.return,me=m;break}me=t.return}}var up=Math.ceil,Io=cr.ReactCurrentDispatcher,Ju=cr.ReactCurrentOwner,En=cr.ReactCurrentBatchConfig,De=0,St=null,pt=null,Rt=0,cn=0,Os=Fr(0),Ct=0,ra=null,is=0,qo=0,$u=0,Pi=null,$t=null,ed=0,qs=1/0,Jn=null,To=!1,Qc=null,Rr=null,Xa=!1,Nr=null,jo=0,Fi=0,Jc=null,io=-1,ao=0;function Wt(){return De&6?xt():io!==-1?io:io=xt()}function Or(e){return e.mode&1?De&2&&Rt!==0?Rt&-Rt:Y2.transition!==null?(ao===0&&(ao=rf()),ao):(e=Ue,e!==0||(e=window.event,e=e===void 0?16:df(e.type)),e):1}function Mn(e,t,s,a){if(50<Fi)throw Fi=0,Jc=null,Error(se(185));ua(e,s,a),(!(De&2)||e!==St)&&(e===St&&(!(De&2)&&(qo|=s),Ct===4&&Cr(e,Rt)),rn(e,a),s===1&&De===0&&!(t.mode&1)&&(qs=xt()+500,Wo&&Ur()))}function rn(e,t){var s=e.callbackNode;Yg(e,t);var a=ho(e,e===St?Rt:0);if(a===0)s!==null&&Zd(s),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(s!=null&&Zd(s),t===1)e.tag===0?X2(V0.bind(null,e)):jf(V0.bind(null,e)),V2(function(){!(De&6)&&Ur()}),s=null;else{switch(sf(a)){case 1:s=Su;break;case 4:s=tf;break;case 16:s=fo;break;case 536870912:s=nf;break;default:s=fo}s=Ih(s,bh.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function bh(e,t){if(io=-1,ao=0,De&6)throw Error(se(327));var s=e.callbackNode;if(zs()&&e.callbackNode!==s)return null;var a=ho(e,e===St?Rt:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=ko(e,a);else{t=a;var u=De;De|=2;var f=Eh();(St!==e||Rt!==t)&&(Jn=null,qs=xt()+500,$r(e,t));do try{hp();break}catch(m){Ch(e,m)}while(!0);Fu(),Io.current=f,De=u,pt!==null?t=0:(St=null,Rt=0,t=Ct)}if(t!==0){if(t===2&&(u=Ac(e),u!==0&&(a=u,t=$c(e,u))),t===1)throw s=ra,$r(e,0),Cr(e,a),rn(e,xt()),s;if(t===6)Cr(e,a);else{if(u=e.current.alternate,!(a&30)&&!dp(u)&&(t=ko(e,a),t===2&&(f=Ac(e),f!==0&&(a=f,t=$c(e,f))),t===1))throw s=ra,$r(e,0),Cr(e,a),rn(e,xt()),s;switch(e.finishedWork=u,e.finishedLanes=a,t){case 0:case 1:throw Error(se(345));case 2:Kr(e,$t,Jn);break;case 3:if(Cr(e,a),(a&130023424)===a&&(t=ed+500-xt(),10<t)){if(ho(e,0)!==0)break;if(u=e.suspendedLanes,(u&a)!==a){Wt(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=Oc(Kr.bind(null,e,$t,Jn),t);break}Kr(e,$t,Jn);break;case 4:if(Cr(e,a),(a&4194240)===a)break;for(t=e.eventTimes,u=-1;0<a;){var x=31-Dn(a);f=1<<x,x=t[x],x>u&&(u=x),a&=~f}if(a=u,a=xt()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*up(a/1960))-a,10<a){e.timeoutHandle=Oc(Kr.bind(null,e,$t,Jn),a);break}Kr(e,$t,Jn);break;case 5:Kr(e,$t,Jn);break;default:throw Error(se(329))}}}return rn(e,xt()),e.callbackNode===s?bh.bind(null,e):null}function $c(e,t){var s=Pi;return e.current.memoizedState.isDehydrated&&($r(e,t).flags|=256),e=ko(e,t),e!==2&&(t=$t,$t=s,t!==null&&eu(t)),e}function eu(e){$t===null?$t=e:$t.push.apply($t,e)}function dp(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var u=s[a],f=u.getSnapshot;u=u.value;try{if(!Ln(f(),u))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Cr(e,t){for(t&=~$u,t&=~qo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-Dn(t),a=1<<s;e[s]=-1,t&=~a}}function V0(e){if(De&6)throw Error(se(327));zs();var t=ho(e,0);if(!(t&1))return rn(e,xt()),null;var s=ko(e,t);if(e.tag!==0&&s===2){var a=Ac(e);a!==0&&(t=a,s=$c(e,a))}if(s===1)throw s=ra,$r(e,0),Cr(e,t),rn(e,xt()),s;if(s===6)throw Error(se(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Kr(e,$t,Jn),rn(e,xt()),null}function td(e,t){var s=De;De|=1;try{return e(t)}finally{De=s,De===0&&(qs=xt()+500,Wo&&Ur())}}function as(e){Nr!==null&&Nr.tag===0&&!(De&6)&&zs();var t=De;De|=1;var s=En.transition,a=Ue;try{if(En.transition=null,Ue=1,e)return e()}finally{Ue=a,En.transition=s,De=t,!(De&6)&&Ur()}}function nd(){cn=Os.current,$e(Os)}function $r(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,z2(s)),pt!==null)for(s=pt.return;s!==null;){var a=s;switch(Lu(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&yo();break;case 3:Xs(),$e(tn),$e(Ft),Gu();break;case 5:Wu(a);break;case 4:Xs();break;case 13:$e(it);break;case 19:$e(it);break;case 10:Uu(a.type._context);break;case 22:case 23:nd()}s=s.return}if(St=e,pt=e=Dr(e.current,null),Rt=cn=t,Ct=0,ra=null,$u=qo=is=0,$t=Pi=null,Qr!==null){for(t=0;t<Qr.length;t++)if(s=Qr[t],a=s.interleaved,a!==null){s.interleaved=null;var u=a.next,f=s.pending;if(f!==null){var x=f.next;f.next=u,a.next=x}s.pending=a}Qr=null}return e}function Ch(e,t){do{var s=pt;try{if(Fu(),no.current=_o,So){for(var a=at.memoizedState;a!==null;){var u=a.queue;u!==null&&(u.pending=null),a=a.next}So=!1}if(ss=0,At=bt=at=null,Li=!1,ea=0,Ju.current=null,s===null||s.return===null){Ct=1,ra=t,pt=null;break}e:{var f=e,x=s.return,m=s,y=t;if(t=Rt,m.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){var w=y,N=m,b=N.tag;if(!(N.mode&1)&&(b===0||b===11||b===15)){var T=N.alternate;T?(N.updateQueue=T.updateQueue,N.memoizedState=T.memoizedState,N.lanes=T.lanes):(N.updateQueue=null,N.memoizedState=null)}var j=T0(x);if(j!==null){j.flags&=-257,j0(j,x,m,f,t),j.mode&1&&I0(f,w,t),t=j,y=w;var B=t.updateQueue;if(B===null){var M=new Set;M.add(y),t.updateQueue=M}else B.add(y);break e}else{if(!(t&1)){I0(f,w,t),rd();break e}y=Error(se(426))}}else if(tt&&m.mode&1){var H=T0(x);if(H!==null){!(H.flags&65536)&&(H.flags|=256),j0(H,x,m,f,t),Bu(Ys(y,m));break e}}f=y=Ys(y,m),Ct!==4&&(Ct=2),Pi===null?Pi=[f]:Pi.push(f),f=x;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var _=ih(f,y,t);C0(f,_);break e;case 1:m=y;var C=f.type,E=f.stateNode;if(!(f.flags&128)&&(typeof C.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Rr===null||!Rr.has(E)))){f.flags|=65536,t&=-t,f.lanes|=t;var k=ah(f,m,t);C0(f,k);break e}}f=f.return}while(f!==null)}Ah(s)}catch(V){t=V,pt===s&&s!==null&&(pt=s=s.return);continue}break}while(!0)}function Eh(){var e=Io.current;return Io.current=_o,e===null?_o:e}function rd(){(Ct===0||Ct===3||Ct===2)&&(Ct=4),St===null||!(is&268435455)&&!(qo&268435455)||Cr(St,Rt)}function ko(e,t){var s=De;De|=2;var a=Eh();(St!==e||Rt!==t)&&(Jn=null,$r(e,t));do try{fp();break}catch(u){Ch(e,u)}while(!0);if(Fu(),De=s,Io.current=a,pt!==null)throw Error(se(261));return St=null,Rt=0,Ct}function fp(){for(;pt!==null;)Nh(pt)}function hp(){for(;pt!==null&&!Pg();)Nh(pt)}function Nh(e){var t=_h(e.alternate,e,cn);e.memoizedProps=e.pendingProps,t===null?Ah(e):pt=t,Ju.current=null}function Ah(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=ap(s,t),s!==null){s.flags&=32767,pt=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ct=6,pt=null;return}}else if(s=ip(s,t,cn),s!==null){pt=s;return}if(t=t.sibling,t!==null){pt=t;return}pt=t=e}while(t!==null);Ct===0&&(Ct=5)}function Kr(e,t,s){var a=Ue,u=En.transition;try{En.transition=null,Ue=1,xp(e,t,s,a)}finally{En.transition=u,Ue=a}return null}function xp(e,t,s,a){do zs();while(Nr!==null);if(De&6)throw Error(se(327));s=e.finishedWork;var u=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(se(177));e.callbackNode=null,e.callbackPriority=0;var f=s.lanes|s.childLanes;if(qg(e,f),e===St&&(pt=St=null,Rt=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Xa||(Xa=!0,Ih(fo,function(){return zs(),null})),f=(s.flags&15990)!==0,s.subtreeFlags&15990||f){f=En.transition,En.transition=null;var x=Ue;Ue=1;var m=De;De|=4,Ju.current=null,lp(e,s),wh(s,e),D2(kc),xo=!!jc,kc=jc=null,e.current=s,cp(s),Fg(),De=m,Ue=x,En.transition=f}else e.current=s;if(Xa&&(Xa=!1,Nr=e,jo=u),f=e.pendingLanes,f===0&&(Rr=null),Vg(s.stateNode),rn(e,xt()),t!==null)for(a=e.onRecoverableError,s=0;s<t.length;s++)u=t[s],a(u.value,{componentStack:u.stack,digest:u.digest});if(To)throw To=!1,e=Qc,Qc=null,e;return jo&1&&e.tag!==0&&zs(),f=e.pendingLanes,f&1?e===Jc?Fi++:(Fi=0,Jc=e):Fi=0,Ur(),null}function zs(){if(Nr!==null){var e=sf(jo),t=En.transition,s=Ue;try{if(En.transition=null,Ue=16>e?16:e,Nr===null)var a=!1;else{if(e=Nr,Nr=null,jo=0,De&6)throw Error(se(331));var u=De;for(De|=4,me=e.current;me!==null;){var f=me,x=f.child;if(me.flags&16){var m=f.deletions;if(m!==null){for(var y=0;y<m.length;y++){var w=m[y];for(me=w;me!==null;){var N=me;switch(N.tag){case 0:case 11:case 15:Bi(8,N,f)}var b=N.child;if(b!==null)b.return=N,me=b;else for(;me!==null;){N=me;var T=N.sibling,j=N.return;if(ph(N),N===w){me=null;break}if(T!==null){T.return=j,me=T;break}me=j}}}var B=f.alternate;if(B!==null){var M=B.child;if(M!==null){B.child=null;do{var H=M.sibling;M.sibling=null,M=H}while(M!==null)}}me=f}}if(f.subtreeFlags&2064&&x!==null)x.return=f,me=x;else e:for(;me!==null;){if(f=me,f.flags&2048)switch(f.tag){case 0:case 11:case 15:Bi(9,f,f.return)}var _=f.sibling;if(_!==null){_.return=f.return,me=_;break e}me=f.return}}var C=e.current;for(me=C;me!==null;){x=me;var E=x.child;if(x.subtreeFlags&2064&&E!==null)E.return=x,me=E;else e:for(x=C;me!==null;){if(m=me,m.flags&2048)try{switch(m.tag){case 0:case 11:case 15:Yo(9,m)}}catch(V){dt(m,m.return,V)}if(m===x){me=null;break e}var k=m.sibling;if(k!==null){k.return=m.return,me=k;break e}me=m.return}}if(De=u,Ur(),Yn&&typeof Yn.onPostCommitFiberRoot=="function")try{Yn.onPostCommitFiberRoot(Fo,e)}catch{}a=!0}return a}finally{Ue=s,En.transition=t}}return!1}function H0(e,t,s){t=Ys(s,t),t=ih(e,t,1),e=kr(e,t,1),t=Wt(),e!==null&&(ua(e,1,t),rn(e,t))}function dt(e,t,s){if(e.tag===3)H0(e,e,s);else for(;t!==null;){if(t.tag===3){H0(t,e,s);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Rr===null||!Rr.has(a))){e=Ys(s,e),e=ah(t,e,1),t=kr(t,e,1),e=Wt(),t!==null&&(ua(t,1,e),rn(t,e));break}}t=t.return}}function gp(e,t,s){var a=e.pingCache;a!==null&&a.delete(t),t=Wt(),e.pingedLanes|=e.suspendedLanes&s,St===e&&(Rt&s)===s&&(Ct===4||Ct===3&&(Rt&130023424)===Rt&&500>xt()-ed?$r(e,0):$u|=s),rn(e,t)}function Sh(e,t){t===0&&(e.mode&1?(t=La,La<<=1,!(La&130023424)&&(La=4194304)):t=1);var s=Wt();e=ir(e,t),e!==null&&(ua(e,t,s),rn(e,s))}function pp(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Sh(e,s)}function mp(e,t){var s=0;switch(e.tag){case 13:var a=e.stateNode,u=e.memoizedState;u!==null&&(s=u.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(se(314))}a!==null&&a.delete(t),Sh(e,s)}var _h;_h=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||tn.current)en=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return en=!1,sp(e,t,s);en=!!(e.flags&131072)}else en=!1,tt&&t.flags&1048576&&kf(t,bo,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;so(e,t),e=t.pendingProps;var u=Hs(t,Ft.current);Us(t,s),u=Yu(null,t,a,e,u,s);var f=qu();return t.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,nn(a)?(f=!0,wo(t)):f=!1,t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,Vu(t),u.updater=Xo,t.stateNode=u,u._reactInternals=t,Uc(t,a,e,s),t=Hc(null,t,a,!0,f,s)):(t.tag=0,tt&&f&&Mu(t),Vt(null,t,u,s),t=t.child),t;case 16:a=t.elementType;e:{switch(so(e,t),e=t.pendingProps,u=a._init,a=u(a._payload),t.type=a,u=t.tag=wp(a),e=kn(a,e),u){case 0:t=Vc(null,t,a,e,s);break e;case 1:t=O0(null,t,a,e,s);break e;case 11:t=k0(null,t,a,e,s);break e;case 14:t=R0(null,t,a,kn(a.type,e),s);break e}throw Error(se(306,a,""))}return t;case 0:return a=t.type,u=t.pendingProps,u=t.elementType===a?u:kn(a,u),Vc(e,t,a,u,s);case 1:return a=t.type,u=t.pendingProps,u=t.elementType===a?u:kn(a,u),O0(e,t,a,u,s);case 3:e:{if(uh(t),e===null)throw Error(se(387));a=t.pendingProps,f=t.memoizedState,u=f.element,Bf(e,t),No(t,a,null,s);var x=t.memoizedState;if(a=x.element,f.isDehydrated)if(f={element:a,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){u=Ys(Error(se(423)),t),t=D0(e,t,a,s,u);break e}else if(a!==u){u=Ys(Error(se(424)),t),t=D0(e,t,a,s,u);break e}else for(un=jr(t.stateNode.containerInfo.firstChild),dn=t,tt=!0,On=null,s=Mf(t,null,a,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ws(),a===u){t=ar(e,t,s);break e}Vt(e,t,a,s)}t=t.child}return t;case 5:return Pf(t),e===null&&Bc(t),a=t.type,u=t.pendingProps,f=e!==null?e.memoizedProps:null,x=u.children,Rc(a,u)?x=null:f!==null&&Rc(a,f)&&(t.flags|=32),ch(e,t),Vt(e,t,x,s),t.child;case 6:return e===null&&Bc(t),null;case 13:return dh(e,t,s);case 4:return Hu(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Gs(t,null,a,s):Vt(e,t,a,s),t.child;case 11:return a=t.type,u=t.pendingProps,u=t.elementType===a?u:kn(a,u),k0(e,t,a,u,s);case 7:return Vt(e,t,t.pendingProps,s),t.child;case 8:return Vt(e,t,t.pendingProps.children,s),t.child;case 12:return Vt(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(a=t.type._context,u=t.pendingProps,f=t.memoizedProps,x=u.value,Ke(Co,a._currentValue),a._currentValue=x,f!==null)if(Ln(f.value,x)){if(f.children===u.children&&!tn.current){t=ar(e,t,s);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){x=f.child;for(var y=m.firstContext;y!==null;){if(y.context===a){if(f.tag===1){y=nr(-1,s&-s),y.tag=2;var w=f.updateQueue;if(w!==null){w=w.shared;var N=w.pending;N===null?y.next=y:(y.next=N.next,N.next=y),w.pending=y}}f.lanes|=s,y=f.alternate,y!==null&&(y.lanes|=s),Pc(f.return,s,t),m.lanes|=s;break}y=y.next}}else if(f.tag===10)x=f.type===t.type?null:f.child;else if(f.tag===18){if(x=f.return,x===null)throw Error(se(341));x.lanes|=s,m=x.alternate,m!==null&&(m.lanes|=s),Pc(x,s,t),x=f.sibling}else x=f.child;if(x!==null)x.return=f;else for(x=f;x!==null;){if(x===t){x=null;break}if(f=x.sibling,f!==null){f.return=x.return,x=f;break}x=x.return}f=x}Vt(e,t,u.children,s),t=t.child}return t;case 9:return u=t.type,a=t.pendingProps.children,Us(t,s),u=Nn(u),a=a(u),t.flags|=1,Vt(e,t,a,s),t.child;case 14:return a=t.type,u=kn(a,t.pendingProps),u=kn(a.type,u),R0(e,t,a,u,s);case 15:return oh(e,t,t.type,t.pendingProps,s);case 17:return a=t.type,u=t.pendingProps,u=t.elementType===a?u:kn(a,u),so(e,t),t.tag=1,nn(a)?(e=!0,wo(t)):e=!1,Us(t,s),sh(t,a,u),Uc(t,a,u,s),Hc(null,t,a,!0,e,s);case 19:return fh(e,t,s);case 22:return lh(e,t,s)}throw Error(se(156,t.tag))};function Ih(e,t){return ef(e,t)}function yp(e,t,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(e,t,s,a){return new yp(e,t,s,a)}function sd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function wp(e){if(typeof e=="function")return sd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Eu)return 11;if(e===Nu)return 14}return 2}function Dr(e,t){var s=e.alternate;return s===null?(s=Cn(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function oo(e,t,s,a,u,f){var x=2;if(a=e,typeof e=="function")sd(e)&&(x=1);else if(typeof e=="string")x=5;else e:switch(e){case Es:return es(s.children,u,f,t);case Cu:x=8,u|=8;break;case uc:return e=Cn(12,s,t,u|2),e.elementType=uc,e.lanes=f,e;case dc:return e=Cn(13,s,t,u),e.elementType=dc,e.lanes=f,e;case fc:return e=Cn(19,s,t,u),e.elementType=fc,e.lanes=f,e;case B1:return Ko(s,u,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case M1:x=10;break e;case L1:x=9;break e;case Eu:x=11;break e;case Nu:x=14;break e;case wr:x=16,a=null;break e}throw Error(se(130,e==null?e:typeof e,""))}return t=Cn(x,s,t,u),t.elementType=e,t.type=a,t.lanes=f,t}function es(e,t,s,a){return e=Cn(7,e,a,t),e.lanes=s,e}function Ko(e,t,s,a){return e=Cn(22,e,a,t),e.elementType=B1,e.lanes=s,e.stateNode={isHidden:!1},e}function ec(e,t,s){return e=Cn(6,e,null,t),e.lanes=s,e}function tc(e,t,s){return t=Cn(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function vp(e,t,s,a,u){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ml(0),this.expirationTimes=Ml(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ml(0),this.identifierPrefix=a,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function id(e,t,s,a,u,f,x,m,y){return e=new vp(e,t,s,m,y),t===1?(t=1,f===!0&&(t|=8)):t=0,f=Cn(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vu(f),e}function bp(e,t,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cs,key:a==null?null:""+a,children:e,containerInfo:t,implementation:s}}function Th(e){if(!e)return Br;e=e._reactInternals;e:{if(cs(e)!==e||e.tag!==1)throw Error(se(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(nn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(se(171))}if(e.tag===1){var s=e.type;if(nn(s))return Tf(e,s,t)}return t}function jh(e,t,s,a,u,f,x,m,y){return e=id(s,a,!0,e,u,f,x,m,y),e.context=Th(null),s=e.current,a=Wt(),u=Or(s),f=nr(a,u),f.callback=t??null,kr(s,f,u),e.current.lanes=u,ua(e,u,a),rn(e,a),e}function Zo(e,t,s,a){var u=t.current,f=Wt(),x=Or(u);return s=Th(s),t.context===null?t.context=s:t.pendingContext=s,t=nr(f,x),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=kr(u,t,x),e!==null&&(Mn(e,u,x,f),to(e,u,x)),x}function Ro(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function W0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function ad(e,t){W0(e,t),(e=e.alternate)&&W0(e,t)}function Cp(){return null}var kh=typeof reportError=="function"?reportError:function(e){console.error(e)};function od(e){this._internalRoot=e}Qo.prototype.render=od.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(se(409));Zo(e,t,null,null)};Qo.prototype.unmount=od.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;as(function(){Zo(null,e,null,null)}),t[sr]=null}};function Qo(e){this._internalRoot=e}Qo.prototype.unstable_scheduleHydration=function(e){if(e){var t=lf();e={blockedOn:null,target:e,priority:t};for(var s=0;s<br.length&&t!==0&&t<br[s].priority;s++);br.splice(s,0,e),s===0&&uf(e)}};function ld(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Jo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function G0(){}function Ep(e,t,s,a,u){if(u){if(typeof a=="function"){var f=a;a=function(){var w=Ro(x);f.call(w)}}var x=jh(t,a,e,0,null,!1,!1,"",G0);return e._reactRootContainer=x,e[sr]=x.current,Ki(e.nodeType===8?e.parentNode:e),as(),x}for(;u=e.lastChild;)e.removeChild(u);if(typeof a=="function"){var m=a;a=function(){var w=Ro(y);m.call(w)}}var y=id(e,0,!1,null,null,!1,!1,"",G0);return e._reactRootContainer=y,e[sr]=y.current,Ki(e.nodeType===8?e.parentNode:e),as(function(){Zo(t,y,s,a)}),y}function $o(e,t,s,a,u){var f=s._reactRootContainer;if(f){var x=f;if(typeof u=="function"){var m=u;u=function(){var y=Ro(x);m.call(y)}}Zo(t,x,e,u)}else x=Ep(s,t,e,u,a);return Ro(x)}af=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=Ti(t.pendingLanes);s!==0&&(_u(t,s|1),rn(t,xt()),!(De&6)&&(qs=xt()+500,Ur()))}break;case 13:as(function(){var a=ir(e,1);if(a!==null){var u=Wt();Mn(a,e,1,u)}}),ad(e,1)}};Iu=function(e){if(e.tag===13){var t=ir(e,134217728);if(t!==null){var s=Wt();Mn(t,e,134217728,s)}ad(e,134217728)}};of=function(e){if(e.tag===13){var t=Or(e),s=ir(e,t);if(s!==null){var a=Wt();Mn(s,e,t,a)}ad(e,t)}};lf=function(){return Ue};cf=function(e,t){var s=Ue;try{return Ue=e,t()}finally{Ue=s}};Cc=function(e,t,s){switch(t){case"input":if(gc(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var a=s[t];if(a!==e&&a.form===e.form){var u=Ho(a);if(!u)throw Error(se(90));F1(a),gc(a,u)}}}break;case"textarea":z1(e,s);break;case"select":t=s.value,t!=null&&Ls(e,!!s.multiple,t,!1)}};q1=td;K1=as;var Np={usingClientEntryPoint:!1,Events:[fa,_s,Ho,X1,Y1,td]},Si={findFiberByHostInstance:Zr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ap={bundleType:Si.bundleType,version:Si.version,rendererPackageName:Si.rendererPackageName,rendererConfig:Si.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:cr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=J1(e),e===null?null:e.stateNode},findFiberByHostInstance:Si.findFiberByHostInstance||Cp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ya=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ya.isDisabled&&Ya.supportsFiber)try{Fo=Ya.inject(Ap),Yn=Ya}catch{}}hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Np;hn.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ld(t))throw Error(se(200));return bp(e,t,null,s)};hn.createRoot=function(e,t){if(!ld(e))throw Error(se(299));var s=!1,a="",u=kh;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(u=t.onRecoverableError)),t=id(e,1,!1,null,null,s,!1,a,u),e[sr]=t.current,Ki(e.nodeType===8?e.parentNode:e),new od(t)};hn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(se(188)):(e=Object.keys(e).join(","),Error(se(268,e)));return e=J1(t),e=e===null?null:e.stateNode,e};hn.flushSync=function(e){return as(e)};hn.hydrate=function(e,t,s){if(!Jo(t))throw Error(se(200));return $o(null,e,t,!0,s)};hn.hydrateRoot=function(e,t,s){if(!ld(e))throw Error(se(405));var a=s!=null&&s.hydratedSources||null,u=!1,f="",x=kh;if(s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onRecoverableError!==void 0&&(x=s.onRecoverableError)),t=jh(t,null,e,1,s??null,u,!1,f,x),e[sr]=t.current,Ki(e),a)for(e=0;e<a.length;e++)s=a[e],u=s._getVersion,u=u(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,u]:t.mutableSourceEagerHydrationData.push(s,u);return new Qo(t)};hn.render=function(e,t,s){if(!Jo(t))throw Error(se(200));return $o(null,e,t,!1,s)};hn.unmountComponentAtNode=function(e){if(!Jo(e))throw Error(se(40));return e._reactRootContainer?(as(function(){$o(null,null,e,!1,function(){e._reactRootContainer=null,e[sr]=null})}),!0):!1};hn.unstable_batchedUpdates=td;hn.unstable_renderSubtreeIntoContainer=function(e,t,s,a){if(!Jo(s))throw Error(se(200));if(e==null||e._reactInternals===void 0)throw Error(se(38));return $o(e,t,s,!1,a)};hn.version="18.3.1-next-f1338f8080-20240426";function Rh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Rh)}catch(e){console.error(e)}}Rh(),k1.exports=hn;var Sp=k1.exports,X0=Sp;lc.createRoot=X0.createRoot,lc.hydrateRoot=X0.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sa(){return sa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},sa.apply(this,arguments)}var Ar;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ar||(Ar={}));const Y0="popstate";function _p(e){e===void 0&&(e={});function t(a,u){let{pathname:f,search:x,hash:m}=a.location;return tu("",{pathname:f,search:x,hash:m},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function s(a,u){return typeof u=="string"?u:Oo(u)}return Tp(t,s,null,e)}function mt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function cd(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Ip(){return Math.random().toString(36).substr(2,8)}function q0(e,t){return{usr:e.state,key:e.key,idx:t}}function tu(e,t,s,a){return s===void 0&&(s=null),sa({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ri(t):t,{state:s,key:t&&t.key||a||Ip()})}function Oo(e){let{pathname:t="/",search:s="",hash:a=""}=e;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function ri(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function Tp(e,t,s,a){a===void 0&&(a={});let{window:u=document.defaultView,v5Compat:f=!1}=a,x=u.history,m=Ar.Pop,y=null,w=N();w==null&&(w=0,x.replaceState(sa({},x.state,{idx:w}),""));function N(){return(x.state||{idx:null}).idx}function b(){m=Ar.Pop;let H=N(),_=H==null?null:H-w;w=H,y&&y({action:m,location:M.location,delta:_})}function T(H,_){m=Ar.Push;let C=tu(M.location,H,_);w=N()+1;let E=q0(C,w),k=M.createHref(C);try{x.pushState(E,"",k)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;u.location.assign(k)}f&&y&&y({action:m,location:M.location,delta:1})}function j(H,_){m=Ar.Replace;let C=tu(M.location,H,_);w=N();let E=q0(C,w),k=M.createHref(C);x.replaceState(E,"",k),f&&y&&y({action:m,location:M.location,delta:0})}function B(H){let _=u.location.origin!=="null"?u.location.origin:u.location.href,C=typeof H=="string"?H:Oo(H);return C=C.replace(/ $/,"%20"),mt(_,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,_)}let M={get action(){return m},get location(){return e(u,x)},listen(H){if(y)throw new Error("A history only accepts one active listener");return u.addEventListener(Y0,b),y=H,()=>{u.removeEventListener(Y0,b),y=null}},createHref(H){return t(u,H)},createURL:B,encodeLocation(H){let _=B(H);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:T,replace:j,go(H){return x.go(H)}};return M}var K0;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(K0||(K0={}));function jp(e,t,s){return s===void 0&&(s="/"),kp(e,t,s)}function kp(e,t,s,a){let u=typeof t=="string"?ri(t):t,f=ud(u.pathname||"/",s);if(f==null)return null;let x=Oh(e);Rp(x);let m=null;for(let y=0;m==null&&y<x.length;++y){let w=Wp(f);m=zp(x[y],w)}return m}function Oh(e,t,s,a){t===void 0&&(t=[]),s===void 0&&(s=[]),a===void 0&&(a="");let u=(f,x,m)=>{let y={relativePath:m===void 0?f.path||"":m,caseSensitive:f.caseSensitive===!0,childrenIndex:x,route:f};y.relativePath.startsWith("/")&&(mt(y.relativePath.startsWith(a),'Absolute route path "'+y.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),y.relativePath=y.relativePath.slice(a.length));let w=Mr([a,y.relativePath]),N=s.concat(y);f.children&&f.children.length>0&&(mt(f.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+w+'".')),Oh(f.children,t,N,w)),!(f.path==null&&!f.index)&&t.push({path:w,score:Fp(w,f.index),routesMeta:N})};return e.forEach((f,x)=>{var m;if(f.path===""||!((m=f.path)!=null&&m.includes("?")))u(f,x);else for(let y of Dh(f.path))u(f,x,y)}),t}function Dh(e){let t=e.split("/");if(t.length===0)return[];let[s,...a]=t,u=s.endsWith("?"),f=s.replace(/\?$/,"");if(a.length===0)return u?[f,""]:[f];let x=Dh(a.join("/")),m=[];return m.push(...x.map(y=>y===""?f:[f,y].join("/"))),u&&m.push(...x),m.map(y=>e.startsWith("/")&&y===""?"/":y)}function Rp(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:Up(t.routesMeta.map(a=>a.childrenIndex),s.routesMeta.map(a=>a.childrenIndex)))}const Op=/^:[\w-]+$/,Dp=3,Mp=2,Lp=1,Bp=10,Pp=-2,Z0=e=>e==="*";function Fp(e,t){let s=e.split("/"),a=s.length;return s.some(Z0)&&(a+=Pp),t&&(a+=Mp),s.filter(u=>!Z0(u)).reduce((u,f)=>u+(Op.test(f)?Dp:f===""?Lp:Bp),a)}function Up(e,t){return e.length===t.length&&e.slice(0,-1).every((a,u)=>a===t[u])?e[e.length-1]-t[t.length-1]:0}function zp(e,t,s){let{routesMeta:a}=e,u={},f="/",x=[];for(let m=0;m<a.length;++m){let y=a[m],w=m===a.length-1,N=f==="/"?t:t.slice(f.length)||"/",b=Vp({path:y.relativePath,caseSensitive:y.caseSensitive,end:w},N),T=y.route;if(!b)return null;Object.assign(u,b.params),x.push({params:u,pathname:Mr([f,b.pathname]),pathnameBase:Kp(Mr([f,b.pathnameBase])),route:T}),b.pathnameBase!=="/"&&(f=Mr([f,b.pathnameBase]))}return x}function Vp(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,a]=Hp(e.path,e.caseSensitive,e.end),u=t.match(s);if(!u)return null;let f=u[0],x=f.replace(/(.)\/+$/,"$1"),m=u.slice(1);return{params:a.reduce((w,N,b)=>{let{paramName:T,isOptional:j}=N;if(T==="*"){let M=m[b]||"";x=f.slice(0,f.length-M.length).replace(/(.)\/+$/,"$1")}const B=m[b];return j&&!B?w[T]=void 0:w[T]=(B||"").replace(/%2F/g,"/"),w},{}),pathname:f,pathnameBase:x,pattern:e}}function Hp(e,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),cd(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let a=[],u="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(x,m,y)=>(a.push({paramName:m,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),u+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?u+="\\/*$":e!==""&&e!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,t?void 0:"i"),a]}function Wp(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return cd(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function ud(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,a=e.charAt(s);return a&&a!=="/"?null:e.slice(s)||"/"}const Gp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xp=e=>Gp.test(e);function Yp(e,t){t===void 0&&(t="/");let{pathname:s,search:a="",hash:u=""}=typeof e=="string"?ri(e):e,f;if(s)if(Xp(s))f=s;else{if(s.includes("//")){let x=s;s=s.replace(/\/\/+/g,"/"),cd(!1,"Pathnames cannot have embedded double slashes - normalizing "+(x+" -> "+s))}s.startsWith("/")?f=Q0(s.substring(1),"/"):f=Q0(s,t)}else f=t;return{pathname:f,search:Zp(a),hash:Qp(u)}}function Q0(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(u=>{u===".."?s.length>1&&s.pop():u!=="."&&s.push(u)}),s.length>1?s.join("/"):"/"}function nc(e,t,s,a){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function qp(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function Mh(e,t){let s=qp(e);return t?s.map((a,u)=>u===s.length-1?a.pathname:a.pathnameBase):s.map(a=>a.pathnameBase)}function Lh(e,t,s,a){a===void 0&&(a=!1);let u;typeof e=="string"?u=ri(e):(u=sa({},e),mt(!u.pathname||!u.pathname.includes("?"),nc("?","pathname","search",u)),mt(!u.pathname||!u.pathname.includes("#"),nc("#","pathname","hash",u)),mt(!u.search||!u.search.includes("#"),nc("#","search","hash",u)));let f=e===""||u.pathname==="",x=f?"/":u.pathname,m;if(x==null)m=s;else{let b=t.length-1;if(!a&&x.startsWith("..")){let T=x.split("/");for(;T[0]==="..";)T.shift(),b-=1;u.pathname=T.join("/")}m=b>=0?t[b]:"/"}let y=Yp(u,m),w=x&&x!=="/"&&x.endsWith("/"),N=(f||x===".")&&s.endsWith("/");return!y.pathname.endsWith("/")&&(w||N)&&(y.pathname+="/"),y}const Mr=e=>e.join("/").replace(/\/\/+/g,"/"),Kp=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Zp=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Qp=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Jp(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Bh=["post","put","patch","delete"];new Set(Bh);const $p=["get",...Bh];new Set($p);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ia(){return ia=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},ia.apply(this,arguments)}const dd=R.createContext(null),em=R.createContext(null),us=R.createContext(null),el=R.createContext(null),ur=R.createContext({outlet:null,matches:[],isDataRoute:!1}),Ph=R.createContext(null);function tm(e,t){let{relative:s}=t===void 0?{}:t;xa()||mt(!1);let{basename:a,navigator:u}=R.useContext(us),{hash:f,pathname:x,search:m}=Vh(e,{relative:s}),y=x;return a!=="/"&&(y=x==="/"?a:Mr([a,x])),u.createHref({pathname:y,search:m,hash:f})}function xa(){return R.useContext(el)!=null}function si(){return xa()||mt(!1),R.useContext(el).location}function Fh(e){R.useContext(us).static||R.useLayoutEffect(e)}function Sn(){let{isDataRoute:e}=R.useContext(ur);return e?xm():nm()}function nm(){xa()||mt(!1);let e=R.useContext(dd),{basename:t,future:s,navigator:a}=R.useContext(us),{matches:u}=R.useContext(ur),{pathname:f}=si(),x=JSON.stringify(Mh(u,s.v7_relativeSplatPath)),m=R.useRef(!1);return Fh(()=>{m.current=!0}),R.useCallback(function(w,N){if(N===void 0&&(N={}),!m.current)return;if(typeof w=="number"){a.go(w);return}let b=Lh(w,JSON.parse(x),f,N.relative==="path");e==null&&t!=="/"&&(b.pathname=b.pathname==="/"?t:Mr([t,b.pathname])),(N.replace?a.replace:a.push)(b,N.state,N)},[t,a,x,f,e])}const Uh=R.createContext(null);function sn(){return R.useContext(Uh)}function rm(e){let t=R.useContext(ur).outlet;return t&&R.createElement(Uh.Provider,{value:e},t)}function zh(){let{matches:e}=R.useContext(ur),t=e[e.length-1];return t?t.params:{}}function Vh(e,t){let{relative:s}=t===void 0?{}:t,{future:a}=R.useContext(us),{matches:u}=R.useContext(ur),{pathname:f}=si(),x=JSON.stringify(Mh(u,a.v7_relativeSplatPath));return R.useMemo(()=>Lh(e,JSON.parse(x),f,s==="path"),[e,x,f,s])}function sm(e,t){return im(e,t)}function im(e,t,s,a){xa()||mt(!1);let{navigator:u}=R.useContext(us),{matches:f}=R.useContext(ur),x=f[f.length-1],m=x?x.params:{};x&&x.pathname;let y=x?x.pathnameBase:"/";x&&x.route;let w=si(),N;if(t){var b;let H=typeof t=="string"?ri(t):t;y==="/"||(b=H.pathname)!=null&&b.startsWith(y)||mt(!1),N=H}else N=w;let T=N.pathname||"/",j=T;if(y!=="/"){let H=y.replace(/^\//,"").split("/");j="/"+T.replace(/^\//,"").split("/").slice(H.length).join("/")}let B=jp(e,{pathname:j}),M=um(B&&B.map(H=>Object.assign({},H,{params:Object.assign({},m,H.params),pathname:Mr([y,u.encodeLocation?u.encodeLocation(H.pathname).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?y:Mr([y,u.encodeLocation?u.encodeLocation(H.pathnameBase).pathname:H.pathnameBase])})),f,s,a);return t&&M?R.createElement(el.Provider,{value:{location:ia({pathname:"/",search:"",hash:"",state:null,key:"default"},N),navigationType:Ar.Pop}},M):M}function am(){let e=Xh(),t=Jp(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,u={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},t),s?R.createElement("pre",{style:u},s):null,null)}const om=R.createElement(am,null);class lm extends R.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error!==void 0?R.createElement(ur.Provider,{value:this.props.routeContext},R.createElement(Ph.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cm(e){let{routeContext:t,match:s,children:a}=e,u=R.useContext(dd);return u&&u.static&&u.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=s.route.id),R.createElement(ur.Provider,{value:t},a)}function um(e,t,s,a){var u;if(t===void 0&&(t=[]),s===void 0&&(s=null),a===void 0&&(a=null),e==null){var f;if(!s)return null;if(s.errors)e=s.matches;else if((f=a)!=null&&f.v7_partialHydration&&t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let x=e,m=(u=s)==null?void 0:u.errors;if(m!=null){let N=x.findIndex(b=>b.route.id&&(m==null?void 0:m[b.route.id])!==void 0);N>=0||mt(!1),x=x.slice(0,Math.min(x.length,N+1))}let y=!1,w=-1;if(s&&a&&a.v7_partialHydration)for(let N=0;N<x.length;N++){let b=x[N];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(w=N),b.route.id){let{loaderData:T,errors:j}=s,B=b.route.loader&&T[b.route.id]===void 0&&(!j||j[b.route.id]===void 0);if(b.route.lazy||B){y=!0,w>=0?x=x.slice(0,w+1):x=[x[0]];break}}}return x.reduceRight((N,b,T)=>{let j,B=!1,M=null,H=null;s&&(j=m&&b.route.id?m[b.route.id]:void 0,M=b.route.errorElement||om,y&&(w<0&&T===0?(gm("route-fallback"),B=!0,H=null):w===T&&(B=!0,H=b.route.hydrateFallbackElement||null)));let _=t.concat(x.slice(0,T+1)),C=()=>{let E;return j?E=M:B?E=H:b.route.Component?E=R.createElement(b.route.Component,null):b.route.element?E=b.route.element:E=N,R.createElement(cm,{match:b,routeContext:{outlet:N,matches:_,isDataRoute:s!=null},children:E})};return s&&(b.route.ErrorBoundary||b.route.errorElement||T===0)?R.createElement(lm,{location:s.location,revalidation:s.revalidation,component:M,error:j,children:C(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):C()},null)}var Hh=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Hh||{}),Wh=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Wh||{});function dm(e){let t=R.useContext(dd);return t||mt(!1),t}function fm(e){let t=R.useContext(em);return t||mt(!1),t}function hm(e){let t=R.useContext(ur);return t||mt(!1),t}function Gh(e){let t=hm(),s=t.matches[t.matches.length-1];return s.route.id||mt(!1),s.route.id}function Xh(){var e;let t=R.useContext(Ph),s=fm(Wh.UseRouteError),a=Gh();return t!==void 0?t:(e=s.errors)==null?void 0:e[a]}function xm(){let{router:e}=dm(Hh.UseNavigateStable),t=Gh(),s=R.useRef(!1);return Fh(()=>{s.current=!0}),R.useCallback(function(u,f){f===void 0&&(f={}),s.current&&(typeof u=="number"?e.navigate(u):e.navigate(u,ia({fromRouteId:t},f)))},[e,t])}const J0={};function gm(e,t,s){J0[e]||(J0[e]=!0)}function pm(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function mm(e){return rm(e.context)}function Ve(e){mt(!1)}function ym(e){let{basename:t="/",children:s=null,location:a,navigationType:u=Ar.Pop,navigator:f,static:x=!1,future:m}=e;xa()&&mt(!1);let y=t.replace(/^\/*/,"/"),w=R.useMemo(()=>({basename:y,navigator:f,static:x,future:ia({v7_relativeSplatPath:!1},m)}),[y,m,f,x]);typeof a=="string"&&(a=ri(a));let{pathname:N="/",search:b="",hash:T="",state:j=null,key:B="default"}=a,M=R.useMemo(()=>{let H=ud(N,y);return H==null?null:{location:{pathname:H,search:b,hash:T,state:j,key:B},navigationType:u}},[y,N,b,T,j,B,u]);return M==null?null:R.createElement(us.Provider,{value:w},R.createElement(el.Provider,{children:s,value:M}))}function wm(e){let{children:t,location:s}=e;return sm(nu(t),s)}new Promise(()=>{});function nu(e,t){t===void 0&&(t=[]);let s=[];return R.Children.forEach(e,(a,u)=>{if(!R.isValidElement(a))return;let f=[...t,u];if(a.type===R.Fragment){s.push.apply(s,nu(a.props.children,f));return}a.type!==Ve&&mt(!1),!a.props.index||!a.props.children||mt(!1);let x={id:a.props.id||f.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(x.children=nu(a.props.children,f)),s.push(x)}),s}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ru(){return ru=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},ru.apply(this,arguments)}function vm(e,t){if(e==null)return{};var s={},a=Object.keys(e),u,f;for(f=0;f<a.length;f++)u=a[f],!(t.indexOf(u)>=0)&&(s[u]=e[u]);return s}function bm(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Cm(e,t){return e.button===0&&(!t||t==="_self")&&!bm(e)}function su(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,s)=>{let a=e[s];return t.concat(Array.isArray(a)?a.map(u=>[s,u]):[[s,a]])},[]))}function Em(e,t){let s=su(e);return t&&t.forEach((a,u)=>{s.has(u)||t.getAll(u).forEach(f=>{s.append(u,f)})}),s}const Nm=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Am="6";try{window.__reactRouterVersion=Am}catch{}const Sm="startTransition",$0=gg[Sm];function _m(e){let{basename:t,children:s,future:a,window:u}=e,f=R.useRef();f.current==null&&(f.current=_p({window:u,v5Compat:!0}));let x=f.current,[m,y]=R.useState({action:x.action,location:x.location}),{v7_startTransition:w}=a||{},N=R.useCallback(b=>{w&&$0?$0(()=>y(b)):y(b)},[y,w]);return R.useLayoutEffect(()=>x.listen(N),[x,N]),R.useEffect(()=>pm(a),[a]),R.createElement(ym,{basename:t,children:s,location:m.location,navigationType:m.action,navigator:x,future:a})}const Im=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Tm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,or=R.forwardRef(function(t,s){let{onClick:a,relative:u,reloadDocument:f,replace:x,state:m,target:y,to:w,preventScrollReset:N,viewTransition:b}=t,T=vm(t,Nm),{basename:j}=R.useContext(us),B,M=!1;if(typeof w=="string"&&Tm.test(w)&&(B=w,Im))try{let E=new URL(window.location.href),k=w.startsWith("//")?new URL(E.protocol+w):new URL(w),V=ud(k.pathname,j);k.origin===E.origin&&V!=null?w=V+k.search+k.hash:M=!0}catch{}let H=tm(w,{relative:u}),_=jm(w,{replace:x,state:m,target:y,preventScrollReset:N,relative:u,viewTransition:b});function C(E){a&&a(E),E.defaultPrevented||_(E)}return R.createElement("a",ru({},T,{href:B||H,onClick:M||f?a:C,ref:s,target:y}))});var e1;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(e1||(e1={}));var t1;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(t1||(t1={}));function jm(e,t){let{target:s,replace:a,state:u,preventScrollReset:f,relative:x,viewTransition:m}=t===void 0?{}:t,y=Sn(),w=si(),N=Vh(e,{relative:x});return R.useCallback(b=>{if(Cm(b,s)){b.preventDefault();let T=a!==void 0?a:Oo(w)===Oo(N);y(e,{replace:T,state:u,preventScrollReset:f,relative:x,viewTransition:m})}},[w,y,N,a,u,s,e,f,x,m])}function Yh(e){let t=R.useRef(su(e)),s=R.useRef(!1),a=si(),u=R.useMemo(()=>Em(a.search,s.current?null:t.current),[a.search]),f=Sn(),x=R.useCallback((m,y)=>{const w=su(typeof m=="function"?m(u):m);s.current=!0,f("?"+w,y)},[f,u]);return[u,x]}const on=({to:e,icon:t,label:s,onClick:a})=>{const u=si(),f=u.pathname===e||e!=="/"&&u.pathname.startsWith(e);return c.jsxs(or,{to:e,className:`flex items-center px-4 py-3 text-white transition-colors border-l-[4px] 
            ${f?"bg-white/10 border-[var(--sap-primary)]":"hover:bg-white/10 border-transparent hover:border-[var(--sap-primary)]"}`,onClick:a,children:[c.jsx("div",{className:"w-8 flex justify-center opacity-80",children:t}),c.jsx("span",{className:"text-sm font-medium tracking-wide ml-2",children:s})]})},km=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})}),Rm=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),Om=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),Dm=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.75a.75.75 0 110-1.5.75.75 0 010 1.5z"})]}),Mm=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),Lm=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Bm=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),Pm=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z"})}),Fm=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3v11.25A2.25 2.25 0 006 16.5h2.25M3.75 3h-1.5m1.5 0h16.5m0 0h1.5m-1.5 0v11.25A2.25 2.25 0 0118 16.5h-2.25m-7.5 0h7.5m-7.5 0l-1 3m8.5-3l1 3m0 0l.5 1.5m-.5-1.5h-9.5m0 0l-.5 1.5m.75-9 3-3 2.148 2.148A12.061 12.061 0 0116.5 7.605"})}),Um=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"})}),zm=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Vm=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3v11.25A2.25 2.25 0 006 16.5h2.25M3.75 3h-1.5m1.5 0h16.5m0 0h1.5m-1.5 0v11.25A2.25 2.25 0 0118 16.5h-2.25m-7.5 0h7.5m-7.5 0l-1 3m8.5-3l1 3m0 0l.5 1.5m-.5-1.5h-9.5m0 0l-.5 1.5M9 11.25v1.5M12 9v3.75m3-6v6"})}),Hm=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0h2.25m-2.25 16.5h2.25m-2.25-11.25h2.25m-2.25 6h2.25"})}),Wm=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.636 5.636a9 9 0 1012.728 0M12 3v9"})}),Ds=()=>{const[e,t]=R.useState(!1),[s,a]=R.useState("Logix - Inicio"),u=()=>t(!e);return c.jsxs("div",{className:"flex flex-col min-h-screen bg-[var(--sap-bg)] text-[var(--sap-text)] font-sans",children:[c.jsx("div",{id:"rotate-overlay",className:"hidden fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70 text-white p-4",children:c.jsx("div",{className:"max-w-sm text-center",children:c.jsx("h2",{className:"text-xl font-semibold",children:"Gira el dispositivo"})})}),c.jsxs("header",{className:"top-header bg-[var(--sap-shell-bg)] text-white h-[48px] px-4 flex items-center gap-4 shadow-md sticky top-0 z-50",children:[c.jsx("button",{className:"menu-toggle p-2 rounded hover:bg-white/10 active:bg-white/20 transition-all cursor-pointer z-[1001]",onClick:u,"aria-label":"Abrir men",type:"button",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-6 h-6",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})})}),c.jsx("h1",{className:"header-title flex-grow tracking-wide",children:s}),c.jsx("div",{className:"header-actions flex gap-2",children:c.jsx(or,{to:"/admin/login",className:"text-sm font-medium px-3 py-1 hover:bg-white/15 rounded transition-all",children:"Admin"})})]}),c.jsx("div",{className:`dropdown-menu ${e?"translate-x-0":"-translate-x-full"} fixed left-0 w-64 bg-[var(--sap-shell-bg)] shadow-xl z-[999] overflow-y-auto transform transition-transform duration-200 ease-in-out`,style:{top:"48px",height:"calc(100vh - 48px)"},children:c.jsxs("nav",{className:"py-2 space-y-0.5",children:[c.jsx(on,{to:"/",icon:c.jsx(km,{}),label:"Inicio",onClick:u}),c.jsx(on,{to:"/stock",icon:c.jsx(Rm,{}),label:"Consultar Stock",onClick:u}),c.jsx(on,{to:"/inbound",icon:c.jsx(Om,{}),label:"Inbound",onClick:u}),c.jsx(on,{to:"/label",icon:c.jsx(Dm,{}),label:"Etiquetado",onClick:u}),c.jsx(on,{to:"/view_logs",icon:c.jsx(Mm,{}),label:"Visualizar Logs",onClick:u}),c.jsx(on,{to:"/reconciliation",icon:c.jsx(Lm,{}),label:"Ver conciliacin",onClick:u}),c.jsx(on,{to:"/update",icon:c.jsx(Bm,{}),label:"Actualizar Ficheros",onClick:u}),c.jsx(on,{to:"/counts",icon:c.jsx(Pm,{}),label:"Conteo de Items",onClick:u}),c.jsx(on,{to:"/view_counts",icon:c.jsx(Fm,{}),label:"Validar conteos",onClick:u}),c.jsx(on,{to:"/picking",icon:c.jsx(Um,{}),label:"Chequeo de Picking",onClick:u}),c.jsx(on,{to:"/view_picking_audits",icon:c.jsx(zm,{}),label:"Picking por confirmar",onClick:u}),c.jsx(on,{to:"/planner",icon:c.jsx(Vm,{}),label:"Planificador",onClick:u}),c.jsx(on,{to:"/view_counts/recordings",icon:c.jsx(Hm,{}),label:"Reporte Conteos",onClick:u}),c.jsxs(or,{to:"#",className:"flex items-center px-4 py-3 text-white hover:bg-white/10 border-l-[4px] border-transparent hover:border-[var(--sap-error)] transition-colors",onClick:f=>{f.preventDefault(),window.location.href="/"},children:[c.jsx("div",{className:"w-8 flex justify-center opacity-80",children:c.jsx(Wm,{})}),c.jsx("span",{className:"text-sm font-medium tracking-wide ml-2",children:"Cerrar Sesin"})]})]})}),c.jsx("div",{className:`menu-overlay fixed top-[48px] left-0 w-full h-[calc(100vh-48px)] bg-black/40 transition-opacity z-[998] ${e?"opacity-100 visible":"opacity-0 invisible"}`,onClick:u}),c.jsx("main",{className:"main-content flex-grow overflow-y-auto overflow-x-hidden",children:c.jsxs("div",{className:"container mx-auto px-4 py-6 sm:px-6 lg:px-8 max-w-[1400px]",children:[c.jsx(mm,{context:{setTitle:a}})," "]})})]})},Gm=e=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",...e,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})}),Xm=e=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",...e,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),Ym=e=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",...e,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),qm=e=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",...e,children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.75a.75.75 0 110-1.5.75.75 0 010 1.5z"})]}),Km=e=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",...e,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),Zm=e=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",...e,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),Qm=e=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",...e,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z"})}),Jm=e=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",...e,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3v11.25A2.25 2.25 0 006 16.5h2.25M3.75 3h-1.5m1.5 0h16.5m0 0h1.5m-1.5 0v11.25A2.25 2.25 0 0118 16.5h-2.25m-7.5 0h7.5m-7.5 0l-1 3m8.5-3l1 3m0 0l.5 1.5m-.5-1.5h-9.5m0 0l-.5 1.5m.75-9 3-3 2.148 2.148A12.061 12.061 0 0116.5 7.605"})}),$m=e=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",...e,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"})}),ey=e=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",...e,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3v11.25A2.25 2.25 0 006 16.5h2.25M3.75 3h-1.5m1.5 0h16.5m0 0h1.5m-1.5 0v11.25A2.25 2.25 0 0118 16.5h-2.25m-7.5 0h7.5m-7.5 0l-1 3m8.5-3l1 3m0 0l.5 1.5m-.5-1.5h-9.5m0 0l-.5 1.5M9 11.25v1.5M12 9v3.75m3-6v6"})}),ty=[{id:"inbound",href:"/inbound",text:"Inbound",icon:c.jsx(Ym,{className:"w-12 h-12"})},{id:"stock",href:"/stock",text:"Consultar Stock",icon:c.jsx(Xm,{className:"w-12 h-12"})},{id:"label",href:"/label",text:"Etiquetado",icon:c.jsx(qm,{className:"w-12 h-12"})},{id:"picking",href:"/picking",text:"Auditoria Picking",icon:c.jsx($m,{className:"w-12 h-12"})},{id:"ciclicos",href:"/planner",text:"Cclicos",icon:c.jsx(Gm,{className:"w-12 h-12"})},{id:"diff_cycles",href:"/planner/manage_differences",text:"Diferencias en Cclicos",icon:c.jsx(Jm,{className:"w-12 h-12"})},{id:"view_counts",href:"/view_counts",text:"Validar Conteos",icon:c.jsx(Qm,{className:"w-12 h-12"})},{id:"view_picking_audits",href:"/view_picking_audits",text:"Ver Auditoras Picking",icon:c.jsx(ey,{className:"w-12 h-12"})},{id:"update",href:"/update",text:"Actualizar Ficheros",icon:c.jsx(Zm,{className:"w-12 h-12"})},{id:"counts",href:"/counts",text:"Conteos",icon:c.jsx(Km,{className:"w-12 h-12"})}],ny=()=>c.jsxs("div",{className:"flex flex-col items-center justify-start min-h-[calc(100vh-100px)] pt-16 px-4",children:[c.jsxs("header",{className:"mb-16 text-center",children:[c.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4 text-[#0070d2]",children:"Bienvenido a Logix"}),c.jsx("p",{className:"text-lg md:text-xl text-gray-500 font-normal",children:"Seleccione un proceso para comenzar"})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 max-w-7xl w-full",children:ty.map(e=>c.jsxs(or,{to:e.href,className:"bg-white rounded-lg shadow-sm border border-gray-100 hover:shadow-md hover:-translate-y-1 transition-all duration-300 flex flex-col items-center justify-center py-4 px-4 text-center group h-48",children:[c.jsx("div",{className:"text-[#0070d2] mb-6 transition-transform duration-300 group-hover:scale-110",children:e.icon}),c.jsx("span",{className:"font-medium text-lg text-gray-700 group-hover:text-[#005fb2] transition-colors",children:e.text})]},e.id))})]}),ry=()=>{const[e,t]=R.useState(""),[s,a]=R.useState(""),[u,f]=R.useState(""),[x,m]=R.useState(!1),y=async w=>{w.preventDefault(),f(""),m(!0);try{const N=new FormData;N.append("username",e),N.append("password",s);const b=await fetch("/api/login",{method:"POST",body:N}),T=await b.json();b.ok?(console.log("Login successful",T),window.location.href="/"):f(T.error||"Error al iniciar sesin")}catch(N){console.error("Login failed",N),f("Error de conexin con el servidor")}finally{m(!1)}};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:c.jsxs("div",{className:"fiori-login-card",children:[c.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-[#2c3e50]",children:"Iniciar Sesin"}),u&&c.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:c.jsx("span",{className:"block sm:inline",children:u})}),c.jsxs("form",{onSubmit:y,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Usuario"}),c.jsx("input",{type:"text",value:e,onChange:w=>t(w.target.value),required:!0,className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-[#0070d2] focus:ring focus:ring-[#0070d2] focus:ring-opacity-50 p-2 border"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Contrasea"}),c.jsx("input",{type:"password",value:s,onChange:w=>a(w.target.value),required:!0,className:"mt-1 block w-full rounded border-gray-300 shadow-sm focus:border-[#0070d2] focus:ring focus:ring-[#0070d2] focus:ring-opacity-50 p-2 border"})]}),c.jsx("button",{type:"submit",disabled:x,className:`w-full bg-[#0070d2] text-white py-2 rounded hover:bg-[#005fb2] transition ${x?"opacity-50 cursor-not-allowed":""}`,children:x?"Cargando...":"Entrar"}),c.jsx("div",{className:"mt-4 text-center text-sm",children:c.jsx(or,{to:"/register",className:"text-blue-600 hover:underline",children:"Registrarse"})})]})]})})},sy=()=>{const[e,t]=R.useState([]),[s,a]=R.useState([]),[u,f]=R.useState(""),[x,m]=R.useState(!0),[y,w]=R.useState(""),[N,b]=R.useState({key:"GRN",direction:"ascending"}),T=(C="")=>{m(!0);let E="http://localhost:8000/api/views/reconciliation";C&&(E+=`?archive_date=${C}`),fetch(E).then(k=>k.json()).then(k=>{k.data&&t(k.data),k.archive_versions&&a(k.archive_versions),m(!1)}).catch(k=>{console.error("Error fetching reconciliation data:",k),m(!1)})};R.useEffect(()=>{T()},[]);const j=C=>{const E=C.target.value;f(E),T(E)},B=R.useMemo(()=>{let C=[...e];return N!==null&&C.sort((E,k)=>{let V=E[N.key],U=k[N.key];return typeof V=="number"&&typeof U=="number"?N.direction==="ascending"?V-U:U-V:(V=V?V.toString().toLowerCase():"",U=U?U.toString().toLowerCase():"",V<U?N.direction==="ascending"?-1:1:V>U?N.direction==="ascending"?1:-1:0)}),C},[e,N]),M=R.useMemo(()=>B.filter(C=>y?Object.values(C).some(E=>String(E).toLowerCase().includes(y.toLowerCase())):!0),[B,y]),H=C=>{let E="ascending";N.key===C&&N.direction==="ascending"&&(E="descending"),b({key:C,direction:E})},_=C=>N.key!==C?c.jsx("span",{className:"ml-1 text-gray-400",children:""}):N.direction==="ascending"?c.jsx("span",{className:"ml-1 text-black",children:""}):c.jsx("span",{className:"ml-1 text-black",children:""});return c.jsxs("div",{className:"p-2 sm:p-6 bg-gray-50 min-h-screen font-sans",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 bg-white p-4 rounded shadow-sm border border-gray-200",children:[c.jsx("h2",{className:"text-2xl font-bold text-[#354a5f] mb-4 md:mb-0 flex items-center",children:" Reconciliacin de Inventario"}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 w-full md:w-auto",children:[c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-2",children:c.jsx("svg",{className:"h-5 w-5 text-gray-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),c.jsx("input",{type:"text",placeholder:"Buscar en tabla...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:outline-none w-full sm:w-64",value:y,onChange:C=>w(C.target.value)})]}),c.jsxs("select",{className:"py-2 px-4 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:outline-none bg-white font-medium text-gray-700",value:u,onChange:j,children:[c.jsx("option",{value:"",children:" Ver Datos Actuales"}),s.map(C=>c.jsxs("option",{value:C,children:[" Histrico: ",C]},C))]})]})]}),c.jsxs("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden border border-gray-200",children:[x?c.jsx("div",{className:"p-12 text-center text-gray-500 animate-pulse",children:"Cargando datos de reconciliacin..."}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full leading-normal",children:[c.jsx("thead",{className:"border-b-2 border-gray-200",children:c.jsx("tr",{children:["GRN","Codigo_Item","Descripcion","Ubicacion","Reubicado","Cant_Esperada","Cant_Recibida","Diferencia"].map(C=>c.jsx("th",{onClick:()=>H(C),className:"px-5 py-4 text-left text-xs font-bold uppercase tracking-wider cursor-pointer transition select-none whitespace-nowrap",children:c.jsxs("div",{className:"flex items-center",children:[C.replace("_"," "),_(C)]})},C))})}),c.jsx("tbody",{className:"divide-y divide-gray-100",children:M.length>0?M.map((C,E)=>{const k=C.Diferencia!==0,V=k?"bg-red-50 hover:bg-red-100":"hover:bg-gray-50",U=k?"text-red-700 font-semibold":"text-gray-700";return c.jsxs("tr",{className:`${V} transition-colors duration-150`,children:[c.jsx("td",{className:"px-5 py-4 whitespace-nowrap font-medium text-gray-900",children:C.GRN}),c.jsx("td",{className:"px-5 py-4 whitespace-nowrap",children:C.Codigo_Item}),c.jsx("td",{className:"px-5 py-4 text-sm truncate max-w-xs",title:C.Descripcion,children:C.Descripcion}),c.jsx("td",{className:"px-5 py-4 whitespace-nowrap text-sm text-gray-500",children:C.Ubicacion}),c.jsx("td",{className:"px-5 py-4 whitespace-nowrap text-sm text-blue-600 font-medium",children:C.Reubicado}),c.jsx("td",{className:"px-5 py-4 whitespace-nowrap text-right font-mono",children:C.Cant_Esperada}),c.jsx("td",{className:"px-5 py-4 whitespace-nowrap text-right font-mono",children:C.Cant_Recibida}),c.jsx("td",{className:`px-5 py-4 whitespace-nowrap text-right font-mono text-base ${U}`,children:C.Diferencia>0?`+${C.Diferencia}`:C.Diferencia})]},E)}):c.jsx("tr",{children:c.jsxs("td",{colSpan:"8",className:"px-5 py-8 text-center text-gray-500",children:["No se encontraron datos ",y&&`para "${y}"`]})})})]})}),!x&&c.jsxs("div",{className:"px-5 py-3 bg-gray-50 border-t border-gray-200 flex flex-col xs:flex-row items-center justify-between text-xs text-gray-500",children:[c.jsxs("span",{children:["Mostrando ",M.length," registros"]}),c.jsx("span",{children:u?`Visualizando archivo del: ${u}`:"Visualizando datos en tiempo real"})]})]})]})},iy="modulepreload",ay=function(e){return"/"+e},n1={},tl=function(t,s,a){let u=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const x=document.querySelector("meta[property=csp-nonce]"),m=(x==null?void 0:x.nonce)||(x==null?void 0:x.getAttribute("nonce"));u=Promise.allSettled(s.map(y=>{if(y=ay(y),y in n1)return;n1[y]=!0;const w=y.endsWith(".css"),N=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${N}`))return;const b=document.createElement("link");if(b.rel=w?"stylesheet":iy,w||(b.as="script"),b.crossOrigin="",b.href=y,m&&b.setAttribute("nonce",m),document.head.appendChild(b),w)return new Promise((T,j)=>{b.addEventListener("load",T),b.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${y}`)))})}))}function f(x){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=x,window.dispatchEvent(m),!m.defaultPrevented)throw x}return u.then(x=>{for(const m of x||[])m.status==="rejected"&&f(m.reason);return t().catch(f)})};function qh(e){var t,s,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var u=e.length;for(t=0;t<u;t++)e[t]&&(s=qh(e[t]))&&(a&&(a+=" "),a+=s)}else for(s in e)e[s]&&(a&&(a+=" "),a+=s);return a}function ts(){for(var e,t,s=0,a="",u=arguments.length;s<u;s++)(e=arguments[s])&&(t=qh(e))&&(a&&(a+=" "),a+=t);return a}function oy(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t.firstChild?t.insertBefore(s,t.firstChild):t.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}oy(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var ga=e=>typeof e=="number"&&!isNaN(e),os=e=>typeof e=="string",lr=e=>typeof e=="function",ly=e=>os(e)||ga(e),iu=e=>os(e)||lr(e)?e:null,cy=(e,t)=>e===!1||ga(e)&&e>0?e:t,au=e=>R.isValidElement(e)||os(e)||lr(e)||ga(e);function uy(e,t,s=300){let{scrollHeight:a,style:u}=e;requestAnimationFrame(()=>{u.minHeight="initial",u.height=a+"px",u.transition=`all ${s}ms`,requestAnimationFrame(()=>{u.height="0",u.padding="0",u.margin="0",setTimeout(t,s)})})}function dy({enter:e,exit:t,appendPosition:s=!1,collapse:a=!0,collapseDuration:u=300}){return function({children:f,position:x,preventExitTransition:m,done:y,nodeRef:w,isIn:N,playToast:b}){let T=s?`${e}--${x}`:e,j=s?`${t}--${x}`:t,B=R.useRef(0);return R.useLayoutEffect(()=>{let M=w.current,H=T.split(" "),_=C=>{C.target===w.current&&(b(),M.removeEventListener("animationend",_),M.removeEventListener("animationcancel",_),B.current===0&&C.type!=="animationcancel"&&M.classList.remove(...H))};M.classList.add(...H),M.addEventListener("animationend",_),M.addEventListener("animationcancel",_)},[]),R.useEffect(()=>{let M=w.current,H=()=>{M.removeEventListener("animationend",H),a?uy(M,y,u):y()};N||(m?H():(B.current=1,M.className+=` ${j}`,M.addEventListener("animationend",H)))},[N]),Pe.createElement(Pe.Fragment,null,f)}}function r1(e,t){return{content:Kh(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function Kh(e,t,s=!1){return R.isValidElement(e)&&!os(e.type)?R.cloneElement(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:s}):lr(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:s}):e}function fy({closeToast:e,theme:t,ariaLabel:s="close"}){return Pe.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:a=>{a.stopPropagation(),e(!0)},"aria-label":s},Pe.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Pe.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function hy({delay:e,isRunning:t,closeToast:s,type:a="default",hide:u,className:f,controlledProgress:x,progress:m,rtl:y,isIn:w,theme:N}){let b=u||x&&m===0,T={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};x&&(T.transform=`scaleX(${m})`);let j=ts("Toastify__progress-bar",x?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${N}`,`Toastify__progress-bar--${a}`,{"Toastify__progress-bar--rtl":y}),B=lr(f)?f({rtl:y,type:a,defaultClassName:j}):ts(j,f),M={[x&&m>=1?"onTransitionEnd":"onAnimationEnd"]:x&&m<1?null:()=>{w&&s()}};return Pe.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":b},Pe.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${N} Toastify__progress-bar--${a}`}),Pe.createElement("div",{role:"progressbar","aria-hidden":b?"true":"false","aria-label":"notification timer",className:B,style:T,...M}))}var xy=1,Zh=()=>`${xy++}`;function gy(e,t,s){let a=1,u=0,f=[],x=[],m=t,y=new Map,w=new Set,N=C=>(w.add(C),()=>w.delete(C)),b=()=>{x=Array.from(y.values()),w.forEach(C=>C())},T=({containerId:C,toastId:E,updateId:k})=>{let V=C?C!==e:e!==1,U=y.has(E)&&k==null;return V||U},j=(C,E)=>{y.forEach(k=>{var V;(E==null||E===k.props.toastId)&&((V=k.toggle)==null||V.call(k,C))})},B=C=>{var E,k;(k=(E=C.props)==null?void 0:E.onClose)==null||k.call(E,C.removalReason),C.isActive=!1},M=C=>{if(C==null)y.forEach(B);else{let E=y.get(C);E&&B(E)}b()},H=()=>{u-=f.length,f=[]},_=C=>{var E,k;let{toastId:V,updateId:U}=C.props,L=U==null;C.staleId&&y.delete(C.staleId),C.isActive=!0,y.set(V,C),b(),s(r1(C,L?"added":"updated")),L&&((k=(E=C.props).onOpen)==null||k.call(E))};return{id:e,props:m,observe:N,toggle:j,removeToast:M,toasts:y,clearQueue:H,buildToast:(C,E)=>{if(T(E))return;let{toastId:k,updateId:V,data:U,staleId:L,delay:X}=E,P=V==null;P&&u++;let J={...m,style:m.toastStyle,key:a++,...Object.fromEntries(Object.entries(E).filter(([ne,fe])=>fe!=null)),toastId:k,updateId:V,data:U,isIn:!1,className:iu(E.className||m.toastClassName),progressClassName:iu(E.progressClassName||m.progressClassName),autoClose:E.isLoading?!1:cy(E.autoClose,m.autoClose),closeToast(ne){y.get(k).removalReason=ne,M(k)},deleteToast(){let ne=y.get(k);if(ne!=null){if(s(r1(ne,"removed")),y.delete(k),u--,u<0&&(u=0),f.length>0){_(f.shift());return}b()}}};J.closeButton=m.closeButton,E.closeButton===!1||au(E.closeButton)?J.closeButton=E.closeButton:E.closeButton===!0&&(J.closeButton=au(m.closeButton)?m.closeButton:!0);let ee={content:C,props:J,staleId:L};m.limit&&m.limit>0&&u>m.limit&&P?f.push(ee):ga(X)?setTimeout(()=>{_(ee)},X):_(ee)},setProps(C){m=C},setToggle:(C,E)=>{let k=y.get(C);k&&(k.toggle=E)},isToastActive:C=>{var E;return(E=y.get(C))==null?void 0:E.isActive},getSnapshot:()=>x}}var Ht=new Map,aa=[],ou=new Set,py=e=>ou.forEach(t=>t(e)),Qh=()=>Ht.size>0;function my(){aa.forEach(e=>$h(e.content,e.options)),aa=[]}var yy=(e,{containerId:t})=>{var s;return(s=Ht.get(t||1))==null?void 0:s.toasts.get(e)};function Jh(e,t){var s;if(t)return!!((s=Ht.get(t))!=null&&s.isToastActive(e));let a=!1;return Ht.forEach(u=>{u.isToastActive(e)&&(a=!0)}),a}function wy(e){if(!Qh()){aa=aa.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||ly(e))Ht.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=Ht.get(e.containerId);t?t.removeToast(e.id):Ht.forEach(s=>{s.removeToast(e.id)})}}var vy=(e={})=>{Ht.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function $h(e,t){au(e)&&(Qh()||aa.push({content:e,options:t}),Ht.forEach(s=>{s.buildToast(e,t)}))}function by(e){var t;(t=Ht.get(e.containerId||1))==null||t.setToggle(e.id,e.fn)}function ex(e,t){Ht.forEach(s=>{(t==null||!(t!=null&&t.containerId)||(t==null?void 0:t.containerId)===s.id)&&s.toggle(e,t==null?void 0:t.id)})}function Cy(e){let t=e.containerId||1;return{subscribe(s){let a=gy(t,e,py);Ht.set(t,a);let u=a.observe(s);return my(),()=>{u(),Ht.delete(t)}},setProps(s){var a;(a=Ht.get(t))==null||a.setProps(s)},getSnapshot(){var s;return(s=Ht.get(t))==null?void 0:s.getSnapshot()}}}function Ey(e){return ou.add(e),()=>{ou.delete(e)}}function Ny(e){return e&&(os(e.toastId)||ga(e.toastId))?e.toastId:Zh()}function pa(e,t){return $h(e,t),t.toastId}function nl(e,t){return{...t,type:t&&t.type||e,toastId:Ny(t)}}function rl(e){return(t,s)=>pa(t,nl(e,s))}function he(e,t){return pa(e,nl("default",t))}he.loading=(e,t)=>pa(e,nl("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function Ay(e,{pending:t,error:s,success:a},u){let f;t&&(f=os(t)?he.loading(t,u):he.loading(t.render,{...u,...t}));let x={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},m=(w,N,b)=>{if(N==null){he.dismiss(f);return}let T={type:w,...x,...u,data:b},j=os(N)?{render:N}:N;return f?he.update(f,{...T,...j}):he(j.render,{...T,...j}),b},y=lr(e)?e():e;return y.then(w=>m("success",a,w)).catch(w=>m("error",s,w)),y}he.promise=Ay;he.success=rl("success");he.info=rl("info");he.error=rl("error");he.warning=rl("warning");he.warn=he.warning;he.dark=(e,t)=>pa(e,nl("default",{theme:"dark",...t}));function Sy(e){wy(e)}he.dismiss=Sy;he.clearWaitingQueue=vy;he.isActive=Jh;he.update=(e,t={})=>{let s=yy(e,t);if(s){let{props:a,content:u}=s,f={delay:100,...a,...t,toastId:t.toastId||e,updateId:Zh()};f.toastId!==e&&(f.staleId=e);let x=f.render||u;delete f.render,pa(x,f)}};he.done=e=>{he.update(e,{progress:1})};he.onChange=Ey;he.play=e=>ex(!0,e);he.pause=e=>ex(!1,e);function _y(e){var t;let{subscribe:s,getSnapshot:a,setProps:u}=R.useRef(Cy(e)).current;u(e);let f=(t=R.useSyncExternalStore(s,a,a))==null?void 0:t.slice();function x(m){if(!f)return[];let y=new Map;return e.newestOnTop&&f.reverse(),f.forEach(w=>{let{position:N}=w.props;y.has(N)||y.set(N,[]),y.get(N).push(w)}),Array.from(y,w=>m(w[0],w[1]))}return{getToastToRender:x,isToastActive:Jh,count:f==null?void 0:f.length}}function Iy(e){let[t,s]=R.useState(!1),[a,u]=R.useState(!1),f=R.useRef(null),x=R.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:m,pauseOnHover:y,closeToast:w,onClick:N,closeOnClick:b}=e;by({id:e.toastId,containerId:e.containerId,fn:s}),R.useEffect(()=>{if(e.pauseOnFocusLoss)return T(),()=>{j()}},[e.pauseOnFocusLoss]);function T(){document.hasFocus()||_(),window.addEventListener("focus",H),window.addEventListener("blur",_)}function j(){window.removeEventListener("focus",H),window.removeEventListener("blur",_)}function B(L){if(e.draggable===!0||e.draggable===L.pointerType){C();let X=f.current;x.canCloseOnClick=!0,x.canDrag=!0,X.style.transition="none",e.draggableDirection==="x"?(x.start=L.clientX,x.removalDistance=X.offsetWidth*(e.draggablePercent/100)):(x.start=L.clientY,x.removalDistance=X.offsetHeight*(e.draggablePercent===80?e.draggablePercent*1.5:e.draggablePercent)/100)}}function M(L){let{top:X,bottom:P,left:J,right:ee}=f.current.getBoundingClientRect();L.nativeEvent.type!=="touchend"&&e.pauseOnHover&&L.clientX>=J&&L.clientX<=ee&&L.clientY>=X&&L.clientY<=P?_():H()}function H(){s(!0)}function _(){s(!1)}function C(){x.didMove=!1,document.addEventListener("pointermove",k),document.addEventListener("pointerup",V)}function E(){document.removeEventListener("pointermove",k),document.removeEventListener("pointerup",V)}function k(L){let X=f.current;if(x.canDrag&&X){x.didMove=!0,t&&_(),e.draggableDirection==="x"?x.delta=L.clientX-x.start:x.delta=L.clientY-x.start,x.start!==L.clientX&&(x.canCloseOnClick=!1);let P=e.draggableDirection==="x"?`${x.delta}px, var(--y)`:`0, calc(${x.delta}px + var(--y))`;X.style.transform=`translate3d(${P},0)`,X.style.opacity=`${1-Math.abs(x.delta/x.removalDistance)}`}}function V(){E();let L=f.current;if(x.canDrag&&x.didMove&&L){if(x.canDrag=!1,Math.abs(x.delta)>x.removalDistance){u(!0),e.closeToast(!0),e.collapseAll();return}L.style.transition="transform 0.2s, opacity 0.2s",L.style.removeProperty("transform"),L.style.removeProperty("opacity")}}let U={onPointerDown:B,onPointerUp:M};return m&&y&&(U.onMouseEnter=_,e.stacked||(U.onMouseLeave=H)),b&&(U.onClick=L=>{N&&N(L),x.canCloseOnClick&&w(!0)}),{playToast:H,pauseToast:_,isRunning:t,preventExitTransition:a,toastRef:f,eventHandlers:U}}var Ty=typeof window<"u"?R.useLayoutEffect:R.useEffect,sl=({theme:e,type:t,isLoading:s,...a})=>Pe.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...a});function jy(e){return Pe.createElement(sl,{...e},Pe.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function ky(e){return Pe.createElement(sl,{...e},Pe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function Ry(e){return Pe.createElement(sl,{...e},Pe.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function Oy(e){return Pe.createElement(sl,{...e},Pe.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function Dy(){return Pe.createElement("div",{className:"Toastify__spinner"})}var lu={info:ky,warning:jy,success:Ry,error:Oy,spinner:Dy},My=e=>e in lu;function Ly({theme:e,type:t,isLoading:s,icon:a}){let u=null,f={theme:e,type:t};return a===!1||(lr(a)?u=a({...f,isLoading:s}):R.isValidElement(a)?u=R.cloneElement(a,f):s?u=lu.spinner():My(t)&&(u=lu[t](f))),u}var By=e=>{let{isRunning:t,preventExitTransition:s,toastRef:a,eventHandlers:u,playToast:f}=Iy(e),{closeButton:x,children:m,autoClose:y,onClick:w,type:N,hideProgressBar:b,closeToast:T,transition:j,position:B,className:M,style:H,progressClassName:_,updateId:C,role:E,progress:k,rtl:V,toastId:U,deleteToast:L,isIn:X,isLoading:P,closeOnClick:J,theme:ee,ariaLabel:ne}=e,fe=ts("Toastify__toast",`Toastify__toast-theme--${ee}`,`Toastify__toast--${N}`,{"Toastify__toast--rtl":V},{"Toastify__toast--close-on-click":J}),Ne=lr(M)?M({rtl:V,position:B,type:N,defaultClassName:fe}):ts(fe,M),K=Ly(e),le=!!k||!y,ce={closeToast:T,type:N,theme:ee},$=null;return x===!1||(lr(x)?$=x(ce):R.isValidElement(x)?$=R.cloneElement(x,ce):$=fy(ce)),Pe.createElement(j,{isIn:X,done:L,position:B,preventExitTransition:s,nodeRef:a,playToast:f},Pe.createElement("div",{id:U,tabIndex:0,onClick:w,"data-in":X,className:Ne,...u,style:H,ref:a,...X&&{role:E,"aria-label":ne}},K!=null&&Pe.createElement("div",{className:ts("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!P})},K),Kh(m,e,!t),$,!e.customProgressBar&&Pe.createElement(hy,{...C&&!le?{key:`p-${C}`}:{},rtl:V,theme:ee,delay:y,isRunning:t,isIn:X,closeToast:T,hide:b,type:N,className:_,controlledProgress:le,progress:k||0})))},Py=(e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}),Fy=dy(Py("bounce",!0)),Uy={position:"top-right",transition:Fy,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&e.code==="KeyT"};function Ks(e){let t={...Uy,...e},s=e.stacked,[a,u]=R.useState(!0),f=R.useRef(null),{getToastToRender:x,isToastActive:m,count:y}=_y(t),{className:w,style:N,rtl:b,containerId:T,hotKeys:j}=t;function B(H){let _=ts("Toastify__toast-container",`Toastify__toast-container--${H}`,{"Toastify__toast-container--rtl":b});return lr(w)?w({position:H,rtl:b,defaultClassName:_}):ts(_,iu(w))}function M(){s&&(u(!0),he.play())}return Ty(()=>{var H;if(s){let _=f.current.querySelectorAll('[data-in="true"]'),C=12,E=(H=t.position)==null?void 0:H.includes("top"),k=0,V=0;Array.from(_).reverse().forEach((U,L)=>{let X=U;X.classList.add("Toastify__toast--stacked"),L>0&&(X.dataset.collapsed=`${a}`),X.dataset.pos||(X.dataset.pos=E?"top":"bot");let P=k*(a?.2:1)+(a?0:C*L);X.style.setProperty("--y",`${E?P:P*-1}px`),X.style.setProperty("--g",`${C}`),X.style.setProperty("--s",`${1-(a?V:0)}`),k+=X.offsetHeight,V+=.025})}},[a,y,s]),R.useEffect(()=>{function H(_){var C;let E=f.current;j(_)&&((C=E.querySelector('[tabIndex="0"]'))==null||C.focus(),u(!1),he.pause()),_.key==="Escape"&&(document.activeElement===E||E!=null&&E.contains(document.activeElement))&&(u(!0),he.play())}return document.addEventListener("keydown",H),()=>{document.removeEventListener("keydown",H)}},[j]),Pe.createElement("section",{ref:f,className:"Toastify",id:T,onMouseEnter:()=>{s&&(u(!1),he.pause())},onMouseLeave:M,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},x((H,_)=>{let C=_.length?{...N}:{...N,pointerEvents:"none"};return Pe.createElement("div",{tabIndex:-1,className:B(H),"data-stacked":s,style:C,key:`c-${H}`},_.map(({content:E,props:k})=>Pe.createElement(By,{...k,stacked:s,collapseAll:M,isIn:m(k.toastId,k.containerId),key:`t-${k.key}`},E)))}))}const zy=()=>{const{setTitle:e}=sn(),[t,s]=R.useState(""),[a,u]=R.useState(null),[f,x]=R.useState(!1),[m,y]=R.useState(""),[w,N]=R.useState(!1),[b,T]=R.useState(!1),j=Pe.useRef(null);Pe.useEffect(()=>{e("Logix - Consultar Stock")},[e]),Pe.useEffect(()=>(w&&tl(async()=>{const{Html5Qrcode:C}=await Promise.resolve().then(()=>cl);return{Html5Qrcode:C}},void 0).then(({Html5Qrcode:C})=>{j.current&&j.current.clear().catch(console.error);const E=new C("reader");j.current=E,E.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},k=>{s(k.toUpperCase()),M()},k=>{}).catch(k=>{console.error("Error starting scanner",k),he.error("Error al iniciar cmara: "+k),N(!1)})}),()=>{j.current&&j.current.isScanning&&j.current.stop().then(()=>j.current.clear()).catch(console.error)}),[w]);const B=()=>{j.current&&j.current.applyVideoConstraints({advanced:[{torch:!b}]}).then(()=>T(!b)).catch(C=>{console.error(C),he.error("Flash no disponible")})},M=()=>{j.current?j.current.stop().then(()=>{j.current.clear(),N(!1)}).catch(console.error):N(!1)},H=async C=>{if(C.preventDefault(),!!t.trim()){x(!0),y(""),u(null);try{const E=await fetch(`http://localhost:8000/api/find_item/${encodeURIComponent(t)}/NA`),k=await E.json();E.ok?u(k):(y(k.error||"Item no encontrado"),he.error(k.error||"Item no encontrado"))}catch(E){console.error(E),y("Error de conexin"),he.error("Error de conexin al servidor")}finally{x(!1)}}},_=()=>{s(""),u(null),y("")};return c.jsxs("div",{className:"container-wrapper max-w-4xl mx-auto px-4 py-8",children:[c.jsx(Ks,{position:"top-right",autoClose:3e3}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden mb-6 border border-gray-200",children:[c.jsx("div",{className:"bg-gray-50 text-gray-900 px-6 py-4 border-b border-gray-200",children:c.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Bsqueda de Stock"]})}),c.jsx("div",{className:"p-6",children:c.jsxs("form",{onSubmit:H,className:"flex flex-col md:flex-row gap-4",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("label",{className:"form-label mb-1",children:"Cdigo de Item"}),c.jsx("input",{type:"text",value:t,onChange:C=>s(C.target.value.toUpperCase()),className:"w-full uppercase",placeholder:"Ej: 80205555",autoFocus:!0})]}),c.jsxs("div",{className:"flex items-end gap-2",children:[c.jsx("button",{type:"button",onClick:()=>N(!0),className:"btn-sap btn-secondary h-[38px] px-3",title:"Escanear Cdigo",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:[c.jsx("path",{d:"M0 .5A.5.5 0 0 1 .5 0h3a.5.5 0 0 1 0 1H1v2.5a.5.5 0 0 1-1 0zm12 0a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0V1h-2.5a.5.5 0 0 1-.5-.5M.5 12a.5.5 0 0 1 .5.5V15h2.5a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5m15 0a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1 0-1H15v-2.5a.5.5 0 0 1 .5-.5M4 4h1v1H4z"}),c.jsx("path",{d:"M7 2H2v5h5zM3 3h3v3H3zm2 8H4v1h1z"}),c.jsx("path",{d:"M7 9H2v5h5zm-4 1h3v3H3zm8-6h1v1h-1z"}),c.jsx("path",{d:"M9 2h5v5H9zm1 1v3h3V3zM8 8v2h1v1H8v1h2v-2h1v2h1v-1h2v-1h-3V8zm2 2H9V9h1zm4 2h-1v1h-2v1h3zm-4 2v-1H8v1z"}),c.jsx("path",{d:"M12 9h2V8h-2z"})]})}),c.jsx("button",{type:"submit",className:"btn-sap btn-primary h-[38px]",disabled:f,children:f?"Buscando...":"Consultar"}),c.jsx("button",{type:"button",onClick:_,className:"btn-sap btn-secondary h-[38px]",children:"Limpiar"})]})]})})]}),a&&c.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden border border-gray-200 animate-fade-in",children:[c.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[c.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:a.itemCode}),c.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${parseInt(a.physicalQty||0)>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:parseInt(a.physicalQty||0)>0?"EN STOCK":"SIN STOCK"})]}),c.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"col-span-1 md:col-span-2",children:[c.jsx("label",{className:"form-label text-gray-500",children:"Descripcin"}),c.jsx("div",{className:"text-gray-900 font-medium text-lg",children:a.description})]}),c.jsxs("div",{children:[c.jsx("label",{className:"form-label text-gray-500",children:"Ubicacin Principal"}),c.jsx("div",{className:"data-field bg-blue-50 text-blue-900 border-blue-200",children:a.binLocation||"N/A"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"form-label text-gray-500",children:"Stock Fsico"}),c.jsx("div",{className:"data-field font-bold text-lg",children:a.physicalQty||0})]}),a.aditionalBins&&c.jsxs("div",{className:"col-span-1 md:col-span-2",children:[c.jsx("label",{className:"form-label text-gray-500",children:"Ubicaciones Adicionales"}),c.jsx("div",{className:"data-field text-sm",children:a.aditionalBins})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 col-span-1 md:col-span-2 border-t pt-4 mt-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"form-label text-gray-500",children:"Peso (kg)"}),c.jsx("div",{children:a.weight||"-"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"form-label text-gray-500",children:"Cantidad GRN"}),c.jsx("div",{children:a.defaultQtyGrn||"-"})]})]})]})]}),!a&&!m&&c.jsxs("div",{className:"text-center text-gray-500 mt-12",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto mb-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),c.jsx("p",{children:"Ingrese un cdigo de item para consultar su disponibilidad y ubicacin."})]}),w&&c.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg relative",children:[c.jsx("h3",{className:"text-center font-bold text-lg mb-4 text-gray-800",children:"Apunta la cmara al cdigo de barras"}),c.jsx("div",{id:"reader",className:"rounded-lg overflow-hidden mb-4 border-2 border-gray-100"}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:B,className:`flex items-center justify-center w-14 h-12 rounded bg-[#34495e] hover:bg-[#2c3e50] text-white transition-colors ${b?"ring-2 ring-yellow-400":""}`,title:b?"Apagar Flash":"Encender Flash",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 16 16",children:c.jsx("path",{d:"M2 6a6 6 0 1 1 10.174 4.31c-.203.196-.359.4-.453.619l-.762 1.769A.5.5 0 0 1 10.5 13a.5.5 0 0 1 0 1 .5.5 0 0 1 0 1l-.224.447a1 1 0 0 1-.894.553H6.618a1 1 0 0 1-.894-.553L5.5 15a.5.5 0 0 1 0-1 .5.5 0 0 1 0-1 .5.5 0 0 1-.46-.302l-.761-1.77a1.964 1.964 0 0 0-.453-.618A5.984 5.984 0 0 1 2 6zm6-5a5 5 0 0 0-3.479 8.592c.263.254.514.564.676.941L5.83 12h4.342l.632-1.467c.162-.377.413-.687.676-.941A5 5 0 0 0 8 1z"})})}),c.jsx("button",{onClick:M,className:"flex-grow bg-[#d32f2f] hover:bg-[#b71c1c] text-white font-bold py-2 px-4 rounded transition-colors text-lg",children:"Cancelar"})]})]})})]})},Vy=()=>{const{setTitle:e}=sn(),[t,s]=R.useState([]),[a,u]=R.useState(!0),[f,x]=R.useState(null),[m,y]=R.useState(null);R.useEffect(()=>{e("Historial de Auditoras de Picking")},[]),R.useEffect(()=>{(async()=>{try{const T=await fetch("http://localhost:8000/api/views/view_picking_audits");if(!T.ok)throw new Error("Error al cargar auditoras");const j=await T.json();s(j)}catch(T){x(T.message)}finally{u(!1)}})()},[]);const w=b=>{y(m===b?null:b)},N=b=>b?new Date(b).toLocaleString():"";return c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a&&c.jsx("div",{className:"flex justify-center items-center py-12",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#0070d2]"})}),f&&c.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6",children:c.jsx("p",{className:"text-red-700",children:f})}),!a&&!f&&c.jsx("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden border border-gray-200",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full leading-normal",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b border-gray-200 text-left text-xs font-bold uppercase tracking-wider",children:[c.jsx("th",{className:"px-5 py-3 text-center w-10"}),c.jsx("th",{className:"px-5 py-3",children:"ID"}),c.jsx("th",{className:"px-5 py-3",children:"Pedido"}),c.jsx("th",{className:"px-5 py-3",children:"Despacho"}),c.jsx("th",{className:"px-5 py-3",children:"Cliente"}),c.jsx("th",{className:"px-5 py-3",children:"Usuario"}),c.jsx("th",{className:"px-5 py-3",children:"Fecha"}),c.jsx("th",{className:"px-5 py-3 text-center",children:"Estado"}),c.jsx("th",{className:"px-5 py-3 text-center",children:"Acciones"})]})}),c.jsx("tbody",{children:t.map(b=>c.jsxs(Pe.Fragment,{children:[c.jsxs("tr",{className:`border-b border-gray-200 hover:bg-gray-50 transition-colors cursor-pointer ${m===b.id?"bg-blue-50":""}`,onClick:()=>w(b.id),children:[c.jsx("td",{className:"px-5 py-4 text-center",children:c.jsx("svg",{className:`w-5 h-5 text-gray-500 transform transition-transform duration-200 ${m===b.id?"rotate-90":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),c.jsx("td",{className:"px-5 py-4 text-sm font-medium text-gray-900",children:b.id}),c.jsx("td",{className:"px-5 py-4 text-sm text-[#0070d2] font-semibold",children:b.order_number}),c.jsx("td",{className:"px-5 py-4 text-sm text-gray-600",children:b.despatch_number}),c.jsx("td",{className:"px-5 py-4 text-sm text-gray-600",children:b.customer_name||"N/A"}),c.jsx("td",{className:"px-5 py-4 text-sm text-gray-600",children:b.username}),c.jsx("td",{className:"px-5 py-4 text-sm text-gray-600",children:N(b.timestamp)}),c.jsx("td",{className:"px-5 py-4 text-center",children:c.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${b.status==="Completado"||b.status==="Aprobado"?"bg-green-100 text-green-800":b.status==="Rechazado"||b.status==="Error"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:b.status})}),c.jsx("td",{className:"px-5 py-4 text-center",children:c.jsx(or,{to:`/print-packing-list/${b.id}`,className:"text-gray-500 hover:text-[#0070d2]",onClick:T=>T.stopPropagation(),title:"Imprimir Packing List",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})})})})]}),m===b.id&&c.jsx("tr",{className:"bg-gray-50",children:c.jsx("td",{colSpan:"9",className:"p-4 border-b border-gray-200 shadow-inner",children:c.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4",children:[c.jsx("h4",{className:"font-bold text-gray-700 mb-3 text-sm uppercase tracking-wide",children:"Detalle de tems Auditados"}),c.jsxs("table",{className:"w-full text-sm",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b border-gray-200 text-gray-500",children:[c.jsx("th",{className:"py-2 text-left",children:"Cdigo Item"}),c.jsx("th",{className:"py-2 text-left",children:"Descripcin"}),c.jsx("th",{className:"py-2 text-right",children:"Cant. Req."}),c.jsx("th",{className:"py-2 text-right",children:"Cant. Escaneada"}),c.jsx("th",{className:"py-2 text-right",children:"Diferencia"})]})}),c.jsx("tbody",{children:b.items.map((T,j)=>c.jsxs("tr",{className:"border-b border-gray-100 last:border-0 hover:bg-gray-50",children:[c.jsx("td",{className:"py-2 font-medium",children:T.item_code}),c.jsx("td",{className:"py-2 text-gray-600",children:T.description}),c.jsx("td",{className:"py-2 text-right",children:T.qty_req}),c.jsx("td",{className:"py-2 text-right",children:T.qty_scan}),c.jsx("td",{className:`py-2 text-right font-bold ${T.difference!==0?"text-red-600":"text-green-600"}`,children:T.difference>0?`+${T.difference}`:T.difference})]},j))})]})]})})})]},b.id))})]})})})]})};var ii={},Hy=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},tx={},gn={};let fd;const Wy=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];gn.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};gn.getSymbolTotalCodewords=function(t){return Wy[t]};gn.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};gn.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');fd=t};gn.isKanjiModeEnabled=function(){return typeof fd<"u"};gn.toSJIS=function(t){return fd(t)};var il={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+s)}}e.isValid=function(a){return a&&typeof a.bit<"u"&&a.bit>=0&&a.bit<4},e.from=function(a,u){if(e.isValid(a))return a;try{return t(a)}catch{return u}}})(il);function nx(){this.buffer=[],this.length=0}nx.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let s=0;s<t;s++)this.putBit((e>>>t-s-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var Gy=nx;function ma(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}ma.prototype.set=function(e,t,s,a){const u=e*this.size+t;this.data[u]=s,a&&(this.reservedBit[u]=!0)};ma.prototype.get=function(e,t){return this.data[e*this.size+t]};ma.prototype.xor=function(e,t,s){this.data[e*this.size+t]^=s};ma.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var Xy=ma,rx={};(function(e){const t=gn.getSymbolSize;e.getRowColCoords=function(a){if(a===1)return[];const u=Math.floor(a/7)+2,f=t(a),x=f===145?26:Math.ceil((f-13)/(2*u-2))*2,m=[f-7];for(let y=1;y<u-1;y++)m[y]=m[y-1]-x;return m.push(6),m.reverse()},e.getPositions=function(a){const u=[],f=e.getRowColCoords(a),x=f.length;for(let m=0;m<x;m++)for(let y=0;y<x;y++)m===0&&y===0||m===0&&y===x-1||m===x-1&&y===0||u.push([f[m],f[y]]);return u}})(rx);var sx={};const Yy=gn.getSymbolSize,s1=7;sx.getPositions=function(t){const s=Yy(t);return[[0,0],[s-s1,0],[0,s-s1]]};var ix={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(u){return u!=null&&u!==""&&!isNaN(u)&&u>=0&&u<=7},e.from=function(u){return e.isValid(u)?parseInt(u,10):void 0},e.getPenaltyN1=function(u){const f=u.size;let x=0,m=0,y=0,w=null,N=null;for(let b=0;b<f;b++){m=y=0,w=N=null;for(let T=0;T<f;T++){let j=u.get(b,T);j===w?m++:(m>=5&&(x+=t.N1+(m-5)),w=j,m=1),j=u.get(T,b),j===N?y++:(y>=5&&(x+=t.N1+(y-5)),N=j,y=1)}m>=5&&(x+=t.N1+(m-5)),y>=5&&(x+=t.N1+(y-5))}return x},e.getPenaltyN2=function(u){const f=u.size;let x=0;for(let m=0;m<f-1;m++)for(let y=0;y<f-1;y++){const w=u.get(m,y)+u.get(m,y+1)+u.get(m+1,y)+u.get(m+1,y+1);(w===4||w===0)&&x++}return x*t.N2},e.getPenaltyN3=function(u){const f=u.size;let x=0,m=0,y=0;for(let w=0;w<f;w++){m=y=0;for(let N=0;N<f;N++)m=m<<1&2047|u.get(w,N),N>=10&&(m===1488||m===93)&&x++,y=y<<1&2047|u.get(N,w),N>=10&&(y===1488||y===93)&&x++}return x*t.N3},e.getPenaltyN4=function(u){let f=0;const x=u.data.length;for(let y=0;y<x;y++)f+=u.data[y];return Math.abs(Math.ceil(f*100/x/5)-10)*t.N4};function s(a,u,f){switch(a){case e.Patterns.PATTERN000:return(u+f)%2===0;case e.Patterns.PATTERN001:return u%2===0;case e.Patterns.PATTERN010:return f%3===0;case e.Patterns.PATTERN011:return(u+f)%3===0;case e.Patterns.PATTERN100:return(Math.floor(u/2)+Math.floor(f/3))%2===0;case e.Patterns.PATTERN101:return u*f%2+u*f%3===0;case e.Patterns.PATTERN110:return(u*f%2+u*f%3)%2===0;case e.Patterns.PATTERN111:return(u*f%3+(u+f)%2)%2===0;default:throw new Error("bad maskPattern:"+a)}}e.applyMask=function(u,f){const x=f.size;for(let m=0;m<x;m++)for(let y=0;y<x;y++)f.isReserved(y,m)||f.xor(y,m,s(u,y,m))},e.getBestMask=function(u,f){const x=Object.keys(e.Patterns).length;let m=0,y=1/0;for(let w=0;w<x;w++){f(w),e.applyMask(w,u);const N=e.getPenaltyN1(u)+e.getPenaltyN2(u)+e.getPenaltyN3(u)+e.getPenaltyN4(u);e.applyMask(w,u),N<y&&(y=N,m=w)}return m}})(ix);var al={};const Sr=il,qa=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Ka=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];al.getBlocksCount=function(t,s){switch(s){case Sr.L:return qa[(t-1)*4+0];case Sr.M:return qa[(t-1)*4+1];case Sr.Q:return qa[(t-1)*4+2];case Sr.H:return qa[(t-1)*4+3];default:return}};al.getTotalCodewordsCount=function(t,s){switch(s){case Sr.L:return Ka[(t-1)*4+0];case Sr.M:return Ka[(t-1)*4+1];case Sr.Q:return Ka[(t-1)*4+2];case Sr.H:return Ka[(t-1)*4+3];default:return}};var ax={},ol={};const Ui=new Uint8Array(512),Do=new Uint8Array(256);(function(){let t=1;for(let s=0;s<255;s++)Ui[s]=t,Do[t]=s,t<<=1,t&256&&(t^=285);for(let s=255;s<512;s++)Ui[s]=Ui[s-255]})();ol.log=function(t){if(t<1)throw new Error("log("+t+")");return Do[t]};ol.exp=function(t){return Ui[t]};ol.mul=function(t,s){return t===0||s===0?0:Ui[Do[t]+Do[s]]};(function(e){const t=ol;e.mul=function(a,u){const f=new Uint8Array(a.length+u.length-1);for(let x=0;x<a.length;x++)for(let m=0;m<u.length;m++)f[x+m]^=t.mul(a[x],u[m]);return f},e.mod=function(a,u){let f=new Uint8Array(a);for(;f.length-u.length>=0;){const x=f[0];for(let y=0;y<u.length;y++)f[y]^=t.mul(u[y],x);let m=0;for(;m<f.length&&f[m]===0;)m++;f=f.slice(m)}return f},e.generateECPolynomial=function(a){let u=new Uint8Array([1]);for(let f=0;f<a;f++)u=e.mul(u,new Uint8Array([1,t.exp(f)]));return u}})(ax);const ox=ax;function hd(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}hd.prototype.initialize=function(t){this.degree=t,this.genPoly=ox.generateECPolynomial(this.degree)};hd.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(t.length+this.degree);s.set(t);const a=ox.mod(s,this.genPoly),u=this.degree-a.length;if(u>0){const f=new Uint8Array(this.degree);return f.set(a,u),f}return a};var qy=hd,lx={},zr={},xd={};xd.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var Kn={};const cx="[0-9]+",Ky="[A-Z $%*+\\-./:]+";let oa="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";oa=oa.replace(/u/g,"\\u");const Zy="(?:(?![A-Z0-9 $%*+\\-./:]|"+oa+`)(?:.|[\r
]))+`;Kn.KANJI=new RegExp(oa,"g");Kn.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Kn.BYTE=new RegExp(Zy,"g");Kn.NUMERIC=new RegExp(cx,"g");Kn.ALPHANUMERIC=new RegExp(Ky,"g");const Qy=new RegExp("^"+oa+"$"),Jy=new RegExp("^"+cx+"$"),$y=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Kn.testKanji=function(t){return Qy.test(t)};Kn.testNumeric=function(t){return Jy.test(t)};Kn.testAlphanumeric=function(t){return $y.test(t)};(function(e){const t=xd,s=Kn;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(f,x){if(!f.ccBits)throw new Error("Invalid mode: "+f);if(!t.isValid(x))throw new Error("Invalid version: "+x);return x>=1&&x<10?f.ccBits[0]:x<27?f.ccBits[1]:f.ccBits[2]},e.getBestModeForData=function(f){return s.testNumeric(f)?e.NUMERIC:s.testAlphanumeric(f)?e.ALPHANUMERIC:s.testKanji(f)?e.KANJI:e.BYTE},e.toString=function(f){if(f&&f.id)return f.id;throw new Error("Invalid mode")},e.isValid=function(f){return f&&f.bit&&f.ccBits};function a(u){if(typeof u!="string")throw new Error("Param is not a string");switch(u.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+u)}}e.from=function(f,x){if(e.isValid(f))return f;try{return a(f)}catch{return x}}})(zr);(function(e){const t=gn,s=al,a=il,u=zr,f=xd,x=7973,m=t.getBCHDigit(x);function y(T,j,B){for(let M=1;M<=40;M++)if(j<=e.getCapacity(M,B,T))return M}function w(T,j){return u.getCharCountIndicator(T,j)+4}function N(T,j){let B=0;return T.forEach(function(M){const H=w(M.mode,j);B+=H+M.getBitsLength()}),B}function b(T,j){for(let B=1;B<=40;B++)if(N(T,B)<=e.getCapacity(B,j,u.MIXED))return B}e.from=function(j,B){return f.isValid(j)?parseInt(j,10):B},e.getCapacity=function(j,B,M){if(!f.isValid(j))throw new Error("Invalid QR Code version");typeof M>"u"&&(M=u.BYTE);const H=t.getSymbolTotalCodewords(j),_=s.getTotalCodewordsCount(j,B),C=(H-_)*8;if(M===u.MIXED)return C;const E=C-w(M,j);switch(M){case u.NUMERIC:return Math.floor(E/10*3);case u.ALPHANUMERIC:return Math.floor(E/11*2);case u.KANJI:return Math.floor(E/13);case u.BYTE:default:return Math.floor(E/8)}},e.getBestVersionForData=function(j,B){let M;const H=a.from(B,a.M);if(Array.isArray(j)){if(j.length>1)return b(j,H);if(j.length===0)return 1;M=j[0]}else M=j;return y(M.mode,M.getLength(),H)},e.getEncodedBits=function(j){if(!f.isValid(j)||j<7)throw new Error("Invalid QR Code version");let B=j<<12;for(;t.getBCHDigit(B)-m>=0;)B^=x<<t.getBCHDigit(B)-m;return j<<12|B}})(lx);var ux={};const cu=gn,dx=1335,ew=21522,i1=cu.getBCHDigit(dx);ux.getEncodedBits=function(t,s){const a=t.bit<<3|s;let u=a<<10;for(;cu.getBCHDigit(u)-i1>=0;)u^=dx<<cu.getBCHDigit(u)-i1;return(a<<10|u)^ew};var fx={};const tw=zr;function Zs(e){this.mode=tw.NUMERIC,this.data=e.toString()}Zs.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};Zs.prototype.getLength=function(){return this.data.length};Zs.prototype.getBitsLength=function(){return Zs.getBitsLength(this.data.length)};Zs.prototype.write=function(t){let s,a,u;for(s=0;s+3<=this.data.length;s+=3)a=this.data.substr(s,3),u=parseInt(a,10),t.put(u,10);const f=this.data.length-s;f>0&&(a=this.data.substr(s),u=parseInt(a,10),t.put(u,f*3+1))};var nw=Zs;const rw=zr,rc=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Qs(e){this.mode=rw.ALPHANUMERIC,this.data=e}Qs.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};Qs.prototype.getLength=function(){return this.data.length};Qs.prototype.getBitsLength=function(){return Qs.getBitsLength(this.data.length)};Qs.prototype.write=function(t){let s;for(s=0;s+2<=this.data.length;s+=2){let a=rc.indexOf(this.data[s])*45;a+=rc.indexOf(this.data[s+1]),t.put(a,11)}this.data.length%2&&t.put(rc.indexOf(this.data[s]),6)};var sw=Qs;const iw=zr;function Js(e){this.mode=iw.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}Js.getBitsLength=function(t){return t*8};Js.prototype.getLength=function(){return this.data.length};Js.prototype.getBitsLength=function(){return Js.getBitsLength(this.data.length)};Js.prototype.write=function(e){for(let t=0,s=this.data.length;t<s;t++)e.put(this.data[t],8)};var aw=Js;const ow=zr,lw=gn;function $s(e){this.mode=ow.KANJI,this.data=e}$s.getBitsLength=function(t){return t*13};$s.prototype.getLength=function(){return this.data.length};$s.prototype.getBitsLength=function(){return $s.getBitsLength(this.data.length)};$s.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let s=lw.toSJIS(this.data[t]);if(s>=33088&&s<=40956)s-=33088;else if(s>=57408&&s<=60351)s-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);s=(s>>>8&255)*192+(s&255),e.put(s,13)}};var cw=$s,hx={exports:{}};(function(e){var t={single_source_shortest_paths:function(s,a,u){var f={},x={};x[a]=0;var m=t.PriorityQueue.make();m.push(a,0);for(var y,w,N,b,T,j,B,M,H;!m.empty();){y=m.pop(),w=y.value,b=y.cost,T=s[w]||{};for(N in T)T.hasOwnProperty(N)&&(j=T[N],B=b+j,M=x[N],H=typeof x[N]>"u",(H||M>B)&&(x[N]=B,m.push(N,B),f[N]=w))}if(typeof u<"u"&&typeof x[u]>"u"){var _=["Could not find a path from ",a," to ",u,"."].join("");throw new Error(_)}return f},extract_shortest_path_from_predecessor_list:function(s,a){for(var u=[],f=a;f;)u.push(f),s[f],f=s[f];return u.reverse(),u},find_path:function(s,a,u){var f=t.single_source_shortest_paths(s,a,u);return t.extract_shortest_path_from_predecessor_list(f,u)},PriorityQueue:{make:function(s){var a=t.PriorityQueue,u={},f;s=s||{};for(f in a)a.hasOwnProperty(f)&&(u[f]=a[f]);return u.queue=[],u.sorter=s.sorter||a.default_sorter,u},default_sorter:function(s,a){return s.cost-a.cost},push:function(s,a){var u={value:s,cost:a};this.queue.push(u),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(hx);var uw=hx.exports;(function(e){const t=zr,s=nw,a=sw,u=aw,f=cw,x=Kn,m=gn,y=uw;function w(_){return unescape(encodeURIComponent(_)).length}function N(_,C,E){const k=[];let V;for(;(V=_.exec(E))!==null;)k.push({data:V[0],index:V.index,mode:C,length:V[0].length});return k}function b(_){const C=N(x.NUMERIC,t.NUMERIC,_),E=N(x.ALPHANUMERIC,t.ALPHANUMERIC,_);let k,V;return m.isKanjiModeEnabled()?(k=N(x.BYTE,t.BYTE,_),V=N(x.KANJI,t.KANJI,_)):(k=N(x.BYTE_KANJI,t.BYTE,_),V=[]),C.concat(E,k,V).sort(function(L,X){return L.index-X.index}).map(function(L){return{data:L.data,mode:L.mode,length:L.length}})}function T(_,C){switch(C){case t.NUMERIC:return s.getBitsLength(_);case t.ALPHANUMERIC:return a.getBitsLength(_);case t.KANJI:return f.getBitsLength(_);case t.BYTE:return u.getBitsLength(_)}}function j(_){return _.reduce(function(C,E){const k=C.length-1>=0?C[C.length-1]:null;return k&&k.mode===E.mode?(C[C.length-1].data+=E.data,C):(C.push(E),C)},[])}function B(_){const C=[];for(let E=0;E<_.length;E++){const k=_[E];switch(k.mode){case t.NUMERIC:C.push([k,{data:k.data,mode:t.ALPHANUMERIC,length:k.length},{data:k.data,mode:t.BYTE,length:k.length}]);break;case t.ALPHANUMERIC:C.push([k,{data:k.data,mode:t.BYTE,length:k.length}]);break;case t.KANJI:C.push([k,{data:k.data,mode:t.BYTE,length:w(k.data)}]);break;case t.BYTE:C.push([{data:k.data,mode:t.BYTE,length:w(k.data)}])}}return C}function M(_,C){const E={},k={start:{}};let V=["start"];for(let U=0;U<_.length;U++){const L=_[U],X=[];for(let P=0;P<L.length;P++){const J=L[P],ee=""+U+P;X.push(ee),E[ee]={node:J,lastCount:0},k[ee]={};for(let ne=0;ne<V.length;ne++){const fe=V[ne];E[fe]&&E[fe].node.mode===J.mode?(k[fe][ee]=T(E[fe].lastCount+J.length,J.mode)-T(E[fe].lastCount,J.mode),E[fe].lastCount+=J.length):(E[fe]&&(E[fe].lastCount=J.length),k[fe][ee]=T(J.length,J.mode)+4+t.getCharCountIndicator(J.mode,C))}}V=X}for(let U=0;U<V.length;U++)k[V[U]].end=0;return{map:k,table:E}}function H(_,C){let E;const k=t.getBestModeForData(_);if(E=t.from(C,k),E!==t.BYTE&&E.bit<k.bit)throw new Error('"'+_+'" cannot be encoded with mode '+t.toString(E)+`.
 Suggested mode is: `+t.toString(k));switch(E===t.KANJI&&!m.isKanjiModeEnabled()&&(E=t.BYTE),E){case t.NUMERIC:return new s(_);case t.ALPHANUMERIC:return new a(_);case t.KANJI:return new f(_);case t.BYTE:return new u(_)}}e.fromArray=function(C){return C.reduce(function(E,k){return typeof k=="string"?E.push(H(k,null)):k.data&&E.push(H(k.data,k.mode)),E},[])},e.fromString=function(C,E){const k=b(C,m.isKanjiModeEnabled()),V=B(k),U=M(V,E),L=y.find_path(U.map,"start","end"),X=[];for(let P=1;P<L.length-1;P++)X.push(U.table[L[P]].node);return e.fromArray(j(X))},e.rawSplit=function(C){return e.fromArray(b(C,m.isKanjiModeEnabled()))}})(fx);const ll=gn,sc=il,dw=Gy,fw=Xy,hw=rx,xw=sx,uu=ix,du=al,gw=qy,Mo=lx,pw=ux,mw=zr,ic=fx;function yw(e,t){const s=e.size,a=xw.getPositions(t);for(let u=0;u<a.length;u++){const f=a[u][0],x=a[u][1];for(let m=-1;m<=7;m++)if(!(f+m<=-1||s<=f+m))for(let y=-1;y<=7;y++)x+y<=-1||s<=x+y||(m>=0&&m<=6&&(y===0||y===6)||y>=0&&y<=6&&(m===0||m===6)||m>=2&&m<=4&&y>=2&&y<=4?e.set(f+m,x+y,!0,!0):e.set(f+m,x+y,!1,!0))}}function ww(e){const t=e.size;for(let s=8;s<t-8;s++){const a=s%2===0;e.set(s,6,a,!0),e.set(6,s,a,!0)}}function vw(e,t){const s=hw.getPositions(t);for(let a=0;a<s.length;a++){const u=s[a][0],f=s[a][1];for(let x=-2;x<=2;x++)for(let m=-2;m<=2;m++)x===-2||x===2||m===-2||m===2||x===0&&m===0?e.set(u+x,f+m,!0,!0):e.set(u+x,f+m,!1,!0)}}function bw(e,t){const s=e.size,a=Mo.getEncodedBits(t);let u,f,x;for(let m=0;m<18;m++)u=Math.floor(m/3),f=m%3+s-8-3,x=(a>>m&1)===1,e.set(u,f,x,!0),e.set(f,u,x,!0)}function ac(e,t,s){const a=e.size,u=pw.getEncodedBits(t,s);let f,x;for(f=0;f<15;f++)x=(u>>f&1)===1,f<6?e.set(f,8,x,!0):f<8?e.set(f+1,8,x,!0):e.set(a-15+f,8,x,!0),f<8?e.set(8,a-f-1,x,!0):f<9?e.set(8,15-f-1+1,x,!0):e.set(8,15-f-1,x,!0);e.set(a-8,8,1,!0)}function Cw(e,t){const s=e.size;let a=-1,u=s-1,f=7,x=0;for(let m=s-1;m>0;m-=2)for(m===6&&m--;;){for(let y=0;y<2;y++)if(!e.isReserved(u,m-y)){let w=!1;x<t.length&&(w=(t[x]>>>f&1)===1),e.set(u,m-y,w),f--,f===-1&&(x++,f=7)}if(u+=a,u<0||s<=u){u-=a,a=-a;break}}}function Ew(e,t,s){const a=new dw;s.forEach(function(y){a.put(y.mode.bit,4),a.put(y.getLength(),mw.getCharCountIndicator(y.mode,e)),y.write(a)});const u=ll.getSymbolTotalCodewords(e),f=du.getTotalCodewordsCount(e,t),x=(u-f)*8;for(a.getLengthInBits()+4<=x&&a.put(0,4);a.getLengthInBits()%8!==0;)a.putBit(0);const m=(x-a.getLengthInBits())/8;for(let y=0;y<m;y++)a.put(y%2?17:236,8);return Nw(a,e,t)}function Nw(e,t,s){const a=ll.getSymbolTotalCodewords(t),u=du.getTotalCodewordsCount(t,s),f=a-u,x=du.getBlocksCount(t,s),m=a%x,y=x-m,w=Math.floor(a/x),N=Math.floor(f/x),b=N+1,T=w-N,j=new gw(T);let B=0;const M=new Array(x),H=new Array(x);let _=0;const C=new Uint8Array(e.buffer);for(let L=0;L<x;L++){const X=L<y?N:b;M[L]=C.slice(B,B+X),H[L]=j.encode(M[L]),B+=X,_=Math.max(_,X)}const E=new Uint8Array(a);let k=0,V,U;for(V=0;V<_;V++)for(U=0;U<x;U++)V<M[U].length&&(E[k++]=M[U][V]);for(V=0;V<T;V++)for(U=0;U<x;U++)E[k++]=H[U][V];return E}function Aw(e,t,s,a){let u;if(Array.isArray(e))u=ic.fromArray(e);else if(typeof e=="string"){let w=t;if(!w){const N=ic.rawSplit(e);w=Mo.getBestVersionForData(N,s)}u=ic.fromString(e,w||40)}else throw new Error("Invalid data");const f=Mo.getBestVersionForData(u,s);if(!f)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=f;else if(t<f)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+f+`.
`);const x=Ew(t,s,u),m=ll.getSymbolSize(t),y=new fw(m);return yw(y,t),ww(y),vw(y,t),ac(y,s,0),t>=7&&bw(y,t),Cw(y,x),isNaN(a)&&(a=uu.getBestMask(y,ac.bind(null,y,s))),uu.applyMask(a,y),ac(y,s,a),{modules:y,version:t,errorCorrectionLevel:s,maskPattern:a,segments:u}}tx.create=function(t,s){if(typeof t>"u"||t==="")throw new Error("No input text");let a=sc.M,u,f;return typeof s<"u"&&(a=sc.from(s.errorCorrectionLevel,sc.M),u=Mo.from(s.version),f=uu.from(s.maskPattern),s.toSJISFunc&&ll.setToSJISFunction(s.toSJISFunc)),Aw(t,u,a,f)};var xx={},gd={};(function(e){function t(s){if(typeof s=="number"&&(s=s.toString()),typeof s!="string")throw new Error("Color should be defined as hex string");let a=s.slice().replace("#","").split("");if(a.length<3||a.length===5||a.length>8)throw new Error("Invalid hex color: "+s);(a.length===3||a.length===4)&&(a=Array.prototype.concat.apply([],a.map(function(f){return[f,f]}))),a.length===6&&a.push("F","F");const u=parseInt(a.join(""),16);return{r:u>>24&255,g:u>>16&255,b:u>>8&255,a:u&255,hex:"#"+a.slice(0,6).join("")}}e.getOptions=function(a){a||(a={}),a.color||(a.color={});const u=typeof a.margin>"u"||a.margin===null||a.margin<0?4:a.margin,f=a.width&&a.width>=21?a.width:void 0,x=a.scale||4;return{width:f,scale:f?4:x,margin:u,color:{dark:t(a.color.dark||"#000000ff"),light:t(a.color.light||"#ffffffff")},type:a.type,rendererOpts:a.rendererOpts||{}}},e.getScale=function(a,u){return u.width&&u.width>=a+u.margin*2?u.width/(a+u.margin*2):u.scale},e.getImageWidth=function(a,u){const f=e.getScale(a,u);return Math.floor((a+u.margin*2)*f)},e.qrToImageData=function(a,u,f){const x=u.modules.size,m=u.modules.data,y=e.getScale(x,f),w=Math.floor((x+f.margin*2)*y),N=f.margin*y,b=[f.color.light,f.color.dark];for(let T=0;T<w;T++)for(let j=0;j<w;j++){let B=(T*w+j)*4,M=f.color.light;if(T>=N&&j>=N&&T<w-N&&j<w-N){const H=Math.floor((T-N)/y),_=Math.floor((j-N)/y);M=b[m[H*x+_]?1:0]}a[B++]=M.r,a[B++]=M.g,a[B++]=M.b,a[B]=M.a}}})(gd);(function(e){const t=gd;function s(u,f,x){u.clearRect(0,0,f.width,f.height),f.style||(f.style={}),f.height=x,f.width=x,f.style.height=x+"px",f.style.width=x+"px"}function a(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(f,x,m){let y=m,w=x;typeof y>"u"&&(!x||!x.getContext)&&(y=x,x=void 0),x||(w=a()),y=t.getOptions(y);const N=t.getImageWidth(f.modules.size,y),b=w.getContext("2d"),T=b.createImageData(N,N);return t.qrToImageData(T.data,f,y),s(b,w,N),b.putImageData(T,0,0),w},e.renderToDataURL=function(f,x,m){let y=m;typeof y>"u"&&(!x||!x.getContext)&&(y=x,x=void 0),y||(y={});const w=e.render(f,x,y),N=y.type||"image/png",b=y.rendererOpts||{};return w.toDataURL(N,b.quality)}})(xx);var gx={};const Sw=gd;function a1(e,t){const s=e.a/255,a=t+'="'+e.hex+'"';return s<1?a+" "+t+'-opacity="'+s.toFixed(2).slice(1)+'"':a}function oc(e,t,s){let a=e+t;return typeof s<"u"&&(a+=" "+s),a}function _w(e,t,s){let a="",u=0,f=!1,x=0;for(let m=0;m<e.length;m++){const y=Math.floor(m%t),w=Math.floor(m/t);!y&&!f&&(f=!0),e[m]?(x++,m>0&&y>0&&e[m-1]||(a+=f?oc("M",y+s,.5+w+s):oc("m",u,0),u=0,f=!1),y+1<t&&e[m+1]||(a+=oc("h",x),x=0)):u++}return a}gx.render=function(t,s,a){const u=Sw.getOptions(s),f=t.modules.size,x=t.modules.data,m=f+u.margin*2,y=u.color.light.a?"<path "+a1(u.color.light,"fill")+' d="M0 0h'+m+"v"+m+'H0z"/>':"",w="<path "+a1(u.color.dark,"stroke")+' d="'+_w(x,f,u.margin)+'"/>',N='viewBox="0 0 '+m+" "+m+'"',T='<svg xmlns="http://www.w3.org/2000/svg" '+(u.width?'width="'+u.width+'" height="'+u.width+'" ':"")+N+' shape-rendering="crispEdges">'+y+w+`</svg>
`;return typeof a=="function"&&a(null,T),T};const Iw=Hy,fu=tx,px=xx,Tw=gx;function pd(e,t,s,a,u){const f=[].slice.call(arguments,1),x=f.length,m=typeof f[x-1]=="function";if(!m&&!Iw())throw new Error("Callback required as last argument");if(m){if(x<2)throw new Error("Too few arguments provided");x===2?(u=s,s=t,t=a=void 0):x===3&&(t.getContext&&typeof u>"u"?(u=a,a=void 0):(u=a,a=s,s=t,t=void 0))}else{if(x<1)throw new Error("Too few arguments provided");return x===1?(s=t,t=a=void 0):x===2&&!t.getContext&&(a=s,s=t,t=void 0),new Promise(function(y,w){try{const N=fu.create(s,a);y(e(N,t,a))}catch(N){w(N)}})}try{const y=fu.create(s,a);u(null,e(y,t,a))}catch(y){u(y)}}ii.create=fu.create;ii.toCanvas=pd.bind(null,px.render);ii.toDataURL=pd.bind(null,px.renderToDataURL);ii.toString=pd.bind(null,function(e,t,s){return Tw.render(e,s)});var ge;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ge||(ge={}));var o1=new Map([[ge.QR_CODE,"QR_CODE"],[ge.AZTEC,"AZTEC"],[ge.CODABAR,"CODABAR"],[ge.CODE_39,"CODE_39"],[ge.CODE_93,"CODE_93"],[ge.CODE_128,"CODE_128"],[ge.DATA_MATRIX,"DATA_MATRIX"],[ge.MAXICODE,"MAXICODE"],[ge.ITF,"ITF"],[ge.EAN_13,"EAN_13"],[ge.EAN_8,"EAN_8"],[ge.PDF_417,"PDF_417"],[ge.RSS_14,"RSS_14"],[ge.RSS_EXPANDED,"RSS_EXPANDED"],[ge.UPC_A,"UPC_A"],[ge.UPC_E,"UPC_E"],[ge.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),l1;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(l1||(l1={}));function jw(e){return Object.values(ge).includes(e)}var la;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(la||(la={}));var kw=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[la.SCAN_TYPE_CAMERA,la.SCAN_TYPE_FILE],e}(),mx=function(){function e(t,s){this.format=t,this.formatName=s}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!o1.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,o1.get(t))},e}(),c1=function(){function e(){}return e.createFromText=function(t){var s={text:t};return{decodedText:t,result:s}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),hu;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(hu||(hu={}));var Rw=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:hu.UNKWOWN_ERROR}},e}(),Ow=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,s){(this.verbose||s===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function Qn(e){return typeof e>"u"||e===null}var Ms=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),yx=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,s){if(typeof t!="object"){var a=typeof t;return s.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(a,"."),!0),!1}for(var u=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],f=new Set(u),x=Object.keys(t),m=0,y=x;m<y.length;m++){var w=y[m];if(f.has(w))return s.logError("".concat(w," is not supported videoConstaints."),!0),!1}return!0},e}(),xu={exports:{}};(function(e,t){(function(s,a){a(t)})(yi,function(s){function a(A){return A==null}var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,n){A.__proto__=n}||function(A,n){for(var r in n)n.hasOwnProperty(r)&&(A[r]=n[r])};function f(A,n){u(A,n);function r(){this.constructor=A}A.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}function x(A,n){var r=Object.setPrototypeOf;r?r(A,n):A.__proto__=n}function m(A,n){n===void 0&&(n=A.constructor);var r=Error.captureStackTrace;r&&r(A,n)}var y=function(A){f(n,A);function n(r){var i=this.constructor,o=A.call(this,r)||this;return Object.defineProperty(o,"name",{value:i.name,enumerable:!1}),x(o,i.prototype),m(o),o}return n}(Error);class w extends y{constructor(n=void 0){super(n),this.message=n}getKind(){return this.constructor.kind}}w.kind="Exception";class N extends w{}N.kind="ArgumentException";class b extends w{}b.kind="IllegalArgumentException";class T{constructor(n){if(this.binarizer=n,n===null)throw new b("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(n,r){return this.binarizer.getBlackRow(n,r)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(n,r,i,o){const l=this.binarizer.getLuminanceSource().crop(n,r,i,o);return new T(this.binarizer.createBinarizer(l))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new T(this.binarizer.createBinarizer(n))}rotateCounterClockwise45(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new T(this.binarizer.createBinarizer(n))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class j extends w{static getChecksumInstance(){return new j}}j.kind="ChecksumException";class B{constructor(n){this.source=n}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class M{static arraycopy(n,r,i,o,l){for(;l--;)i[o++]=n[r++]}static currentTimeMillis(){return Date.now()}}class H extends w{}H.kind="IndexOutOfBoundsException";class _ extends H{constructor(n=void 0,r=void 0){super(r),this.index=n,this.message=r}}_.kind="ArrayIndexOutOfBoundsException";class C{static fill(n,r){for(let i=0,o=n.length;i<o;i++)n[i]=r}static fillWithin(n,r,i,o){C.rangeCheck(n.length,r,i);for(let l=r;l<i;l++)n[l]=o}static rangeCheck(n,r,i){if(r>i)throw new b("fromIndex("+r+") > toIndex("+i+")");if(r<0)throw new _(r);if(i>n)throw new _(i)}static asList(...n){return n}static create(n,r,i){return Array.from({length:n}).map(l=>Array.from({length:r}).fill(i))}static createInt32Array(n,r,i){return Array.from({length:n}).map(l=>Int32Array.from({length:r}).fill(i))}static equals(n,r){if(!n||!r||!n.length||!r.length||n.length!==r.length)return!1;for(let i=0,o=n.length;i<o;i++)if(n[i]!==r[i])return!1;return!0}static hashCode(n){if(n===null)return 0;let r=1;for(const i of n)r=31*r+i;return r}static fillUint8Array(n,r){for(let i=0;i!==n.length;i++)n[i]=r}static copyOf(n,r){return n.slice(0,r)}static copyOfUint8Array(n,r){if(n.length<=r){const i=new Uint8Array(r);return i.set(n),i}return n.slice(0,r)}static copyOfRange(n,r,i){const o=i-r,l=new Int32Array(o);return M.arraycopy(n,r,l,0,o),l}static binarySearch(n,r,i){i===void 0&&(i=C.numberComparator);let o=0,l=n.length-1;for(;o<=l;){const d=l+o>>1,h=i(r,n[d]);if(h>0)o=d+1;else if(h<0)l=d-1;else return d}return-o-1}static numberComparator(n,r){return n-r}}class E{static numberOfTrailingZeros(n){let r;if(n===0)return 32;let i=31;return r=n<<16,r!==0&&(i-=16,n=r),r=n<<8,r!==0&&(i-=8,n=r),r=n<<4,r!==0&&(i-=4,n=r),r=n<<2,r!==0&&(i-=2,n=r),i-(n<<1>>>31)}static numberOfLeadingZeros(n){if(n===0)return 32;let r=1;return n>>>16||(r+=16,n<<=16),n>>>24||(r+=8,n<<=8),n>>>28||(r+=4,n<<=4),n>>>30||(r+=2,n<<=2),r-=n>>>31,r}static toHexString(n){return n.toString(16)}static toBinaryString(n){return String(parseInt(String(n),2))}static bitCount(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),n=n+(n>>>4)&252645135,n=n+(n>>>8),n=n+(n>>>16),n&63}static truncDivision(n,r){return Math.trunc(n/r)}static parseInt(n,r=void 0){return parseInt(n,r)}}E.MIN_VALUE_32_BITS=-2147483648,E.MAX_VALUE=Number.MAX_SAFE_INTEGER;class k{constructor(n,r){n===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=n,r==null?this.bits=k.makeArray(n):this.bits=r)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(n){if(n>this.bits.length*32){const r=k.makeArray(n);M.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}}get(n){return(this.bits[Math.floor(n/32)]&1<<(n&31))!==0}set(n){this.bits[Math.floor(n/32)]|=1<<(n&31)}flip(n){this.bits[Math.floor(n/32)]^=1<<(n&31)}getNextSet(n){const r=this.size;if(n>=r)return r;const i=this.bits;let o=Math.floor(n/32),l=i[o];l&=~((1<<(n&31))-1);const d=i.length;for(;l===0;){if(++o===d)return r;l=i[o]}const h=o*32+E.numberOfTrailingZeros(l);return h>r?r:h}getNextUnset(n){const r=this.size;if(n>=r)return r;const i=this.bits;let o=Math.floor(n/32),l=~i[o];l&=~((1<<(n&31))-1);const d=i.length;for(;l===0;){if(++o===d)return r;l=~i[o]}const h=o*32+E.numberOfTrailingZeros(l);return h>r?r:h}setBulk(n,r){this.bits[Math.floor(n/32)]=r}setRange(n,r){if(r<n||n<0||r>this.size)throw new b;if(r===n)return;r--;const i=Math.floor(n/32),o=Math.floor(r/32),l=this.bits;for(let d=i;d<=o;d++){const h=d>i?0:n&31,p=(2<<(d<o?31:r&31))-(1<<h);l[d]|=p}}clear(){const n=this.bits.length,r=this.bits;for(let i=0;i<n;i++)r[i]=0}isRange(n,r,i){if(r<n||n<0||r>this.size)throw new b;if(r===n)return!0;r--;const o=Math.floor(n/32),l=Math.floor(r/32),d=this.bits;for(let h=o;h<=l;h++){const g=h>o?0:n&31,v=(2<<(h<l?31:r&31))-(1<<g)&4294967295;if((d[h]&v)!==(i?v:0))return!1}return!0}appendBit(n){this.ensureCapacity(this.size+1),n&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(n,r){if(r<0||r>32)throw new b("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(let i=r;i>0;i--)this.appendBit((n>>i-1&1)===1)}appendBitArray(n){const r=n.size;this.ensureCapacity(this.size+r);for(let i=0;i<r;i++)this.appendBit(n.get(i))}xor(n){if(this.size!==n.size)throw new b("Sizes don't match");const r=this.bits;for(let i=0,o=r.length;i<o;i++)r[i]^=n.bits[i]}toBytes(n,r,i,o){for(let l=0;l<o;l++){let d=0;for(let h=0;h<8;h++)this.get(n)&&(d|=1<<7-h),n++;r[i+l]=d}}getBitArray(){return this.bits}reverse(){const n=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),i=r+1,o=this.bits;for(let l=0;l<i;l++){let d=o[l];d=d>>1&1431655765|(d&1431655765)<<1,d=d>>2&858993459|(d&858993459)<<2,d=d>>4&252645135|(d&252645135)<<4,d=d>>8&16711935|(d&16711935)<<8,d=d>>16&65535|(d&65535)<<16,n[r-l]=d}if(this.size!==i*32){const l=i*32-this.size;let d=n[0]>>>l;for(let h=1;h<i;h++){const g=n[h];d|=g<<32-l,n[h-1]=d,d=g>>>l}n[i-1]=d}this.bits=n}static makeArray(n){return new Int32Array(Math.floor((n+31)/32))}equals(n){if(!(n instanceof k))return!1;const r=n;return this.size===r.size&&C.equals(this.bits,r.bits)}hashCode(){return 31*this.size+C.hashCode(this.bits)}toString(){let n="";for(let r=0,i=this.size;r<i;r++)r&7||(n+=" "),n+=this.get(r)?"X":".";return n}clone(){return new k(this.size,this.bits.slice())}}var V;(function(A){A[A.OTHER=0]="OTHER",A[A.PURE_BARCODE=1]="PURE_BARCODE",A[A.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",A[A.TRY_HARDER=3]="TRY_HARDER",A[A.CHARACTER_SET=4]="CHARACTER_SET",A[A.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",A[A.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",A[A.ASSUME_GS1=7]="ASSUME_GS1",A[A.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",A[A.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",A[A.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(V||(V={}));var U=V;class L extends w{static getFormatInstance(){return new L}}L.kind="FormatException";var X;(function(A){A[A.Cp437=0]="Cp437",A[A.ISO8859_1=1]="ISO8859_1",A[A.ISO8859_2=2]="ISO8859_2",A[A.ISO8859_3=3]="ISO8859_3",A[A.ISO8859_4=4]="ISO8859_4",A[A.ISO8859_5=5]="ISO8859_5",A[A.ISO8859_6=6]="ISO8859_6",A[A.ISO8859_7=7]="ISO8859_7",A[A.ISO8859_8=8]="ISO8859_8",A[A.ISO8859_9=9]="ISO8859_9",A[A.ISO8859_10=10]="ISO8859_10",A[A.ISO8859_11=11]="ISO8859_11",A[A.ISO8859_13=12]="ISO8859_13",A[A.ISO8859_14=13]="ISO8859_14",A[A.ISO8859_15=14]="ISO8859_15",A[A.ISO8859_16=15]="ISO8859_16",A[A.SJIS=16]="SJIS",A[A.Cp1250=17]="Cp1250",A[A.Cp1251=18]="Cp1251",A[A.Cp1252=19]="Cp1252",A[A.Cp1256=20]="Cp1256",A[A.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",A[A.UTF8=22]="UTF8",A[A.ASCII=23]="ASCII",A[A.Big5=24]="Big5",A[A.GB18030=25]="GB18030",A[A.EUC_KR=26]="EUC_KR"})(X||(X={}));class P{constructor(n,r,i,...o){this.valueIdentifier=n,this.name=i,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=o,P.VALUE_IDENTIFIER_TO_ECI.set(n,this),P.NAME_TO_ECI.set(i,this);const l=this.values;for(let d=0,h=l.length;d!==h;d++){const g=l[d];P.VALUES_TO_ECI.set(g,this)}for(const d of o)P.NAME_TO_ECI.set(d,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(n){if(n<0||n>=900)throw new L("incorect value");const r=P.VALUES_TO_ECI.get(n);if(r===void 0)throw new L("incorect value");return r}static getCharacterSetECIByName(n){const r=P.NAME_TO_ECI.get(n);if(r===void 0)throw new L("incorect value");return r}equals(n){if(!(n instanceof P))return!1;const r=n;return this.getName()===r.getName()}}P.VALUE_IDENTIFIER_TO_ECI=new Map,P.VALUES_TO_ECI=new Map,P.NAME_TO_ECI=new Map,P.Cp437=new P(X.Cp437,Int32Array.from([0,2]),"Cp437"),P.ISO8859_1=new P(X.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),P.ISO8859_2=new P(X.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),P.ISO8859_3=new P(X.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),P.ISO8859_4=new P(X.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),P.ISO8859_5=new P(X.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),P.ISO8859_6=new P(X.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),P.ISO8859_7=new P(X.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),P.ISO8859_8=new P(X.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),P.ISO8859_9=new P(X.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),P.ISO8859_10=new P(X.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),P.ISO8859_11=new P(X.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),P.ISO8859_13=new P(X.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),P.ISO8859_14=new P(X.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),P.ISO8859_15=new P(X.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),P.ISO8859_16=new P(X.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),P.SJIS=new P(X.SJIS,20,"SJIS","Shift_JIS"),P.Cp1250=new P(X.Cp1250,21,"Cp1250","windows-1250"),P.Cp1251=new P(X.Cp1251,22,"Cp1251","windows-1251"),P.Cp1252=new P(X.Cp1252,23,"Cp1252","windows-1252"),P.Cp1256=new P(X.Cp1256,24,"Cp1256","windows-1256"),P.UnicodeBigUnmarked=new P(X.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),P.UTF8=new P(X.UTF8,26,"UTF8","UTF-8"),P.ASCII=new P(X.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),P.Big5=new P(X.Big5,28,"Big5"),P.GB18030=new P(X.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),P.EUC_KR=new P(X.EUC_KR,30,"EUC_KR","EUC-KR");class J extends w{}J.kind="UnsupportedOperationException";class ee{static decode(n,r){const i=this.encodingName(r);return this.customDecoder?this.customDecoder(n,i):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(i)?this.decodeFallback(n,i):new TextDecoder(i).decode(n)}static shouldDecodeOnFallback(n){return!ee.isBrowser()&&n==="ISO-8859-1"}static encode(n,r){const i=this.encodingName(r);return this.customEncoder?this.customEncoder(n,i):typeof TextEncoder>"u"?this.encodeFallback(n):new TextEncoder().encode(n)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(n){return typeof n=="string"?n:n.getName()}static encodingCharacterSet(n){return n instanceof P?n:P.getCharacterSetECIByName(n)}static decodeFallback(n,r){const i=this.encodingCharacterSet(r);if(ee.isDecodeFallbackSupported(i)){let o="";for(let l=0,d=n.length;l<d;l++){let h=n[l].toString(16);h.length<2&&(h="0"+h),o+="%"+h}return decodeURIComponent(o)}if(i.equals(P.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(n.buffer));throw new J(`Encoding ${this.encodingName(r)} not supported by fallback.`)}static isDecodeFallbackSupported(n){return n.equals(P.UTF8)||n.equals(P.ISO8859_1)||n.equals(P.ASCII)}static encodeFallback(n){const i=btoa(unescape(encodeURIComponent(n))).split(""),o=[];for(let l=0;l<i.length;l++)o.push(i[l].charCodeAt(0));return new Uint8Array(o)}}class ne{static castAsNonUtf8Char(n,r=null){const i=r?r.getName():this.ISO88591;return ee.decode(new Uint8Array([n]),i)}static guessEncoding(n,r){if(r!=null&&r.get(U.CHARACTER_SET)!==void 0)return r.get(U.CHARACTER_SET).toString();const i=n.length;let o=!0,l=!0,d=!0,h=0,g=0,p=0,v=0,S=0,I=0,D=0,F=0,z=0,W=0,q=0;const ie=n.length>3&&n[0]===239&&n[1]===187&&n[2]===191;for(let ae=0;ae<i&&(o||l||d);ae++){const re=n[ae]&255;d&&(h>0?re&128?h--:d=!1:re&128&&(re&64?(h++,re&32?(h++,re&16?(h++,re&8?d=!1:v++):p++):g++):d=!1)),o&&(re>127&&re<160?o=!1:re>159&&(re<192||re===215||re===247)&&q++),l&&(S>0?re<64||re===127||re>252?l=!1:S--:re===128||re===160||re>239?l=!1:re>160&&re<224?(I++,F=0,D++,D>z&&(z=D)):re>127?(S++,D=0,F++,F>W&&(W=F)):(D=0,F=0))}return d&&h>0&&(d=!1),l&&S>0&&(l=!1),d&&(ie||g+p+v>0)?ne.UTF8:l&&(ne.ASSUME_SHIFT_JIS||z>=3||W>=3)?ne.SHIFT_JIS:o&&l?z===2&&I===2||q*10>=i?ne.SHIFT_JIS:ne.ISO88591:o?ne.ISO88591:l?ne.SHIFT_JIS:d?ne.UTF8:ne.PLATFORM_DEFAULT_ENCODING}static format(n,...r){let i=-1;function o(d,h,g,p,v,S){if(d==="%%")return"%";if(r[++i]===void 0)return;d=p?parseInt(p.substr(1)):void 0;let I=v?parseInt(v.substr(1)):void 0,D;switch(S){case"s":D=r[i];break;case"c":D=r[i][0];break;case"f":D=parseFloat(r[i]).toFixed(d);break;case"p":D=parseFloat(r[i]).toPrecision(d);break;case"e":D=parseFloat(r[i]).toExponential(d);break;case"x":D=parseInt(r[i]).toString(I||16);break;case"d":D=parseFloat(parseInt(r[i],I||10).toPrecision(d)).toFixed(0);break}D=typeof D=="object"?JSON.stringify(D):(+D).toString(I);let F=parseInt(g),z=g&&g[0]+""=="0"?"0":" ";for(;D.length<F;)D=h!==void 0?D+z:z+D;return D}let l=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(l,o)}static getBytes(n,r){return ee.encode(n,r)}static getCharCode(n,r=0){return n.charCodeAt(r)}static getCharAt(n){return String.fromCharCode(n)}}ne.SHIFT_JIS=P.SJIS.getName(),ne.GB2312="GB2312",ne.ISO88591=P.ISO8859_1.getName(),ne.EUC_JP="EUC_JP",ne.UTF8=P.UTF8.getName(),ne.PLATFORM_DEFAULT_ENCODING=ne.UTF8,ne.ASSUME_SHIFT_JIS=!1;class fe{constructor(n=""){this.value=n}enableDecoding(n){return this.encoding=n,this}append(n){return typeof n=="string"?this.value+=n.toString():this.encoding?this.value+=ne.castAsNonUtf8Char(n,this.encoding):this.value+=String.fromCharCode(n),this}appendChars(n,r,i){for(let o=r;r<r+i;o++)this.append(n[o]);return this}length(){return this.value.length}charAt(n){return this.value.charAt(n)}deleteCharAt(n){this.value=this.value.substr(0,n)+this.value.substring(n+1)}setCharAt(n,r){this.value=this.value.substr(0,n)+r+this.value.substr(n+1)}substring(n,r){return this.value.substring(n,r)}setLengthToZero(){this.value=""}toString(){return this.value}insert(n,r){this.value=this.value.substr(0,n)+r+this.value.substr(n+r.length)}}class Ne{constructor(n,r,i,o){if(this.width=n,this.height=r,this.rowSize=i,this.bits=o,r==null&&(r=n),this.height=r,n<1||r<1)throw new b("Both dimensions must be greater than 0");i==null&&(i=Math.floor((n+31)/32)),this.rowSize=i,o==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(n){const r=n.length,i=n[0].length,o=new Ne(i,r);for(let l=0;l<r;l++){const d=n[l];for(let h=0;h<i;h++)d[h]&&o.set(h,l)}return o}static parseFromString(n,r,i){if(n===null)throw new b("stringRepresentation cannot be null");const o=new Array(n.length);let l=0,d=0,h=-1,g=0,p=0;for(;p<n.length;)if(n.charAt(p)===`
`||n.charAt(p)==="\r"){if(l>d){if(h===-1)h=l-d;else if(l-d!==h)throw new b("row lengths do not match");d=l,g++}p++}else if(n.substring(p,p+r.length)===r)p+=r.length,o[l]=!0,l++;else if(n.substring(p,p+i.length)===i)p+=i.length,o[l]=!1,l++;else throw new b("illegal character encountered: "+n.substring(p));if(l>d){if(h===-1)h=l-d;else if(l-d!==h)throw new b("row lengths do not match");g++}const v=new Ne(h,g);for(let S=0;S<l;S++)o[S]&&v.set(Math.floor(S%h),Math.floor(S/h));return v}get(n,r){const i=r*this.rowSize+Math.floor(n/32);return(this.bits[i]>>>(n&31)&1)!==0}set(n,r){const i=r*this.rowSize+Math.floor(n/32);this.bits[i]|=1<<(n&31)&4294967295}unset(n,r){const i=r*this.rowSize+Math.floor(n/32);this.bits[i]&=~(1<<(n&31)&4294967295)}flip(n,r){const i=r*this.rowSize+Math.floor(n/32);this.bits[i]^=1<<(n&31)&4294967295}xor(n){if(this.width!==n.getWidth()||this.height!==n.getHeight()||this.rowSize!==n.getRowSize())throw new b("input matrix dimensions do not match");const r=new k(Math.floor(this.width/32)+1),i=this.rowSize,o=this.bits;for(let l=0,d=this.height;l<d;l++){const h=l*i,g=n.getRow(l,r).getBitArray();for(let p=0;p<i;p++)o[h+p]^=g[p]}}clear(){const n=this.bits,r=n.length;for(let i=0;i<r;i++)n[i]=0}setRegion(n,r,i,o){if(r<0||n<0)throw new b("Left and top must be nonnegative");if(o<1||i<1)throw new b("Height and width must be at least 1");const l=n+i,d=r+o;if(d>this.height||l>this.width)throw new b("The region must fit inside the matrix");const h=this.rowSize,g=this.bits;for(let p=r;p<d;p++){const v=p*h;for(let S=n;S<l;S++)g[v+Math.floor(S/32)]|=1<<(S&31)&4294967295}}getRow(n,r){r==null||r.getSize()<this.width?r=new k(this.width):r.clear();const i=this.rowSize,o=this.bits,l=n*i;for(let d=0;d<i;d++)r.setBulk(d*32,o[l+d]);return r}setRow(n,r){M.arraycopy(r.getBitArray(),0,this.bits,n*this.rowSize,this.rowSize)}rotate180(){const n=this.getWidth(),r=this.getHeight();let i=new k(n),o=new k(n);for(let l=0,d=Math.floor((r+1)/2);l<d;l++)i=this.getRow(l,i),o=this.getRow(r-1-l,o),i.reverse(),o.reverse(),this.setRow(l,o),this.setRow(r-1-l,i)}getEnclosingRectangle(){const n=this.width,r=this.height,i=this.rowSize,o=this.bits;let l=n,d=r,h=-1,g=-1;for(let p=0;p<r;p++)for(let v=0;v<i;v++){const S=o[p*i+v];if(S!==0){if(p<d&&(d=p),p>g&&(g=p),v*32<l){let I=0;for(;!(S<<31-I&4294967295);)I++;v*32+I<l&&(l=v*32+I)}if(v*32+31>h){let I=31;for(;!(S>>>I);)I--;v*32+I>h&&(h=v*32+I)}}}return h<l||g<d?null:Int32Array.from([l,d,h-l+1,g-d+1])}getTopLeftOnBit(){const n=this.rowSize,r=this.bits;let i=0;for(;i<r.length&&r[i]===0;)i++;if(i===r.length)return null;const o=i/n;let l=i%n*32;const d=r[i];let h=0;for(;!(d<<31-h&4294967295);)h++;return l+=h,Int32Array.from([l,o])}getBottomRightOnBit(){const n=this.rowSize,r=this.bits;let i=r.length-1;for(;i>=0&&r[i]===0;)i--;if(i<0)return null;const o=Math.floor(i/n);let l=Math.floor(i%n)*32;const d=r[i];let h=31;for(;!(d>>>h);)h--;return l+=h,Int32Array.from([l,o])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(n){if(!(n instanceof Ne))return!1;const r=n;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&C.equals(this.bits,r.bits)}hashCode(){let n=this.width;return n=31*n+this.width,n=31*n+this.height,n=31*n+this.rowSize,n=31*n+C.hashCode(this.bits),n}toString(n="X ",r="  ",i=`
`){return this.buildToString(n,r,i)}buildToString(n,r,i){let o=new fe;for(let l=0,d=this.height;l<d;l++){for(let h=0,g=this.width;h<g;h++)o.append(this.get(h,l)?n:r);o.append(i)}return o.toString()}clone(){return new Ne(this.width,this.height,this.rowSize,this.bits.slice())}}class K extends w{static getNotFoundInstance(){return new K}}K.kind="NotFoundException";class le extends B{constructor(n){super(n),this.luminances=le.EMPTY,this.buckets=new Int32Array(le.LUMINANCE_BUCKETS)}getBlackRow(n,r){const i=this.getLuminanceSource(),o=i.getWidth();r==null||r.getSize()<o?r=new k(o):r.clear(),this.initArrays(o);const l=i.getRow(n,this.luminances),d=this.buckets;for(let g=0;g<o;g++)d[(l[g]&255)>>le.LUMINANCE_SHIFT]++;const h=le.estimateBlackPoint(d);if(o<3)for(let g=0;g<o;g++)(l[g]&255)<h&&r.set(g);else{let g=l[0]&255,p=l[1]&255;for(let v=1;v<o-1;v++){const S=l[v+1]&255;(p*4-g-S)/2<h&&r.set(v),g=p,p=S}}return r}getBlackMatrix(){const n=this.getLuminanceSource(),r=n.getWidth(),i=n.getHeight(),o=new Ne(r,i);this.initArrays(r);const l=this.buckets;for(let g=1;g<5;g++){const p=Math.floor(i*g/5),v=n.getRow(p,this.luminances),S=Math.floor(r*4/5);for(let I=Math.floor(r/5);I<S;I++){const D=v[I]&255;l[D>>le.LUMINANCE_SHIFT]++}}const d=le.estimateBlackPoint(l),h=n.getMatrix();for(let g=0;g<i;g++){const p=g*r;for(let v=0;v<r;v++)(h[p+v]&255)<d&&o.set(v,g)}return o}createBinarizer(n){return new le(n)}initArrays(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));const r=this.buckets;for(let i=0;i<le.LUMINANCE_BUCKETS;i++)r[i]=0}static estimateBlackPoint(n){const r=n.length;let i=0,o=0,l=0;for(let v=0;v<r;v++)n[v]>l&&(o=v,l=n[v]),n[v]>i&&(i=n[v]);let d=0,h=0;for(let v=0;v<r;v++){const S=v-o,I=n[v]*S*S;I>h&&(d=v,h=I)}if(o>d){const v=o;o=d,d=v}if(d-o<=r/16)throw new K;let g=d-1,p=-1;for(let v=d-1;v>o;v--){const S=v-o,I=S*S*(d-v)*(i-n[v]);I>p&&(g=v,p=I)}return g<<le.LUMINANCE_SHIFT}}le.LUMINANCE_BITS=5,le.LUMINANCE_SHIFT=8-le.LUMINANCE_BITS,le.LUMINANCE_BUCKETS=1<<le.LUMINANCE_BITS,le.EMPTY=Uint8ClampedArray.from([0]);class ce extends le{constructor(n){super(n),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const n=this.getLuminanceSource(),r=n.getWidth(),i=n.getHeight();if(r>=ce.MINIMUM_DIMENSION&&i>=ce.MINIMUM_DIMENSION){const o=n.getMatrix();let l=r>>ce.BLOCK_SIZE_POWER;r&ce.BLOCK_SIZE_MASK&&l++;let d=i>>ce.BLOCK_SIZE_POWER;i&ce.BLOCK_SIZE_MASK&&d++;const h=ce.calculateBlackPoints(o,l,d,r,i),g=new Ne(r,i);ce.calculateThresholdForBlock(o,l,d,r,i,h,g),this.matrix=g}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(n){return new ce(n)}static calculateThresholdForBlock(n,r,i,o,l,d,h){const g=l-ce.BLOCK_SIZE,p=o-ce.BLOCK_SIZE;for(let v=0;v<i;v++){let S=v<<ce.BLOCK_SIZE_POWER;S>g&&(S=g);const I=ce.cap(v,2,i-3);for(let D=0;D<r;D++){let F=D<<ce.BLOCK_SIZE_POWER;F>p&&(F=p);const z=ce.cap(D,2,r-3);let W=0;for(let ie=-2;ie<=2;ie++){const ae=d[I+ie];W+=ae[z-2]+ae[z-1]+ae[z]+ae[z+1]+ae[z+2]}const q=W/25;ce.thresholdBlock(n,F,S,q,o,h)}}}static cap(n,r,i){return n<r?r:n>i?i:n}static thresholdBlock(n,r,i,o,l,d){for(let h=0,g=i*l+r;h<ce.BLOCK_SIZE;h++,g+=l)for(let p=0;p<ce.BLOCK_SIZE;p++)(n[g+p]&255)<=o&&d.set(r+p,i+h)}static calculateBlackPoints(n,r,i,o,l){const d=l-ce.BLOCK_SIZE,h=o-ce.BLOCK_SIZE,g=new Array(i);for(let p=0;p<i;p++){g[p]=new Int32Array(r);let v=p<<ce.BLOCK_SIZE_POWER;v>d&&(v=d);for(let S=0;S<r;S++){let I=S<<ce.BLOCK_SIZE_POWER;I>h&&(I=h);let D=0,F=255,z=0;for(let q=0,ie=v*o+I;q<ce.BLOCK_SIZE;q++,ie+=o){for(let ae=0;ae<ce.BLOCK_SIZE;ae++){const re=n[ie+ae]&255;D+=re,re<F&&(F=re),re>z&&(z=re)}if(z-F>ce.MIN_DYNAMIC_RANGE)for(q++,ie+=o;q<ce.BLOCK_SIZE;q++,ie+=o)for(let ae=0;ae<ce.BLOCK_SIZE;ae++)D+=n[ie+ae]&255}let W=D>>ce.BLOCK_SIZE_POWER*2;if(z-F<=ce.MIN_DYNAMIC_RANGE&&(W=F/2,p>0&&S>0)){const q=(g[p-1][S]+2*g[p][S-1]+g[p-1][S-1])/4;F<q&&(W=q)}g[p][S]=W}}return g}}ce.BLOCK_SIZE_POWER=3,ce.BLOCK_SIZE=1<<ce.BLOCK_SIZE_POWER,ce.BLOCK_SIZE_MASK=ce.BLOCK_SIZE-1,ce.MINIMUM_DIMENSION=ce.BLOCK_SIZE*5,ce.MIN_DYNAMIC_RANGE=24;class ${constructor(n,r){this.width=n,this.height=r}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(n,r,i,o){throw new J("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new J("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new J("This luminance source does not support rotation by 45 degrees.")}toString(){const n=new Uint8ClampedArray(this.width);let r=new fe;for(let i=0;i<this.height;i++){const o=this.getRow(i,n);for(let l=0;l<this.width;l++){const d=o[l]&255;let h;d<64?h="#":d<128?h="+":d<192?h=".":h=" ",r.append(h)}r.append(`
`)}return r.toString()}}class Z extends ${constructor(n){super(n.getWidth(),n.getHeight()),this.delegate=n}getRow(n,r){const i=this.delegate.getRow(n,r),o=this.getWidth();for(let l=0;l<o;l++)i[l]=255-(i[l]&255);return i}getMatrix(){const n=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r);for(let o=0;o<r;o++)i[o]=255-(n[o]&255);return i}isCropSupported(){return this.delegate.isCropSupported()}crop(n,r,i,o){return new Z(this.delegate.crop(n,r,i,o))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Z(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Z(this.delegate.rotateCounterClockwise45())}}class Q extends ${constructor(n){super(n.width,n.height),this.canvas=n,this.tempCanvasElement=null,this.buffer=Q.makeBufferFromCanvasImageData(n)}static makeBufferFromCanvasImageData(n){const r=n.getContext("2d").getImageData(0,0,n.width,n.height);return Q.toGrayscaleBuffer(r.data,n.width,n.height)}static toGrayscaleBuffer(n,r,i){const o=new Uint8ClampedArray(r*i);for(let l=0,d=0,h=n.length;l<h;l+=4,d++){let g;if(n[l+3]===0)g=255;else{const v=n[l],S=n[l+1],I=n[l+2];g=306*v+601*S+117*I+512>>10}o[d]=g}return o}getRow(n,r){if(n<0||n>=this.getHeight())throw new b("Requested row is outside the image: "+n);const i=this.getWidth(),o=n*i;return r===null?r=this.buffer.slice(o,o+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(o,o+i))),r}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(n,r,i,o){return super.crop(n,r,i,o),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement}rotate(n){const r=this.getTempCanvasElement(),i=r.getContext("2d"),o=n*Q.DEGREE_TO_RADIANS,l=this.canvas.width,d=this.canvas.height,h=Math.ceil(Math.abs(Math.cos(o))*l+Math.abs(Math.sin(o))*d),g=Math.ceil(Math.abs(Math.sin(o))*l+Math.abs(Math.cos(o))*d);return r.width=h,r.height=g,i.translate(h/2,g/2),i.rotate(o),i.drawImage(this.canvas,l/-2,d/-2),this.buffer=Q.makeBufferFromCanvasImageData(r),this}invert(){return new Z(this)}}Q.DEGREE_TO_RADIANS=Math.PI/180;class xe{constructor(n,r,i){this.deviceId=n,this.label=r,this.kind="videoinput",this.groupId=i||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ye=(globalThis||yi||self||window||void 0)&&(globalThis||yi||self||window||void 0).__awaiter||function(A,n,r,i){function o(l){return l instanceof r?l:new r(function(d){d(l)})}return new(r||(r=Promise))(function(l,d){function h(v){try{p(i.next(v))}catch(S){d(S)}}function g(v){try{p(i.throw(v))}catch(S){d(S)}}function p(v){v.done?l(v.value):o(v.value).then(h,g)}p((i=i.apply(A,n||[])).next())})};class Ie{constructor(n,r=500,i){this.reader=n,this.timeBetweenScansMillis=r,this._hints=i,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(n){this._timeBetweenDecodingAttempts=n<0?0:n}set hints(n){this._hints=n||null}get hints(){return this._hints}listVideoInputDevices(){return ye(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const n=yield navigator.mediaDevices.enumerateDevices(),r=[];for(const i of n){const o=i.kind==="video"?"videoinput":i.kind;if(o!=="videoinput")continue;const l=i.deviceId||i.id,d=i.label||`Video device ${r.length+1}`,h=i.groupId,g={deviceId:l,label:d,kind:o,groupId:h};r.push(g)}return r})}getVideoInputDevices(){return ye(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(r=>new xe(r.deviceId,r.label))})}findDeviceById(n){return ye(this,void 0,void 0,function*(){const r=yield this.listVideoInputDevices();return r?r.find(i=>i.deviceId===n):null})}decodeFromInputVideoDevice(n,r){return ye(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(n,r)})}decodeOnceFromVideoDevice(n,r){return ye(this,void 0,void 0,function*(){this.reset();let i;n?i={deviceId:{exact:n}}:i={facingMode:"environment"};const o={video:i};return yield this.decodeOnceFromConstraints(o,r)})}decodeOnceFromConstraints(n,r){return ye(this,void 0,void 0,function*(){const i=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeOnceFromStream(i,r)})}decodeOnceFromStream(n,r){return ye(this,void 0,void 0,function*(){this.reset();const i=yield this.attachStreamToVideo(n,r);return yield this.decodeOnce(i)})}decodeFromInputVideoDeviceContinuously(n,r,i){return ye(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(n,r,i)})}decodeFromVideoDevice(n,r,i){return ye(this,void 0,void 0,function*(){let o;n?o={deviceId:{exact:n}}:o={facingMode:"environment"};const l={video:o};return yield this.decodeFromConstraints(l,r,i)})}decodeFromConstraints(n,r,i){return ye(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeFromStream(o,r,i)})}decodeFromStream(n,r,i){return ye(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(n,r);return yield this.decodeContinuously(o,i)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(n,r){return ye(this,void 0,void 0,function*(){const i=this.prepareVideoElement(r);return this.addVideoSource(i,n),this.videoElement=i,this.stream=n,yield this.playVideoOnLoadAsync(i),i})}playVideoOnLoadAsync(n){return new Promise((r,i)=>this.playVideoOnLoad(n,()=>r()))}playVideoOnLoad(n,r){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(n),n.addEventListener("ended",this.videoEndedListener),n.addEventListener("canplay",this.videoCanPlayListener),n.addEventListener("playing",r),this.tryPlayVideo(n)}isVideoPlaying(n){return n.currentTime>0&&!n.paused&&!n.ended&&n.readyState>2}tryPlayVideo(n){return ye(this,void 0,void 0,function*(){if(this.isVideoPlaying(n)){console.warn("Trying to play video that is already playing.");return}try{yield n.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(n,r){const i=document.getElementById(n);if(!i)throw new N(`element with id '${n}' not found`);if(i.nodeName.toLowerCase()!==r.toLowerCase())throw new N(`element with id '${n}' must be an ${r} element`);return i}decodeFromImage(n,r){if(!n&&!r)throw new N("either imageElement with a src set or an url must be provided");return r&&!n?this.decodeFromImageUrl(r):this.decodeFromImageElement(n)}decodeFromVideo(n,r){if(!n&&!r)throw new N("Either an element with a src set or an URL must be provided");return r&&!n?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(n)}decodeFromVideoContinuously(n,r,i){if(n===void 0&&r===void 0)throw new N("Either an element with a src set or an URL must be provided");return r&&!n?this.decodeFromVideoUrlContinuously(r,i):this.decodeFromVideoElementContinuously(n,i)}decodeFromImageElement(n){if(!n)throw new N("An image element must be provided.");this.reset();const r=this.prepareImageElement(n);this.imageElement=r;let i;return this.isImageLoaded(r)?i=this.decodeOnce(r,!1,!0):i=this._decodeOnLoadImage(r),i}decodeFromVideoElement(n){const r=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideo(r)}decodeFromVideoElementContinuously(n,r){const i=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideoContinuously(i,r)}_decodeFromVideoElementSetup(n){if(!n)throw new N("A video element must be provided.");this.reset();const r=this.prepareVideoElement(n);return this.videoElement=r,r}decodeFromImageUrl(n){if(!n)throw new N("An URL must be provided.");this.reset();const r=this.prepareImageElement();this.imageElement=r;const i=this._decodeOnLoadImage(r);return r.src=n,i}decodeFromVideoUrl(n){if(!n)throw new N("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),i=this.decodeFromVideoElement(r);return r.src=n,i}decodeFromVideoUrlContinuously(n,r){if(!n)throw new N("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),o=this.decodeFromVideoElementContinuously(i,r);return i.src=n,o}_decodeOnLoadImage(n){return new Promise((r,i)=>{this.imageLoadedListener=()=>this.decodeOnce(n,!1,!0).then(r,i),n.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(n){return ye(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(n),yield this.decodeOnce(n)})}_decodeOnLoadVideoContinuously(n,r){return ye(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(n),this.decodeContinuously(n,r)})}isImageLoaded(n){return!(!n.complete||n.naturalWidth===0)}prepareImageElement(n){let r;return typeof n>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof n=="string"&&(r=this.getMediaElement(n,"img")),n instanceof HTMLImageElement&&(r=n),r}prepareVideoElement(n){let r;return!n&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof n=="string"&&(r=this.getMediaElement(n,"video")),n instanceof HTMLVideoElement&&(r=n),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r}decodeOnce(n,r=!0,i=!0){this._stopAsyncDecode=!1;const o=(l,d)=>{if(this._stopAsyncDecode){d(new K("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const h=this.decode(n);l(h)}catch(h){const g=r&&h instanceof K,v=(h instanceof j||h instanceof L)&&i;if(g||v)return setTimeout(o,this._timeBetweenDecodingAttempts,l,d);d(h)}};return new Promise((l,d)=>o(l,d))}decodeContinuously(n,r){this._stopContinuousDecode=!1;const i=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const o=this.decode(n);r(o,null),setTimeout(i,this.timeBetweenScansMillis)}catch(o){r(null,o);const l=o instanceof j||o instanceof L,d=o instanceof K;(l||d)&&setTimeout(i,this._timeBetweenDecodingAttempts)}};i()}decode(n){const r=this.createBinaryBitmap(n);return this.decodeBitmap(r)}_isHTMLVideoElement(n){return n.videoWidth!==0}drawFrameOnCanvas(n,r,i){r||(r={sx:0,sy:0,sWidth:n.videoWidth,sHeight:n.videoHeight,dx:0,dy:0,dWidth:n.videoWidth,dHeight:n.videoHeight}),i||(i=this.captureCanvasContext),i.drawImage(n,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}drawImageOnCanvas(n,r,i=this.captureCanvasContext){r||(r={sx:0,sy:0,sWidth:n.naturalWidth,sHeight:n.naturalHeight,dx:0,dy:0,dWidth:n.naturalWidth,dHeight:n.naturalHeight}),i||(i=this.captureCanvasContext),i.drawImage(n,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}createBinaryBitmap(n){this.getCaptureCanvasContext(n),this._isHTMLVideoElement(n)?this.drawFrameOnCanvas(n):this.drawImageOnCanvas(n);const r=this.getCaptureCanvas(n),i=new Q(r),o=new ce(i);return new T(o)}getCaptureCanvasContext(n){if(!this.captureCanvasContext){const i=this.getCaptureCanvas(n).getContext("2d");this.captureCanvasContext=i}return this.captureCanvasContext}getCaptureCanvas(n){if(!this.captureCanvas){const r=this.createCaptureCanvas(n);this.captureCanvas=r}return this.captureCanvas}decodeBitmap(n){return this.reader.decode(n,this._hints)}createCaptureCanvas(n){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const r=document.createElement("canvas");let i,o;return typeof n<"u"&&(n instanceof HTMLVideoElement?(i=n.videoWidth,o=n.videoHeight):n instanceof HTMLImageElement&&(i=n.naturalWidth||n.width,o=n.naturalHeight||n.height)),r.style.width=i+"px",r.style.height=o+"px",r.width=i,r.height=o,r}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(n=>n.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(n,r){try{n.srcObject=r}catch{n.src=URL.createObjectURL(r)}}cleanVideoSource(n){try{n.srcObject=null}catch{n.src=""}this.videoElement.removeAttribute("src")}}class He{constructor(n,r,i=r==null?0:8*r.length,o,l,d=M.currentTimeMillis()){this.text=n,this.rawBytes=r,this.numBits=i,this.resultPoints=o,this.format=l,this.timestamp=d,this.text=n,this.rawBytes=r,i==null?this.numBits=r==null?0:8*r.length:this.numBits=i,this.resultPoints=o,this.format=l,this.resultMetadata=null,d==null?this.timestamp=M.currentTimeMillis():this.timestamp=d}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(n,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(n,r)}putAllMetadata(n){n!==null&&(this.resultMetadata===null?this.resultMetadata=n:this.resultMetadata=new Map(n))}addResultPoints(n){const r=this.resultPoints;if(r===null)this.resultPoints=n;else if(n!==null&&n.length>0){const i=new Array(r.length+n.length);M.arraycopy(r,0,i,0,r.length),M.arraycopy(n,0,i,r.length,n.length),this.resultPoints=i}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ue;(function(A){A[A.AZTEC=0]="AZTEC",A[A.CODABAR=1]="CODABAR",A[A.CODE_39=2]="CODE_39",A[A.CODE_93=3]="CODE_93",A[A.CODE_128=4]="CODE_128",A[A.DATA_MATRIX=5]="DATA_MATRIX",A[A.EAN_8=6]="EAN_8",A[A.EAN_13=7]="EAN_13",A[A.ITF=8]="ITF",A[A.MAXICODE=9]="MAXICODE",A[A.PDF_417=10]="PDF_417",A[A.QR_CODE=11]="QR_CODE",A[A.RSS_14=12]="RSS_14",A[A.RSS_EXPANDED=13]="RSS_EXPANDED",A[A.UPC_A=14]="UPC_A",A[A.UPC_E=15]="UPC_E",A[A.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ue||(ue={}));var oe=ue,nt;(function(A){A[A.OTHER=0]="OTHER",A[A.ORIENTATION=1]="ORIENTATION",A[A.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",A[A.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",A[A.ISSUE_NUMBER=4]="ISSUE_NUMBER",A[A.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",A[A.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",A[A.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",A[A.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",A[A.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",A[A.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(nt||(nt={}));var ft=nt;class ai{constructor(n,r,i,o,l=-1,d=-1){this.rawBytes=n,this.text=r,this.byteSegments=i,this.ecLevel=o,this.structuredAppendSequenceNumber=l,this.structuredAppendParity=d,this.numBits=n==null?0:8*n.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(n){this.numBits=n}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(n){this.errorsCorrected=n}getErasures(){return this.erasures}setErasures(n){this.erasures=n}getOther(){return this.other}setOther(n){this.other=n}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class oi{exp(n){return this.expTable[n]}log(n){if(n===0)throw new b;return this.logTable[n]}static addOrSubtract(n,r){return n^r}}class Yt{constructor(n,r){if(r.length===0)throw new b;this.field=n;const i=r.length;if(i>1&&r[0]===0){let o=1;for(;o<i&&r[o]===0;)o++;o===i?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(i-o),M.arraycopy(r,o,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);const r=this.coefficients;let i;if(n===1){i=0;for(let d=0,h=r.length;d!==h;d++){const g=r[d];i=oi.addOrSubtract(i,g)}return i}i=r[0];const o=r.length,l=this.field;for(let d=1;d<o;d++)i=oi.addOrSubtract(l.multiply(n,i),r[d]);return i}addOrSubtract(n){if(!this.field.equals(n.field))throw new b("GenericGFPolys do not have same GenericGF field");if(this.isZero())return n;if(n.isZero())return this;let r=this.coefficients,i=n.coefficients;if(r.length>i.length){const d=r;r=i,i=d}let o=new Int32Array(i.length);const l=i.length-r.length;M.arraycopy(i,0,o,0,l);for(let d=l;d<i.length;d++)o[d]=oi.addOrSubtract(r[d-l],i[d]);return new Yt(this.field,o)}multiply(n){if(!this.field.equals(n.field))throw new b("GenericGFPolys do not have same GenericGF field");if(this.isZero()||n.isZero())return this.field.getZero();const r=this.coefficients,i=r.length,o=n.coefficients,l=o.length,d=new Int32Array(i+l-1),h=this.field;for(let g=0;g<i;g++){const p=r[g];for(let v=0;v<l;v++)d[g+v]=oi.addOrSubtract(d[g+v],h.multiply(p,o[v]))}return new Yt(h,d)}multiplyScalar(n){if(n===0)return this.field.getZero();if(n===1)return this;const r=this.coefficients.length,i=this.field,o=new Int32Array(r),l=this.coefficients;for(let d=0;d<r;d++)o[d]=i.multiply(l[d],n);return new Yt(i,o)}multiplyByMonomial(n,r){if(n<0)throw new b;if(r===0)return this.field.getZero();const i=this.coefficients,o=i.length,l=new Int32Array(o+n),d=this.field;for(let h=0;h<o;h++)l[h]=d.multiply(i[h],r);return new Yt(d,l)}divide(n){if(!this.field.equals(n.field))throw new b("GenericGFPolys do not have same GenericGF field");if(n.isZero())throw new b("Divide by 0");const r=this.field;let i=r.getZero(),o=this;const l=n.getCoefficient(n.getDegree()),d=r.inverse(l);for(;o.getDegree()>=n.getDegree()&&!o.isZero();){const h=o.getDegree()-n.getDegree(),g=r.multiply(o.getCoefficient(o.getDegree()),d),p=n.multiplyByMonomial(h,g),v=r.buildMonomial(h,g);i=i.addOrSubtract(v),o=o.addOrSubtract(p)}return[i,o]}toString(){let n="";for(let r=this.getDegree();r>=0;r--){let i=this.getCoefficient(r);if(i!==0){if(i<0?(n+=" - ",i=-i):n.length>0&&(n+=" + "),r===0||i!==1){const o=this.field.log(i);o===0?n+="1":o===1?n+="a":(n+="a^",n+=o)}r!==0&&(r===1?n+="x":(n+="x^",n+=r))}}return n}}class ya extends w{}ya.kind="ArithmeticException";class Me extends oi{constructor(n,r,i){super(),this.primitive=n,this.size=r,this.generatorBase=i;const o=new Int32Array(r);let l=1;for(let h=0;h<r;h++)o[h]=l,l*=2,l>=r&&(l^=n,l&=r-1);this.expTable=o;const d=new Int32Array(r);for(let h=0;h<r-1;h++)d[o[h]]=h;this.logTable=d,this.zero=new Yt(this,Int32Array.from([0])),this.one=new Yt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,r){if(n<0)throw new b;if(r===0)return this.zero;const i=new Int32Array(n+1);return i[0]=r,new Yt(this,i)}inverse(n){if(n===0)throw new ya;return this.expTable[this.size-this.logTable[n]-1]}multiply(n,r){return n===0||r===0?0:this.expTable[(this.logTable[n]+this.logTable[r])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+E.toHexString(this.primitive)+","+this.size+")"}equals(n){return n===this}}Me.AZTEC_DATA_12=new Me(4201,4096,1),Me.AZTEC_DATA_10=new Me(1033,1024,1),Me.AZTEC_DATA_6=new Me(67,64,1),Me.AZTEC_PARAM=new Me(19,16,1),Me.QR_CODE_FIELD_256=new Me(285,256,0),Me.DATA_MATRIX_FIELD_256=new Me(301,256,1),Me.AZTEC_DATA_8=Me.DATA_MATRIX_FIELD_256,Me.MAXICODE_FIELD_64=Me.AZTEC_DATA_6;class ds extends w{}ds.kind="ReedSolomonException";class Bn extends w{}Bn.kind="IllegalStateException";class li{constructor(n){this.field=n}decode(n,r){const i=this.field,o=new Yt(i,n),l=new Int32Array(r);let d=!0;for(let D=0;D<r;D++){const F=o.evaluateAt(i.exp(D+i.getGeneratorBase()));l[l.length-1-D]=F,F!==0&&(d=!1)}if(d)return;const h=new Yt(i,l),g=this.runEuclideanAlgorithm(i.buildMonomial(r,1),h,r),p=g[0],v=g[1],S=this.findErrorLocations(p),I=this.findErrorMagnitudes(v,S);for(let D=0;D<S.length;D++){const F=n.length-1-i.log(S[D]);if(F<0)throw new ds("Bad error location");n[F]=Me.addOrSubtract(n[F],I[D])}}runEuclideanAlgorithm(n,r,i){if(n.getDegree()<r.getDegree()){const D=n;n=r,r=D}const o=this.field;let l=n,d=r,h=o.getZero(),g=o.getOne();for(;d.getDegree()>=(i/2|0);){let D=l,F=h;if(l=d,h=g,l.isZero())throw new ds("r_{i-1} was zero");d=D;let z=o.getZero();const W=l.getCoefficient(l.getDegree()),q=o.inverse(W);for(;d.getDegree()>=l.getDegree()&&!d.isZero();){const ie=d.getDegree()-l.getDegree(),ae=o.multiply(d.getCoefficient(d.getDegree()),q);z=z.addOrSubtract(o.buildMonomial(ie,ae)),d=d.addOrSubtract(l.multiplyByMonomial(ie,ae))}if(g=z.multiply(h).addOrSubtract(F),d.getDegree()>=l.getDegree())throw new Bn("Division algorithm failed to reduce polynomial?")}const p=g.getCoefficient(0);if(p===0)throw new ds("sigmaTilde(0) was zero");const v=o.inverse(p),S=g.multiplyScalar(v),I=d.multiplyScalar(v);return[S,I]}findErrorLocations(n){const r=n.getDegree();if(r===1)return Int32Array.from([n.getCoefficient(1)]);const i=new Int32Array(r);let o=0;const l=this.field;for(let d=1;d<l.getSize()&&o<r;d++)n.evaluateAt(d)===0&&(i[o]=l.inverse(d),o++);if(o!==r)throw new ds("Error locator degree does not match number of roots");return i}findErrorMagnitudes(n,r){const i=r.length,o=new Int32Array(i),l=this.field;for(let d=0;d<i;d++){const h=l.inverse(r[d]);let g=1;for(let p=0;p<i;p++)if(d!==p){const v=l.multiply(r[p],h),S=v&1?v&-2:v|1;g=l.multiply(g,S)}o[d]=l.multiply(n.evaluateAt(h),l.inverse(g)),l.getGeneratorBase()!==0&&(o[d]=l.multiply(o[d],h))}return o}}var _t;(function(A){A[A.UPPER=0]="UPPER",A[A.LOWER=1]="LOWER",A[A.MIXED=2]="MIXED",A[A.DIGIT=3]="DIGIT",A[A.PUNCT=4]="PUNCT",A[A.BINARY=5]="BINARY"})(_t||(_t={}));class Ye{decode(n){this.ddata=n;let r=n.getBits(),i=this.extractBits(r),o=this.correctBits(i),l=Ye.convertBoolArrayToByteArray(o),d=Ye.getEncodedData(o),h=new ai(l,d,null,null);return h.setNumBits(o.length),h}static highLevelDecode(n){return this.getEncodedData(n)}static getEncodedData(n){let r=n.length,i=_t.UPPER,o=_t.UPPER,l="",d=0;for(;d<r;)if(o===_t.BINARY){if(r-d<5)break;let h=Ye.readCode(n,d,5);if(d+=5,h===0){if(r-d<11)break;h=Ye.readCode(n,d,11)+31,d+=11}for(let g=0;g<h;g++){if(r-d<8){d=r;break}const p=Ye.readCode(n,d,8);l+=ne.castAsNonUtf8Char(p),d+=8}o=i}else{let h=o===_t.DIGIT?4:5;if(r-d<h)break;let g=Ye.readCode(n,d,h);d+=h;let p=Ye.getCharacter(o,g);p.startsWith("CTRL_")?(i=o,o=Ye.getTable(p.charAt(5)),p.charAt(6)==="L"&&(i=o)):(l+=p,o=i)}return l}static getTable(n){switch(n){case"L":return _t.LOWER;case"P":return _t.PUNCT;case"M":return _t.MIXED;case"D":return _t.DIGIT;case"B":return _t.BINARY;case"U":default:return _t.UPPER}}static getCharacter(n,r){switch(n){case _t.UPPER:return Ye.UPPER_TABLE[r];case _t.LOWER:return Ye.LOWER_TABLE[r];case _t.MIXED:return Ye.MIXED_TABLE[r];case _t.PUNCT:return Ye.PUNCT_TABLE[r];case _t.DIGIT:return Ye.DIGIT_TABLE[r];default:throw new Bn("Bad table")}}correctBits(n){let r,i;this.ddata.getNbLayers()<=2?(i=6,r=Me.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(i=8,r=Me.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(i=10,r=Me.AZTEC_DATA_10):(i=12,r=Me.AZTEC_DATA_12);let o=this.ddata.getNbDatablocks(),l=n.length/i;if(l<o)throw new L;let d=n.length%i,h=new Int32Array(l);for(let I=0;I<l;I++,d+=i)h[I]=Ye.readCode(n,d,i);try{new li(r).decode(h,l-o)}catch(I){throw new L(I)}let g=(1<<i)-1,p=0;for(let I=0;I<o;I++){let D=h[I];if(D===0||D===g)throw new L;(D===1||D===g-1)&&p++}let v=new Array(o*i-p),S=0;for(let I=0;I<o;I++){let D=h[I];if(D===1||D===g-1)v.fill(D>1,S,S+i-1),S+=i-1;else for(let F=i-1;F>=0;--F)v[S++]=(D&1<<F)!==0}return v}extractBits(n){let r=this.ddata.isCompact(),i=this.ddata.getNbLayers(),o=(r?11:14)+i*4,l=new Int32Array(o),d=new Array(this.totalBitsInLayer(i,r));if(r)for(let h=0;h<l.length;h++)l[h]=h;else{let h=o+1+2*E.truncDivision(E.truncDivision(o,2)-1,15),g=o/2,p=E.truncDivision(h,2);for(let v=0;v<g;v++){let S=v+E.truncDivision(v,15);l[g-v-1]=p-S-1,l[g+v]=p+S+1}}for(let h=0,g=0;h<i;h++){let p=(i-h)*4+(r?9:12),v=h*2,S=o-1-v;for(let I=0;I<p;I++){let D=I*2;for(let F=0;F<2;F++)d[g+D+F]=n.get(l[v+F],l[v+I]),d[g+2*p+D+F]=n.get(l[v+I],l[S-F]),d[g+4*p+D+F]=n.get(l[S-F],l[S-I]),d[g+6*p+D+F]=n.get(l[S-I],l[v+F])}g+=p*8}return d}static readCode(n,r,i){let o=0;for(let l=r;l<r+i;l++)o<<=1,n[l]&&(o|=1);return o}static readByte(n,r){let i=n.length-r;return i>=8?Ye.readCode(n,r,8):Ye.readCode(n,r,i)<<8-i}static convertBoolArrayToByteArray(n){let r=new Uint8Array((n.length+7)/8);for(let i=0;i<r.length;i++)r[i]=Ye.readByte(n,8*i);return r}totalBitsInLayer(n,r){return((r?88:112)+16*n)*n}}Ye.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ye.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ye.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ye.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ye.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Re{constructor(){}static round(n){return n===NaN?0:n<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:n>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:n+(n<0?-.5:.5)|0}static distance(n,r,i,o){const l=n-i,d=r-o;return Math.sqrt(l*l+d*d)}static sum(n){let r=0;for(let i=0,o=n.length;i!==o;i++){const l=n[i];r+=l}return r}}class wa{static floatToIntBits(n){return n}}wa.MAX_VALUE=Number.MAX_SAFE_INTEGER;class we{constructor(n,r){this.x=n,this.y=r}getX(){return this.x}getY(){return this.y}equals(n){if(n instanceof we){const r=n;return this.x===r.x&&this.y===r.y}return!1}hashCode(){return 31*wa.floatToIntBits(this.x)+wa.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(n){const r=this.distance(n[0],n[1]),i=this.distance(n[1],n[2]),o=this.distance(n[0],n[2]);let l,d,h;if(i>=r&&i>=o?(d=n[0],l=n[1],h=n[2]):o>=i&&o>=r?(d=n[1],l=n[0],h=n[2]):(d=n[2],l=n[0],h=n[1]),this.crossProductZ(l,d,h)<0){const g=l;l=h,h=g}n[0]=l,n[1]=d,n[2]=h}static distance(n,r){return Re.distance(n.x,n.y,r.x,r.y)}static crossProductZ(n,r,i){const o=r.x,l=r.y;return(i.x-o)*(n.y-l)-(i.y-l)*(n.x-o)}}class va{constructor(n,r){this.bits=n,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class yd extends va{constructor(n,r,i,o,l){super(n,r),this.compact=i,this.nbDatablocks=o,this.nbLayers=l}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Zn{constructor(n,r,i,o){this.image=n,this.height=n.getHeight(),this.width=n.getWidth(),r==null&&(r=Zn.INIT_SIZE),i==null&&(i=n.getWidth()/2|0),o==null&&(o=n.getHeight()/2|0);const l=r/2|0;if(this.leftInit=i-l,this.rightInit=i+l,this.upInit=o-l,this.downInit=o+l,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new K}detect(){let n=this.leftInit,r=this.rightInit,i=this.upInit,o=this.downInit,l=!1,d=!0,h=!1,g=!1,p=!1,v=!1,S=!1;const I=this.width,D=this.height;for(;d;){d=!1;let F=!0;for(;(F||!g)&&r<I;)F=this.containsBlackPoint(i,o,r,!1),F?(r++,d=!0,g=!0):g||r++;if(r>=I){l=!0;break}let z=!0;for(;(z||!p)&&o<D;)z=this.containsBlackPoint(n,r,o,!0),z?(o++,d=!0,p=!0):p||o++;if(o>=D){l=!0;break}let W=!0;for(;(W||!v)&&n>=0;)W=this.containsBlackPoint(i,o,n,!1),W?(n--,d=!0,v=!0):v||n--;if(n<0){l=!0;break}let q=!0;for(;(q||!S)&&i>=0;)q=this.containsBlackPoint(n,r,i,!0),q?(i--,d=!0,S=!0):S||i--;if(i<0){l=!0;break}d&&(h=!0)}if(!l&&h){const F=r-n;let z=null;for(let ae=1;z===null&&ae<F;ae++)z=this.getBlackPointOnSegment(n,o-ae,n+ae,o);if(z==null)throw new K;let W=null;for(let ae=1;W===null&&ae<F;ae++)W=this.getBlackPointOnSegment(n,i+ae,n+ae,i);if(W==null)throw new K;let q=null;for(let ae=1;q===null&&ae<F;ae++)q=this.getBlackPointOnSegment(r,i+ae,r-ae,i);if(q==null)throw new K;let ie=null;for(let ae=1;ie===null&&ae<F;ae++)ie=this.getBlackPointOnSegment(r,o-ae,r-ae,o);if(ie==null)throw new K;return this.centerEdges(ie,z,q,W)}else throw new K}getBlackPointOnSegment(n,r,i,o){const l=Re.round(Re.distance(n,r,i,o)),d=(i-n)/l,h=(o-r)/l,g=this.image;for(let p=0;p<l;p++){const v=Re.round(n+p*d),S=Re.round(r+p*h);if(g.get(v,S))return new we(v,S)}return null}centerEdges(n,r,i,o){const l=n.getX(),d=n.getY(),h=r.getX(),g=r.getY(),p=i.getX(),v=i.getY(),S=o.getX(),I=o.getY(),D=Zn.CORR;return l<this.width/2?[new we(S-D,I+D),new we(h+D,g+D),new we(p-D,v-D),new we(l+D,d-D)]:[new we(S+D,I+D),new we(h+D,g-D),new we(p-D,v+D),new we(l-D,d-D)]}containsBlackPoint(n,r,i,o){const l=this.image;if(o){for(let d=n;d<=r;d++)if(l.get(d,i))return!0}else for(let d=n;d<=r;d++)if(l.get(i,d))return!0;return!1}}Zn.INIT_SIZE=10,Zn.CORR=1;class ul{static checkAndNudgePoints(n,r){const i=n.getWidth(),o=n.getHeight();let l=!0;for(let d=0;d<r.length&&l;d+=2){const h=Math.floor(r[d]),g=Math.floor(r[d+1]);if(h<-1||h>i||g<-1||g>o)throw new K;l=!1,h===-1?(r[d]=0,l=!0):h===i&&(r[d]=i-1,l=!0),g===-1?(r[d+1]=0,l=!0):g===o&&(r[d+1]=o-1,l=!0)}l=!0;for(let d=r.length-2;d>=0&&l;d-=2){const h=Math.floor(r[d]),g=Math.floor(r[d+1]);if(h<-1||h>i||g<-1||g>o)throw new K;l=!1,h===-1?(r[d]=0,l=!0):h===i&&(r[d]=i-1,l=!0),g===-1?(r[d+1]=0,l=!0):g===o&&(r[d+1]=o-1,l=!0)}}}class _n{constructor(n,r,i,o,l,d,h,g,p){this.a11=n,this.a21=r,this.a31=i,this.a12=o,this.a22=l,this.a32=d,this.a13=h,this.a23=g,this.a33=p}static quadrilateralToQuadrilateral(n,r,i,o,l,d,h,g,p,v,S,I,D,F,z,W){const q=_n.quadrilateralToSquare(n,r,i,o,l,d,h,g);return _n.squareToQuadrilateral(p,v,S,I,D,F,z,W).times(q)}transformPoints(n){const r=n.length,i=this.a11,o=this.a12,l=this.a13,d=this.a21,h=this.a22,g=this.a23,p=this.a31,v=this.a32,S=this.a33;for(let I=0;I<r;I+=2){const D=n[I],F=n[I+1],z=l*D+g*F+S;n[I]=(i*D+d*F+p)/z,n[I+1]=(o*D+h*F+v)/z}}transformPointsWithValues(n,r){const i=this.a11,o=this.a12,l=this.a13,d=this.a21,h=this.a22,g=this.a23,p=this.a31,v=this.a32,S=this.a33,I=n.length;for(let D=0;D<I;D++){const F=n[D],z=r[D],W=l*F+g*z+S;n[D]=(i*F+d*z+p)/W,r[D]=(o*F+h*z+v)/W}}static squareToQuadrilateral(n,r,i,o,l,d,h,g){const p=n-i+l-h,v=r-o+d-g;if(p===0&&v===0)return new _n(i-n,l-i,n,o-r,d-o,r,0,0,1);{const S=i-l,I=h-l,D=o-d,F=g-d,z=S*F-I*D,W=(p*F-I*v)/z,q=(S*v-p*D)/z;return new _n(i-n+W*i,h-n+q*h,n,o-r+W*o,g-r+q*g,r,W,q,1)}}static quadrilateralToSquare(n,r,i,o,l,d,h,g){return _n.squareToQuadrilateral(n,r,i,o,l,d,h,g).buildAdjoint()}buildAdjoint(){return new _n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(n){return new _n(this.a11*n.a11+this.a21*n.a12+this.a31*n.a13,this.a11*n.a21+this.a21*n.a22+this.a31*n.a23,this.a11*n.a31+this.a21*n.a32+this.a31*n.a33,this.a12*n.a11+this.a22*n.a12+this.a32*n.a13,this.a12*n.a21+this.a22*n.a22+this.a32*n.a23,this.a12*n.a31+this.a22*n.a32+this.a32*n.a33,this.a13*n.a11+this.a23*n.a12+this.a33*n.a13,this.a13*n.a21+this.a23*n.a22+this.a33*n.a23,this.a13*n.a31+this.a23*n.a32+this.a33*n.a33)}}class wd extends ul{sampleGrid(n,r,i,o,l,d,h,g,p,v,S,I,D,F,z,W,q,ie,ae){const re=_n.quadrilateralToQuadrilateral(o,l,d,h,g,p,v,S,I,D,F,z,W,q,ie,ae);return this.sampleGridWithTransform(n,r,i,re)}sampleGridWithTransform(n,r,i,o){if(r<=0||i<=0)throw new K;const l=new Ne(r,i),d=new Float32Array(2*r);for(let h=0;h<i;h++){const g=d.length,p=h+.5;for(let v=0;v<g;v+=2)d[v]=v/2+.5,d[v+1]=p;o.transformPoints(d),ul.checkAndNudgePoints(n,d);try{for(let v=0;v<g;v+=2)n.get(Math.floor(d[v]),Math.floor(d[v+1]))&&l.set(v/2,h)}catch{throw new K}}return l}}class dr{static setGridSampler(n){dr.gridSampler=n}static getInstance(){return dr.gridSampler}}dr.gridSampler=new wd;class Ut{constructor(n,r){this.x=n,this.y=r}toResultPoint(){return new we(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class vd{constructor(n){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=n}detect(){return this.detectMirror(!1)}detectMirror(n){let r=this.getMatrixCenter(),i=this.getBullsEyeCorners(r);if(n){let d=i[0];i[0]=i[2],i[2]=d}this.extractParameters(i);let o=this.sampleGrid(this.image,i[this.shift%4],i[(this.shift+1)%4],i[(this.shift+2)%4],i[(this.shift+3)%4]),l=this.getMatrixCornerPoints(i);return new yd(o,l,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(n){if(!this.isValidPoint(n[0])||!this.isValidPoint(n[1])||!this.isValidPoint(n[2])||!this.isValidPoint(n[3]))throw new K;let r=2*this.nbCenterLayers,i=new Int32Array([this.sampleLine(n[0],n[1],r),this.sampleLine(n[1],n[2],r),this.sampleLine(n[2],n[3],r),this.sampleLine(n[3],n[0],r)]);this.shift=this.getRotation(i,r);let o=0;for(let d=0;d<4;d++){let h=i[(this.shift+d)%4];this.compact?(o<<=7,o+=h>>1&127):(o<<=10,o+=(h>>2&992)+(h>>1&31))}let l=this.getCorrectedParameterData(o,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)}getRotation(n,r){let i=0;n.forEach((o,l,d)=>{let h=(o>>r-2<<1)+(o&1);i=(i<<3)+h}),i=((i&1)<<11)+(i>>1);for(let o=0;o<4;o++)if(E.bitCount(i^this.EXPECTED_CORNER_BITS[o])<=2)return o;throw new K}getCorrectedParameterData(n,r){let i,o;r?(i=7,o=2):(i=10,o=4);let l=i-o,d=new Int32Array(i);for(let g=i-1;g>=0;--g)d[g]=n&15,n>>=4;try{new li(Me.AZTEC_PARAM).decode(d,l)}catch{throw new K}let h=0;for(let g=0;g<o;g++)h=(h<<4)+d[g];return h}getBullsEyeCorners(n){let r=n,i=n,o=n,l=n,d=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let S=this.getFirstDifferent(r,d,1,-1),I=this.getFirstDifferent(i,d,1,1),D=this.getFirstDifferent(o,d,-1,1),F=this.getFirstDifferent(l,d,-1,-1);if(this.nbCenterLayers>2){let z=this.distancePoint(F,S)*this.nbCenterLayers/(this.distancePoint(l,r)*(this.nbCenterLayers+2));if(z<.75||z>1.25||!this.isWhiteOrBlackRectangle(S,I,D,F))break}r=S,i=I,o=D,l=F,d=!d}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new K;this.compact=this.nbCenterLayers===5;let h=new we(r.getX()+.5,r.getY()-.5),g=new we(i.getX()+.5,i.getY()+.5),p=new we(o.getX()-.5,o.getY()+.5),v=new we(l.getX()-.5,l.getY()-.5);return this.expandSquare([h,g,p,v],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let n,r,i,o;try{let h=new Zn(this.image).detect();n=h[0],r=h[1],i=h[2],o=h[3]}catch{let g=this.image.getWidth()/2,p=this.image.getHeight()/2;n=this.getFirstDifferent(new Ut(g+7,p-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Ut(g+7,p+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new Ut(g-7,p+7),!1,-1,1).toResultPoint(),o=this.getFirstDifferent(new Ut(g-7,p-7),!1,-1,-1).toResultPoint()}let l=Re.round((n.getX()+o.getX()+r.getX()+i.getX())/4),d=Re.round((n.getY()+o.getY()+r.getY()+i.getY())/4);try{let h=new Zn(this.image,15,l,d).detect();n=h[0],r=h[1],i=h[2],o=h[3]}catch{n=this.getFirstDifferent(new Ut(l+7,d-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Ut(l+7,d+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new Ut(l-7,d+7),!1,-1,1).toResultPoint(),o=this.getFirstDifferent(new Ut(l-7,d-7),!1,-1,-1).toResultPoint()}return l=Re.round((n.getX()+o.getX()+r.getX()+i.getX())/4),d=Re.round((n.getY()+o.getY()+r.getY()+i.getY())/4),new Ut(l,d)}getMatrixCornerPoints(n){return this.expandSquare(n,2*this.nbCenterLayers,this.getDimension())}sampleGrid(n,r,i,o,l){let d=dr.getInstance(),h=this.getDimension(),g=h/2-this.nbCenterLayers,p=h/2+this.nbCenterLayers;return d.sampleGrid(n,h,h,g,g,p,g,p,p,g,p,r.getX(),r.getY(),i.getX(),i.getY(),o.getX(),o.getY(),l.getX(),l.getY())}sampleLine(n,r,i){let o=0,l=this.distanceResultPoint(n,r),d=l/i,h=n.getX(),g=n.getY(),p=d*(r.getX()-n.getX())/l,v=d*(r.getY()-n.getY())/l;for(let S=0;S<i;S++)this.image.get(Re.round(h+S*p),Re.round(g+S*v))&&(o|=1<<i-S-1);return o}isWhiteOrBlackRectangle(n,r,i,o){let l=3;n=new Ut(n.getX()-l,n.getY()+l),r=new Ut(r.getX()-l,r.getY()-l),i=new Ut(i.getX()+l,i.getY()-l),o=new Ut(o.getX()+l,o.getY()+l);let d=this.getColor(o,n);if(d===0)return!1;let h=this.getColor(n,r);return h!==d||(h=this.getColor(r,i),h!==d)?!1:(h=this.getColor(i,o),h===d)}getColor(n,r){let i=this.distancePoint(n,r),o=(r.getX()-n.getX())/i,l=(r.getY()-n.getY())/i,d=0,h=n.getX(),g=n.getY(),p=this.image.get(n.getX(),n.getY()),v=Math.ceil(i);for(let I=0;I<v;I++)h+=o,g+=l,this.image.get(Re.round(h),Re.round(g))!==p&&d++;let S=d/i;return S>.1&&S<.9?0:S<=.1===p?1:-1}getFirstDifferent(n,r,i,o){let l=n.getX()+i,d=n.getY()+o;for(;this.isValid(l,d)&&this.image.get(l,d)===r;)l+=i,d+=o;for(l-=i,d-=o;this.isValid(l,d)&&this.image.get(l,d)===r;)l+=i;for(l-=i;this.isValid(l,d)&&this.image.get(l,d)===r;)d+=o;return d-=o,new Ut(l,d)}expandSquare(n,r,i){let o=i/(2*r),l=n[0].getX()-n[2].getX(),d=n[0].getY()-n[2].getY(),h=(n[0].getX()+n[2].getX())/2,g=(n[0].getY()+n[2].getY())/2,p=new we(h+o*l,g+o*d),v=new we(h-o*l,g-o*d);l=n[1].getX()-n[3].getX(),d=n[1].getY()-n[3].getY(),h=(n[1].getX()+n[3].getX())/2,g=(n[1].getY()+n[3].getY())/2;let S=new we(h+o*l,g+o*d),I=new we(h-o*l,g-o*d);return[p,S,v,I]}isValid(n,r){return n>=0&&n<this.image.getWidth()&&r>0&&r<this.image.getHeight()}isValidPoint(n){let r=Re.round(n.getX()),i=Re.round(n.getY());return this.isValid(r,i)}distancePoint(n,r){return Re.distance(n.getX(),n.getY(),r.getX(),r.getY())}distanceResultPoint(n,r){return Re.distance(n.getX(),n.getY(),r.getX(),r.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(E.truncDivision(this.nbLayers-4,8)+1)+15}}class ba{decode(n,r=null){let i=null,o=new vd(n.getBlackMatrix()),l=null,d=null;try{let v=o.detectMirror(!1);l=v.getPoints(),this.reportFoundResultPoints(r,l),d=new Ye().decode(v)}catch(v){i=v}if(d==null)try{let v=o.detectMirror(!0);l=v.getPoints(),this.reportFoundResultPoints(r,l),d=new Ye().decode(v)}catch(v){throw i??v}let h=new He(d.getText(),d.getRawBytes(),d.getNumBits(),l,oe.AZTEC,M.currentTimeMillis()),g=d.getByteSegments();g!=null&&h.putMetadata(ft.BYTE_SEGMENTS,g);let p=d.getECLevel();return p!=null&&h.putMetadata(ft.ERROR_CORRECTION_LEVEL,p),h}reportFoundResultPoints(n,r){if(n!=null){let i=n.get(U.NEED_RESULT_POINT_CALLBACK);i!=null&&r.forEach((o,l,d)=>{i.foundPossibleResultPoint(o)})}}reset(){}}class Ex extends Ie{constructor(n=500){super(new ba,n)}}class gt{decode(n,r){try{return this.doDecode(n,r)}catch{if(r&&r.get(U.TRY_HARDER)===!0&&n.isRotateSupported()){const l=n.rotateCounterClockwise(),d=this.doDecode(l,r),h=d.getResultMetadata();let g=270;h!==null&&h.get(ft.ORIENTATION)===!0&&(g=g+h.get(ft.ORIENTATION)%360),d.putMetadata(ft.ORIENTATION,g);const p=d.getResultPoints();if(p!==null){const v=l.getHeight();for(let S=0;S<p.length;S++)p[S]=new we(v-p[S].getY()-1,p[S].getX())}return d}else throw new K}}reset(){}doDecode(n,r){const i=n.getWidth(),o=n.getHeight();let l=new k(i);const d=r&&r.get(U.TRY_HARDER)===!0,h=Math.max(1,o>>(d?8:5));let g;d?g=o:g=15;const p=Math.trunc(o/2);for(let v=0;v<g;v++){const S=Math.trunc((v+1)/2),I=(v&1)===0,D=p+h*(I?S:-S);if(D<0||D>=o)break;try{l=n.getBlackRow(D,l)}catch{continue}for(let F=0;F<2;F++){if(F===1&&(l.reverse(),r&&r.get(U.NEED_RESULT_POINT_CALLBACK)===!0)){const z=new Map;r.forEach((W,q)=>z.set(q,W)),z.delete(U.NEED_RESULT_POINT_CALLBACK),r=z}try{const z=this.decodeRow(D,l,r);if(F===1){z.putMetadata(ft.ORIENTATION,180);const W=z.getResultPoints();W!==null&&(W[0]=new we(i-W[0].getX()-1,W[0].getY()),W[1]=new we(i-W[1].getX()-1,W[1].getY()))}return z}catch{}}}throw new K}static recordPattern(n,r,i){const o=i.length;for(let p=0;p<o;p++)i[p]=0;const l=n.getSize();if(r>=l)throw new K;let d=!n.get(r),h=0,g=r;for(;g<l;){if(n.get(g)!==d)i[h]++;else{if(++h===o)break;i[h]=1,d=!d}g++}if(!(h===o||h===o-1&&g===l))throw new K}static recordPatternInReverse(n,r,i){let o=i.length,l=n.get(r);for(;r>0&&o>=0;)n.get(--r)!==l&&(o--,l=!l);if(o>=0)throw new K;gt.recordPattern(n,r+1,i)}static patternMatchVariance(n,r,i){const o=n.length;let l=0,d=0;for(let p=0;p<o;p++)l+=n[p],d+=r[p];if(l<d)return Number.POSITIVE_INFINITY;const h=l/d;i*=h;let g=0;for(let p=0;p<o;p++){const v=n[p],S=r[p]*h,I=v>S?v-S:S-v;if(I>i)return Number.POSITIVE_INFINITY;g+=I}return g/l}}class de extends gt{static findStartPattern(n){const r=n.getSize(),i=n.getNextSet(0);let o=0,l=Int32Array.from([0,0,0,0,0,0]),d=i,h=!1;const g=6;for(let p=i;p<r;p++)if(n.get(p)!==h)l[o]++;else{if(o===g-1){let v=de.MAX_AVG_VARIANCE,S=-1;for(let I=de.CODE_START_A;I<=de.CODE_START_C;I++){const D=gt.patternMatchVariance(l,de.CODE_PATTERNS[I],de.MAX_INDIVIDUAL_VARIANCE);D<v&&(v=D,S=I)}if(S>=0&&n.isRange(Math.max(0,d-(p-d)/2),d,!1))return Int32Array.from([d,p,S]);d+=l[0]+l[1],l=l.slice(2,l.length-1),l[o-1]=0,l[o]=0,o--}else o++;l[o]=1,h=!h}throw new K}static decodeCode(n,r,i){gt.recordPattern(n,i,r);let o=de.MAX_AVG_VARIANCE,l=-1;for(let d=0;d<de.CODE_PATTERNS.length;d++){const h=de.CODE_PATTERNS[d],g=this.patternMatchVariance(r,h,de.MAX_INDIVIDUAL_VARIANCE);g<o&&(o=g,l=d)}if(l>=0)return l;throw new K}decodeRow(n,r,i){const o=i&&i.get(U.ASSUME_GS1)===!0,l=de.findStartPattern(r),d=l[2];let h=0;const g=new Uint8Array(20);g[h++]=d;let p;switch(d){case de.CODE_START_A:p=de.CODE_CODE_A;break;case de.CODE_START_B:p=de.CODE_CODE_B;break;case de.CODE_START_C:p=de.CODE_CODE_C;break;default:throw new L}let v=!1,S=!1,I="",D=l[0],F=l[1];const z=Int32Array.from([0,0,0,0,0,0]);let W=0,q=0,ie=d,ae=0,re=!0,je=!1,Ae=!1;for(;!v;){const vs=S;switch(S=!1,W=q,q=de.decodeCode(r,z,F),g[h++]=q,q!==de.CODE_STOP&&(re=!0),q!==de.CODE_STOP&&(ae++,ie+=ae*q),D=F,F+=z.reduce((Jx,$x)=>Jx+$x,0),q){case de.CODE_START_A:case de.CODE_START_B:case de.CODE_START_C:throw new L}switch(p){case de.CODE_CODE_A:if(q<64)Ae===je?I+=String.fromCharCode(32+q):I+=String.fromCharCode(32+q+128),Ae=!1;else if(q<96)Ae===je?I+=String.fromCharCode(q-64):I+=String.fromCharCode(q+64),Ae=!1;else switch(q!==de.CODE_STOP&&(re=!1),q){case de.CODE_FNC_1:o&&(I.length===0?I+="]C1":I+="");break;case de.CODE_FNC_2:case de.CODE_FNC_3:break;case de.CODE_FNC_4_A:!je&&Ae?(je=!0,Ae=!1):je&&Ae?(je=!1,Ae=!1):Ae=!0;break;case de.CODE_SHIFT:S=!0,p=de.CODE_CODE_B;break;case de.CODE_CODE_B:p=de.CODE_CODE_B;break;case de.CODE_CODE_C:p=de.CODE_CODE_C;break;case de.CODE_STOP:v=!0;break}break;case de.CODE_CODE_B:if(q<96)Ae===je?I+=String.fromCharCode(32+q):I+=String.fromCharCode(32+q+128),Ae=!1;else switch(q!==de.CODE_STOP&&(re=!1),q){case de.CODE_FNC_1:o&&(I.length===0?I+="]C1":I+="");break;case de.CODE_FNC_2:case de.CODE_FNC_3:break;case de.CODE_FNC_4_B:!je&&Ae?(je=!0,Ae=!1):je&&Ae?(je=!1,Ae=!1):Ae=!0;break;case de.CODE_SHIFT:S=!0,p=de.CODE_CODE_A;break;case de.CODE_CODE_A:p=de.CODE_CODE_A;break;case de.CODE_CODE_C:p=de.CODE_CODE_C;break;case de.CODE_STOP:v=!0;break}break;case de.CODE_CODE_C:if(q<100)q<10&&(I+="0"),I+=q;else switch(q!==de.CODE_STOP&&(re=!1),q){case de.CODE_FNC_1:o&&(I.length===0?I+="]C1":I+="");break;case de.CODE_CODE_A:p=de.CODE_CODE_A;break;case de.CODE_CODE_B:p=de.CODE_CODE_B;break;case de.CODE_STOP:v=!0;break}break}vs&&(p=p===de.CODE_CODE_A?de.CODE_CODE_B:de.CODE_CODE_A)}const Qt=F-D;if(F=r.getNextUnset(F),!r.isRange(F,Math.min(r.getSize(),F+(F-D)/2),!1))throw new K;if(ie-=ae*W,ie%103!==W)throw new j;const Tn=I.length;if(Tn===0)throw new K;Tn>0&&re&&(p===de.CODE_CODE_C?I=I.substring(0,Tn-2):I=I.substring(0,Tn-1));const Jt=(l[1]+l[0])/2,Xe=D+Qt/2,jt=g.length,an=new Uint8Array(jt);for(let vs=0;vs<jt;vs++)an[vs]=g[vs];const ws=[new we(Jt,n),new we(Xe,n)];return new He(I,an,0,ws,oe.CODE_128,new Date().getTime())}}de.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],de.MAX_AVG_VARIANCE=.25,de.MAX_INDIVIDUAL_VARIANCE=.7,de.CODE_SHIFT=98,de.CODE_CODE_C=99,de.CODE_CODE_B=100,de.CODE_CODE_A=101,de.CODE_FNC_1=102,de.CODE_FNC_2=97,de.CODE_FNC_3=96,de.CODE_FNC_4_A=101,de.CODE_FNC_4_B=100,de.CODE_START_A=103,de.CODE_START_B=104,de.CODE_START_C=105,de.CODE_STOP=106;class yt extends gt{constructor(n=!1,r=!1){super(),this.usingCheckDigit=n,this.extendedMode=r,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(n,r,i){let o=this.counters;o.fill(0),this.decodeRowResult="";let l=yt.findAsteriskPattern(r,o),d=r.getNextSet(l[1]),h=r.getSize(),g,p;do{yt.recordPattern(r,d,o);let z=yt.toNarrowWidePattern(o);if(z<0)throw new K;g=yt.patternToChar(z),this.decodeRowResult+=g,p=d;for(let W of o)d+=W;d=r.getNextSet(d)}while(g!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let v=0;for(let z of o)v+=z;let S=d-p-v;if(d!==h&&S*2<v)throw new K;if(this.usingCheckDigit){let z=this.decodeRowResult.length-1,W=0;for(let q=0;q<z;q++)W+=yt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(q));if(this.decodeRowResult.charAt(z)!==yt.ALPHABET_STRING.charAt(W%43))throw new j;this.decodeRowResult=this.decodeRowResult.substring(0,z)}if(this.decodeRowResult.length===0)throw new K;let I;this.extendedMode?I=yt.decodeExtended(this.decodeRowResult):I=this.decodeRowResult;let D=(l[1]+l[0])/2,F=p+v/2;return new He(I,null,0,[new we(D,n),new we(F,n)],oe.CODE_39,new Date().getTime())}static findAsteriskPattern(n,r){let i=n.getSize(),o=n.getNextSet(0),l=0,d=o,h=!1,g=r.length;for(let p=o;p<i;p++)if(n.get(p)!==h)r[l]++;else{if(l===g-1){if(this.toNarrowWidePattern(r)===yt.ASTERISK_ENCODING&&n.isRange(Math.max(0,d-Math.floor((p-d)/2)),d,!1))return[d,p];d+=r[0]+r[1],r.copyWithin(0,2,2+l-1),r[l-1]=0,r[l]=0,l--}else l++;r[l]=1,h=!h}throw new K}static toNarrowWidePattern(n){let r=n.length,i=0,o;do{let l=2147483647;for(let g of n)g<l&&g>i&&(l=g);i=l,o=0;let d=0,h=0;for(let g=0;g<r;g++){let p=n[g];p>i&&(h|=1<<r-1-g,o++,d+=p)}if(o===3){for(let g=0;g<r&&o>0;g++){let p=n[g];if(p>i&&(o--,p*2>=d))return-1}return h}}while(o>3);return-1}static patternToChar(n){for(let r=0;r<yt.CHARACTER_ENCODINGS.length;r++)if(yt.CHARACTER_ENCODINGS[r]===n)return yt.ALPHABET_STRING.charAt(r);if(n===yt.ASTERISK_ENCODING)return"*";throw new K}static decodeExtended(n){let r=n.length,i="";for(let o=0;o<r;o++){let l=n.charAt(o);if(l==="+"||l==="$"||l==="%"||l==="/"){let d=n.charAt(o+1),h="\0";switch(l){case"+":if(d>="A"&&d<="Z")h=String.fromCharCode(d.charCodeAt(0)+32);else throw new L;break;case"$":if(d>="A"&&d<="Z")h=String.fromCharCode(d.charCodeAt(0)-64);else throw new L;break;case"%":if(d>="A"&&d<="E")h=String.fromCharCode(d.charCodeAt(0)-38);else if(d>="F"&&d<="J")h=String.fromCharCode(d.charCodeAt(0)-11);else if(d>="K"&&d<="O")h=String.fromCharCode(d.charCodeAt(0)+16);else if(d>="P"&&d<="T")h=String.fromCharCode(d.charCodeAt(0)+43);else if(d==="U")h="\0";else if(d==="V")h="@";else if(d==="W")h="`";else if(d==="X"||d==="Y"||d==="Z")h="";else throw new L;break;case"/":if(d>="A"&&d<="O")h=String.fromCharCode(d.charCodeAt(0)-32);else if(d==="Z")h=":";else throw new L;break}i+=h,o++}else i+=l}return i}}yt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",yt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],yt.ASTERISK_ENCODING=148;class We extends gt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(n,r,i){let o=this.decodeStart(r),l=this.decodeEnd(r),d=new fe;We.decodeMiddle(r,o[1],l[0],d);let h=d.toString(),g=null;i!=null&&(g=i.get(U.ALLOWED_LENGTHS)),g==null&&(g=We.DEFAULT_ALLOWED_LENGTHS);let p=h.length,v=!1,S=0;for(let F of g){if(p===F){v=!0;break}F>S&&(S=F)}if(!v&&p>S&&(v=!0),!v)throw new L;const I=[new we(o[1],n),new we(l[0],n)];return new He(h,null,0,I,oe.ITF,new Date().getTime())}static decodeMiddle(n,r,i,o){let l=new Int32Array(10),d=new Int32Array(5),h=new Int32Array(5);for(l.fill(0),d.fill(0),h.fill(0);r<i;){gt.recordPattern(n,r,l);for(let p=0;p<5;p++){let v=2*p;d[p]=l[v],h[p]=l[v+1]}let g=We.decodeDigit(d);o.append(g.toString()),g=this.decodeDigit(h),o.append(g.toString()),l.forEach(function(p){r+=p})}}decodeStart(n){let r=We.skipWhiteSpace(n),i=We.findGuardPattern(n,r,We.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(n,i[0]),i}validateQuietZone(n,r){let i=this.narrowLineWidth*10;i=i<r?i:r;for(let o=r-1;i>0&&o>=0&&!n.get(o);o--)i--;if(i!==0)throw new K}static skipWhiteSpace(n){const r=n.getSize(),i=n.getNextSet(0);if(i===r)throw new K;return i}decodeEnd(n){n.reverse();try{let r=We.skipWhiteSpace(n),i;try{i=We.findGuardPattern(n,r,We.END_PATTERN_REVERSED[0])}catch(l){l instanceof K&&(i=We.findGuardPattern(n,r,We.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,i[0]);let o=i[0];return i[0]=n.getSize()-i[1],i[1]=n.getSize()-o,i}finally{n.reverse()}}static findGuardPattern(n,r,i){let o=i.length,l=new Int32Array(o),d=n.getSize(),h=!1,g=0,p=r;l.fill(0);for(let v=r;v<d;v++)if(n.get(v)!==h)l[g]++;else{if(g===o-1){if(gt.patternMatchVariance(l,i,We.MAX_INDIVIDUAL_VARIANCE)<We.MAX_AVG_VARIANCE)return[p,v];p+=l[0]+l[1],M.arraycopy(l,2,l,0,g-1),l[g-1]=0,l[g]=0,g--}else g++;l[g]=1,h=!h}throw new K}static decodeDigit(n){let r=We.MAX_AVG_VARIANCE,i=-1,o=We.PATTERNS.length;for(let l=0;l<o;l++){let d=We.PATTERNS[l],h=gt.patternMatchVariance(n,d,We.MAX_INDIVIDUAL_VARIANCE);h<r?(r=h,i=l):h===r&&(i=-1)}if(i>=0)return i%10;throw new K}}We.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],We.MAX_AVG_VARIANCE=.38,We.MAX_INDIVIDUAL_VARIANCE=.5,We.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],We.START_PATTERN=Int32Array.from([1,1,1,1]),We.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class lt extends gt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(n){let r=!1,i,o=0,l=Int32Array.from([0,0,0]);for(;!r;){l=Int32Array.from([0,0,0]),i=lt.findGuardPattern(n,o,!1,this.START_END_PATTERN,l);let d=i[0];o=i[1];let h=d-(o-d);h>=0&&(r=n.isRange(h,d,!1))}return i}static checkChecksum(n){return lt.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let r=n.length;if(r===0)return!1;let i=parseInt(n.charAt(r-1),10);return lt.getStandardUPCEANChecksum(n.substring(0,r-1))===i}static getStandardUPCEANChecksum(n){let r=n.length,i=0;for(let o=r-1;o>=0;o-=2){let l=n.charAt(o).charCodeAt(0)-48;if(l<0||l>9)throw new L;i+=l}i*=3;for(let o=r-2;o>=0;o-=2){let l=n.charAt(o).charCodeAt(0)-48;if(l<0||l>9)throw new L;i+=l}return(1e3-i)%10}static decodeEnd(n,r){return lt.findGuardPattern(n,r,!1,lt.START_END_PATTERN,new Int32Array(lt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(n,r,i,o){return this.findGuardPattern(n,r,i,o,new Int32Array(o.length))}static findGuardPattern(n,r,i,o,l){let d=n.getSize();r=i?n.getNextUnset(r):n.getNextSet(r);let h=0,g=r,p=o.length,v=i;for(let S=r;S<d;S++)if(n.get(S)!==v)l[h]++;else{if(h===p-1){if(gt.patternMatchVariance(l,o,lt.MAX_INDIVIDUAL_VARIANCE)<lt.MAX_AVG_VARIANCE)return Int32Array.from([g,S]);g+=l[0]+l[1];let I=l.slice(2,l.length-1);for(let D=0;D<h-1;D++)l[D]=I[D];l[h-1]=0,l[h]=0,h--}else h++;l[h]=1,v=!v}throw new K}static decodeDigit(n,r,i,o){this.recordPattern(n,i,r);let l=this.MAX_AVG_VARIANCE,d=-1,h=o.length;for(let g=0;g<h;g++){let p=o[g],v=gt.patternMatchVariance(r,p,lt.MAX_INDIVIDUAL_VARIANCE);v<l&&(l=v,d=g)}if(d>=0)return d;throw new K}}lt.MAX_AVG_VARIANCE=.48,lt.MAX_INDIVIDUAL_VARIANCE=.7,lt.START_END_PATTERN=Int32Array.from([1,1,1]),lt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),lt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),lt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class ci{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,r,i){let o=this.decodeRowStringBuffer,l=this.decodeMiddle(r,i,o),d=o.toString(),h=ci.parseExtensionString(d),g=[new we((i[0]+i[1])/2,n),new we(l,n)],p=new He(d,null,0,g,oe.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&p.putAllMetadata(h),p}decodeMiddle(n,r,i){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let l=n.getSize(),d=r[1],h=0;for(let p=0;p<5&&d<l;p++){let v=lt.decodeDigit(n,o,d,lt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+v%10);for(let S of o)d+=S;v>=10&&(h|=1<<4-p),p!==4&&(d=n.getNextSet(d),d=n.getNextUnset(d))}if(i.length!==5)throw new K;let g=this.determineCheckDigit(h);if(ci.extensionChecksum(i.toString())!==g)throw new K;return d}static extensionChecksum(n){let r=n.length,i=0;for(let o=r-2;o>=0;o-=2)i+=n.charAt(o).charCodeAt(0)-48;i*=3;for(let o=r-1;o>=0;o-=2)i+=n.charAt(o).charCodeAt(0)-48;return i*=3,i%10}determineCheckDigit(n){for(let r=0;r<10;r++)if(n===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new K}static parseExtensionString(n){if(n.length!==5)return null;let r=ci.parseExtension5String(n);return r==null?null:new Map([[ft.SUGGESTED_PRICE,r]])}static parseExtension5String(n){let r;switch(n.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(n){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}let i=parseInt(n.substring(1)),o=(i/100).toString(),l=i%100,d=l<10?"0"+l:l.toString();return r+o+"."+d}}class dl{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,r,i){let o=this.decodeRowStringBuffer,l=this.decodeMiddle(r,i,o),d=o.toString(),h=dl.parseExtensionString(d),g=[new we((i[0]+i[1])/2,n),new we(l,n)],p=new He(d,null,0,g,oe.UPC_EAN_EXTENSION,new Date().getTime());return h!=null&&p.putAllMetadata(h),p}decodeMiddle(n,r,i){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let l=n.getSize(),d=r[1],h=0;for(let g=0;g<2&&d<l;g++){let p=lt.decodeDigit(n,o,d,lt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+p%10);for(let v of o)d+=v;p>=10&&(h|=1<<1-g),g!==1&&(d=n.getNextSet(d),d=n.getNextUnset(d))}if(i.length!==2)throw new K;if(parseInt(i.toString())%4!==h)throw new K;return d}static parseExtensionString(n){return n.length!==2?null:new Map([[ft.ISSUE_NUMBER,parseInt(n)]])}}class bd{static decodeRow(n,r,i){let o=lt.findGuardPattern(r,i,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new ci().decodeRow(n,r,o)}catch{return new dl().decodeRow(n,r,o)}}}bd.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Le extends lt{constructor(){super(),this.decodeRowStringBuffer="",Le.L_AND_G_PATTERNS=Le.L_PATTERNS.map(n=>Int32Array.from(n));for(let n=10;n<20;n++){let r=Le.L_PATTERNS[n-10],i=new Int32Array(r.length);for(let o=0;o<r.length;o++)i[o]=r[r.length-o-1];Le.L_AND_G_PATTERNS[n]=i}}decodeRow(n,r,i){let o=Le.findStartGuardPattern(r),l=i==null?null:i.get(U.NEED_RESULT_POINT_CALLBACK);if(l!=null){const re=new we((o[0]+o[1])/2,n);l.foundPossibleResultPoint(re)}let d=this.decodeMiddle(r,o,this.decodeRowStringBuffer),h=d.rowOffset,g=d.resultString;if(l!=null){const re=new we(h,n);l.foundPossibleResultPoint(re)}let p=this.decodeEnd(r,h);if(l!=null){const re=new we((p[0]+p[1])/2,n);l.foundPossibleResultPoint(re)}let v=p[1],S=v+(v-p[0]);if(S>=r.getSize()||!r.isRange(v,S,!1))throw new K;let I=g.toString();if(I.length<8)throw new L;if(!Le.checkChecksum(I))throw new j;let D=(o[1]+o[0])/2,F=(p[1]+p[0])/2,z=this.getBarcodeFormat(),W=[new we(D,n),new we(F,n)],q=new He(I,null,0,W,z,new Date().getTime()),ie=0;try{let re=bd.decodeRow(n,r,p[1]);q.putMetadata(ft.UPC_EAN_EXTENSION,re.getText()),q.putAllMetadata(re.getResultMetadata()),q.addResultPoints(re.getResultPoints()),ie=re.getText().length}catch{}let ae=i==null?null:i.get(U.ALLOWED_EAN_EXTENSIONS);if(ae!=null){let re=!1;for(let je in ae)if(ie.toString()===je){re=!0;break}if(!re)throw new K}return q}decodeEnd(n,r){return Le.findGuardPattern(n,r,!1,Le.START_END_PATTERN,new Int32Array(Le.START_END_PATTERN.length).fill(0))}static checkChecksum(n){return Le.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let r=n.length;if(r===0)return!1;let i=parseInt(n.charAt(r-1),10);return Le.getStandardUPCEANChecksum(n.substring(0,r-1))===i}static getStandardUPCEANChecksum(n){let r=n.length,i=0;for(let o=r-1;o>=0;o-=2){let l=n.charAt(o).charCodeAt(0)-48;if(l<0||l>9)throw new L;i+=l}i*=3;for(let o=r-2;o>=0;o-=2){let l=n.charAt(o).charCodeAt(0)-48;if(l<0||l>9)throw new L;i+=l}return(1e3-i)%10}}class Vr extends Le{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,r,i){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let l=n.getSize(),d=r[1],h=0;for(let p=0;p<6&&d<l;p++){let v=Le.decodeDigit(n,o,d,Le.L_AND_G_PATTERNS);i+=String.fromCharCode(48+v%10);for(let S of o)d+=S;v>=10&&(h|=1<<5-p)}i=Vr.determineFirstDigit(i,h),d=Le.findGuardPattern(n,d,!0,Le.MIDDLE_PATTERN,new Int32Array(Le.MIDDLE_PATTERN.length).fill(0))[1];for(let p=0;p<6&&d<l;p++){let v=Le.decodeDigit(n,o,d,Le.L_PATTERNS);i+=String.fromCharCode(48+v);for(let S of o)d+=S}return{rowOffset:d,resultString:i}}getBarcodeFormat(){return oe.EAN_13}static determineFirstDigit(n,r){for(let i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return n=String.fromCharCode(48+i)+n,n;throw new K}}Vr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Cd extends Le{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,r,i){const o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let l=n.getSize(),d=r[1];for(let g=0;g<4&&d<l;g++){let p=Le.decodeDigit(n,o,d,Le.L_PATTERNS);i+=String.fromCharCode(48+p);for(let v of o)d+=v}d=Le.findGuardPattern(n,d,!0,Le.MIDDLE_PATTERN,new Int32Array(Le.MIDDLE_PATTERN.length).fill(0))[1];for(let g=0;g<4&&d<l;g++){let p=Le.decodeDigit(n,o,d,Le.L_PATTERNS);i+=String.fromCharCode(48+p);for(let v of o)d+=v}return{rowOffset:d,resultString:i}}getBarcodeFormat(){return oe.EAN_8}}class Ed extends Le{constructor(){super(...arguments),this.ean13Reader=new Vr}getBarcodeFormat(){return oe.UPC_A}decode(n,r){return this.maybeReturnResult(this.ean13Reader.decode(n))}decodeRow(n,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,r,i))}decodeMiddle(n,r,i){return this.ean13Reader.decodeMiddle(n,r,i)}maybeReturnResult(n){let r=n.getText();if(r.charAt(0)==="0"){let i=new He(r.substring(1),null,null,n.getResultPoints(),oe.UPC_A);return n.getResultMetadata()!=null&&i.putAllMetadata(n.getResultMetadata()),i}else throw new K}reset(){this.ean13Reader.reset()}}class In extends Le{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(n,r,i){const o=this.decodeMiddleCounters.map(p=>p);o[0]=0,o[1]=0,o[2]=0,o[3]=0;const l=n.getSize();let d=r[1],h=0;for(let p=0;p<6&&d<l;p++){const v=In.decodeDigit(n,o,d,In.L_AND_G_PATTERNS);i+=String.fromCharCode(48+v%10);for(let S of o)d+=S;v>=10&&(h|=1<<5-p)}let g=In.determineNumSysAndCheckDigit(i,h);return{rowOffset:d,resultString:g}}decodeEnd(n,r){return In.findGuardPatternWithoutCounters(n,r,!0,In.MIDDLE_END_PATTERN)}checkChecksum(n){return Le.checkChecksum(In.convertUPCEtoUPCA(n))}static determineNumSysAndCheckDigit(n,r){for(let i=0;i<=1;i++)for(let o=0;o<10;o++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][o]){let l=String.fromCharCode(48+i),d=String.fromCharCode(48+o);return l+n+d}throw K.getNotFoundInstance()}getBarcodeFormat(){return oe.UPC_E}static convertUPCEtoUPCA(n){const r=n.slice(1,7).split("").map(l=>l.charCodeAt(0)),i=new fe;i.append(n.charAt(0));let o=r[5];switch(o){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(o),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(o);break}return n.length>=8&&i.append(n.charAt(7)),i.toString()}}In.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),In.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class fl extends gt{constructor(n){super();let r=n==null?null:n.get(U.POSSIBLE_FORMATS),i=[];a(r)?(i.push(new Vr),i.push(new Ed),i.push(new Cd),i.push(new In)):(r.indexOf(oe.EAN_13)>-1&&i.push(new Vr),r.indexOf(oe.UPC_A)>-1&&i.push(new Ed),r.indexOf(oe.EAN_8)>-1&&i.push(new Cd),r.indexOf(oe.UPC_E)>-1&&i.push(new In)),this.readers=i}decodeRow(n,r,i){for(let o of this.readers)try{const l=o.decodeRow(n,r,i),d=l.getBarcodeFormat()===oe.EAN_13&&l.getText().charAt(0)==="0",h=i==null?null:i.get(U.POSSIBLE_FORMATS),g=h==null||h.includes(oe.UPC_A);if(d&&g){const p=l.getRawBytes(),v=new He(l.getText().substring(1),p,p?p.length:null,l.getResultPoints(),oe.UPC_A);return v.putAllMetadata(l.getResultMetadata()),v}return l}catch{}throw new K}reset(){for(let n of this.readers)n.reset()}}class Dt extends gt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(n,r){for(let i=0;i<r.length;i++)if(gt.patternMatchVariance(n,r[i],Dt.MAX_INDIVIDUAL_VARIANCE)<Dt.MAX_AVG_VARIANCE)return i;throw new K}static count(n){return Re.sum(new Int32Array(n))}static increment(n,r){let i=0,o=r[0];for(let l=1;l<n.length;l++)r[l]>o&&(o=r[l],i=l);n[i]++}static decrement(n,r){let i=0,o=r[0];for(let l=1;l<n.length;l++)r[l]<o&&(o=r[l],i=l);n[i]--}static isFinderPattern(n){let r=n[0]+n[1],i=r+n[2]+n[3],o=r/i;if(o>=Dt.MIN_FINDER_PATTERN_RATIO&&o<=Dt.MAX_FINDER_PATTERN_RATIO){let l=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;for(let h of n)h>d&&(d=h),h<l&&(l=h);return d<10*l}return!1}}Dt.MAX_AVG_VARIANCE=.2,Dt.MAX_INDIVIDUAL_VARIANCE=.45,Dt.MIN_FINDER_PATTERN_RATIO=9.5/12,Dt.MAX_FINDER_PATTERN_RATIO=12.5/14;class fs{constructor(n,r){this.value=n,this.checksumPortion=r}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(n){if(!(n instanceof fs))return!1;const r=n;return this.value===r.value&&this.checksumPortion===r.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ca{constructor(n,r,i,o,l){this.value=n,this.startEnd=r,this.value=n,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new we(i,l)),this.resultPoints.push(new we(o,l))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(n){if(!(n instanceof Ca))return!1;const r=n;return this.value===r.value}hashCode(){return this.value}}class Pn{constructor(){}static getRSSvalue(n,r,i){let o=0;for(let g of n)o+=g;let l=0,d=0,h=n.length;for(let g=0;g<h-1;g++){let p;for(p=1,d|=1<<g;p<n[g];p++,d&=~(1<<g)){let v=Pn.combins(o-p-1,h-g-2);if(i&&d===0&&o-p-(h-g-1)>=h-g-1&&(v-=Pn.combins(o-p-(h-g),h-g-2)),h-g-1>1){let S=0;for(let I=o-p-(h-g-2);I>r;I--)S+=Pn.combins(o-p-I-1,h-g-3);v-=S*(h-1-g)}else o-p>r&&v--;l+=v}o-=p}return l}static combins(n,r){let i,o;n-r>r?(o=r,i=n-r):(o=n-r,i=r);let l=1,d=1;for(let h=n;h>i;h--)l*=h,d<=o&&(l/=d,d++);for(;d<=o;)l/=d,d++;return l}}class Nx{static buildBitArray(n){let r=n.length*2-1;n[n.length-1].getRightChar()==null&&(r-=1);let i=12*r,o=new k(i),l=0,h=n[0].getRightChar().getValue();for(let g=11;g>=0;--g)h&1<<g&&o.set(l),l++;for(let g=1;g<n.length;++g){let p=n[g],v=p.getLeftChar().getValue();for(let S=11;S>=0;--S)v&1<<S&&o.set(l),l++;if(p.getRightChar()!=null){let S=p.getRightChar().getValue();for(let I=11;I>=0;--I)S&1<<I&&o.set(l),l++}}return o}}class Hr{constructor(n,r){r?this.decodedInformation=null:(this.finished=n,this.decodedInformation=r)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class hl{constructor(n){this.newPosition=n}getNewPosition(){return this.newPosition}}class qt extends hl{constructor(n,r){super(n),this.value=r}getValue(){return this.value}isFNC1(){return this.value===qt.FNC1}}qt.FNC1="$";class Wr extends hl{constructor(n,r,i){super(n),i?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=r}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class pn extends hl{constructor(n,r,i){if(super(n),r<0||r>10||i<0||i>10)throw new L;this.firstDigit=r,this.secondDigit=i}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===pn.FNC1}isSecondDigitFNC1(){return this.secondDigit===pn.FNC1}isAnyFNC1(){return this.firstDigit===pn.FNC1||this.secondDigit===pn.FNC1}}pn.FNC1=10;class pe{constructor(){}static parseFieldsInGeneralPurpose(n){if(!n)return null;if(n.length<2)throw new K;let r=n.substring(0,2);for(let l of pe.TWO_DIGIT_DATA_LENGTH)if(l[0]===r)return l[1]===pe.VARIABLE_LENGTH?pe.processVariableAI(2,l[2],n):pe.processFixedAI(2,l[1],n);if(n.length<3)throw new K;let i=n.substring(0,3);for(let l of pe.THREE_DIGIT_DATA_LENGTH)if(l[0]===i)return l[1]===pe.VARIABLE_LENGTH?pe.processVariableAI(3,l[2],n):pe.processFixedAI(3,l[1],n);for(let l of pe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(l[0]===i)return l[1]===pe.VARIABLE_LENGTH?pe.processVariableAI(4,l[2],n):pe.processFixedAI(4,l[1],n);if(n.length<4)throw new K;let o=n.substring(0,4);for(let l of pe.FOUR_DIGIT_DATA_LENGTH)if(l[0]===o)return l[1]===pe.VARIABLE_LENGTH?pe.processVariableAI(4,l[2],n):pe.processFixedAI(4,l[1],n);throw new K}static processFixedAI(n,r,i){if(i.length<n)throw new K;let o=i.substring(0,n);if(i.length<n+r)throw new K;let l=i.substring(n,n+r),d=i.substring(n+r),h="("+o+")"+l,g=pe.parseFieldsInGeneralPurpose(d);return g==null?h:h+g}static processVariableAI(n,r,i){let o=i.substring(0,n),l;i.length<n+r?l=i.length:l=n+r;let d=i.substring(n,l),h=i.substring(l),g="("+o+")"+d,p=pe.parseFieldsInGeneralPurpose(h);return p==null?g:g+p}}pe.VARIABLE_LENGTH=[],pe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",pe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",pe.VARIABLE_LENGTH,20],["22",pe.VARIABLE_LENGTH,29],["30",pe.VARIABLE_LENGTH,8],["37",pe.VARIABLE_LENGTH,8],["90",pe.VARIABLE_LENGTH,30],["91",pe.VARIABLE_LENGTH,30],["92",pe.VARIABLE_LENGTH,30],["93",pe.VARIABLE_LENGTH,30],["94",pe.VARIABLE_LENGTH,30],["95",pe.VARIABLE_LENGTH,30],["96",pe.VARIABLE_LENGTH,30],["97",pe.VARIABLE_LENGTH,3],["98",pe.VARIABLE_LENGTH,30],["99",pe.VARIABLE_LENGTH,30]],pe.THREE_DIGIT_DATA_LENGTH=[["240",pe.VARIABLE_LENGTH,30],["241",pe.VARIABLE_LENGTH,30],["242",pe.VARIABLE_LENGTH,6],["250",pe.VARIABLE_LENGTH,30],["251",pe.VARIABLE_LENGTH,30],["253",pe.VARIABLE_LENGTH,17],["254",pe.VARIABLE_LENGTH,20],["400",pe.VARIABLE_LENGTH,30],["401",pe.VARIABLE_LENGTH,30],["402",17],["403",pe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",pe.VARIABLE_LENGTH,20],["421",pe.VARIABLE_LENGTH,15],["422",3],["423",pe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],pe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",pe.VARIABLE_LENGTH,15],["391",pe.VARIABLE_LENGTH,18],["392",pe.VARIABLE_LENGTH,15],["393",pe.VARIABLE_LENGTH,18],["703",pe.VARIABLE_LENGTH,30]],pe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",pe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",pe.VARIABLE_LENGTH,20],["8003",pe.VARIABLE_LENGTH,30],["8004",pe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",pe.VARIABLE_LENGTH,30],["8008",pe.VARIABLE_LENGTH,12],["8018",18],["8020",pe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",pe.VARIABLE_LENGTH,70],["8200",pe.VARIABLE_LENGTH,70]];class hs{constructor(n){this.buffer=new fe,this.information=n}decodeAllCodes(n,r){let i=r,o=null;do{let l=this.decodeGeneralPurposeField(i,o),d=pe.parseFieldsInGeneralPurpose(l.getNewString());if(d!=null&&n.append(d),l.isRemaining()?o=""+l.getRemainingValue():o=null,i===l.getNewPosition())break;i=l.getNewPosition()}while(!0);return n.toString()}isStillNumeric(n){if(n+7>this.information.getSize())return n+4<=this.information.getSize();for(let r=n;r<n+3;++r)if(this.information.get(r))return!0;return this.information.get(n+3)}decodeNumeric(n){if(n+7>this.information.getSize()){let l=this.extractNumericValueFromBitArray(n,4);return l===0?new pn(this.information.getSize(),pn.FNC1,pn.FNC1):new pn(this.information.getSize(),l-1,pn.FNC1)}let r=this.extractNumericValueFromBitArray(n,7),i=(r-8)/11,o=(r-8)%11;return new pn(n+7,i,o)}extractNumericValueFromBitArray(n,r){return hs.extractNumericValueFromBitArray(this.information,n,r)}static extractNumericValueFromBitArray(n,r,i){let o=0;for(let l=0;l<i;++l)n.get(r+l)&&(o|=1<<i-l-1);return o}decodeGeneralPurposeField(n,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(n);let i=this.parseBlocks();return i!=null&&i.isRemaining()?new Wr(this.current.getPosition(),this.buffer.toString(),i.getRemainingValue()):new Wr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let n,r;do{let i=this.current.getPosition();if(this.current.isAlpha()?(r=this.parseAlphaBlock(),n=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),n=r.isFinished()):(r=this.parseNumericBlock(),n=r.isFinished()),!(i!==this.current.getPosition())&&!n)break}while(!n);return r.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let n=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFirstDigitFNC1()){let r;return n.isSecondDigitFNC1()?r=new Wr(this.current.getPosition(),this.buffer.toString()):r=new Wr(this.current.getPosition(),this.buffer.toString(),n.getSecondDigit()),new Hr(!0,r)}if(this.buffer.append(n.getFirstDigit()),n.isSecondDigitFNC1()){let r=new Wr(this.current.getPosition(),this.buffer.toString());return new Hr(!0,r)}this.buffer.append(n.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Hr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let n=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let r=new Wr(this.current.getPosition(),this.buffer.toString());return new Hr(!0,r)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Hr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let n=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let r=new Wr(this.current.getPosition(),this.buffer.toString());return new Hr(!0,r)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Hr(!1)}isStillIsoIec646(n){if(n+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(n,5);if(r>=5&&r<16)return!0;if(n+7>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(n,7);if(i>=64&&i<116)return!0;if(n+8>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(n,8);return o>=232&&o<253}decodeIsoIec646(n){let r=this.extractNumericValueFromBitArray(n,5);if(r===15)return new qt(n+5,qt.FNC1);if(r>=5&&r<15)return new qt(n+5,"0"+(r-5));let i=this.extractNumericValueFromBitArray(n,7);if(i>=64&&i<90)return new qt(n+7,""+(i+1));if(i>=90&&i<116)return new qt(n+7,""+(i+7));let o=this.extractNumericValueFromBitArray(n,8),l;switch(o){case 232:l="!";break;case 233:l='"';break;case 234:l="%";break;case 235:l="&";break;case 236:l="'";break;case 237:l="(";break;case 238:l=")";break;case 239:l="*";break;case 240:l="+";break;case 241:l=",";break;case 242:l="-";break;case 243:l=".";break;case 244:l="/";break;case 245:l=":";break;case 246:l=";";break;case 247:l="<";break;case 248:l="=";break;case 249:l=">";break;case 250:l="?";break;case 251:l="_";break;case 252:l=" ";break;default:throw new L}return new qt(n+8,l)}isStillAlpha(n){if(n+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(n,5);if(r>=5&&r<16)return!0;if(n+6>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(n,6);return i>=16&&i<63}decodeAlphanumeric(n){let r=this.extractNumericValueFromBitArray(n,5);if(r===15)return new qt(n+5,qt.FNC1);if(r>=5&&r<15)return new qt(n+5,"0"+(r-5));let i=this.extractNumericValueFromBitArray(n,6);if(i>=32&&i<58)return new qt(n+6,""+(i+33));let o;switch(i){case 58:o="*";break;case 59:o=",";break;case 60:o="-";break;case 61:o=".";break;case 62:o="/";break;default:throw new Bn("Decoding invalid alphanumeric value: "+i)}return new qt(n+6,o)}isAlphaTo646ToAlphaLatch(n){if(n+1>this.information.getSize())return!1;for(let r=0;r<5&&r+n<this.information.getSize();++r)if(r===2){if(!this.information.get(n+2))return!1}else if(this.information.get(n+r))return!1;return!0}isAlphaOr646ToNumericLatch(n){if(n+3>this.information.getSize())return!1;for(let r=n;r<n+3;++r)if(this.information.get(r))return!1;return!0}isNumericToAlphaNumericLatch(n){if(n+1>this.information.getSize())return!1;for(let r=0;r<4&&r+n<this.information.getSize();++r)if(this.information.get(n+r))return!1;return!0}}class xl{constructor(n){this.information=n,this.generalDecoder=new hs(n)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Kt extends xl{constructor(n){super(n)}encodeCompressedGtin(n,r){n.append("(01)");let i=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,r,i)}encodeCompressedGtinWithoutAI(n,r,i){for(let o=0;o<4;++o){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*o,10);l/100===0&&n.append("0"),l/10===0&&n.append("0"),n.append(l)}Kt.appendCheckDigit(n,i)}static appendCheckDigit(n,r){let i=0;for(let o=0;o<13;o++){let l=n.charAt(o+r).charCodeAt(0)-48;i+=o&1?l:3*l}i=10-i%10,i===10&&(i=0),n.append(i)}}Kt.GTIN_SIZE=40;class xs extends Kt{constructor(n){super(n)}parseInformation(){let n=new fe;n.append("(01)");let r=n.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(xs.HEADER_SIZE,4);return n.append(i),this.encodeCompressedGtinWithoutAI(n,xs.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(n,xs.HEADER_SIZE+44)}}xs.HEADER_SIZE=4;class Ea extends xl{constructor(n){super(n)}parseInformation(){let n=new fe;return this.getGeneralDecoder().decodeAllCodes(n,Ea.HEADER_SIZE)}}Ea.HEADER_SIZE=5;class Na extends Kt{constructor(n){super(n)}encodeCompressedWeight(n,r,i){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(n,o);let l=this.checkWeight(o),d=1e5;for(let h=0;h<5;++h)l/d===0&&n.append("0"),d/=10;n.append(l)}}class Fn extends Na{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()!=Fn.HEADER_SIZE+Na.GTIN_SIZE+Fn.WEIGHT_SIZE)throw new K;let n=new fe;return this.encodeCompressedGtin(n,Fn.HEADER_SIZE),this.encodeCompressedWeight(n,Fn.HEADER_SIZE+Na.GTIN_SIZE,Fn.WEIGHT_SIZE),n.toString()}}Fn.HEADER_SIZE=5,Fn.WEIGHT_SIZE=15;class Ax extends Fn{constructor(n){super(n)}addWeightCode(n,r){n.append("(3103)")}checkWeight(n){return n}}class Sx extends Fn{constructor(n){super(n)}addWeightCode(n,r){r<1e4?n.append("(3202)"):n.append("(3203)")}checkWeight(n){return n<1e4?n:n-1e4}}class Un extends Kt{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<Un.HEADER_SIZE+Kt.GTIN_SIZE)throw new K;let n=new fe;this.encodeCompressedGtin(n,Un.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(Un.HEADER_SIZE+Kt.GTIN_SIZE,Un.LAST_DIGIT_SIZE);n.append("(392"),n.append(r),n.append(")");let i=this.getGeneralDecoder().decodeGeneralPurposeField(Un.HEADER_SIZE+Kt.GTIN_SIZE+Un.LAST_DIGIT_SIZE,null);return n.append(i.getNewString()),n.toString()}}Un.HEADER_SIZE=8,Un.LAST_DIGIT_SIZE=2;class zt extends Kt{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<zt.HEADER_SIZE+Kt.GTIN_SIZE)throw new K;let n=new fe;this.encodeCompressedGtin(n,zt.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(zt.HEADER_SIZE+Kt.GTIN_SIZE,zt.LAST_DIGIT_SIZE);n.append("(393"),n.append(r),n.append(")");let i=this.getGeneralDecoder().extractNumericValueFromBitArray(zt.HEADER_SIZE+Kt.GTIN_SIZE+zt.LAST_DIGIT_SIZE,zt.FIRST_THREE_DIGITS_SIZE);i/100==0&&n.append("0"),i/10==0&&n.append("0"),n.append(i);let o=this.getGeneralDecoder().decodeGeneralPurposeField(zt.HEADER_SIZE+Kt.GTIN_SIZE+zt.LAST_DIGIT_SIZE+zt.FIRST_THREE_DIGITS_SIZE,null);return n.append(o.getNewString()),n.toString()}}zt.HEADER_SIZE=8,zt.LAST_DIGIT_SIZE=2,zt.FIRST_THREE_DIGITS_SIZE=10;class et extends Na{constructor(n,r,i){super(n),this.dateCode=i,this.firstAIdigits=r}parseInformation(){if(this.getInformation().getSize()!=et.HEADER_SIZE+et.GTIN_SIZE+et.WEIGHT_SIZE+et.DATE_SIZE)throw new K;let n=new fe;return this.encodeCompressedGtin(n,et.HEADER_SIZE),this.encodeCompressedWeight(n,et.HEADER_SIZE+et.GTIN_SIZE,et.WEIGHT_SIZE),this.encodeCompressedDate(n,et.HEADER_SIZE+et.GTIN_SIZE+et.WEIGHT_SIZE),n.toString()}encodeCompressedDate(n,r){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,et.DATE_SIZE);if(i==38400)return;n.append("("),n.append(this.dateCode),n.append(")");let o=i%32;i/=32;let l=i%12+1;i/=12;let d=i;d/10==0&&n.append("0"),n.append(d),l/10==0&&n.append("0"),n.append(l),o/10==0&&n.append("0"),n.append(o)}addWeightCode(n,r){n.append("("),n.append(this.firstAIdigits),n.append(r/1e5),n.append(")")}checkWeight(n){return n%1e5}}et.HEADER_SIZE=8,et.WEIGHT_SIZE=20,et.DATE_SIZE=16;function Nd(A){try{if(A.get(1))return new xs(A);if(!A.get(2))return new Ea(A);switch(hs.extractNumericValueFromBitArray(A,1,4)){case 4:return new Ax(A);case 5:return new Sx(A)}switch(hs.extractNumericValueFromBitArray(A,1,5)){case 12:return new Un(A);case 13:return new zt(A)}switch(hs.extractNumericValueFromBitArray(A,1,7)){case 56:return new et(A,"310","11");case 57:return new et(A,"320","11");case 58:return new et(A,"310","13");case 59:return new et(A,"320","13");case 60:return new et(A,"310","15");case 61:return new et(A,"320","15");case 62:return new et(A,"310","17");case 63:return new et(A,"320","17")}}catch(n){throw console.log(n),new Bn("unknown decoder: "+A)}}class fr{constructor(n,r,i,o){this.leftchar=n,this.rightchar=r,this.finderpattern=i,this.maybeLast=o}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(n,r){return n instanceof fr?fr.equalsOrNull(n.leftchar,r.leftchar)&&fr.equalsOrNull(n.rightchar,r.rightchar)&&fr.equalsOrNull(n.finderpattern,r.finderpattern):!1}static equalsOrNull(n,r){return n===null?r===null:fr.equals(n,r)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class gl{constructor(n,r,i){this.pairs=n,this.rowNumber=r,this.wasReversed=i}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(n){return this.checkEqualitity(this,n)}toString(){return"{ "+this.pairs+" }"}equals(n,r){return n instanceof gl?this.checkEqualitity(n,r)&&n.wasReversed===r.wasReversed:!1}checkEqualitity(n,r){if(!n||!r)return;let i;return n.forEach((o,l)=>{r.forEach(d=>{o.getLeftChar().getValue()===d.getLeftChar().getValue()&&o.getRightChar().getValue()===d.getRightChar().getValue()&&o.getFinderPatter().getValue()===d.getFinderPatter().getValue()&&(i=!0)})}),i}}class te extends Dt{constructor(n){super(...arguments),this.pairs=new Array(te.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=n===!0}decodeRow(n,r,i){this.pairs.length=0,this.startFromEven=!1;try{return te.constructResult(this.decodeRow2pairs(n,r))}catch(o){this.verbose&&console.log(o)}return this.pairs.length=0,this.startFromEven=!0,te.constructResult(this.decodeRow2pairs(n,r))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(n,r){let i=!1;for(;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,n))}catch(l){if(l instanceof K){if(!this.pairs.length)throw new K;i=!0}}if(this.checkChecksum())return this.pairs;let o;if(this.rows.length?o=!0:o=!1,this.storeRow(n,!1),o){let l=this.checkRowsBoolean(!1);if(l!=null||(l=this.checkRowsBoolean(!0),l!=null))return l}throw new K}checkRowsBoolean(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());let r=null;try{r=this.checkRows(new Array,0)}catch(i){this.verbose&&console.log(i)}return n&&(this.rows=this.rows.reverse()),r}checkRows(n,r){for(let i=r;i<this.rows.length;i++){let o=this.rows[i];this.pairs.length=0;for(let d of n)this.pairs.push(d.getPairs());if(this.pairs.push(o.getPairs()),!te.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let l=new Array(n);l.push(o);try{return this.checkRows(l,i+1)}catch(d){this.verbose&&console.log(d)}}throw new K}static isValidSequence(n){for(let r of te.FINDER_PATTERN_SEQUENCES){if(n.length>r.length)continue;let i=!0;for(let o=0;o<n.length;o++)if(n[o].getFinderPattern().getValue()!=r[o]){i=!1;break}if(i)return!0}return!1}storeRow(n,r){let i=0,o=!1,l=!1;for(;i<this.rows.length;){let d=this.rows[i];if(d.getRowNumber()>n){l=d.isEquivalent(this.pairs);break}o=d.isEquivalent(this.pairs),i++}l||o||te.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new gl(this.pairs,n,r)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(n,r){for(let i of r)if(i.getPairs().length!==n.length){for(let o of i.getPairs())for(let l of n)if(fr.equals(o,l))break}}static isPartialRow(n,r){for(let i of r){let o=!0;for(let l of n){let d=!1;for(let h of i.getPairs())if(l.equals(h)){d=!0;break}if(!d){o=!1;break}}if(o)return!0}return!1}getRows(){return this.rows}static constructResult(n){let r=Nx.buildBitArray(n),o=Nd(r).parseInformation(),l=n[0].getFinderPattern().getResultPoints(),d=n[n.length-1].getFinderPattern().getResultPoints(),h=[l[0],l[1],d[0],d[1]];return new He(o,null,null,h,oe.RSS_EXPANDED,null)}checkChecksum(){let n=this.pairs.get(0),r=n.getLeftChar(),i=n.getRightChar();if(i==null)return!1;let o=i.getChecksumPortion(),l=2;for(let h=1;h<this.pairs.size();++h){let g=this.pairs.get(h);o+=g.getLeftChar().getChecksumPortion(),l++;let p=g.getRightChar();p!=null&&(o+=p.getChecksumPortion(),l++)}return o%=211,211*(l-4)+o==r.getValue()}static getNextSecondBar(n,r){let i;return n.get(r)?(i=n.getNextUnset(r),i=n.getNextSet(i)):(i=n.getNextSet(r),i=n.getNextUnset(i)),i}retrieveNextPair(n,r,i){let o=r.length%2==0;this.startFromEven&&(o=!o);let l,d=!0,h=-1;do this.findNextPair(n,r,h),l=this.parseFoundFinderPattern(n,i,o),l==null?h=te.getNextSecondBar(n,this.startEnd[0]):d=!1;while(d);let g=this.decodeDataCharacter(n,l,o,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new K;let p;try{p=this.decodeDataCharacter(n,l,o,!1)}catch(v){p=null,this.verbose&&console.log(v)}return new fr(g,p,l,!0)}isEmptyPair(n){return n.length===0}findNextPair(n,r,i){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let l=n.getSize(),d;i>=0?d=i:this.isEmptyPair(r)?d=0:d=r[r.length-1].getFinderPattern().getStartEnd()[1];let h=r.length%2!=0;this.startFromEven&&(h=!h);let g=!1;for(;d<l&&(g=!n.get(d),!!g);)d++;let p=0,v=d;for(let S=d;S<l;S++)if(n.get(S)!=g)o[p]++;else{if(p==3){if(h&&te.reverseCounters(o),te.isFinderPattern(o)){this.startEnd[0]=v,this.startEnd[1]=S;return}h&&te.reverseCounters(o),v+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,p--}else p++;o[p]=1,g=!g}throw new K}static reverseCounters(n){let r=n.length;for(let i=0;i<r/2;++i){let o=n[i];n[i]=n[r-i-1],n[r-i-1]=o}}parseFoundFinderPattern(n,r,i){let o,l,d;if(i){let p=this.startEnd[0]-1;for(;p>=0&&!n.get(p);)p--;p++,o=this.startEnd[0]-p,l=p,d=this.startEnd[1]}else l=this.startEnd[0],d=n.getNextUnset(this.startEnd[1]+1),o=d-this.startEnd[1];let h=this.getDecodeFinderCounters();M.arraycopy(h,0,h,1,h.length-1),h[0]=o;let g;try{g=this.parseFinderValue(h,te.FINDER_PATTERNS)}catch{return null}return new Ca(g,[l,d],l,d,r)}decodeDataCharacter(n,r,i,o){let l=this.getDataCharacterCounters();for(let Xe=0;Xe<l.length;Xe++)l[Xe]=0;if(o)te.recordPatternInReverse(n,r.getStartEnd()[0],l);else{te.recordPattern(n,r.getStartEnd()[1],l);for(let Xe=0,jt=l.length-1;Xe<jt;Xe++,jt--){let an=l[Xe];l[Xe]=l[jt],l[jt]=an}}let d=17,h=Re.sum(new Int32Array(l))/d,g=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(h-g)/g>.3)throw new K;let p=this.getOddCounts(),v=this.getEvenCounts(),S=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors();for(let Xe=0;Xe<l.length;Xe++){let jt=1*l[Xe]/h,an=jt+.5;if(an<1){if(jt<.3)throw new K;an=1}else if(an>8){if(jt>8.7)throw new K;an=8}let ws=Xe/2;Xe&1?(v[ws]=an,I[ws]=jt-an):(p[ws]=an,S[ws]=jt-an)}this.adjustOddEvenCounts(d);let D=4*r.getValue()+(i?0:2)+(o?0:1)-1,F=0,z=0;for(let Xe=p.length-1;Xe>=0;Xe--){if(te.isNotA1left(r,i,o)){let jt=te.WEIGHTS[D][2*Xe];z+=p[Xe]*jt}F+=p[Xe]}let W=0;for(let Xe=v.length-1;Xe>=0;Xe--)if(te.isNotA1left(r,i,o)){let jt=te.WEIGHTS[D][2*Xe+1];W+=v[Xe]*jt}let q=z+W;if(F&1||F>13||F<4)throw new K;let ie=(13-F)/2,ae=te.SYMBOL_WIDEST[ie],re=9-ae,je=Pn.getRSSvalue(p,ae,!0),Ae=Pn.getRSSvalue(v,re,!1),Qt=te.EVEN_TOTAL_SUBSET[ie],Tn=te.GSUM[ie],Jt=je*Qt+Ae+Tn;return new fs(Jt,q)}static isNotA1left(n,r,i){return!(n.getValue()==0&&r&&i)}adjustOddEvenCounts(n){let r=Re.sum(new Int32Array(this.getOddCounts())),i=Re.sum(new Int32Array(this.getEvenCounts())),o=!1,l=!1;r>13?l=!0:r<4&&(o=!0);let d=!1,h=!1;i>13?h=!0:i<4&&(d=!0);let g=r+i-n,p=(r&1)==1,v=(i&1)==0;if(g==1)if(p){if(v)throw new K;l=!0}else{if(!v)throw new K;h=!0}else if(g==-1)if(p){if(v)throw new K;o=!0}else{if(!v)throw new K;d=!0}else if(g==0){if(p){if(!v)throw new K;r<i?(o=!0,h=!0):(l=!0,d=!0)}else if(v)throw new K}else throw new K;if(o){if(l)throw new K;te.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&te.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(h)throw new K;te.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&te.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}te.SYMBOL_WIDEST=[7,5,4,3,1],te.EVEN_TOTAL_SUBSET=[4,20,52,104,204],te.GSUM=[0,348,1388,2948,3988],te.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],te.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],te.FINDER_PAT_A=0,te.FINDER_PAT_B=1,te.FINDER_PAT_C=2,te.FINDER_PAT_D=3,te.FINDER_PAT_E=4,te.FINDER_PAT_F=5,te.FINDER_PATTERN_SEQUENCES=[[te.FINDER_PAT_A,te.FINDER_PAT_A],[te.FINDER_PAT_A,te.FINDER_PAT_B,te.FINDER_PAT_B],[te.FINDER_PAT_A,te.FINDER_PAT_C,te.FINDER_PAT_B,te.FINDER_PAT_D],[te.FINDER_PAT_A,te.FINDER_PAT_E,te.FINDER_PAT_B,te.FINDER_PAT_D,te.FINDER_PAT_C],[te.FINDER_PAT_A,te.FINDER_PAT_E,te.FINDER_PAT_B,te.FINDER_PAT_D,te.FINDER_PAT_D,te.FINDER_PAT_F],[te.FINDER_PAT_A,te.FINDER_PAT_E,te.FINDER_PAT_B,te.FINDER_PAT_D,te.FINDER_PAT_E,te.FINDER_PAT_F,te.FINDER_PAT_F],[te.FINDER_PAT_A,te.FINDER_PAT_A,te.FINDER_PAT_B,te.FINDER_PAT_B,te.FINDER_PAT_C,te.FINDER_PAT_C,te.FINDER_PAT_D,te.FINDER_PAT_D],[te.FINDER_PAT_A,te.FINDER_PAT_A,te.FINDER_PAT_B,te.FINDER_PAT_B,te.FINDER_PAT_C,te.FINDER_PAT_C,te.FINDER_PAT_D,te.FINDER_PAT_E,te.FINDER_PAT_E],[te.FINDER_PAT_A,te.FINDER_PAT_A,te.FINDER_PAT_B,te.FINDER_PAT_B,te.FINDER_PAT_C,te.FINDER_PAT_C,te.FINDER_PAT_D,te.FINDER_PAT_E,te.FINDER_PAT_F,te.FINDER_PAT_F],[te.FINDER_PAT_A,te.FINDER_PAT_A,te.FINDER_PAT_B,te.FINDER_PAT_B,te.FINDER_PAT_C,te.FINDER_PAT_D,te.FINDER_PAT_D,te.FINDER_PAT_E,te.FINDER_PAT_E,te.FINDER_PAT_F,te.FINDER_PAT_F]],te.MAX_PAIRS=11;class _x extends fs{constructor(n,r,i){super(n,r),this.count=0,this.finderPattern=i}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class ct extends Dt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(n,r,i){const o=this.decodePair(r,!1,n,i);ct.addOrTally(this.possibleLeftPairs,o),r.reverse();let l=this.decodePair(r,!0,n,i);ct.addOrTally(this.possibleRightPairs,l),r.reverse();for(let d of this.possibleLeftPairs)if(d.getCount()>1){for(let h of this.possibleRightPairs)if(h.getCount()>1&&ct.checkChecksum(d,h))return ct.constructResult(d,h)}throw new K}static addOrTally(n,r){if(r==null)return;let i=!1;for(let o of n)if(o.getValue()===r.getValue()){o.incrementCount(),i=!0;break}i||n.push(r)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(n,r){let i=4537077*n.getValue()+r.getValue(),o=new String(i).toString(),l=new fe;for(let p=13-o.length;p>0;p--)l.append("0");l.append(o);let d=0;for(let p=0;p<13;p++){let v=l.charAt(p).charCodeAt(0)-48;d+=p&1?v:3*v}d=10-d%10,d===10&&(d=0),l.append(d.toString());let h=n.getFinderPattern().getResultPoints(),g=r.getFinderPattern().getResultPoints();return new He(l.toString(),null,0,[h[0],h[1],g[0],g[1]],oe.RSS_14,new Date().getTime())}static checkChecksum(n,r){let i=(n.getChecksumPortion()+16*r.getChecksumPortion())%79,o=9*n.getFinderPattern().getValue()+r.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,i===o}decodePair(n,r,i,o){try{let l=this.findFinderPattern(n,r),d=this.parseFoundFinderPattern(n,i,r,l),h=o==null?null:o.get(U.NEED_RESULT_POINT_CALLBACK);if(h!=null){let v=(l[0]+l[1])/2;r&&(v=n.getSize()-1-v),h.foundPossibleResultPoint(new we(v,i))}let g=this.decodeDataCharacter(n,d,!0),p=this.decodeDataCharacter(n,d,!1);return new _x(1597*g.getValue()+p.getValue(),g.getChecksumPortion()+4*p.getChecksumPortion(),d)}catch{return null}}decodeDataCharacter(n,r,i){let o=this.getDataCharacterCounters();for(let W=0;W<o.length;W++)o[W]=0;if(i)gt.recordPatternInReverse(n,r.getStartEnd()[0],o);else{gt.recordPattern(n,r.getStartEnd()[1]+1,o);for(let W=0,q=o.length-1;W<q;W++,q--){let ie=o[W];o[W]=o[q],o[q]=ie}}let l=i?16:15,d=Re.sum(new Int32Array(o))/l,h=this.getOddCounts(),g=this.getEvenCounts(),p=this.getOddRoundingErrors(),v=this.getEvenRoundingErrors();for(let W=0;W<o.length;W++){let q=o[W]/d,ie=Math.floor(q+.5);ie<1?ie=1:ie>8&&(ie=8);let ae=Math.floor(W/2);W&1?(g[ae]=ie,v[ae]=q-ie):(h[ae]=ie,p[ae]=q-ie)}this.adjustOddEvenCounts(i,l);let S=0,I=0;for(let W=h.length-1;W>=0;W--)I*=9,I+=h[W],S+=h[W];let D=0,F=0;for(let W=g.length-1;W>=0;W--)D*=9,D+=g[W],F+=g[W];let z=I+3*D;if(i){if(S&1||S>12||S<4)throw new K;let W=(12-S)/2,q=ct.OUTSIDE_ODD_WIDEST[W],ie=9-q,ae=Pn.getRSSvalue(h,q,!1),re=Pn.getRSSvalue(g,ie,!0),je=ct.OUTSIDE_EVEN_TOTAL_SUBSET[W],Ae=ct.OUTSIDE_GSUM[W];return new fs(ae*je+re+Ae,z)}else{if(F&1||F>10||F<4)throw new K;let W=(10-F)/2,q=ct.INSIDE_ODD_WIDEST[W],ie=9-q,ae=Pn.getRSSvalue(h,q,!0),re=Pn.getRSSvalue(g,ie,!1),je=ct.INSIDE_ODD_TOTAL_SUBSET[W],Ae=ct.INSIDE_GSUM[W];return new fs(re*je+ae+Ae,z)}}findFinderPattern(n,r){let i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;let o=n.getSize(),l=!1,d=0;for(;d<o&&(l=!n.get(d),r!==l);)d++;let h=0,g=d;for(let p=d;p<o;p++)if(n.get(p)!==l)i[h]++;else{if(h===3){if(Dt.isFinderPattern(i))return[g,p];g+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,h--}else h++;i[h]=1,l=!l}throw new K}parseFoundFinderPattern(n,r,i,o){let l=n.get(o[0]),d=o[0]-1;for(;d>=0&&l!==n.get(d);)d--;d++;const h=o[0]-d,g=this.getDecodeFinderCounters(),p=new Int32Array(g.length);M.arraycopy(g,0,p,1,g.length-1),p[0]=h;const v=this.parseFinderValue(p,ct.FINDER_PATTERNS);let S=d,I=o[1];return i&&(S=n.getSize()-1-S,I=n.getSize()-1-I),new Ca(v,[d,o[1]],S,I,r)}adjustOddEvenCounts(n,r){let i=Re.sum(new Int32Array(this.getOddCounts())),o=Re.sum(new Int32Array(this.getEvenCounts())),l=!1,d=!1,h=!1,g=!1;n?(i>12?d=!0:i<4&&(l=!0),o>12?g=!0:o<4&&(h=!0)):(i>11?d=!0:i<5&&(l=!0),o>10?g=!0:o<4&&(h=!0));let p=i+o-r,v=(i&1)===(n?1:0),S=(o&1)===1;if(p===1)if(v){if(S)throw new K;d=!0}else{if(!S)throw new K;g=!0}else if(p===-1)if(v){if(S)throw new K;l=!0}else{if(!S)throw new K;h=!0}else if(p===0){if(v){if(!S)throw new K;i<o?(l=!0,g=!0):(d=!0,h=!0)}else if(S)throw new K}else throw new K;if(l){if(d)throw new K;Dt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&Dt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(g)throw new K;Dt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}g&&Dt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ct.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],ct.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],ct.OUTSIDE_GSUM=[0,161,961,2015,2715],ct.INSIDE_GSUM=[0,336,1036,1516],ct.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],ct.INSIDE_ODD_WIDEST=[2,4,6,8],ct.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class gs extends gt{constructor(n,r){super(),this.readers=[],this.verbose=r===!0;const i=n?n.get(U.POSSIBLE_FORMATS):null,o=n&&n.get(U.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;i?((i.includes(oe.EAN_13)||i.includes(oe.UPC_A)||i.includes(oe.EAN_8)||i.includes(oe.UPC_E))&&this.readers.push(new fl(n)),i.includes(oe.CODE_39)&&this.readers.push(new yt(o)),i.includes(oe.CODE_128)&&this.readers.push(new de),i.includes(oe.ITF)&&this.readers.push(new We),i.includes(oe.RSS_14)&&this.readers.push(new ct),i.includes(oe.RSS_EXPANDED)&&this.readers.push(new te(this.verbose))):(this.readers.push(new fl(n)),this.readers.push(new yt),this.readers.push(new fl(n)),this.readers.push(new de),this.readers.push(new We),this.readers.push(new ct),this.readers.push(new te(this.verbose)))}decodeRow(n,r,i){for(let o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(n,r,i)}catch{}throw new K}reset(){this.readers.forEach(n=>n.reset())}}class Ix extends Ie{constructor(n=500,r){super(new gs(r),n,r)}}class Fe{constructor(n,r,i){this.ecCodewords=n,this.ecBlocks=[r],i&&this.ecBlocks.push(i)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Be{constructor(n,r){this.count=n,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ke{constructor(n,r,i,o,l,d){this.versionNumber=n,this.symbolSizeRows=r,this.symbolSizeColumns=i,this.dataRegionSizeRows=o,this.dataRegionSizeColumns=l,this.ecBlocks=d;let h=0;const g=d.getECCodewords(),p=d.getECBlocks();for(let v of p)h+=v.getCount()*(v.getDataCodewords()+g);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(n,r){if(n&1||r&1)throw new L;for(let i of ke.VERSIONS)if(i.symbolSizeRows===n&&i.symbolSizeColumns===r)return i;throw new L}toString(){return""+this.versionNumber}static buildVersions(){return[new ke(1,10,10,8,8,new Fe(5,new Be(1,3))),new ke(2,12,12,10,10,new Fe(7,new Be(1,5))),new ke(3,14,14,12,12,new Fe(10,new Be(1,8))),new ke(4,16,16,14,14,new Fe(12,new Be(1,12))),new ke(5,18,18,16,16,new Fe(14,new Be(1,18))),new ke(6,20,20,18,18,new Fe(18,new Be(1,22))),new ke(7,22,22,20,20,new Fe(20,new Be(1,30))),new ke(8,24,24,22,22,new Fe(24,new Be(1,36))),new ke(9,26,26,24,24,new Fe(28,new Be(1,44))),new ke(10,32,32,14,14,new Fe(36,new Be(1,62))),new ke(11,36,36,16,16,new Fe(42,new Be(1,86))),new ke(12,40,40,18,18,new Fe(48,new Be(1,114))),new ke(13,44,44,20,20,new Fe(56,new Be(1,144))),new ke(14,48,48,22,22,new Fe(68,new Be(1,174))),new ke(15,52,52,24,24,new Fe(42,new Be(2,102))),new ke(16,64,64,14,14,new Fe(56,new Be(2,140))),new ke(17,72,72,16,16,new Fe(36,new Be(4,92))),new ke(18,80,80,18,18,new Fe(48,new Be(4,114))),new ke(19,88,88,20,20,new Fe(56,new Be(4,144))),new ke(20,96,96,22,22,new Fe(68,new Be(4,174))),new ke(21,104,104,24,24,new Fe(56,new Be(6,136))),new ke(22,120,120,18,18,new Fe(68,new Be(6,175))),new ke(23,132,132,20,20,new Fe(62,new Be(8,163))),new ke(24,144,144,22,22,new Fe(62,new Be(8,156),new Be(2,155))),new ke(25,8,18,6,16,new Fe(7,new Be(1,5))),new ke(26,8,32,6,14,new Fe(11,new Be(1,10))),new ke(27,12,26,10,24,new Fe(14,new Be(1,16))),new ke(28,12,36,10,16,new Fe(18,new Be(1,22))),new ke(29,16,36,14,16,new Fe(24,new Be(1,32))),new ke(30,16,48,14,22,new Fe(28,new Be(1,49)))]}}ke.VERSIONS=ke.buildVersions();class pl{constructor(n){const r=n.getHeight();if(r<8||r>144||r&1)throw new L;this.version=pl.readVersion(n),this.mappingBitMatrix=this.extractDataRegion(n),this.readMappingMatrix=new Ne(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(n){const r=n.getHeight(),i=n.getWidth();return ke.getVersionForDimensions(r,i)}readCodewords(){const n=new Int8Array(this.version.getTotalCodewords());let r=0,i=4,o=0;const l=this.mappingBitMatrix.getHeight(),d=this.mappingBitMatrix.getWidth();let h=!1,g=!1,p=!1,v=!1;do if(i===l&&o===0&&!h)n[r++]=this.readCorner1(l,d)&255,i-=2,o+=2,h=!0;else if(i===l-2&&o===0&&d&3&&!g)n[r++]=this.readCorner2(l,d)&255,i-=2,o+=2,g=!0;else if(i===l+4&&o===2&&!(d&7)&&!p)n[r++]=this.readCorner3(l,d)&255,i-=2,o+=2,p=!0;else if(i===l-2&&o===0&&(d&7)===4&&!v)n[r++]=this.readCorner4(l,d)&255,i-=2,o+=2,v=!0;else{do i<l&&o>=0&&!this.readMappingMatrix.get(o,i)&&(n[r++]=this.readUtah(i,o,l,d)&255),i-=2,o+=2;while(i>=0&&o<d);i+=1,o+=3;do i>=0&&o<d&&!this.readMappingMatrix.get(o,i)&&(n[r++]=this.readUtah(i,o,l,d)&255),i+=2,o-=2;while(i<l&&o>=0);i+=3,o+=1}while(i<l||o<d);if(r!==this.version.getTotalCodewords())throw new L;return n}readModule(n,r,i,o){return n<0&&(n+=i,r+=4-(i+4&7)),r<0&&(r+=o,n+=4-(o+4&7)),this.readMappingMatrix.set(r,n),this.mappingBitMatrix.get(r,n)}readUtah(n,r,i,o){let l=0;return this.readModule(n-2,r-2,i,o)&&(l|=1),l<<=1,this.readModule(n-2,r-1,i,o)&&(l|=1),l<<=1,this.readModule(n-1,r-2,i,o)&&(l|=1),l<<=1,this.readModule(n-1,r-1,i,o)&&(l|=1),l<<=1,this.readModule(n-1,r,i,o)&&(l|=1),l<<=1,this.readModule(n,r-2,i,o)&&(l|=1),l<<=1,this.readModule(n,r-1,i,o)&&(l|=1),l<<=1,this.readModule(n,r,i,o)&&(l|=1),l}readCorner1(n,r){let i=0;return this.readModule(n-1,0,n,r)&&(i|=1),i<<=1,this.readModule(n-1,1,n,r)&&(i|=1),i<<=1,this.readModule(n-1,2,n,r)&&(i|=1),i<<=1,this.readModule(0,r-2,n,r)&&(i|=1),i<<=1,this.readModule(0,r-1,n,r)&&(i|=1),i<<=1,this.readModule(1,r-1,n,r)&&(i|=1),i<<=1,this.readModule(2,r-1,n,r)&&(i|=1),i<<=1,this.readModule(3,r-1,n,r)&&(i|=1),i}readCorner2(n,r){let i=0;return this.readModule(n-3,0,n,r)&&(i|=1),i<<=1,this.readModule(n-2,0,n,r)&&(i|=1),i<<=1,this.readModule(n-1,0,n,r)&&(i|=1),i<<=1,this.readModule(0,r-4,n,r)&&(i|=1),i<<=1,this.readModule(0,r-3,n,r)&&(i|=1),i<<=1,this.readModule(0,r-2,n,r)&&(i|=1),i<<=1,this.readModule(0,r-1,n,r)&&(i|=1),i<<=1,this.readModule(1,r-1,n,r)&&(i|=1),i}readCorner3(n,r){let i=0;return this.readModule(n-1,0,n,r)&&(i|=1),i<<=1,this.readModule(n-1,r-1,n,r)&&(i|=1),i<<=1,this.readModule(0,r-3,n,r)&&(i|=1),i<<=1,this.readModule(0,r-2,n,r)&&(i|=1),i<<=1,this.readModule(0,r-1,n,r)&&(i|=1),i<<=1,this.readModule(1,r-3,n,r)&&(i|=1),i<<=1,this.readModule(1,r-2,n,r)&&(i|=1),i<<=1,this.readModule(1,r-1,n,r)&&(i|=1),i}readCorner4(n,r){let i=0;return this.readModule(n-3,0,n,r)&&(i|=1),i<<=1,this.readModule(n-2,0,n,r)&&(i|=1),i<<=1,this.readModule(n-1,0,n,r)&&(i|=1),i<<=1,this.readModule(0,r-2,n,r)&&(i|=1),i<<=1,this.readModule(0,r-1,n,r)&&(i|=1),i<<=1,this.readModule(1,r-1,n,r)&&(i|=1),i<<=1,this.readModule(2,r-1,n,r)&&(i|=1),i<<=1,this.readModule(3,r-1,n,r)&&(i|=1),i}extractDataRegion(n){const r=this.version.getSymbolSizeRows(),i=this.version.getSymbolSizeColumns();if(n.getHeight()!==r)throw new b("Dimension of bitMatrix must match the version size");const o=this.version.getDataRegionSizeRows(),l=this.version.getDataRegionSizeColumns(),d=r/o|0,h=i/l|0,g=d*o,p=h*l,v=new Ne(p,g);for(let S=0;S<d;++S){const I=S*o;for(let D=0;D<h;++D){const F=D*l;for(let z=0;z<o;++z){const W=S*(o+2)+1+z,q=I+z;for(let ie=0;ie<l;++ie){const ae=D*(l+2)+1+ie;if(n.get(ae,W)){const re=F+ie;v.set(re,q)}}}}}return v}}class ml{constructor(n,r){this.numDataCodewords=n,this.codewords=r}static getDataBlocks(n,r){const i=r.getECBlocks();let o=0;const l=i.getECBlocks();for(let z of l)o+=z.getCount();const d=new Array(o);let h=0;for(let z of l)for(let W=0;W<z.getCount();W++){const q=z.getDataCodewords(),ie=i.getECCodewords()+q;d[h++]=new ml(q,new Uint8Array(ie))}const p=d[0].codewords.length-i.getECCodewords(),v=p-1;let S=0;for(let z=0;z<v;z++)for(let W=0;W<h;W++)d[W].codewords[z]=n[S++];const I=r.getVersionNumber()===24,D=I?8:h;for(let z=0;z<D;z++)d[z].codewords[p-1]=n[S++];const F=d[0].codewords.length;for(let z=p;z<F;z++)for(let W=0;W<h;W++){const q=I?(W+8)%h:W,ie=I&&q>7?z-1:z;d[q].codewords[ie]=n[S++]}if(S!==n.length)throw new b;return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class yl{constructor(n){this.bytes=n,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(n){if(n<1||n>32||n>this.available())throw new b(""+n);let r=0,i=this.bitOffset,o=this.byteOffset;const l=this.bytes;if(i>0){const d=8-i,h=n<d?n:d,g=d-h,p=255>>8-h<<g;r=(l[o]&p)>>g,n-=h,i+=h,i===8&&(i=0,o++)}if(n>0){for(;n>=8;)r=r<<8|l[o]&255,o++,n-=8;if(n>0){const d=8-n,h=255>>d<<d;r=r<<n|(l[o]&h)>>d,i+=n}}return this.bitOffset=i,this.byteOffset=o,r}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var wt;(function(A){A[A.PAD_ENCODE=0]="PAD_ENCODE",A[A.ASCII_ENCODE=1]="ASCII_ENCODE",A[A.C40_ENCODE=2]="C40_ENCODE",A[A.TEXT_ENCODE=3]="TEXT_ENCODE",A[A.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",A[A.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",A[A.BASE256_ENCODE=6]="BASE256_ENCODE"})(wt||(wt={}));class hr{static decode(n){const r=new yl(n),i=new fe,o=new fe,l=new Array;let d=wt.ASCII_ENCODE;do if(d===wt.ASCII_ENCODE)d=this.decodeAsciiSegment(r,i,o);else{switch(d){case wt.C40_ENCODE:this.decodeC40Segment(r,i);break;case wt.TEXT_ENCODE:this.decodeTextSegment(r,i);break;case wt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,i);break;case wt.EDIFACT_ENCODE:this.decodeEdifactSegment(r,i);break;case wt.BASE256_ENCODE:this.decodeBase256Segment(r,i,l);break;default:throw new L}d=wt.ASCII_ENCODE}while(d!==wt.PAD_ENCODE&&r.available()>0);return o.length()>0&&i.append(o.toString()),new ai(n,i.toString(),l.length===0?null:l,null)}static decodeAsciiSegment(n,r,i){let o=!1;do{let l=n.readBits(8);if(l===0)throw new L;if(l<=128)return o&&(l+=128),r.append(String.fromCharCode(l-1)),wt.ASCII_ENCODE;if(l===129)return wt.PAD_ENCODE;if(l<=229){const d=l-130;d<10&&r.append("0"),r.append(""+d)}else switch(l){case 230:return wt.C40_ENCODE;case 231:return wt.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:o=!0;break;case 236:r.append("[)>05"),i.insert(0,"");break;case 237:r.append("[)>06"),i.insert(0,"");break;case 238:return wt.ANSIX12_ENCODE;case 239:return wt.TEXT_ENCODE;case 240:return wt.EDIFACT_ENCODE;case 241:break;default:if(l!==254||n.available()!==0)throw new L;break}}while(n.available()>0);return wt.ASCII_ENCODE}static decodeC40Segment(n,r){let i=!1;const o=[];let l=0;do{if(n.available()===8)return;const d=n.readBits(8);if(d===254)return;this.parseTwoBytes(d,n.readBits(8),o);for(let h=0;h<3;h++){const g=o[h];switch(l){case 0:if(g<3)l=g+1;else if(g<this.C40_BASIC_SET_CHARS.length){const p=this.C40_BASIC_SET_CHARS[g];i?(r.append(String.fromCharCode(p.charCodeAt(0)+128)),i=!1):r.append(p)}else throw new L;break;case 1:i?(r.append(String.fromCharCode(g+128)),i=!1):r.append(String.fromCharCode(g)),l=0;break;case 2:if(g<this.C40_SHIFT2_SET_CHARS.length){const p=this.C40_SHIFT2_SET_CHARS[g];i?(r.append(String.fromCharCode(p.charCodeAt(0)+128)),i=!1):r.append(p)}else switch(g){case 27:r.append("");break;case 30:i=!0;break;default:throw new L}l=0;break;case 3:i?(r.append(String.fromCharCode(g+224)),i=!1):r.append(String.fromCharCode(g+96)),l=0;break;default:throw new L}}}while(n.available()>0)}static decodeTextSegment(n,r){let i=!1,o=[],l=0;do{if(n.available()===8)return;const d=n.readBits(8);if(d===254)return;this.parseTwoBytes(d,n.readBits(8),o);for(let h=0;h<3;h++){const g=o[h];switch(l){case 0:if(g<3)l=g+1;else if(g<this.TEXT_BASIC_SET_CHARS.length){const p=this.TEXT_BASIC_SET_CHARS[g];i?(r.append(String.fromCharCode(p.charCodeAt(0)+128)),i=!1):r.append(p)}else throw new L;break;case 1:i?(r.append(String.fromCharCode(g+128)),i=!1):r.append(String.fromCharCode(g)),l=0;break;case 2:if(g<this.TEXT_SHIFT2_SET_CHARS.length){const p=this.TEXT_SHIFT2_SET_CHARS[g];i?(r.append(String.fromCharCode(p.charCodeAt(0)+128)),i=!1):r.append(p)}else switch(g){case 27:r.append("");break;case 30:i=!0;break;default:throw new L}l=0;break;case 3:if(g<this.TEXT_SHIFT3_SET_CHARS.length){const p=this.TEXT_SHIFT3_SET_CHARS[g];i?(r.append(String.fromCharCode(p.charCodeAt(0)+128)),i=!1):r.append(p),l=0}else throw new L;break;default:throw new L}}}while(n.available()>0)}static decodeAnsiX12Segment(n,r){const i=[];do{if(n.available()===8)return;const o=n.readBits(8);if(o===254)return;this.parseTwoBytes(o,n.readBits(8),i);for(let l=0;l<3;l++){const d=i[l];switch(d){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(d<14)r.append(String.fromCharCode(d+44));else if(d<40)r.append(String.fromCharCode(d+51));else throw new L;break}}}while(n.available()>0)}static parseTwoBytes(n,r,i){let o=(n<<8)+r-1,l=Math.floor(o/1600);i[0]=l,o-=l*1600,l=Math.floor(o/40),i[1]=l,i[2]=o-l*40}static decodeEdifactSegment(n,r){do{if(n.available()<=16)return;for(let i=0;i<4;i++){let o=n.readBits(6);if(o===31){const l=8-n.getBitOffset();l!==8&&n.readBits(l);return}o&32||(o|=64),r.append(String.fromCharCode(o))}}while(n.available()>0)}static decodeBase256Segment(n,r,i){let o=1+n.getByteOffset();const l=this.unrandomize255State(n.readBits(8),o++);let d;if(l===0?d=n.available()/8|0:l<250?d=l:d=250*(l-249)+this.unrandomize255State(n.readBits(8),o++),d<0)throw new L;const h=new Uint8Array(d);for(let g=0;g<d;g++){if(n.available()<8)throw new L;h[g]=this.unrandomize255State(n.readBits(8),o++)}i.push(h);try{r.append(ee.decode(h,ne.ISO88591))}catch(g){throw new Bn("Platform does not support required encoding: "+g.message)}}static unrandomize255State(n,r){const i=149*r%255+1,o=n-i;return o>=0?o:o+256}}hr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],hr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],hr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],hr.TEXT_SHIFT2_SET_CHARS=hr.C40_SHIFT2_SET_CHARS,hr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Tx{constructor(){this.rsDecoder=new li(Me.DATA_MATRIX_FIELD_256)}decode(n){const r=new pl(n),i=r.getVersion(),o=r.readCodewords(),l=ml.getDataBlocks(o,i);let d=0;for(let p of l)d+=p.getNumDataCodewords();const h=new Uint8Array(d),g=l.length;for(let p=0;p<g;p++){const v=l[p],S=v.getCodewords(),I=v.getNumDataCodewords();this.correctErrors(S,I);for(let D=0;D<I;D++)h[D*g+p]=S[D]}return hr.decode(h)}correctErrors(n,r){const i=new Int32Array(n);try{this.rsDecoder.decode(i,n.length-r)}catch{throw new j}for(let o=0;o<r;o++)n[o]=i[o]}}class ht{constructor(n){this.image=n,this.rectangleDetector=new Zn(this.image)}detect(){const n=this.rectangleDetector.detect();let r=this.detectSolid1(n);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new K;r=this.shiftToModuleCenter(r);const i=r[0],o=r[1],l=r[2],d=r[3];let h=this.transitionsBetween(i,d)+1,g=this.transitionsBetween(l,d)+1;(h&1)===1&&(h+=1),(g&1)===1&&(g+=1),4*h<7*g&&4*g<7*h&&(h=g=Math.max(h,g));let p=ht.sampleGrid(this.image,i,o,l,d,h,g);return new va(p,[i,o,l,d])}static shiftPoint(n,r,i){let o=(r.getX()-n.getX())/(i+1),l=(r.getY()-n.getY())/(i+1);return new we(n.getX()+o,n.getY()+l)}static moveAway(n,r,i){let o=n.getX(),l=n.getY();return o<r?o-=1:o+=1,l<i?l-=1:l+=1,new we(o,l)}detectSolid1(n){let r=n[0],i=n[1],o=n[3],l=n[2],d=this.transitionsBetween(r,i),h=this.transitionsBetween(i,o),g=this.transitionsBetween(o,l),p=this.transitionsBetween(l,r),v=d,S=[l,r,i,o];return v>h&&(v=h,S[0]=r,S[1]=i,S[2]=o,S[3]=l),v>g&&(v=g,S[0]=i,S[1]=o,S[2]=l,S[3]=r),v>p&&(S[0]=o,S[1]=l,S[2]=r,S[3]=i),S}detectSolid2(n){let r=n[0],i=n[1],o=n[2],l=n[3],d=this.transitionsBetween(r,l),h=ht.shiftPoint(i,o,(d+1)*4),g=ht.shiftPoint(o,i,(d+1)*4),p=this.transitionsBetween(h,r),v=this.transitionsBetween(g,l);return p<v?(n[0]=r,n[1]=i,n[2]=o,n[3]=l):(n[0]=i,n[1]=o,n[2]=l,n[3]=r),n}correctTopRight(n){let r=n[0],i=n[1],o=n[2],l=n[3],d=this.transitionsBetween(r,l),h=this.transitionsBetween(i,l),g=ht.shiftPoint(r,i,(h+1)*4),p=ht.shiftPoint(o,i,(d+1)*4);d=this.transitionsBetween(g,l),h=this.transitionsBetween(p,l);let v=new we(l.getX()+(o.getX()-i.getX())/(d+1),l.getY()+(o.getY()-i.getY())/(d+1)),S=new we(l.getX()+(r.getX()-i.getX())/(h+1),l.getY()+(r.getY()-i.getY())/(h+1));if(!this.isValid(v))return this.isValid(S)?S:null;if(!this.isValid(S))return v;let I=this.transitionsBetween(g,v)+this.transitionsBetween(p,v),D=this.transitionsBetween(g,S)+this.transitionsBetween(p,S);return I>D?v:S}shiftToModuleCenter(n){let r=n[0],i=n[1],o=n[2],l=n[3],d=this.transitionsBetween(r,l)+1,h=this.transitionsBetween(o,l)+1,g=ht.shiftPoint(r,i,h*4),p=ht.shiftPoint(o,i,d*4);d=this.transitionsBetween(g,l)+1,h=this.transitionsBetween(p,l)+1,(d&1)===1&&(d+=1),(h&1)===1&&(h+=1);let v=(r.getX()+i.getX()+o.getX()+l.getX())/4,S=(r.getY()+i.getY()+o.getY()+l.getY())/4;r=ht.moveAway(r,v,S),i=ht.moveAway(i,v,S),o=ht.moveAway(o,v,S),l=ht.moveAway(l,v,S);let I,D;return g=ht.shiftPoint(r,i,h*4),g=ht.shiftPoint(g,l,d*4),I=ht.shiftPoint(i,r,h*4),I=ht.shiftPoint(I,o,d*4),p=ht.shiftPoint(o,l,h*4),p=ht.shiftPoint(p,i,d*4),D=ht.shiftPoint(l,o,h*4),D=ht.shiftPoint(D,r,d*4),[g,I,p,D]}isValid(n){return n.getX()>=0&&n.getX()<this.image.getWidth()&&n.getY()>0&&n.getY()<this.image.getHeight()}static sampleGrid(n,r,i,o,l,d,h){return dr.getInstance().sampleGrid(n,d,h,.5,.5,d-.5,.5,d-.5,h-.5,.5,h-.5,r.getX(),r.getY(),l.getX(),l.getY(),o.getX(),o.getY(),i.getX(),i.getY())}transitionsBetween(n,r){let i=Math.trunc(n.getX()),o=Math.trunc(n.getY()),l=Math.trunc(r.getX()),d=Math.trunc(r.getY()),h=Math.abs(d-o)>Math.abs(l-i);if(h){let z=i;i=o,o=z,z=l,l=d,d=z}let g=Math.abs(l-i),p=Math.abs(d-o),v=-g/2,S=o<d?1:-1,I=i<l?1:-1,D=0,F=this.image.get(h?o:i,h?i:o);for(let z=i,W=o;z!==l;z+=I){let q=this.image.get(h?W:z,h?z:W);if(q!==F&&(D++,F=q),v+=p,v>0){if(W===d)break;W+=S,v-=g}}return D}}class xr{constructor(){this.decoder=new Tx}decode(n,r=null){let i,o;if(r!=null&&r.has(U.PURE_BARCODE)){const p=xr.extractPureBits(n.getBlackMatrix());i=this.decoder.decode(p),o=xr.NO_POINTS}else{const p=new ht(n.getBlackMatrix()).detect();i=this.decoder.decode(p.getBits()),o=p.getPoints()}const l=i.getRawBytes(),d=new He(i.getText(),l,8*l.length,o,oe.DATA_MATRIX,M.currentTimeMillis()),h=i.getByteSegments();h!=null&&d.putMetadata(ft.BYTE_SEGMENTS,h);const g=i.getECLevel();return g!=null&&d.putMetadata(ft.ERROR_CORRECTION_LEVEL,g),d}reset(){}static extractPureBits(n){const r=n.getTopLeftOnBit(),i=n.getBottomRightOnBit();if(r==null||i==null)throw new K;const o=this.moduleSize(r,n);let l=r[1];const d=i[1];let h=r[0];const p=(i[0]-h+1)/o,v=(d-l+1)/o;if(p<=0||v<=0)throw new K;const S=o/2;l+=S,h+=S;const I=new Ne(p,v);for(let D=0;D<v;D++){const F=l+D*o;for(let z=0;z<p;z++)n.get(h+z*o,F)&&I.set(z,D)}return I}static moduleSize(n,r){const i=r.getWidth();let o=n[0];const l=n[1];for(;o<i&&r.get(o,l);)o++;if(o===i)throw new K;const d=o-n[0];if(d===0)throw new K;return d}}xr.NO_POINTS=[];class jx extends Ie{constructor(n=500){super(new xr,n)}}var ps;(function(A){A[A.L=0]="L",A[A.M=1]="M",A[A.Q=2]="Q",A[A.H=3]="H"})(ps||(ps={}));class qe{constructor(n,r,i){this.value=n,this.stringValue=r,this.bits=i,qe.FOR_BITS.set(i,this),qe.FOR_VALUE.set(n,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(n){switch(n){case"L":return qe.L;case"M":return qe.M;case"Q":return qe.Q;case"H":return qe.H;default:throw new N(n+"not available")}}toString(){return this.stringValue}equals(n){if(!(n instanceof qe))return!1;const r=n;return this.value===r.value}static forBits(n){if(n<0||n>=qe.FOR_BITS.size)throw new b;return qe.FOR_BITS.get(n)}}qe.FOR_BITS=new Map,qe.FOR_VALUE=new Map,qe.L=new qe(ps.L,"L",1),qe.M=new qe(ps.M,"M",0),qe.Q=new qe(ps.Q,"Q",3),qe.H=new qe(ps.H,"H",2);class Mt{constructor(n){this.errorCorrectionLevel=qe.forBits(n>>3&3),this.dataMask=n&7}static numBitsDiffering(n,r){return E.bitCount(n^r)}static decodeFormatInformation(n,r){const i=Mt.doDecodeFormatInformation(n,r);return i!==null?i:Mt.doDecodeFormatInformation(n^Mt.FORMAT_INFO_MASK_QR,r^Mt.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(n,r){let i=Number.MAX_SAFE_INTEGER,o=0;for(const l of Mt.FORMAT_INFO_DECODE_LOOKUP){const d=l[0];if(d===n||d===r)return new Mt(l[1]);let h=Mt.numBitsDiffering(n,d);h<i&&(o=l[1],i=h),n!==r&&(h=Mt.numBitsDiffering(r,d),h<i&&(o=l[1],i=h))}return i<=3?new Mt(o):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(n){if(!(n instanceof Mt))return!1;const r=n;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask}}Mt.FORMAT_INFO_MASK_QR=21522,Mt.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class G{constructor(n,...r){this.ecCodewordsPerBlock=n,this.ecBlocks=r}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let n=0;const r=this.ecBlocks;for(const i of r)n+=i.getCount();return n}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class O{constructor(n,r){this.count=n,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ve{constructor(n,r,...i){this.versionNumber=n,this.alignmentPatternCenters=r,this.ecBlocks=i;let o=0;const l=i[0].getECCodewordsPerBlock(),d=i[0].getECBlocks();for(const h of d)o+=h.getCount()*(h.getDataCodewords()+l);this.totalCodewords=o}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(n){return this.ecBlocks[n.getValue()]}static getProvisionalVersionForDimension(n){if(n%4!==1)throw new L;try{return this.getVersionForNumber((n-17)/4)}catch{throw new L}}static getVersionForNumber(n){if(n<1||n>40)throw new b;return ve.VERSIONS[n-1]}static decodeVersionInformation(n){let r=Number.MAX_SAFE_INTEGER,i=0;for(let o=0;o<ve.VERSION_DECODE_INFO.length;o++){const l=ve.VERSION_DECODE_INFO[o];if(l===n)return ve.getVersionForNumber(o+7);const d=Mt.numBitsDiffering(n,l);d<r&&(i=o+7,r=d)}return r<=3?ve.getVersionForNumber(i):null}buildFunctionPattern(){const n=this.getDimensionForVersion(),r=new Ne(n);r.setRegion(0,0,9,9),r.setRegion(n-8,0,8,9),r.setRegion(0,n-8,9,8);const i=this.alignmentPatternCenters.length;for(let o=0;o<i;o++){const l=this.alignmentPatternCenters[o]-2;for(let d=0;d<i;d++)o===0&&(d===0||d===i-1)||o===i-1&&d===0||r.setRegion(this.alignmentPatternCenters[d]-2,l,5,5)}return r.setRegion(6,9,1,n-17),r.setRegion(9,6,n-17,1),this.versionNumber>6&&(r.setRegion(n-11,0,3,6),r.setRegion(0,n-11,6,3)),r}toString(){return""+this.versionNumber}}ve.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ve.VERSIONS=[new ve(1,new Int32Array(0),new G(7,new O(1,19)),new G(10,new O(1,16)),new G(13,new O(1,13)),new G(17,new O(1,9))),new ve(2,Int32Array.from([6,18]),new G(10,new O(1,34)),new G(16,new O(1,28)),new G(22,new O(1,22)),new G(28,new O(1,16))),new ve(3,Int32Array.from([6,22]),new G(15,new O(1,55)),new G(26,new O(1,44)),new G(18,new O(2,17)),new G(22,new O(2,13))),new ve(4,Int32Array.from([6,26]),new G(20,new O(1,80)),new G(18,new O(2,32)),new G(26,new O(2,24)),new G(16,new O(4,9))),new ve(5,Int32Array.from([6,30]),new G(26,new O(1,108)),new G(24,new O(2,43)),new G(18,new O(2,15),new O(2,16)),new G(22,new O(2,11),new O(2,12))),new ve(6,Int32Array.from([6,34]),new G(18,new O(2,68)),new G(16,new O(4,27)),new G(24,new O(4,19)),new G(28,new O(4,15))),new ve(7,Int32Array.from([6,22,38]),new G(20,new O(2,78)),new G(18,new O(4,31)),new G(18,new O(2,14),new O(4,15)),new G(26,new O(4,13),new O(1,14))),new ve(8,Int32Array.from([6,24,42]),new G(24,new O(2,97)),new G(22,new O(2,38),new O(2,39)),new G(22,new O(4,18),new O(2,19)),new G(26,new O(4,14),new O(2,15))),new ve(9,Int32Array.from([6,26,46]),new G(30,new O(2,116)),new G(22,new O(3,36),new O(2,37)),new G(20,new O(4,16),new O(4,17)),new G(24,new O(4,12),new O(4,13))),new ve(10,Int32Array.from([6,28,50]),new G(18,new O(2,68),new O(2,69)),new G(26,new O(4,43),new O(1,44)),new G(24,new O(6,19),new O(2,20)),new G(28,new O(6,15),new O(2,16))),new ve(11,Int32Array.from([6,30,54]),new G(20,new O(4,81)),new G(30,new O(1,50),new O(4,51)),new G(28,new O(4,22),new O(4,23)),new G(24,new O(3,12),new O(8,13))),new ve(12,Int32Array.from([6,32,58]),new G(24,new O(2,92),new O(2,93)),new G(22,new O(6,36),new O(2,37)),new G(26,new O(4,20),new O(6,21)),new G(28,new O(7,14),new O(4,15))),new ve(13,Int32Array.from([6,34,62]),new G(26,new O(4,107)),new G(22,new O(8,37),new O(1,38)),new G(24,new O(8,20),new O(4,21)),new G(22,new O(12,11),new O(4,12))),new ve(14,Int32Array.from([6,26,46,66]),new G(30,new O(3,115),new O(1,116)),new G(24,new O(4,40),new O(5,41)),new G(20,new O(11,16),new O(5,17)),new G(24,new O(11,12),new O(5,13))),new ve(15,Int32Array.from([6,26,48,70]),new G(22,new O(5,87),new O(1,88)),new G(24,new O(5,41),new O(5,42)),new G(30,new O(5,24),new O(7,25)),new G(24,new O(11,12),new O(7,13))),new ve(16,Int32Array.from([6,26,50,74]),new G(24,new O(5,98),new O(1,99)),new G(28,new O(7,45),new O(3,46)),new G(24,new O(15,19),new O(2,20)),new G(30,new O(3,15),new O(13,16))),new ve(17,Int32Array.from([6,30,54,78]),new G(28,new O(1,107),new O(5,108)),new G(28,new O(10,46),new O(1,47)),new G(28,new O(1,22),new O(15,23)),new G(28,new O(2,14),new O(17,15))),new ve(18,Int32Array.from([6,30,56,82]),new G(30,new O(5,120),new O(1,121)),new G(26,new O(9,43),new O(4,44)),new G(28,new O(17,22),new O(1,23)),new G(28,new O(2,14),new O(19,15))),new ve(19,Int32Array.from([6,30,58,86]),new G(28,new O(3,113),new O(4,114)),new G(26,new O(3,44),new O(11,45)),new G(26,new O(17,21),new O(4,22)),new G(26,new O(9,13),new O(16,14))),new ve(20,Int32Array.from([6,34,62,90]),new G(28,new O(3,107),new O(5,108)),new G(26,new O(3,41),new O(13,42)),new G(30,new O(15,24),new O(5,25)),new G(28,new O(15,15),new O(10,16))),new ve(21,Int32Array.from([6,28,50,72,94]),new G(28,new O(4,116),new O(4,117)),new G(26,new O(17,42)),new G(28,new O(17,22),new O(6,23)),new G(30,new O(19,16),new O(6,17))),new ve(22,Int32Array.from([6,26,50,74,98]),new G(28,new O(2,111),new O(7,112)),new G(28,new O(17,46)),new G(30,new O(7,24),new O(16,25)),new G(24,new O(34,13))),new ve(23,Int32Array.from([6,30,54,78,102]),new G(30,new O(4,121),new O(5,122)),new G(28,new O(4,47),new O(14,48)),new G(30,new O(11,24),new O(14,25)),new G(30,new O(16,15),new O(14,16))),new ve(24,Int32Array.from([6,28,54,80,106]),new G(30,new O(6,117),new O(4,118)),new G(28,new O(6,45),new O(14,46)),new G(30,new O(11,24),new O(16,25)),new G(30,new O(30,16),new O(2,17))),new ve(25,Int32Array.from([6,32,58,84,110]),new G(26,new O(8,106),new O(4,107)),new G(28,new O(8,47),new O(13,48)),new G(30,new O(7,24),new O(22,25)),new G(30,new O(22,15),new O(13,16))),new ve(26,Int32Array.from([6,30,58,86,114]),new G(28,new O(10,114),new O(2,115)),new G(28,new O(19,46),new O(4,47)),new G(28,new O(28,22),new O(6,23)),new G(30,new O(33,16),new O(4,17))),new ve(27,Int32Array.from([6,34,62,90,118]),new G(30,new O(8,122),new O(4,123)),new G(28,new O(22,45),new O(3,46)),new G(30,new O(8,23),new O(26,24)),new G(30,new O(12,15),new O(28,16))),new ve(28,Int32Array.from([6,26,50,74,98,122]),new G(30,new O(3,117),new O(10,118)),new G(28,new O(3,45),new O(23,46)),new G(30,new O(4,24),new O(31,25)),new G(30,new O(11,15),new O(31,16))),new ve(29,Int32Array.from([6,30,54,78,102,126]),new G(30,new O(7,116),new O(7,117)),new G(28,new O(21,45),new O(7,46)),new G(30,new O(1,23),new O(37,24)),new G(30,new O(19,15),new O(26,16))),new ve(30,Int32Array.from([6,26,52,78,104,130]),new G(30,new O(5,115),new O(10,116)),new G(28,new O(19,47),new O(10,48)),new G(30,new O(15,24),new O(25,25)),new G(30,new O(23,15),new O(25,16))),new ve(31,Int32Array.from([6,30,56,82,108,134]),new G(30,new O(13,115),new O(3,116)),new G(28,new O(2,46),new O(29,47)),new G(30,new O(42,24),new O(1,25)),new G(30,new O(23,15),new O(28,16))),new ve(32,Int32Array.from([6,34,60,86,112,138]),new G(30,new O(17,115)),new G(28,new O(10,46),new O(23,47)),new G(30,new O(10,24),new O(35,25)),new G(30,new O(19,15),new O(35,16))),new ve(33,Int32Array.from([6,30,58,86,114,142]),new G(30,new O(17,115),new O(1,116)),new G(28,new O(14,46),new O(21,47)),new G(30,new O(29,24),new O(19,25)),new G(30,new O(11,15),new O(46,16))),new ve(34,Int32Array.from([6,34,62,90,118,146]),new G(30,new O(13,115),new O(6,116)),new G(28,new O(14,46),new O(23,47)),new G(30,new O(44,24),new O(7,25)),new G(30,new O(59,16),new O(1,17))),new ve(35,Int32Array.from([6,30,54,78,102,126,150]),new G(30,new O(12,121),new O(7,122)),new G(28,new O(12,47),new O(26,48)),new G(30,new O(39,24),new O(14,25)),new G(30,new O(22,15),new O(41,16))),new ve(36,Int32Array.from([6,24,50,76,102,128,154]),new G(30,new O(6,121),new O(14,122)),new G(28,new O(6,47),new O(34,48)),new G(30,new O(46,24),new O(10,25)),new G(30,new O(2,15),new O(64,16))),new ve(37,Int32Array.from([6,28,54,80,106,132,158]),new G(30,new O(17,122),new O(4,123)),new G(28,new O(29,46),new O(14,47)),new G(30,new O(49,24),new O(10,25)),new G(30,new O(24,15),new O(46,16))),new ve(38,Int32Array.from([6,32,58,84,110,136,162]),new G(30,new O(4,122),new O(18,123)),new G(28,new O(13,46),new O(32,47)),new G(30,new O(48,24),new O(14,25)),new G(30,new O(42,15),new O(32,16))),new ve(39,Int32Array.from([6,26,54,82,110,138,166]),new G(30,new O(20,117),new O(4,118)),new G(28,new O(40,47),new O(7,48)),new G(30,new O(43,24),new O(22,25)),new G(30,new O(10,15),new O(67,16))),new ve(40,Int32Array.from([6,30,58,86,114,142,170]),new G(30,new O(19,118),new O(6,119)),new G(28,new O(18,47),new O(31,48)),new G(30,new O(34,24),new O(34,25)),new G(30,new O(20,15),new O(61,16)))];var Et;(function(A){A[A.DATA_MASK_000=0]="DATA_MASK_000",A[A.DATA_MASK_001=1]="DATA_MASK_001",A[A.DATA_MASK_010=2]="DATA_MASK_010",A[A.DATA_MASK_011=3]="DATA_MASK_011",A[A.DATA_MASK_100=4]="DATA_MASK_100",A[A.DATA_MASK_101=5]="DATA_MASK_101",A[A.DATA_MASK_110=6]="DATA_MASK_110",A[A.DATA_MASK_111=7]="DATA_MASK_111"})(Et||(Et={}));class mn{constructor(n,r){this.value=n,this.isMasked=r}unmaskBitMatrix(n,r){for(let i=0;i<r;i++)for(let o=0;o<r;o++)this.isMasked(i,o)&&n.flip(o,i)}}mn.values=new Map([[Et.DATA_MASK_000,new mn(Et.DATA_MASK_000,(A,n)=>(A+n&1)===0)],[Et.DATA_MASK_001,new mn(Et.DATA_MASK_001,(A,n)=>(A&1)===0)],[Et.DATA_MASK_010,new mn(Et.DATA_MASK_010,(A,n)=>n%3===0)],[Et.DATA_MASK_011,new mn(Et.DATA_MASK_011,(A,n)=>(A+n)%3===0)],[Et.DATA_MASK_100,new mn(Et.DATA_MASK_100,(A,n)=>(Math.floor(A/2)+Math.floor(n/3)&1)===0)],[Et.DATA_MASK_101,new mn(Et.DATA_MASK_101,(A,n)=>A*n%6===0)],[Et.DATA_MASK_110,new mn(Et.DATA_MASK_110,(A,n)=>A*n%6<3)],[Et.DATA_MASK_111,new mn(Et.DATA_MASK_111,(A,n)=>(A+n+A*n%3&1)===0)]]);class kx{constructor(n){const r=n.getHeight();if(r<21||(r&3)!==1)throw new L;this.bitMatrix=n}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let n=0;for(let l=0;l<6;l++)n=this.copyBit(l,8,n);n=this.copyBit(7,8,n),n=this.copyBit(8,8,n),n=this.copyBit(8,7,n);for(let l=5;l>=0;l--)n=this.copyBit(8,l,n);const r=this.bitMatrix.getHeight();let i=0;const o=r-7;for(let l=r-1;l>=o;l--)i=this.copyBit(8,l,i);for(let l=r-8;l<r;l++)i=this.copyBit(l,8,i);if(this.parsedFormatInfo=Mt.decodeFormatInformation(n,i),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new L}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const n=this.bitMatrix.getHeight(),r=Math.floor((n-17)/4);if(r<=6)return ve.getVersionForNumber(r);let i=0;const o=n-11;for(let d=5;d>=0;d--)for(let h=n-9;h>=o;h--)i=this.copyBit(h,d,i);let l=ve.decodeVersionInformation(i);if(l!==null&&l.getDimensionForVersion()===n)return this.parsedVersion=l,l;i=0;for(let d=5;d>=0;d--)for(let h=n-9;h>=o;h--)i=this.copyBit(d,h,i);if(l=ve.decodeVersionInformation(i),l!==null&&l.getDimensionForVersion()===n)return this.parsedVersion=l,l;throw new L}copyBit(n,r,i){return(this.isMirror?this.bitMatrix.get(r,n):this.bitMatrix.get(n,r))?i<<1|1:i<<1}readCodewords(){const n=this.readFormatInformation(),r=this.readVersion(),i=mn.values.get(n.getDataMask()),o=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,o);const l=r.buildFunctionPattern();let d=!0;const h=new Uint8Array(r.getTotalCodewords());let g=0,p=0,v=0;for(let S=o-1;S>0;S-=2){S===6&&S--;for(let I=0;I<o;I++){const D=d?o-1-I:I;for(let F=0;F<2;F++)l.get(S-F,D)||(v++,p<<=1,this.bitMatrix.get(S-F,D)&&(p|=1),v===8&&(h[g++]=p,v=0,p=0))}d=!d}if(g!==r.getTotalCodewords())throw new L;return h}remask(){if(this.parsedFormatInfo===null)return;const n=mn.values[this.parsedFormatInfo.getDataMask()],r=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,r)}setMirror(n){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=n}mirror(){const n=this.bitMatrix;for(let r=0,i=n.getWidth();r<i;r++)for(let o=r+1,l=n.getHeight();o<l;o++)n.get(r,o)!==n.get(o,r)&&(n.flip(o,r),n.flip(r,o))}}class wl{constructor(n,r){this.numDataCodewords=n,this.codewords=r}static getDataBlocks(n,r,i){if(n.length!==r.getTotalCodewords())throw new b;const o=r.getECBlocksForLevel(i);let l=0;const d=o.getECBlocks();for(const F of d)l+=F.getCount();const h=new Array(l);let g=0;for(const F of d)for(let z=0;z<F.getCount();z++){const W=F.getDataCodewords(),q=o.getECCodewordsPerBlock()+W;h[g++]=new wl(W,new Uint8Array(q))}const p=h[0].codewords.length;let v=h.length-1;for(;v>=0&&h[v].codewords.length!==p;)v--;v++;const S=p-o.getECCodewordsPerBlock();let I=0;for(let F=0;F<S;F++)for(let z=0;z<g;z++)h[z].codewords[F]=n[I++];for(let F=v;F<g;F++)h[F].codewords[S]=n[I++];const D=h[0].codewords.length;for(let F=S;F<D;F++)for(let z=0;z<g;z++){const W=z<v?F:F+1;h[z].codewords[W]=n[I++]}return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var yn;(function(A){A[A.TERMINATOR=0]="TERMINATOR",A[A.NUMERIC=1]="NUMERIC",A[A.ALPHANUMERIC=2]="ALPHANUMERIC",A[A.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",A[A.BYTE=4]="BYTE",A[A.ECI=5]="ECI",A[A.KANJI=6]="KANJI",A[A.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",A[A.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",A[A.HANZI=9]="HANZI"})(yn||(yn={}));class be{constructor(n,r,i,o){this.value=n,this.stringValue=r,this.characterCountBitsForVersions=i,this.bits=o,be.FOR_BITS.set(o,this),be.FOR_VALUE.set(n,this)}static forBits(n){const r=be.FOR_BITS.get(n);if(r===void 0)throw new b;return r}getCharacterCountBits(n){const r=n.getVersionNumber();let i;return r<=9?i=0:r<=26?i=1:i=2,this.characterCountBitsForVersions[i]}getValue(){return this.value}getBits(){return this.bits}equals(n){if(!(n instanceof be))return!1;const r=n;return this.value===r.value}toString(){return this.stringValue}}be.FOR_BITS=new Map,be.FOR_VALUE=new Map,be.TERMINATOR=new be(yn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),be.NUMERIC=new be(yn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),be.ALPHANUMERIC=new be(yn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),be.STRUCTURED_APPEND=new be(yn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),be.BYTE=new be(yn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),be.ECI=new be(yn.ECI,"ECI",Int32Array.from([0,0,0]),7),be.KANJI=new be(yn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),be.FNC1_FIRST_POSITION=new be(yn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),be.FNC1_SECOND_POSITION=new be(yn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),be.HANZI=new be(yn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class rt{static decode(n,r,i,o){const l=new yl(n);let d=new fe;const h=new Array;let g=-1,p=-1;try{let v=null,S=!1,I;do{if(l.available()<4)I=be.TERMINATOR;else{const D=l.readBits(4);I=be.forBits(D)}switch(I){case be.TERMINATOR:break;case be.FNC1_FIRST_POSITION:case be.FNC1_SECOND_POSITION:S=!0;break;case be.STRUCTURED_APPEND:if(l.available()<16)throw new L;g=l.readBits(8),p=l.readBits(8);break;case be.ECI:const D=rt.parseECIValue(l);if(v=P.getCharacterSetECIByValue(D),v===null)throw new L;break;case be.HANZI:const F=l.readBits(4),z=l.readBits(I.getCharacterCountBits(r));F===rt.GB2312_SUBSET&&rt.decodeHanziSegment(l,d,z);break;default:const W=l.readBits(I.getCharacterCountBits(r));switch(I){case be.NUMERIC:rt.decodeNumericSegment(l,d,W);break;case be.ALPHANUMERIC:rt.decodeAlphanumericSegment(l,d,W,S);break;case be.BYTE:rt.decodeByteSegment(l,d,W,v,h,o);break;case be.KANJI:rt.decodeKanjiSegment(l,d,W);break;default:throw new L}break}}while(I!==be.TERMINATOR)}catch{throw new L}return new ai(n,d.toString(),h.length===0?null:h,i===null?null:i.toString(),g,p)}static decodeHanziSegment(n,r,i){if(i*13>n.available())throw new L;const o=new Uint8Array(2*i);let l=0;for(;i>0;){const d=n.readBits(13);let h=d/96<<8&4294967295|d%96;h<959?h+=41377:h+=42657,o[l]=h>>8&255,o[l+1]=h&255,l+=2,i--}try{r.append(ee.decode(o,ne.GB2312))}catch(d){throw new L(d)}}static decodeKanjiSegment(n,r,i){if(i*13>n.available())throw new L;const o=new Uint8Array(2*i);let l=0;for(;i>0;){const d=n.readBits(13);let h=d/192<<8&4294967295|d%192;h<7936?h+=33088:h+=49472,o[l]=h>>8,o[l+1]=h,l+=2,i--}try{r.append(ee.decode(o,ne.SHIFT_JIS))}catch(d){throw new L(d)}}static decodeByteSegment(n,r,i,o,l,d){if(8*i>n.available())throw new L;const h=new Uint8Array(i);for(let p=0;p<i;p++)h[p]=n.readBits(8);let g;o===null?g=ne.guessEncoding(h,d):g=o.getName();try{r.append(ee.decode(h,g))}catch(p){throw new L(p)}l.push(h)}static toAlphaNumericChar(n){if(n>=rt.ALPHANUMERIC_CHARS.length)throw new L;return rt.ALPHANUMERIC_CHARS[n]}static decodeAlphanumericSegment(n,r,i,o){const l=r.length();for(;i>1;){if(n.available()<11)throw new L;const d=n.readBits(11);r.append(rt.toAlphaNumericChar(Math.floor(d/45))),r.append(rt.toAlphaNumericChar(d%45)),i-=2}if(i===1){if(n.available()<6)throw new L;r.append(rt.toAlphaNumericChar(n.readBits(6)))}if(o)for(let d=l;d<r.length();d++)r.charAt(d)==="%"&&(d<r.length()-1&&r.charAt(d+1)==="%"?r.deleteCharAt(d+1):r.setCharAt(d,""))}static decodeNumericSegment(n,r,i){for(;i>=3;){if(n.available()<10)throw new L;const o=n.readBits(10);if(o>=1e3)throw new L;r.append(rt.toAlphaNumericChar(Math.floor(o/100))),r.append(rt.toAlphaNumericChar(Math.floor(o/10)%10)),r.append(rt.toAlphaNumericChar(o%10)),i-=3}if(i===2){if(n.available()<7)throw new L;const o=n.readBits(7);if(o>=100)throw new L;r.append(rt.toAlphaNumericChar(Math.floor(o/10))),r.append(rt.toAlphaNumericChar(o%10))}else if(i===1){if(n.available()<4)throw new L;const o=n.readBits(4);if(o>=10)throw new L;r.append(rt.toAlphaNumericChar(o))}}static parseECIValue(n){const r=n.readBits(8);if(!(r&128))return r&127;if((r&192)===128){const i=n.readBits(8);return(r&63)<<8&4294967295|i}if((r&224)===192){const i=n.readBits(16);return(r&31)<<16&4294967295|i}throw new L}}rt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",rt.GB2312_SUBSET=1;class Ad{constructor(n){this.mirrored=n}isMirrored(){return this.mirrored}applyMirroredCorrection(n){if(!this.mirrored||n===null||n.length<3)return;const r=n[0];n[0]=n[2],n[2]=r}}class Rx{constructor(){this.rsDecoder=new li(Me.QR_CODE_FIELD_256)}decodeBooleanArray(n,r){return this.decodeBitMatrix(Ne.parseFromBooleanArray(n),r)}decodeBitMatrix(n,r){const i=new kx(n);let o=null;try{return this.decodeBitMatrixParser(i,r)}catch(l){o=l}try{i.remask(),i.setMirror(!0),i.readVersion(),i.readFormatInformation(),i.mirror();const l=this.decodeBitMatrixParser(i,r);return l.setOther(new Ad(!0)),l}catch(l){throw o!==null?o:l}}decodeBitMatrixParser(n,r){const i=n.readVersion(),o=n.readFormatInformation().getErrorCorrectionLevel(),l=n.readCodewords(),d=wl.getDataBlocks(l,i,o);let h=0;for(const v of d)h+=v.getNumDataCodewords();const g=new Uint8Array(h);let p=0;for(const v of d){const S=v.getCodewords(),I=v.getNumDataCodewords();this.correctErrors(S,I);for(let D=0;D<I;D++)g[p++]=S[D]}return rt.decode(g,i,o,r)}correctErrors(n,r){const i=new Int32Array(n);try{this.rsDecoder.decode(i,n.length-r)}catch{throw new j}for(let o=0;o<r;o++)n[o]=i[o]}}class vl extends we{constructor(n,r,i){super(n,r),this.estimatedModuleSize=i}aboutEquals(n,r,i){if(Math.abs(r-this.getY())<=n&&Math.abs(i-this.getX())<=n){const o=Math.abs(n-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1}combineEstimate(n,r,i){const o=(this.getX()+r)/2,l=(this.getY()+n)/2,d=(this.estimatedModuleSize+i)/2;return new vl(o,l,d)}}class Aa{constructor(n,r,i,o,l,d,h){this.image=n,this.startX=r,this.startY=i,this.width=o,this.height=l,this.moduleSize=d,this.resultPointCallback=h,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const n=this.startX,r=this.height,i=this.width,o=n+i,l=this.startY+r/2,d=new Int32Array(3),h=this.image;for(let g=0;g<r;g++){const p=l+(g&1?-Math.floor((g+1)/2):Math.floor((g+1)/2));d[0]=0,d[1]=0,d[2]=0;let v=n;for(;v<o&&!h.get(v,p);)v++;let S=0;for(;v<o;){if(h.get(v,p))if(S===1)d[1]++;else if(S===2){if(this.foundPatternCross(d)){const I=this.handlePossibleCenter(d,p,v);if(I!==null)return I}d[0]=d[2],d[1]=1,d[2]=0,S=1}else d[++S]++;else S===1&&S++,d[S]++;v++}if(this.foundPatternCross(d)){const I=this.handlePossibleCenter(d,p,o);if(I!==null)return I}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new K}static centerFromEnd(n,r){return r-n[2]-n[1]/2}foundPatternCross(n){const r=this.moduleSize,i=r/2;for(let o=0;o<3;o++)if(Math.abs(r-n[o])>=i)return!1;return!0}crossCheckVertical(n,r,i,o){const l=this.image,d=l.getHeight(),h=this.crossCheckStateCount;h[0]=0,h[1]=0,h[2]=0;let g=n;for(;g>=0&&l.get(r,g)&&h[1]<=i;)h[1]++,g--;if(g<0||h[1]>i)return NaN;for(;g>=0&&!l.get(r,g)&&h[0]<=i;)h[0]++,g--;if(h[0]>i)return NaN;for(g=n+1;g<d&&l.get(r,g)&&h[1]<=i;)h[1]++,g++;if(g===d||h[1]>i)return NaN;for(;g<d&&!l.get(r,g)&&h[2]<=i;)h[2]++,g++;if(h[2]>i)return NaN;const p=h[0]+h[1]+h[2];return 5*Math.abs(p-o)>=2*o?NaN:this.foundPatternCross(h)?Aa.centerFromEnd(h,g):NaN}handlePossibleCenter(n,r,i){const o=n[0]+n[1]+n[2],l=Aa.centerFromEnd(n,i),d=this.crossCheckVertical(r,l,2*n[1],o);if(!isNaN(d)){const h=(n[0]+n[1]+n[2])/3;for(const p of this.possibleCenters)if(p.aboutEquals(h,d,l))return p.combineEstimate(d,l,h);const g=new vl(l,d,h);this.possibleCenters.push(g),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(g)}return null}}class bl extends we{constructor(n,r,i,o){super(n,r),this.estimatedModuleSize=i,this.count=o,o===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(n,r,i){if(Math.abs(r-this.getY())<=n&&Math.abs(i-this.getX())<=n){const o=Math.abs(n-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1}combineEstimate(n,r,i){const o=this.count+1,l=(this.count*this.getX()+r)/o,d=(this.count*this.getY()+n)/o,h=(this.count*this.estimatedModuleSize+i)/o;return new bl(l,d,h,o)}}class Ox{constructor(n){this.bottomLeft=n[0],this.topLeft=n[1],this.topRight=n[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Nt{constructor(n,r){this.image=n,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(n){const r=n!=null&&n.get(U.TRY_HARDER)!==void 0,i=n!=null&&n.get(U.PURE_BARCODE)!==void 0,o=this.image,l=o.getHeight(),d=o.getWidth();let h=Math.floor(3*l/(4*Nt.MAX_MODULES));(h<Nt.MIN_SKIP||r)&&(h=Nt.MIN_SKIP);let g=!1;const p=new Int32Array(5);for(let S=h-1;S<l&&!g;S+=h){p[0]=0,p[1]=0,p[2]=0,p[3]=0,p[4]=0;let I=0;for(let D=0;D<d;D++)if(o.get(D,S))(I&1)===1&&I++,p[I]++;else if(I&1)p[I]++;else if(I===4)if(Nt.foundPatternCross(p)){if(this.handlePossibleCenter(p,S,D,i)===!0)if(h=2,this.hasSkipped===!0)g=this.haveMultiplyConfirmedCenters();else{const z=this.findRowSkip();z>p[2]&&(S+=z-p[2]-h,D=d-1)}else{p[0]=p[2],p[1]=p[3],p[2]=p[4],p[3]=1,p[4]=0,I=3;continue}I=0,p[0]=0,p[1]=0,p[2]=0,p[3]=0,p[4]=0}else p[0]=p[2],p[1]=p[3],p[2]=p[4],p[3]=1,p[4]=0,I=3;else p[++I]++;Nt.foundPatternCross(p)&&this.handlePossibleCenter(p,S,d,i)===!0&&(h=p[0],this.hasSkipped&&(g=this.haveMultiplyConfirmedCenters()))}const v=this.selectBestPatterns();return we.orderBestPatterns(v),new Ox(v)}static centerFromEnd(n,r){return r-n[4]-n[3]-n[2]/2}static foundPatternCross(n){let r=0;for(let l=0;l<5;l++){const d=n[l];if(d===0)return!1;r+=d}if(r<7)return!1;const i=r/7,o=i/2;return Math.abs(i-n[0])<o&&Math.abs(i-n[1])<o&&Math.abs(3*i-n[2])<3*o&&Math.abs(i-n[3])<o&&Math.abs(i-n[4])<o}getCrossCheckStateCount(){const n=this.crossCheckStateCount;return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n}crossCheckDiagonal(n,r,i,o){const l=this.getCrossCheckStateCount();let d=0;const h=this.image;for(;n>=d&&r>=d&&h.get(r-d,n-d);)l[2]++,d++;if(n<d||r<d)return!1;for(;n>=d&&r>=d&&!h.get(r-d,n-d)&&l[1]<=i;)l[1]++,d++;if(n<d||r<d||l[1]>i)return!1;for(;n>=d&&r>=d&&h.get(r-d,n-d)&&l[0]<=i;)l[0]++,d++;if(l[0]>i)return!1;const g=h.getHeight(),p=h.getWidth();for(d=1;n+d<g&&r+d<p&&h.get(r+d,n+d);)l[2]++,d++;if(n+d>=g||r+d>=p)return!1;for(;n+d<g&&r+d<p&&!h.get(r+d,n+d)&&l[3]<i;)l[3]++,d++;if(n+d>=g||r+d>=p||l[3]>=i)return!1;for(;n+d<g&&r+d<p&&h.get(r+d,n+d)&&l[4]<i;)l[4]++,d++;if(l[4]>=i)return!1;const v=l[0]+l[1]+l[2]+l[3]+l[4];return Math.abs(v-o)<2*o&&Nt.foundPatternCross(l)}crossCheckVertical(n,r,i,o){const l=this.image,d=l.getHeight(),h=this.getCrossCheckStateCount();let g=n;for(;g>=0&&l.get(r,g);)h[2]++,g--;if(g<0)return NaN;for(;g>=0&&!l.get(r,g)&&h[1]<=i;)h[1]++,g--;if(g<0||h[1]>i)return NaN;for(;g>=0&&l.get(r,g)&&h[0]<=i;)h[0]++,g--;if(h[0]>i)return NaN;for(g=n+1;g<d&&l.get(r,g);)h[2]++,g++;if(g===d)return NaN;for(;g<d&&!l.get(r,g)&&h[3]<i;)h[3]++,g++;if(g===d||h[3]>=i)return NaN;for(;g<d&&l.get(r,g)&&h[4]<i;)h[4]++,g++;if(h[4]>=i)return NaN;const p=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(p-o)>=2*o?NaN:Nt.foundPatternCross(h)?Nt.centerFromEnd(h,g):NaN}crossCheckHorizontal(n,r,i,o){const l=this.image,d=l.getWidth(),h=this.getCrossCheckStateCount();let g=n;for(;g>=0&&l.get(g,r);)h[2]++,g--;if(g<0)return NaN;for(;g>=0&&!l.get(g,r)&&h[1]<=i;)h[1]++,g--;if(g<0||h[1]>i)return NaN;for(;g>=0&&l.get(g,r)&&h[0]<=i;)h[0]++,g--;if(h[0]>i)return NaN;for(g=n+1;g<d&&l.get(g,r);)h[2]++,g++;if(g===d)return NaN;for(;g<d&&!l.get(g,r)&&h[3]<i;)h[3]++,g++;if(g===d||h[3]>=i)return NaN;for(;g<d&&l.get(g,r)&&h[4]<i;)h[4]++,g++;if(h[4]>=i)return NaN;const p=h[0]+h[1]+h[2]+h[3]+h[4];return 5*Math.abs(p-o)>=o?NaN:Nt.foundPatternCross(h)?Nt.centerFromEnd(h,g):NaN}handlePossibleCenter(n,r,i,o){const l=n[0]+n[1]+n[2]+n[3]+n[4];let d=Nt.centerFromEnd(n,i),h=this.crossCheckVertical(r,Math.floor(d),n[2],l);if(!isNaN(h)&&(d=this.crossCheckHorizontal(Math.floor(d),Math.floor(h),n[2],l),!isNaN(d)&&(!o||this.crossCheckDiagonal(Math.floor(h),Math.floor(d),n[2],l)))){const g=l/7;let p=!1;const v=this.possibleCenters;for(let S=0,I=v.length;S<I;S++){const D=v[S];if(D.aboutEquals(g,h,d)){v[S]=D.combineEstimate(h,d,g),p=!0;break}}if(!p){const S=new bl(d,h,g);v.push(S),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(S)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let r=null;for(const i of this.possibleCenters)if(i.getCount()>=Nt.CENTER_QUORUM)if(r==null)r=i;else return this.hasSkipped=!0,Math.floor((Math.abs(r.getX()-i.getX())-Math.abs(r.getY()-i.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let n=0,r=0;const i=this.possibleCenters.length;for(const d of this.possibleCenters)d.getCount()>=Nt.CENTER_QUORUM&&(n++,r+=d.getEstimatedModuleSize());if(n<3)return!1;const o=r/i;let l=0;for(const d of this.possibleCenters)l+=Math.abs(d.getEstimatedModuleSize()-o);return l<=.05*r}selectBestPatterns(){const n=this.possibleCenters.length;if(n<3)throw new K;const r=this.possibleCenters;let i;if(n>3){let o=0,l=0;for(const g of this.possibleCenters){const p=g.getEstimatedModuleSize();o+=p,l+=p*p}i=o/n;let d=Math.sqrt(l/n-i*i);r.sort((g,p)=>{const v=Math.abs(p.getEstimatedModuleSize()-i),S=Math.abs(g.getEstimatedModuleSize()-i);return v<S?-1:v>S?1:0});const h=Math.max(.2*i,d);for(let g=0;g<r.length&&r.length>3;g++){const p=r[g];Math.abs(p.getEstimatedModuleSize()-i)>h&&(r.splice(g,1),g--)}}if(r.length>3){let o=0;for(const l of r)o+=l.getEstimatedModuleSize();i=o/r.length,r.sort((l,d)=>{if(d.getCount()===l.getCount()){const h=Math.abs(d.getEstimatedModuleSize()-i),g=Math.abs(l.getEstimatedModuleSize()-i);return h<g?1:h>g?-1:0}else return d.getCount()-l.getCount()}),r.splice(3)}return[r[0],r[1],r[2]]}}Nt.CENTER_QUORUM=2,Nt.MIN_SKIP=3,Nt.MAX_MODULES=57;class ui{constructor(n){this.image=n}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(n){this.resultPointCallback=n==null?null:n.get(U.NEED_RESULT_POINT_CALLBACK);const i=new Nt(this.image,this.resultPointCallback).find(n);return this.processFinderPatternInfo(i)}processFinderPatternInfo(n){const r=n.getTopLeft(),i=n.getTopRight(),o=n.getBottomLeft(),l=this.calculateModuleSize(r,i,o);if(l<1)throw new K("No pattern found in proccess finder.");const d=ui.computeDimension(r,i,o,l),h=ve.getProvisionalVersionForDimension(d),g=h.getDimensionForVersion()-7;let p=null;if(h.getAlignmentPatternCenters().length>0){const D=i.getX()-r.getX()+o.getX(),F=i.getY()-r.getY()+o.getY(),z=1-3/g,W=Math.floor(r.getX()+z*(D-r.getX())),q=Math.floor(r.getY()+z*(F-r.getY()));for(let ie=4;ie<=16;ie<<=1)try{p=this.findAlignmentInRegion(l,W,q,ie);break}catch(ae){if(!(ae instanceof K))throw ae}}const v=ui.createTransform(r,i,o,p,d),S=ui.sampleGrid(this.image,v,d);let I;return p===null?I=[o,r,i]:I=[o,r,i,p],new va(S,I)}static createTransform(n,r,i,o,l){const d=l-3.5;let h,g,p,v;return o!==null?(h=o.getX(),g=o.getY(),p=d-3,v=p):(h=r.getX()-n.getX()+i.getX(),g=r.getY()-n.getY()+i.getY(),p=d,v=d),_n.quadrilateralToQuadrilateral(3.5,3.5,d,3.5,p,v,3.5,d,n.getX(),n.getY(),r.getX(),r.getY(),h,g,i.getX(),i.getY())}static sampleGrid(n,r,i){return dr.getInstance().sampleGridWithTransform(n,i,i,r)}static computeDimension(n,r,i,o){const l=Re.round(we.distance(n,r)/o),d=Re.round(we.distance(n,i)/o);let h=Math.floor((l+d)/2)+7;switch(h&3){case 0:h++;break;case 2:h--;break;case 3:throw new K("Dimensions could be not found.")}return h}calculateModuleSize(n,r,i){return(this.calculateModuleSizeOneWay(n,r)+this.calculateModuleSizeOneWay(n,i))/2}calculateModuleSizeOneWay(n,r){const i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(r.getX()),Math.floor(r.getY())),o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(n.getX()),Math.floor(n.getY()));return isNaN(i)?o/7:isNaN(o)?i/7:(i+o)/14}sizeOfBlackWhiteBlackRunBothWays(n,r,i,o){let l=this.sizeOfBlackWhiteBlackRun(n,r,i,o),d=1,h=n-(i-n);h<0?(d=n/(n-h),h=0):h>=this.image.getWidth()&&(d=(this.image.getWidth()-1-n)/(h-n),h=this.image.getWidth()-1);let g=Math.floor(r-(o-r)*d);return d=1,g<0?(d=r/(r-g),g=0):g>=this.image.getHeight()&&(d=(this.image.getHeight()-1-r)/(g-r),g=this.image.getHeight()-1),h=Math.floor(n+(h-n)*d),l+=this.sizeOfBlackWhiteBlackRun(n,r,h,g),l-1}sizeOfBlackWhiteBlackRun(n,r,i,o){const l=Math.abs(o-r)>Math.abs(i-n);if(l){let D=n;n=r,r=D,D=i,i=o,o=D}const d=Math.abs(i-n),h=Math.abs(o-r);let g=-d/2;const p=n<i?1:-1,v=r<o?1:-1;let S=0;const I=i+p;for(let D=n,F=r;D!==I;D+=p){const z=l?F:D,W=l?D:F;if(S===1===this.image.get(z,W)){if(S===2)return Re.distance(D,F,n,r);S++}if(g+=h,g>0){if(F===o)break;F+=v,g-=d}}return S===2?Re.distance(i+p,o,n,r):NaN}findAlignmentInRegion(n,r,i,o){const l=Math.floor(o*n),d=Math.max(0,r-l),h=Math.min(this.image.getWidth()-1,r+l);if(h-d<n*3)throw new K("Alignment top exceeds estimated module size.");const g=Math.max(0,i-l),p=Math.min(this.image.getHeight()-1,i+l);if(p-g<n*3)throw new K("Alignment bottom exceeds estimated module size.");return new Aa(this.image,d,g,h-d,p-g,n,this.resultPointCallback).find()}}class gr{constructor(){this.decoder=new Rx}getDecoder(){return this.decoder}decode(n,r){let i,o;if(r!=null&&r.get(U.PURE_BARCODE)!==void 0){const g=gr.extractPureBits(n.getBlackMatrix());i=this.decoder.decodeBitMatrix(g,r),o=gr.NO_POINTS}else{const g=new ui(n.getBlackMatrix()).detect(r);i=this.decoder.decodeBitMatrix(g.getBits(),r),o=g.getPoints()}i.getOther()instanceof Ad&&i.getOther().applyMirroredCorrection(o);const l=new He(i.getText(),i.getRawBytes(),void 0,o,oe.QR_CODE,void 0),d=i.getByteSegments();d!==null&&l.putMetadata(ft.BYTE_SEGMENTS,d);const h=i.getECLevel();return h!==null&&l.putMetadata(ft.ERROR_CORRECTION_LEVEL,h),i.hasStructuredAppend()&&(l.putMetadata(ft.STRUCTURED_APPEND_SEQUENCE,i.getStructuredAppendSequenceNumber()),l.putMetadata(ft.STRUCTURED_APPEND_PARITY,i.getStructuredAppendParity())),l}reset(){}static extractPureBits(n){const r=n.getTopLeftOnBit(),i=n.getBottomRightOnBit();if(r===null||i===null)throw new K;const o=this.moduleSize(r,n);let l=r[1],d=i[1],h=r[0],g=i[0];if(h>=g||l>=d)throw new K;if(d-l!==g-h&&(g=h+(d-l),g>=n.getWidth()))throw new K;const p=Math.round((g-h+1)/o),v=Math.round((d-l+1)/o);if(p<=0||v<=0)throw new K;if(v!==p)throw new K;const S=Math.floor(o/2);l+=S,h+=S;const I=h+Math.floor((p-1)*o)-g;if(I>0){if(I>S)throw new K;h-=I}const D=l+Math.floor((v-1)*o)-d;if(D>0){if(D>S)throw new K;l-=D}const F=new Ne(p,v);for(let z=0;z<v;z++){const W=l+Math.floor(z*o);for(let q=0;q<p;q++)n.get(h+Math.floor(q*o),W)&&F.set(q,z)}return F}static moduleSize(n,r){const i=r.getHeight(),o=r.getWidth();let l=n[0],d=n[1],h=!0,g=0;for(;l<o&&d<i;){if(h!==r.get(l,d)){if(++g===5)break;h=!h}l++,d++}if(l===o||d===i)throw new K;return(l-n[0])/7}}gr.NO_POINTS=new Array;class Ee{PDF417Common(){}static getBitCountSum(n){return Re.sum(n)}static toIntArray(n){if(n==null||!n.length)return Ee.EMPTY_INT_ARRAY;const r=new Int32Array(n.length);let i=0;for(const o of n)r[i++]=o;return r}static getCodeword(n){const r=C.binarySearch(Ee.SYMBOL_TABLE,n&262143);return r<0?-1:(Ee.CODEWORD_TABLE[r]-1)%Ee.NUMBER_OF_CODEWORDS}}Ee.NUMBER_OF_CODEWORDS=929,Ee.MAX_CODEWORDS_IN_BARCODE=Ee.NUMBER_OF_CODEWORDS-1,Ee.MIN_ROWS_IN_BARCODE=3,Ee.MAX_ROWS_IN_BARCODE=90,Ee.MODULES_IN_CODEWORD=17,Ee.MODULES_IN_STOP_PATTERN=18,Ee.BARS_IN_MODULE=8,Ee.EMPTY_INT_ARRAY=new Int32Array([]),Ee.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ee.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Dx{constructor(n,r){this.bits=n,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class Se{static detectMultiple(n,r,i){let o=n.getBlackMatrix(),l=Se.detect(i,o);return l.length||(o=o.clone(),o.rotate180(),l=Se.detect(i,o)),new Dx(o,l)}static detect(n,r){const i=new Array;let o=0,l=0,d=!1;for(;o<r.getHeight();){const h=Se.findVertices(r,o,l);if(h[0]==null&&h[3]==null){if(!d)break;d=!1,l=0;for(const g of i)g[1]!=null&&(o=Math.trunc(Math.max(o,g[1].getY()))),g[3]!=null&&(o=Math.max(o,Math.trunc(g[3].getY())));o+=Se.ROW_STEP;continue}if(d=!0,i.push(h),!n)break;h[2]!=null?(l=Math.trunc(h[2].getX()),o=Math.trunc(h[2].getY())):(l=Math.trunc(h[4].getX()),o=Math.trunc(h[4].getY()))}return i}static findVertices(n,r,i){const o=n.getHeight(),l=n.getWidth(),d=new Array(8);return Se.copyToResult(d,Se.findRowsWithPattern(n,o,l,r,i,Se.START_PATTERN),Se.INDEXES_START_PATTERN),d[4]!=null&&(i=Math.trunc(d[4].getX()),r=Math.trunc(d[4].getY())),Se.copyToResult(d,Se.findRowsWithPattern(n,o,l,r,i,Se.STOP_PATTERN),Se.INDEXES_STOP_PATTERN),d}static copyToResult(n,r,i){for(let o=0;o<i.length;o++)n[i[o]]=r[o]}static findRowsWithPattern(n,r,i,o,l,d){const h=new Array(4);let g=!1;const p=new Int32Array(d.length);for(;o<r;o+=Se.ROW_STEP){let S=Se.findGuardPattern(n,l,o,i,!1,d,p);if(S!=null){for(;o>0;){const I=Se.findGuardPattern(n,l,--o,i,!1,d,p);if(I!=null)S=I;else{o++;break}}h[0]=new we(S[0],o),h[1]=new we(S[1],o),g=!0;break}}let v=o+1;if(g){let S=0,I=Int32Array.from([Math.trunc(h[0].getX()),Math.trunc(h[1].getX())]);for(;v<r;v++){const D=Se.findGuardPattern(n,I[0],v,i,!1,d,p);if(D!=null&&Math.abs(I[0]-D[0])<Se.MAX_PATTERN_DRIFT&&Math.abs(I[1]-D[1])<Se.MAX_PATTERN_DRIFT)I=D,S=0;else{if(S>Se.SKIPPED_ROW_COUNT_MAX)break;S++}}v-=S+1,h[2]=new we(I[0],v),h[3]=new we(I[1],v)}return v-o<Se.BARCODE_MIN_HEIGHT&&C.fill(h,null),h}static findGuardPattern(n,r,i,o,l,d,h){C.fillWithin(h,0,h.length,0);let g=r,p=0;for(;n.get(g,i)&&g>0&&p++<Se.MAX_PIXEL_DRIFT;)g--;let v=g,S=0,I=d.length;for(let D=l;v<o;v++)if(n.get(v,i)!==D)h[S]++;else{if(S===I-1){if(Se.patternMatchVariance(h,d,Se.MAX_INDIVIDUAL_VARIANCE)<Se.MAX_AVG_VARIANCE)return new Int32Array([g,v]);g+=h[0]+h[1],M.arraycopy(h,2,h,0,S-1),h[S-1]=0,h[S]=0,S--}else S++;h[S]=1,D=!D}return S===I-1&&Se.patternMatchVariance(h,d,Se.MAX_INDIVIDUAL_VARIANCE)<Se.MAX_AVG_VARIANCE?new Int32Array([g,v-1]):null}static patternMatchVariance(n,r,i){let o=n.length,l=0,d=0;for(let p=0;p<o;p++)l+=n[p],d+=r[p];if(l<d)return 1/0;let h=l/d;i*=h;let g=0;for(let p=0;p<o;p++){let v=n[p],S=r[p]*h,I=v>S?v-S:S-v;if(I>i)return 1/0;g+=I}return g/l}}Se.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Se.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Se.MAX_AVG_VARIANCE=.42,Se.MAX_INDIVIDUAL_VARIANCE=.8,Se.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Se.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Se.MAX_PIXEL_DRIFT=3,Se.MAX_PATTERN_DRIFT=5,Se.SKIPPED_ROW_COUNT_MAX=25,Se.ROW_STEP=5,Se.BARCODE_MIN_HEIGHT=10;class It{constructor(n,r){if(r.length===0)throw new b;this.field=n;let i=r.length;if(i>1&&r[0]===0){let o=1;for(;o<i&&r[o]===0;)o++;o===i?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(i-o),M.arraycopy(r,o,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);if(n===1){let o=0;for(let l of this.coefficients)o=this.field.add(o,l);return o}let r=this.coefficients[0],i=this.coefficients.length;for(let o=1;o<i;o++)r=this.field.add(this.field.multiply(n,r),this.coefficients[o]);return r}add(n){if(!this.field.equals(n.field))throw new b("ModulusPolys do not have same ModulusGF field");if(this.isZero())return n;if(n.isZero())return this;let r=this.coefficients,i=n.coefficients;if(r.length>i.length){let d=r;r=i,i=d}let o=new Int32Array(i.length),l=i.length-r.length;M.arraycopy(i,0,o,0,l);for(let d=l;d<i.length;d++)o[d]=this.field.add(r[d-l],i[d]);return new It(this.field,o)}subtract(n){if(!this.field.equals(n.field))throw new b("ModulusPolys do not have same ModulusGF field");return n.isZero()?this:this.add(n.negative())}multiply(n){return n instanceof It?this.multiplyOther(n):this.multiplyScalar(n)}multiplyOther(n){if(!this.field.equals(n.field))throw new b("ModulusPolys do not have same ModulusGF field");if(this.isZero()||n.isZero())return new It(this.field,new Int32Array([0]));let r=this.coefficients,i=r.length,o=n.coefficients,l=o.length,d=new Int32Array(i+l-1);for(let h=0;h<i;h++){let g=r[h];for(let p=0;p<l;p++)d[h+p]=this.field.add(d[h+p],this.field.multiply(g,o[p]))}return new It(this.field,d)}negative(){let n=this.coefficients.length,r=new Int32Array(n);for(let i=0;i<n;i++)r[i]=this.field.subtract(0,this.coefficients[i]);return new It(this.field,r)}multiplyScalar(n){if(n===0)return new It(this.field,new Int32Array([0]));if(n===1)return this;let r=this.coefficients.length,i=new Int32Array(r);for(let o=0;o<r;o++)i[o]=this.field.multiply(this.coefficients[o],n);return new It(this.field,i)}multiplyByMonomial(n,r){if(n<0)throw new b;if(r===0)return new It(this.field,new Int32Array([0]));let i=this.coefficients.length,o=new Int32Array(i+n);for(let l=0;l<i;l++)o[l]=this.field.multiply(this.coefficients[l],r);return new It(this.field,o)}toString(){let n=new fe;for(let r=this.getDegree();r>=0;r--){let i=this.getCoefficient(r);i!==0&&(i<0?(n.append(" - "),i=-i):n.length()>0&&n.append(" + "),(r===0||i!==1)&&n.append(i),r!==0&&(r===1?n.append("x"):(n.append("x^"),n.append(r))))}return n.toString()}}class Mx{add(n,r){return(n+r)%this.modulus}subtract(n,r){return(this.modulus+n-r)%this.modulus}exp(n){return this.expTable[n]}log(n){if(n===0)throw new b;return this.logTable[n]}inverse(n){if(n===0)throw new ya;return this.expTable[this.modulus-this.logTable[n]-1]}multiply(n,r){return n===0||r===0?0:this.expTable[(this.logTable[n]+this.logTable[r])%(this.modulus-1)]}getSize(){return this.modulus}equals(n){return n===this}}class Cl extends Mx{constructor(n,r){super(),this.modulus=n,this.expTable=new Int32Array(n),this.logTable=new Int32Array(n);let i=1;for(let o=0;o<n;o++)this.expTable[o]=i,i=i*r%n;for(let o=0;o<n-1;o++)this.logTable[this.expTable[o]]=o;this.zero=new It(this,new Int32Array([0])),this.one=new It(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,r){if(n<0)throw new b;if(r===0)return this.zero;let i=new Int32Array(n+1);return i[0]=r,new It(this,i)}}Cl.PDF417_GF=new Cl(Ee.NUMBER_OF_CODEWORDS,3);class Sd{constructor(){this.field=Cl.PDF417_GF}decode(n,r,i){let o=new It(this.field,n),l=new Int32Array(r),d=!1;for(let F=r;F>0;F--){let z=o.evaluateAt(this.field.exp(F));l[r-F]=z,z!==0&&(d=!0)}if(!d)return 0;let h=this.field.getOne();if(i!=null)for(const F of i){let z=this.field.exp(n.length-1-F),W=new It(this.field,new Int32Array([this.field.subtract(0,z),1]));h=h.multiply(W)}let g=new It(this.field,l),p=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),g,r),v=p[0],S=p[1],I=this.findErrorLocations(v),D=this.findErrorMagnitudes(S,v,I);for(let F=0;F<I.length;F++){let z=n.length-1-this.field.log(I[F]);if(z<0)throw j.getChecksumInstance();n[z]=this.field.subtract(n[z],D[F])}return I.length}runEuclideanAlgorithm(n,r,i){if(n.getDegree()<r.getDegree()){let I=n;n=r,r=I}let o=n,l=r,d=this.field.getZero(),h=this.field.getOne();for(;l.getDegree()>=Math.round(i/2);){let I=o,D=d;if(o=l,d=h,o.isZero())throw j.getChecksumInstance();l=I;let F=this.field.getZero(),z=o.getCoefficient(o.getDegree()),W=this.field.inverse(z);for(;l.getDegree()>=o.getDegree()&&!l.isZero();){let q=l.getDegree()-o.getDegree(),ie=this.field.multiply(l.getCoefficient(l.getDegree()),W);F=F.add(this.field.buildMonomial(q,ie)),l=l.subtract(o.multiplyByMonomial(q,ie))}h=F.multiply(d).subtract(D).negative()}let g=h.getCoefficient(0);if(g===0)throw j.getChecksumInstance();let p=this.field.inverse(g),v=h.multiply(p),S=l.multiply(p);return[v,S]}findErrorLocations(n){let r=n.getDegree(),i=new Int32Array(r),o=0;for(let l=1;l<this.field.getSize()&&o<r;l++)n.evaluateAt(l)===0&&(i[o]=this.field.inverse(l),o++);if(o!==r)throw j.getChecksumInstance();return i}findErrorMagnitudes(n,r,i){let o=r.getDegree(),l=new Int32Array(o);for(let p=1;p<=o;p++)l[o-p]=this.field.multiply(p,r.getCoefficient(p));let d=new It(this.field,l),h=i.length,g=new Int32Array(h);for(let p=0;p<h;p++){let v=this.field.inverse(i[p]),S=this.field.subtract(0,n.evaluateAt(v)),I=this.field.inverse(d.evaluateAt(v));g[p]=this.field.multiply(S,I)}return g}}class Gr{constructor(n,r,i,o,l){n instanceof Gr?this.constructor_2(n):this.constructor_1(n,r,i,o,l)}constructor_1(n,r,i,o,l){const d=r==null||i==null,h=o==null||l==null;if(d&&h)throw new K;d?(r=new we(0,o.getY()),i=new we(0,l.getY())):h&&(o=new we(n.getWidth()-1,r.getY()),l=new we(n.getWidth()-1,i.getY())),this.image=n,this.topLeft=r,this.bottomLeft=i,this.topRight=o,this.bottomRight=l,this.minX=Math.trunc(Math.min(r.getX(),i.getX())),this.maxX=Math.trunc(Math.max(o.getX(),l.getX())),this.minY=Math.trunc(Math.min(r.getY(),o.getY())),this.maxY=Math.trunc(Math.max(i.getY(),l.getY()))}constructor_2(n){this.image=n.image,this.topLeft=n.getTopLeft(),this.bottomLeft=n.getBottomLeft(),this.topRight=n.getTopRight(),this.bottomRight=n.getBottomRight(),this.minX=n.getMinX(),this.maxX=n.getMaxX(),this.minY=n.getMinY(),this.maxY=n.getMaxY()}static merge(n,r){return n==null?r:r==null?n:new Gr(n.image,n.topLeft,n.bottomLeft,r.topRight,r.bottomRight)}addMissingRows(n,r,i){let o=this.topLeft,l=this.bottomLeft,d=this.topRight,h=this.bottomRight;if(n>0){let g=i?this.topLeft:this.topRight,p=Math.trunc(g.getY()-n);p<0&&(p=0);let v=new we(g.getX(),p);i?o=v:d=v}if(r>0){let g=i?this.bottomLeft:this.bottomRight,p=Math.trunc(g.getY()+r);p>=this.image.getHeight()&&(p=this.image.getHeight()-1);let v=new we(g.getX(),p);i?l=v:h=v}return new Gr(this.image,o,l,d,h)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Lx{constructor(n,r,i,o){this.columnCount=n,this.errorCorrectionLevel=o,this.rowCountUpperPart=r,this.rowCountLowerPart=i,this.rowCount=r+i}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class di{constructor(){this.buffer=""}static form(n,r){let i=-1;function o(d,h,g,p,v,S){if(d==="%%")return"%";if(r[++i]===void 0)return;d=p?parseInt(p.substr(1)):void 0;let I=v?parseInt(v.substr(1)):void 0,D;switch(S){case"s":D=r[i];break;case"c":D=r[i][0];break;case"f":D=parseFloat(r[i]).toFixed(d);break;case"p":D=parseFloat(r[i]).toPrecision(d);break;case"e":D=parseFloat(r[i]).toExponential(d);break;case"x":D=parseInt(r[i]).toString(I||16);break;case"d":D=parseFloat(parseInt(r[i],I||10).toPrecision(d)).toFixed(0);break}D=typeof D=="object"?JSON.stringify(D):(+D).toString(I);let F=parseInt(g),z=g&&g[0]+""=="0"?"0":" ";for(;D.length<F;)D=h!==void 0?D+z:z+D;return D}let l=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(l,o)}format(n,...r){this.buffer+=di.form(n,r)}toString(){return this.buffer}}class fi{constructor(n){this.boundingBox=new Gr(n),this.codewords=new Array(n.getMaxY()-n.getMinY()+1)}getCodewordNearby(n){let r=this.getCodeword(n);if(r!=null)return r;for(let i=1;i<fi.MAX_NEARBY_DISTANCE;i++){let o=this.imageRowToCodewordIndex(n)-i;if(o>=0&&(r=this.codewords[o],r!=null)||(o=this.imageRowToCodewordIndex(n)+i,o<this.codewords.length&&(r=this.codewords[o],r!=null)))return r}return null}imageRowToCodewordIndex(n){return n-this.boundingBox.getMinY()}setCodeword(n,r){this.codewords[this.imageRowToCodewordIndex(n)]=r}getCodeword(n){return this.codewords[this.imageRowToCodewordIndex(n)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const n=new di;let r=0;for(const i of this.codewords){if(i==null){n.format("%3d:    |   %n",r++);continue}n.format("%3d: %3d|%3d%n",r++,i.getRowNumber(),i.getValue())}return n.toString()}}fi.MAX_NEARBY_DISTANCE=5;class hi{constructor(){this.values=new Map}setValue(n){n=Math.trunc(n);let r=this.values.get(n);r==null&&(r=0),r++,this.values.set(n,r)}getValue(){let n=-1,r=new Array;for(const[i,o]of this.values.entries()){const l={getKey:()=>i,getValue:()=>o};l.getValue()>n?(n=l.getValue(),r=[],r.push(l.getKey())):l.getValue()===n&&r.push(l.getKey())}return Ee.toIntArray(r)}getConfidence(n){return this.values.get(n)}}class _d extends fi{constructor(n,r){super(n),this._isLeft=r}setRowNumbers(){for(let n of this.getCodewords())n!=null&&n.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(n){let r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,n);let i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),l=this._isLeft?i.getBottomLeft():i.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(o.getY())),h=this.imageRowToCodewordIndex(Math.trunc(l.getY())),g=-1,p=1,v=0;for(let S=d;S<h;S++){if(r[S]==null)continue;let I=r[S],D=I.getRowNumber()-g;if(D===0)v++;else if(D===1)p=Math.max(p,v),v=1,g=I.getRowNumber();else if(D<0||I.getRowNumber()>=n.getRowCount()||D>S)r[S]=null;else{let F;p>2?F=(p-2)*D:F=D;let z=F>=S;for(let W=1;W<=F&&!z;W++)z=r[S-W]!=null;z?r[S]=null:(g=I.getRowNumber(),v=1)}}}getRowHeights(){let n=this.getBarcodeMetadata();if(n==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(n);let r=new Int32Array(n.getRowCount());for(let i of this.getCodewords())if(i!=null){let o=i.getRowNumber();if(o>=r.length)continue;r[o]++}return r}adjustIncompleteIndicatorColumnRowNumbers(n){let r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),o=this._isLeft?r.getBottomLeft():r.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(i.getY())),d=this.imageRowToCodewordIndex(Math.trunc(o.getY())),h=this.getCodewords(),g=-1;for(let p=l;p<d;p++){if(h[p]==null)continue;let v=h[p];v.setRowNumberAsRowIndicatorColumn();let S=v.getRowNumber()-g;S===0||(S===1?g=v.getRowNumber():v.getRowNumber()>=n.getRowCount()?h[p]=null:g=v.getRowNumber())}}getBarcodeMetadata(){let n=this.getCodewords(),r=new hi,i=new hi,o=new hi,l=new hi;for(let h of n){if(h==null)continue;h.setRowNumberAsRowIndicatorColumn();let g=h.getValue()%30,p=h.getRowNumber();switch(this._isLeft||(p+=2),p%3){case 0:i.setValue(g*3+1);break;case 1:l.setValue(g/3),o.setValue(g%3);break;case 2:r.setValue(g+1);break}}if(r.getValue().length===0||i.getValue().length===0||o.getValue().length===0||l.getValue().length===0||r.getValue()[0]<1||i.getValue()[0]+o.getValue()[0]<Ee.MIN_ROWS_IN_BARCODE||i.getValue()[0]+o.getValue()[0]>Ee.MAX_ROWS_IN_BARCODE)return null;let d=new Lx(r.getValue()[0],i.getValue()[0],o.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(n,d),d}removeIncorrectCodewords(n,r){for(let i=0;i<n.length;i++){let o=n[i];if(n[i]==null)continue;let l=o.getValue()%30,d=o.getRowNumber();if(d>r.getRowCount()){n[i]=null;continue}switch(this._isLeft||(d+=2),d%3){case 0:l*3+1!==r.getRowCountUpperPart()&&(n[i]=null);break;case 1:(Math.trunc(l/3)!==r.getErrorCorrectionLevel()||l%3!==r.getRowCountLowerPart())&&(n[i]=null);break;case 2:l+1!==r.getColumnCount()&&(n[i]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class xi{constructor(n,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=n,this.barcodeColumnCount=n.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let n=Ee.MAX_CODEWORDS_IN_BARCODE,r;do r=n,n=this.adjustRowNumbersAndGetCount();while(n>0&&n<r);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(n){n!=null&&n.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let n=this.adjustRowNumbersByRow();if(n===0)return 0;for(let r=1;r<this.barcodeColumnCount+1;r++){let i=this.detectionResultColumns[r].getCodewords();for(let o=0;o<i.length;o++)i[o]!=null&&(i[o].hasValidRowNumber()||this.adjustRowNumbers(r,o,i))}return n}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let n=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<n.length;i++)if(n[i]!=null&&r[i]!=null&&n[i].getRowNumber()===r[i].getRowNumber())for(let o=1;o<=this.barcodeColumnCount;o++){let l=this.detectionResultColumns[o].getCodewords()[i];l!=null&&(l.setRowNumber(n[i].getRowNumber()),l.hasValidRowNumber()||(this.detectionResultColumns[o].getCodewords()[i]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let n=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<r.length;i++){if(r[i]==null)continue;let o=r[i].getRowNumber(),l=0;for(let d=this.barcodeColumnCount+1;d>0&&l<this.ADJUST_ROW_NUMBER_SKIP;d--){let h=this.detectionResultColumns[d].getCodewords()[i];h!=null&&(l=xi.adjustRowNumberIfValid(o,l,h),h.hasValidRowNumber()||n++)}}return n}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let n=0,r=this.detectionResultColumns[0].getCodewords();for(let i=0;i<r.length;i++){if(r[i]==null)continue;let o=r[i].getRowNumber(),l=0;for(let d=1;d<this.barcodeColumnCount+1&&l<this.ADJUST_ROW_NUMBER_SKIP;d++){let h=this.detectionResultColumns[d].getCodewords()[i];h!=null&&(l=xi.adjustRowNumberIfValid(o,l,h),h.hasValidRowNumber()||n++)}}return n}static adjustRowNumberIfValid(n,r,i){return i==null||i.hasValidRowNumber()||(i.isValidRowNumber(n)?(i.setRowNumber(n),r=0):++r),r}adjustRowNumbers(n,r,i){if(!this.detectionResultColumns[n-1])return;let o=i[r],l=this.detectionResultColumns[n-1].getCodewords(),d=l;this.detectionResultColumns[n+1]!=null&&(d=this.detectionResultColumns[n+1].getCodewords());let h=new Array(14);h[2]=l[r],h[3]=d[r],r>0&&(h[0]=i[r-1],h[4]=l[r-1],h[5]=d[r-1]),r>1&&(h[8]=i[r-2],h[10]=l[r-2],h[11]=d[r-2]),r<i.length-1&&(h[1]=i[r+1],h[6]=l[r+1],h[7]=d[r+1]),r<i.length-2&&(h[9]=i[r+2],h[12]=l[r+2],h[13]=d[r+2]);for(let g of h)if(xi.adjustRowNumber(o,g))return}static adjustRowNumber(n,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===n.getBucket()?(n.setRowNumber(r.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(n){this.boundingBox=n}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(n,r){this.detectionResultColumns[n]=r}getDetectionResultColumn(n){return this.detectionResultColumns[n]}toString(){let n=this.detectionResultColumns[0];n==null&&(n=this.detectionResultColumns[this.barcodeColumnCount+1]);let r=new di;for(let i=0;i<n.getCodewords().length;i++){r.format("CW %3d:",i);for(let o=0;o<this.barcodeColumnCount+2;o++){if(this.detectionResultColumns[o]==null){r.format("    |   ");continue}let l=this.detectionResultColumns[o].getCodewords()[i];if(l==null){r.format("    |   ");continue}r.format(" %3d|%3d",l.getRowNumber(),l.getValue())}r.format("%n")}return r.toString()}}class gi{constructor(n,r,i,o){this.rowNumber=gi.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(n),this.endX=Math.trunc(r),this.bucket=Math.trunc(i),this.value=Math.trunc(o)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(n){return n!==gi.BARCODE_ROW_UNKNOWN&&this.bucket===n%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(n){this.rowNumber=n}toString(){return this.rowNumber+"|"+this.value}}gi.BARCODE_ROW_UNKNOWN=-1;class Zt{static initialize(){for(let n=0;n<Ee.SYMBOL_TABLE.length;n++){let r=Ee.SYMBOL_TABLE[n],i=r&1;for(let o=0;o<Ee.BARS_IN_MODULE;o++){let l=0;for(;(r&1)===i;)l+=1,r>>=1;i=r&1,Zt.RATIOS_TABLE[n]||(Zt.RATIOS_TABLE[n]=new Array(Ee.BARS_IN_MODULE)),Zt.RATIOS_TABLE[n][Ee.BARS_IN_MODULE-o-1]=Math.fround(l/Ee.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(n){let r=Zt.getDecodedCodewordValue(Zt.sampleBitCounts(n));return r!==-1?r:Zt.getClosestDecodedValue(n)}static sampleBitCounts(n){let r=Re.sum(n),i=new Int32Array(Ee.BARS_IN_MODULE),o=0,l=0;for(let d=0;d<Ee.MODULES_IN_CODEWORD;d++){let h=r/(2*Ee.MODULES_IN_CODEWORD)+d*r/Ee.MODULES_IN_CODEWORD;l+n[o]<=h&&(l+=n[o],o++),i[o]++}return i}static getDecodedCodewordValue(n){let r=Zt.getBitValue(n);return Ee.getCodeword(r)===-1?-1:r}static getBitValue(n){let r=0;for(let i=0;i<n.length;i++)for(let o=0;o<n[i];o++)r=r<<1|(i%2===0?1:0);return Math.trunc(r)}static getClosestDecodedValue(n){let r=Re.sum(n),i=new Array(Ee.BARS_IN_MODULE);if(r>1)for(let d=0;d<i.length;d++)i[d]=Math.fround(n[d]/r);let o=wa.MAX_VALUE,l=-1;this.bSymbolTableReady||Zt.initialize();for(let d=0;d<Zt.RATIOS_TABLE.length;d++){let h=0,g=Zt.RATIOS_TABLE[d];for(let p=0;p<Ee.BARS_IN_MODULE;p++){let v=Math.fround(g[p]-i[p]);if(h+=Math.fround(v*v),h>=o)break}h<o&&(o=h,l=Ee.SYMBOL_TABLE[d])}return l}}Zt.bSymbolTableReady=!1,Zt.RATIOS_TABLE=new Array(Ee.SYMBOL_TABLE.length).map(A=>new Array(Ee.BARS_IN_MODULE));class Id{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(n){this.segmentIndex=n}getFileId(){return this.fileId}setFileId(n){this.fileId=n}getOptionalData(){return this.optionalData}setOptionalData(n){this.optionalData=n}isLastSegment(){return this.lastSegment}setLastSegment(n){this.lastSegment=n}getSegmentCount(){return this.segmentCount}setSegmentCount(n){this.segmentCount=n}getSender(){return this.sender||null}setSender(n){this.sender=n}getAddressee(){return this.addressee||null}setAddressee(n){this.addressee=n}getFileName(){return this.fileName}setFileName(n){this.fileName=n}getFileSize(){return this.fileSize}setFileSize(n){this.fileSize=n}getChecksum(){return this.checksum}setChecksum(n){this.checksum=n}getTimestamp(){return this.timestamp}setTimestamp(n){this.timestamp=n}}class Td{static parseLong(n,r=void 0){return parseInt(n,r)}}class jd extends w{}jd.kind="NullPointerException";class Bx{writeBytes(n){this.writeBytesOffset(n,0,n.length)}writeBytesOffset(n,r,i){if(n==null)throw new jd;if(r<0||r>n.length||i<0||r+i>n.length||r+i<0)throw new H;if(i===0)return;for(let o=0;o<i;o++)this.write(n[r+o])}flush(){}close(){}}class Px extends w{}class Fx extends Bx{constructor(n=32){if(super(),this.count=0,n<0)throw new b("Negative initial size: "+n);this.buf=new Uint8Array(n)}ensureCapacity(n){n-this.buf.length>0&&this.grow(n)}grow(n){let i=this.buf.length<<1;if(i-n<0&&(i=n),i<0){if(n<0)throw new Px;i=E.MAX_VALUE}this.buf=C.copyOfUint8Array(this.buf,i)}write(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1}writeBytesOffset(n,r,i){if(r<0||r>n.length||i<0||r+i-n.length>0)throw new H;this.ensureCapacity(this.count+i),M.arraycopy(n,r,this.buf,this.count,i),this.count+=i}writeTo(n){n.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return C.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(n){return n?typeof n=="string"?this.toString_string(n):this.toString_number(n):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(n){return new String(this.buf).toString()}toString_number(n){return new String(this.buf).toString()}close(){}}var ze;(function(A){A[A.ALPHA=0]="ALPHA",A[A.LOWER=1]="LOWER",A[A.MIXED=2]="MIXED",A[A.PUNCT=3]="PUNCT",A[A.ALPHA_SHIFT=4]="ALPHA_SHIFT",A[A.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(ze||(ze={}));function kd(){if(typeof window<"u")return window.BigInt||null;if(typeof yi<"u")return yi.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Sa;function pr(A){if(typeof Sa>"u"&&(Sa=kd()),Sa===null)throw new Error("BigInt is not supported!");return Sa(A)}function Ux(){let A=[];A[0]=pr(1);let n=pr(900);A[1]=n;for(let r=2;r<16;r++)A[r]=A[r-1]*n;return A}class Y{static decode(n,r){let i=new fe(""),o=P.ISO8859_1;i.enableDecoding(o);let l=1,d=n[l++],h=new Id;for(;l<n[0];){switch(d){case Y.TEXT_COMPACTION_MODE_LATCH:l=Y.textCompaction(n,l,i);break;case Y.BYTE_COMPACTION_MODE_LATCH:case Y.BYTE_COMPACTION_MODE_LATCH_6:l=Y.byteCompaction(d,n,o,l,i);break;case Y.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[l++]);break;case Y.NUMERIC_COMPACTION_MODE_LATCH:l=Y.numericCompaction(n,l,i);break;case Y.ECI_CHARSET:P.getCharacterSetECIByValue(n[l++]);break;case Y.ECI_GENERAL_PURPOSE:l+=2;break;case Y.ECI_USER_DEFINED:l++;break;case Y.BEGIN_MACRO_PDF417_CONTROL_BLOCK:l=Y.decodeMacroBlock(n,l,h);break;case Y.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Y.MACRO_PDF417_TERMINATOR:throw new L;default:l--,l=Y.textCompaction(n,l,i);break}if(l<n.length)d=n[l++];else throw L.getFormatInstance()}if(i.length()===0)throw L.getFormatInstance();let g=new ai(null,i.toString(),null,r);return g.setOther(h),g}static decodeMacroBlock(n,r,i){if(r+Y.NUMBER_OF_SEQUENCE_CODEWORDS>n[0])throw L.getFormatInstance();let o=new Int32Array(Y.NUMBER_OF_SEQUENCE_CODEWORDS);for(let h=0;h<Y.NUMBER_OF_SEQUENCE_CODEWORDS;h++,r++)o[h]=n[r];i.setSegmentIndex(E.parseInt(Y.decodeBase900toBase10(o,Y.NUMBER_OF_SEQUENCE_CODEWORDS)));let l=new fe;r=Y.textCompaction(n,r,l),i.setFileId(l.toString());let d=-1;for(n[r]===Y.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(d=r+1);r<n[0];)switch(n[r]){case Y.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,n[r]){case Y.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let h=new fe;r=Y.textCompaction(n,r+1,h),i.setFileName(h.toString());break;case Y.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let g=new fe;r=Y.textCompaction(n,r+1,g),i.setSender(g.toString());break;case Y.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let p=new fe;r=Y.textCompaction(n,r+1,p),i.setAddressee(p.toString());break;case Y.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let v=new fe;r=Y.numericCompaction(n,r+1,v),i.setSegmentCount(E.parseInt(v.toString()));break;case Y.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let S=new fe;r=Y.numericCompaction(n,r+1,S),i.setTimestamp(Td.parseLong(S.toString()));break;case Y.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let I=new fe;r=Y.numericCompaction(n,r+1,I),i.setChecksum(E.parseInt(I.toString()));break;case Y.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let D=new fe;r=Y.numericCompaction(n,r+1,D),i.setFileSize(Td.parseLong(D.toString()));break;default:throw L.getFormatInstance()}break;case Y.MACRO_PDF417_TERMINATOR:r++,i.setLastSegment(!0);break;default:throw L.getFormatInstance()}if(d!==-1){let h=r-d;i.isLastSegment()&&h--,i.setOptionalData(C.copyOfRange(n,d,d+h))}return r}static textCompaction(n,r,i){let o=new Int32Array((n[0]-r)*2),l=new Int32Array((n[0]-r)*2),d=0,h=!1;for(;r<n[0]&&!h;){let g=n[r++];if(g<Y.TEXT_COMPACTION_MODE_LATCH)o[d]=g/30,o[d+1]=g%30,d+=2;else switch(g){case Y.TEXT_COMPACTION_MODE_LATCH:o[d++]=Y.TEXT_COMPACTION_MODE_LATCH;break;case Y.BYTE_COMPACTION_MODE_LATCH:case Y.BYTE_COMPACTION_MODE_LATCH_6:case Y.NUMERIC_COMPACTION_MODE_LATCH:case Y.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Y.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Y.MACRO_PDF417_TERMINATOR:r--,h=!0;break;case Y.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o[d]=Y.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,g=n[r++],l[d]=g,d++;break}}return Y.decodeTextCompaction(o,l,d,i),r}static decodeTextCompaction(n,r,i,o){let l=ze.ALPHA,d=ze.ALPHA,h=0;for(;h<i;){let g=n[h],p="";switch(l){case ze.ALPHA:if(g<26)p=String.fromCharCode(65+g);else switch(g){case 26:p=" ";break;case Y.LL:l=ze.LOWER;break;case Y.ML:l=ze.MIXED;break;case Y.PS:d=l,l=ze.PUNCT_SHIFT;break;case Y.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[h]);break;case Y.TEXT_COMPACTION_MODE_LATCH:l=ze.ALPHA;break}break;case ze.LOWER:if(g<26)p=String.fromCharCode(97+g);else switch(g){case 26:p=" ";break;case Y.AS:d=l,l=ze.ALPHA_SHIFT;break;case Y.ML:l=ze.MIXED;break;case Y.PS:d=l,l=ze.PUNCT_SHIFT;break;case Y.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[h]);break;case Y.TEXT_COMPACTION_MODE_LATCH:l=ze.ALPHA;break}break;case ze.MIXED:if(g<Y.PL)p=Y.MIXED_CHARS[g];else switch(g){case Y.PL:l=ze.PUNCT;break;case 26:p=" ";break;case Y.LL:l=ze.LOWER;break;case Y.AL:l=ze.ALPHA;break;case Y.PS:d=l,l=ze.PUNCT_SHIFT;break;case Y.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[h]);break;case Y.TEXT_COMPACTION_MODE_LATCH:l=ze.ALPHA;break}break;case ze.PUNCT:if(g<Y.PAL)p=Y.PUNCT_CHARS[g];else switch(g){case Y.PAL:l=ze.ALPHA;break;case Y.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[h]);break;case Y.TEXT_COMPACTION_MODE_LATCH:l=ze.ALPHA;break}break;case ze.ALPHA_SHIFT:if(l=d,g<26)p=String.fromCharCode(65+g);else switch(g){case 26:p=" ";break;case Y.TEXT_COMPACTION_MODE_LATCH:l=ze.ALPHA;break}break;case ze.PUNCT_SHIFT:if(l=d,g<Y.PAL)p=Y.PUNCT_CHARS[g];else switch(g){case Y.PAL:l=ze.ALPHA;break;case Y.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[h]);break;case Y.TEXT_COMPACTION_MODE_LATCH:l=ze.ALPHA;break}break}p!==""&&o.append(p),h++}}static byteCompaction(n,r,i,o,l){let d=new Fx,h=0,g=0,p=!1;switch(n){case Y.BYTE_COMPACTION_MODE_LATCH:let v=new Int32Array(6),S=r[o++];for(;o<r[0]&&!p;)switch(v[h++]=S,g=900*g+S,S=r[o++],S){case Y.TEXT_COMPACTION_MODE_LATCH:case Y.BYTE_COMPACTION_MODE_LATCH:case Y.NUMERIC_COMPACTION_MODE_LATCH:case Y.BYTE_COMPACTION_MODE_LATCH_6:case Y.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Y.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Y.MACRO_PDF417_TERMINATOR:o--,p=!0;break;default:if(h%5===0&&h>0){for(let I=0;I<6;++I)d.write(Number(pr(g)>>pr(8*(5-I))));g=0,h=0}break}o===r[0]&&S<Y.TEXT_COMPACTION_MODE_LATCH&&(v[h++]=S);for(let I=0;I<h;I++)d.write(v[I]);break;case Y.BYTE_COMPACTION_MODE_LATCH_6:for(;o<r[0]&&!p;){let I=r[o++];if(I<Y.TEXT_COMPACTION_MODE_LATCH)h++,g=900*g+I;else switch(I){case Y.TEXT_COMPACTION_MODE_LATCH:case Y.BYTE_COMPACTION_MODE_LATCH:case Y.NUMERIC_COMPACTION_MODE_LATCH:case Y.BYTE_COMPACTION_MODE_LATCH_6:case Y.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Y.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Y.MACRO_PDF417_TERMINATOR:o--,p=!0;break}if(h%5===0&&h>0){for(let D=0;D<6;++D)d.write(Number(pr(g)>>pr(8*(5-D))));g=0,h=0}}break}return l.append(ee.decode(d.toByteArray(),i)),o}static numericCompaction(n,r,i){let o=0,l=!1,d=new Int32Array(Y.MAX_NUMERIC_CODEWORDS);for(;r<n[0]&&!l;){let h=n[r++];if(r===n[0]&&(l=!0),h<Y.TEXT_COMPACTION_MODE_LATCH)d[o]=h,o++;else switch(h){case Y.TEXT_COMPACTION_MODE_LATCH:case Y.BYTE_COMPACTION_MODE_LATCH:case Y.BYTE_COMPACTION_MODE_LATCH_6:case Y.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Y.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Y.MACRO_PDF417_TERMINATOR:r--,l=!0;break}(o%Y.MAX_NUMERIC_CODEWORDS===0||h===Y.NUMERIC_COMPACTION_MODE_LATCH||l)&&o>0&&(i.append(Y.decodeBase900toBase10(d,o)),o=0)}return r}static decodeBase900toBase10(n,r){let i=pr(0);for(let l=0;l<r;l++)i+=Y.EXP900[r-l-1]*pr(n[l]);let o=i.toString();if(o.charAt(0)!=="1")throw new L;return o.substring(1)}}Y.TEXT_COMPACTION_MODE_LATCH=900,Y.BYTE_COMPACTION_MODE_LATCH=901,Y.NUMERIC_COMPACTION_MODE_LATCH=902,Y.BYTE_COMPACTION_MODE_LATCH_6=924,Y.ECI_USER_DEFINED=925,Y.ECI_GENERAL_PURPOSE=926,Y.ECI_CHARSET=927,Y.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Y.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Y.MACRO_PDF417_TERMINATOR=922,Y.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Y.MAX_NUMERIC_CODEWORDS=15,Y.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Y.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Y.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Y.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Y.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Y.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Y.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Y.PL=25,Y.LL=27,Y.AS=27,Y.ML=28,Y.AL=28,Y.PS=29,Y.PAL=29,Y.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Y.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Y.EXP900=kd()?Ux():[],Y.NUMBER_OF_SEQUENCE_CODEWORDS=2;class _e{constructor(){}static decode(n,r,i,o,l,d,h){let g=new Gr(n,r,i,o,l),p=null,v=null,S;for(let F=!0;;F=!1){if(r!=null&&(p=_e.getRowIndicatorColumn(n,g,r,!0,d,h)),o!=null&&(v=_e.getRowIndicatorColumn(n,g,o,!1,d,h)),S=_e.merge(p,v),S==null)throw K.getNotFoundInstance();let z=S.getBoundingBox();if(F&&z!=null&&(z.getMinY()<g.getMinY()||z.getMaxY()>g.getMaxY()))g=z;else break}S.setBoundingBox(g);let I=S.getBarcodeColumnCount()+1;S.setDetectionResultColumn(0,p),S.setDetectionResultColumn(I,v);let D=p!=null;for(let F=1;F<=I;F++){let z=D?F:I-F;if(S.getDetectionResultColumn(z)!==void 0)continue;let W;z===0||z===I?W=new _d(g,z===0):W=new fi(g),S.setDetectionResultColumn(z,W);let q=-1,ie=q;for(let ae=g.getMinY();ae<=g.getMaxY();ae++){if(q=_e.getStartColumn(S,z,ae,D),q<0||q>g.getMaxX()){if(ie===-1)continue;q=ie}let re=_e.detectCodeword(n,g.getMinX(),g.getMaxX(),D,q,ae,d,h);re!=null&&(W.setCodeword(ae,re),ie=q,d=Math.min(d,re.getWidth()),h=Math.max(h,re.getWidth()))}}return _e.createDecoderResult(S)}static merge(n,r){if(n==null&&r==null)return null;let i=_e.getBarcodeMetadata(n,r);if(i==null)return null;let o=Gr.merge(_e.adjustBoundingBox(n),_e.adjustBoundingBox(r));return new xi(i,o)}static adjustBoundingBox(n){if(n==null)return null;let r=n.getRowHeights();if(r==null)return null;let i=_e.getMax(r),o=0;for(let h of r)if(o+=i-h,h>0)break;let l=n.getCodewords();for(let h=0;o>0&&l[h]==null;h++)o--;let d=0;for(let h=r.length-1;h>=0&&(d+=i-r[h],!(r[h]>0));h--);for(let h=l.length-1;d>0&&l[h]==null;h--)d--;return n.getBoundingBox().addMissingRows(o,d,n.isLeft())}static getMax(n){let r=-1;for(let i of n)r=Math.max(r,i);return r}static getBarcodeMetadata(n,r){let i;if(n==null||(i=n.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();let o;return r==null||(o=r.getBarcodeMetadata())==null?i:i.getColumnCount()!==o.getColumnCount()&&i.getErrorCorrectionLevel()!==o.getErrorCorrectionLevel()&&i.getRowCount()!==o.getRowCount()?null:i}static getRowIndicatorColumn(n,r,i,o,l,d){let h=new _d(r,o);for(let g=0;g<2;g++){let p=g===0?1:-1,v=Math.trunc(Math.trunc(i.getX()));for(let S=Math.trunc(Math.trunc(i.getY()));S<=r.getMaxY()&&S>=r.getMinY();S+=p){let I=_e.detectCodeword(n,0,n.getWidth(),o,v,S,l,d);I!=null&&(h.setCodeword(S,I),o?v=I.getStartX():v=I.getEndX())}}return h}static adjustCodewordCount(n,r){let i=r[0][1],o=i.getValue(),l=n.getBarcodeColumnCount()*n.getBarcodeRowCount()-_e.getNumberOfECCodeWords(n.getBarcodeECLevel());if(o.length===0){if(l<1||l>Ee.MAX_CODEWORDS_IN_BARCODE)throw K.getNotFoundInstance();i.setValue(l)}else o[0]!==l&&i.setValue(l)}static createDecoderResult(n){let r=_e.createBarcodeMatrix(n);_e.adjustCodewordCount(n,r);let i=new Array,o=new Int32Array(n.getBarcodeRowCount()*n.getBarcodeColumnCount()),l=[],d=new Array;for(let g=0;g<n.getBarcodeRowCount();g++)for(let p=0;p<n.getBarcodeColumnCount();p++){let v=r[g][p+1].getValue(),S=g*n.getBarcodeColumnCount()+p;v.length===0?i.push(S):v.length===1?o[S]=v[0]:(d.push(S),l.push(v))}let h=new Array(l.length);for(let g=0;g<h.length;g++)h[g]=l[g];return _e.createDecoderResultFromAmbiguousValues(n.getBarcodeECLevel(),o,Ee.toIntArray(i),Ee.toIntArray(d),h)}static createDecoderResultFromAmbiguousValues(n,r,i,o,l){let d=new Int32Array(o.length),h=100;for(;h-- >0;){for(let g=0;g<d.length;g++)r[o[g]]=l[g][d[g]];try{return _e.decodeCodewords(r,n,i)}catch(g){if(!(g instanceof j))throw g}if(d.length===0)throw j.getChecksumInstance();for(let g=0;g<d.length;g++)if(d[g]<l[g].length-1){d[g]++;break}else if(d[g]=0,g===d.length-1)throw j.getChecksumInstance()}throw j.getChecksumInstance()}static createBarcodeMatrix(n){let r=Array.from({length:n.getBarcodeRowCount()},()=>new Array(n.getBarcodeColumnCount()+2));for(let o=0;o<r.length;o++)for(let l=0;l<r[o].length;l++)r[o][l]=new hi;let i=0;for(let o of n.getDetectionResultColumns()){if(o!=null){for(let l of o.getCodewords())if(l!=null){let d=l.getRowNumber();if(d>=0){if(d>=r.length)continue;r[d][i].setValue(l.getValue())}}}i++}return r}static isValidBarcodeColumn(n,r){return r>=0&&r<=n.getBarcodeColumnCount()+1}static getStartColumn(n,r,i,o){let l=o?1:-1,d=null;if(_e.isValidBarcodeColumn(n,r-l)&&(d=n.getDetectionResultColumn(r-l).getCodeword(i)),d!=null)return o?d.getEndX():d.getStartX();if(d=n.getDetectionResultColumn(r).getCodewordNearby(i),d!=null)return o?d.getStartX():d.getEndX();if(_e.isValidBarcodeColumn(n,r-l)&&(d=n.getDetectionResultColumn(r-l).getCodewordNearby(i)),d!=null)return o?d.getEndX():d.getStartX();let h=0;for(;_e.isValidBarcodeColumn(n,r-l);){r-=l;for(let g of n.getDetectionResultColumn(r).getCodewords())if(g!=null)return(o?g.getEndX():g.getStartX())+l*h*(g.getEndX()-g.getStartX());h++}return o?n.getBoundingBox().getMinX():n.getBoundingBox().getMaxX()}static detectCodeword(n,r,i,o,l,d,h,g){l=_e.adjustCodewordStartColumn(n,r,i,o,l,d);let p=_e.getModuleBitCount(n,r,i,o,l,d);if(p==null)return null;let v,S=Re.sum(p);if(o)v=l+S;else{for(let F=0;F<p.length/2;F++){let z=p[F];p[F]=p[p.length-1-F],p[p.length-1-F]=z}v=l,l=v-S}if(!_e.checkCodewordSkew(S,h,g))return null;let I=Zt.getDecodedValue(p),D=Ee.getCodeword(I);return D===-1?null:new gi(l,v,_e.getCodewordBucketNumber(I),D)}static getModuleBitCount(n,r,i,o,l,d){let h=l,g=new Int32Array(8),p=0,v=o?1:-1,S=o;for(;(o?h<i:h>=r)&&p<g.length;)n.get(h,d)===S?(g[p]++,h+=v):(p++,S=!S);return p===g.length||h===(o?i:r)&&p===g.length-1?g:null}static getNumberOfECCodeWords(n){return 2<<n}static adjustCodewordStartColumn(n,r,i,o,l,d){let h=l,g=o?-1:1;for(let p=0;p<2;p++){for(;(o?h>=r:h<i)&&o===n.get(h,d);){if(Math.abs(l-h)>_e.CODEWORD_SKEW_SIZE)return l;h+=g}g=-g,o=!o}return h}static checkCodewordSkew(n,r,i){return r-_e.CODEWORD_SKEW_SIZE<=n&&n<=i+_e.CODEWORD_SKEW_SIZE}static decodeCodewords(n,r,i){if(n.length===0)throw L.getFormatInstance();let o=1<<r+1,l=_e.correctErrors(n,i,o);_e.verifyCodewordCount(n,o);let d=Y.decode(n,""+r);return d.setErrorsCorrected(l),d.setErasures(i.length),d}static correctErrors(n,r,i){if(r!=null&&r.length>i/2+_e.MAX_ERRORS||i<0||i>_e.MAX_EC_CODEWORDS)throw j.getChecksumInstance();return _e.errorCorrection.decode(n,i,r)}static verifyCodewordCount(n,r){if(n.length<4)throw L.getFormatInstance();let i=n[0];if(i>n.length)throw L.getFormatInstance();if(i===0)if(r<n.length)n[0]=n.length-r;else throw L.getFormatInstance()}static getBitCountForCodeword(n){let r=new Int32Array(8),i=0,o=r.length-1;for(;!((n&1)!==i&&(i=n&1,o--,o<0));)r[o]++,n>>=1;return r}static getCodewordBucketNumber(n){return n instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(n):this.getCodewordBucketNumber_number(n)}static getCodewordBucketNumber_number(n){return _e.getCodewordBucketNumber(_e.getBitCountForCodeword(n))}static getCodewordBucketNumber_Int32Array(n){return(n[0]-n[2]+n[4]-n[6]+9)%9}static toString(n){let r=new di;for(let i=0;i<n.length;i++){r.format("Row %2d: ",i);for(let o=0;o<n[i].length;o++){let l=n[i][o];l.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",l.getValue()[0],l.getConfidence(l.getValue()[0]))}r.format("%n")}return r.toString()}}_e.CODEWORD_SKEW_SIZE=2,_e.MAX_ERRORS=3,_e.MAX_EC_CODEWORDS=512,_e.errorCorrection=new Sd;class Tt{decode(n,r=null){let i=Tt.decode(n,r,!1);if(i==null||i.length===0||i[0]==null)throw K.getNotFoundInstance();return i[0]}decodeMultiple(n,r=null){try{return Tt.decode(n,r,!0)}catch(i){throw i instanceof L||i instanceof j?K.getNotFoundInstance():i}}static decode(n,r,i){const o=new Array,l=Se.detectMultiple(n,r,i);for(const d of l.getPoints()){const h=_e.decode(l.getBits(),d[4],d[5],d[6],d[7],Tt.getMinCodewordWidth(d),Tt.getMaxCodewordWidth(d)),g=new He(h.getText(),h.getRawBytes(),void 0,d,oe.PDF_417);g.putMetadata(ft.ERROR_CORRECTION_LEVEL,h.getECLevel());const p=h.getOther();p!=null&&g.putMetadata(ft.PDF417_EXTRA_METADATA,p),o.push(g)}return o.map(d=>d)}static getMaxWidth(n,r){return n==null||r==null?0:Math.trunc(Math.abs(n.getX()-r.getX()))}static getMinWidth(n,r){return n==null||r==null?E.MAX_VALUE:Math.trunc(Math.abs(n.getX()-r.getX()))}static getMaxCodewordWidth(n){return Math.floor(Math.max(Math.max(Tt.getMaxWidth(n[0],n[4]),Tt.getMaxWidth(n[6],n[2])*Ee.MODULES_IN_CODEWORD/Ee.MODULES_IN_STOP_PATTERN),Math.max(Tt.getMaxWidth(n[1],n[5]),Tt.getMaxWidth(n[7],n[3])*Ee.MODULES_IN_CODEWORD/Ee.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(n){return Math.floor(Math.min(Math.min(Tt.getMinWidth(n[0],n[4]),Tt.getMinWidth(n[6],n[2])*Ee.MODULES_IN_CODEWORD/Ee.MODULES_IN_STOP_PATTERN),Math.min(Tt.getMinWidth(n[1],n[5]),Tt.getMinWidth(n[7],n[3])*Ee.MODULES_IN_CODEWORD/Ee.MODULES_IN_STOP_PATTERN)))}reset(){}}class _a extends w{}_a.kind="ReaderException";class Rd{constructor(n,r){this.verbose=n===!0,r&&this.setHints(r)}decode(n,r){return r&&this.setHints(r),this.decodeInternal(n)}decodeWithState(n){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(n)}setHints(n){this.hints=n;const r=!a(n)&&n.get(U.TRY_HARDER)===!0,i=a(n)?null:n.get(U.POSSIBLE_FORMATS),o=new Array;if(!a(i)){const l=i.some(d=>d===oe.UPC_A||d===oe.UPC_E||d===oe.EAN_13||d===oe.EAN_8||d===oe.CODABAR||d===oe.CODE_39||d===oe.CODE_93||d===oe.CODE_128||d===oe.ITF||d===oe.RSS_14||d===oe.RSS_EXPANDED);l&&!r&&o.push(new gs(n,this.verbose)),i.includes(oe.QR_CODE)&&o.push(new gr),i.includes(oe.DATA_MATRIX)&&o.push(new xr),i.includes(oe.AZTEC)&&o.push(new ba),i.includes(oe.PDF_417)&&o.push(new Tt),l&&r&&o.push(new gs(n,this.verbose))}o.length===0&&(r||o.push(new gs(n,this.verbose)),o.push(new gr),o.push(new xr),o.push(new ba),o.push(new Tt),r&&o.push(new gs(n,this.verbose))),this.readers=o}reset(){if(this.readers!==null)for(const n of this.readers)n.reset()}decodeInternal(n){if(this.readers===null)throw new _a("No readers where selected, nothing can be read.");for(const r of this.readers)try{return r.decode(n,this.hints)}catch(i){if(i instanceof _a)continue}throw new K("No MultiFormat Readers were able to detect the code.")}}class zx extends Ie{constructor(n=null,r=500){const i=new Rd;i.setHints(n),super(i,r)}decodeBitmap(n){return this.reader.decodeWithState(n)}}class Vx extends Ie{constructor(n=500){super(new Tt,n)}}class Hx extends Ie{constructor(n=500){super(new gr,n)}}var El;(function(A){A[A.ERROR_CORRECTION=0]="ERROR_CORRECTION",A[A.CHARACTER_SET=1]="CHARACTER_SET",A[A.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",A[A.MIN_SIZE=3]="MIN_SIZE",A[A.MAX_SIZE=4]="MAX_SIZE",A[A.MARGIN=5]="MARGIN",A[A.PDF417_COMPACT=6]="PDF417_COMPACT",A[A.PDF417_COMPACTION=7]="PDF417_COMPACTION",A[A.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",A[A.AZTEC_LAYERS=9]="AZTEC_LAYERS",A[A.QR_VERSION=10]="QR_VERSION"})(El||(El={}));var vt=El;class Nl{constructor(n){this.field=n,this.cachedGenerators=[],this.cachedGenerators.push(new Yt(n,Int32Array.from([1])))}buildGenerator(n){const r=this.cachedGenerators;if(n>=r.length){let i=r[r.length-1];const o=this.field;for(let l=r.length;l<=n;l++){const d=i.multiply(new Yt(o,Int32Array.from([1,o.exp(l-1+o.getGeneratorBase())])));r.push(d),i=d}}return r[n]}encode(n,r){if(r===0)throw new b("No error correction bytes");const i=n.length-r;if(i<=0)throw new b("No data bytes provided");const o=this.buildGenerator(r),l=new Int32Array(i);M.arraycopy(n,0,l,0,i);let d=new Yt(this.field,l);d=d.multiplyByMonomial(r,1);const g=d.divide(o)[1].getCoefficients(),p=r-g.length;for(let v=0;v<p;v++)n[i+v]=0;M.arraycopy(g,0,n,i+p,g.length)}}class ut{constructor(){}static applyMaskPenaltyRule1(n){return ut.applyMaskPenaltyRule1Internal(n,!0)+ut.applyMaskPenaltyRule1Internal(n,!1)}static applyMaskPenaltyRule2(n){let r=0;const i=n.getArray(),o=n.getWidth(),l=n.getHeight();for(let d=0;d<l-1;d++){const h=i[d];for(let g=0;g<o-1;g++){const p=h[g];p===h[g+1]&&p===i[d+1][g]&&p===i[d+1][g+1]&&r++}}return ut.N2*r}static applyMaskPenaltyRule3(n){let r=0;const i=n.getArray(),o=n.getWidth(),l=n.getHeight();for(let d=0;d<l;d++)for(let h=0;h<o;h++){const g=i[d];h+6<o&&g[h]===1&&g[h+1]===0&&g[h+2]===1&&g[h+3]===1&&g[h+4]===1&&g[h+5]===0&&g[h+6]===1&&(ut.isWhiteHorizontal(g,h-4,h)||ut.isWhiteHorizontal(g,h+7,h+11))&&r++,d+6<l&&i[d][h]===1&&i[d+1][h]===0&&i[d+2][h]===1&&i[d+3][h]===1&&i[d+4][h]===1&&i[d+5][h]===0&&i[d+6][h]===1&&(ut.isWhiteVertical(i,h,d-4,d)||ut.isWhiteVertical(i,h,d+7,d+11))&&r++}return r*ut.N3}static isWhiteHorizontal(n,r,i){r=Math.max(r,0),i=Math.min(i,n.length);for(let o=r;o<i;o++)if(n[o]===1)return!1;return!0}static isWhiteVertical(n,r,i,o){i=Math.max(i,0),o=Math.min(o,n.length);for(let l=i;l<o;l++)if(n[l][r]===1)return!1;return!0}static applyMaskPenaltyRule4(n){let r=0;const i=n.getArray(),o=n.getWidth(),l=n.getHeight();for(let g=0;g<l;g++){const p=i[g];for(let v=0;v<o;v++)p[v]===1&&r++}const d=n.getHeight()*n.getWidth();return Math.floor(Math.abs(r*2-d)*10/d)*ut.N4}static getDataMaskBit(n,r,i){let o,l;switch(n){case 0:o=i+r&1;break;case 1:o=i&1;break;case 2:o=r%3;break;case 3:o=(i+r)%3;break;case 4:o=Math.floor(i/2)+Math.floor(r/3)&1;break;case 5:l=i*r,o=(l&1)+l%3;break;case 6:l=i*r,o=(l&1)+l%3&1;break;case 7:l=i*r,o=l%3+(i+r&1)&1;break;default:throw new b("Invalid mask pattern: "+n)}return o===0}static applyMaskPenaltyRule1Internal(n,r){let i=0;const o=r?n.getHeight():n.getWidth(),l=r?n.getWidth():n.getHeight(),d=n.getArray();for(let h=0;h<o;h++){let g=0,p=-1;for(let v=0;v<l;v++){const S=r?d[h][v]:d[v][h];S===p?g++:(g>=5&&(i+=ut.N1+(g-5)),g=1,p=S)}g>=5&&(i+=ut.N1+(g-5))}return i}}ut.N1=3,ut.N2=3,ut.N3=40,ut.N4=10;class Ia{constructor(n,r){this.width=n,this.height=r;const i=new Array(r);for(let o=0;o!==r;o++)i[o]=new Uint8Array(n);this.bytes=i}getHeight(){return this.height}getWidth(){return this.width}get(n,r){return this.bytes[r][n]}getArray(){return this.bytes}setNumber(n,r,i){this.bytes[r][n]=i}setBoolean(n,r,i){this.bytes[r][n]=i?1:0}clear(n){for(const r of this.bytes)C.fill(r,n)}equals(n){if(!(n instanceof Ia))return!1;const r=n;if(this.width!==r.width||this.height!==r.height)return!1;for(let i=0,o=this.height;i<o;++i){const l=this.bytes[i],d=r.bytes[i];for(let h=0,g=this.width;h<g;++h)if(l[h]!==d[h])return!1}return!0}toString(){const n=new fe;for(let r=0,i=this.height;r<i;++r){const o=this.bytes[r];for(let l=0,d=this.width;l<d;++l)switch(o[l]){case 0:n.append(" 0");break;case 1:n.append(" 1");break;default:n.append("  ");break}n.append(`
`)}return n.toString()}}class Xr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const n=new fe;return n.append(`<<
`),n.append(" mode: "),n.append(this.mode?this.mode.toString():"null"),n.append(`
 ecLevel: `),n.append(this.ecLevel?this.ecLevel.toString():"null"),n.append(`
 version: `),n.append(this.version?this.version.toString():"null"),n.append(`
 maskPattern: `),n.append(this.maskPattern.toString()),this.matrix?(n.append(`
 matrix:
`),n.append(this.matrix.toString())):n.append(`
 matrix: null
`),n.append(`>>
`),n.toString()}setMode(n){this.mode=n}setECLevel(n){this.ecLevel=n}setVersion(n){this.version=n}setMaskPattern(n){this.maskPattern=n}setMatrix(n){this.matrix=n}static isValidMaskPattern(n){return n>=0&&n<Xr.NUM_MASK_PATTERNS}}Xr.NUM_MASK_PATTERNS=8;class Ge extends w{}Ge.kind="WriterException";class Ce{constructor(){}static clearMatrix(n){n.clear(255)}static buildMatrix(n,r,i,o,l){Ce.clearMatrix(l),Ce.embedBasicPatterns(i,l),Ce.embedTypeInfo(r,o,l),Ce.maybeEmbedVersionInfo(i,l),Ce.embedDataBits(n,o,l)}static embedBasicPatterns(n,r){Ce.embedPositionDetectionPatternsAndSeparators(r),Ce.embedDarkDotAtLeftBottomCorner(r),Ce.maybeEmbedPositionAdjustmentPatterns(n,r),Ce.embedTimingPatterns(r)}static embedTypeInfo(n,r,i){const o=new k;Ce.makeTypeInfoBits(n,r,o);for(let l=0,d=o.getSize();l<d;++l){const h=o.get(o.getSize()-1-l),g=Ce.TYPE_INFO_COORDINATES[l],p=g[0],v=g[1];if(i.setBoolean(p,v,h),l<8){const S=i.getWidth()-l-1;i.setBoolean(S,8,h)}else{const I=i.getHeight()-7+(l-8);i.setBoolean(8,I,h)}}}static maybeEmbedVersionInfo(n,r){if(n.getVersionNumber()<7)return;const i=new k;Ce.makeVersionInfoBits(n,i);let o=6*3-1;for(let l=0;l<6;++l)for(let d=0;d<3;++d){const h=i.get(o);o--,r.setBoolean(l,r.getHeight()-11+d,h),r.setBoolean(r.getHeight()-11+d,l,h)}}static embedDataBits(n,r,i){let o=0,l=-1,d=i.getWidth()-1,h=i.getHeight()-1;for(;d>0;){for(d===6&&(d-=1);h>=0&&h<i.getHeight();){for(let g=0;g<2;++g){const p=d-g;if(!Ce.isEmpty(i.get(p,h)))continue;let v;o<n.getSize()?(v=n.get(o),++o):v=!1,r!==255&&ut.getDataMaskBit(r,p,h)&&(v=!v),i.setBoolean(p,h,v)}h+=l}l=-l,h+=l,d-=2}if(o!==n.getSize())throw new Ge("Not all bits consumed: "+o+"/"+n.getSize())}static findMSBSet(n){return 32-E.numberOfLeadingZeros(n)}static calculateBCHCode(n,r){if(r===0)throw new b("0 polynomial");const i=Ce.findMSBSet(r);for(n<<=i-1;Ce.findMSBSet(n)>=i;)n^=r<<Ce.findMSBSet(n)-i;return n}static makeTypeInfoBits(n,r,i){if(!Xr.isValidMaskPattern(r))throw new Ge("Invalid mask pattern");const o=n.getBits()<<3|r;i.appendBits(o,5);const l=Ce.calculateBCHCode(o,Ce.TYPE_INFO_POLY);i.appendBits(l,10);const d=new k;if(d.appendBits(Ce.TYPE_INFO_MASK_PATTERN,15),i.xor(d),i.getSize()!==15)throw new Ge("should not happen but we got: "+i.getSize())}static makeVersionInfoBits(n,r){r.appendBits(n.getVersionNumber(),6);const i=Ce.calculateBCHCode(n.getVersionNumber(),Ce.VERSION_INFO_POLY);if(r.appendBits(i,12),r.getSize()!==18)throw new Ge("should not happen but we got: "+r.getSize())}static isEmpty(n){return n===255}static embedTimingPatterns(n){for(let r=8;r<n.getWidth()-8;++r){const i=(r+1)%2;Ce.isEmpty(n.get(r,6))&&n.setNumber(r,6,i),Ce.isEmpty(n.get(6,r))&&n.setNumber(6,r,i)}}static embedDarkDotAtLeftBottomCorner(n){if(n.get(8,n.getHeight()-8)===0)throw new Ge;n.setNumber(8,n.getHeight()-8,1)}static embedHorizontalSeparationPattern(n,r,i){for(let o=0;o<8;++o){if(!Ce.isEmpty(i.get(n+o,r)))throw new Ge;i.setNumber(n+o,r,0)}}static embedVerticalSeparationPattern(n,r,i){for(let o=0;o<7;++o){if(!Ce.isEmpty(i.get(n,r+o)))throw new Ge;i.setNumber(n,r+o,0)}}static embedPositionAdjustmentPattern(n,r,i){for(let o=0;o<5;++o){const l=Ce.POSITION_ADJUSTMENT_PATTERN[o];for(let d=0;d<5;++d)i.setNumber(n+d,r+o,l[d])}}static embedPositionDetectionPattern(n,r,i){for(let o=0;o<7;++o){const l=Ce.POSITION_DETECTION_PATTERN[o];for(let d=0;d<7;++d)i.setNumber(n+d,r+o,l[d])}}static embedPositionDetectionPatternsAndSeparators(n){const r=Ce.POSITION_DETECTION_PATTERN[0].length;Ce.embedPositionDetectionPattern(0,0,n),Ce.embedPositionDetectionPattern(n.getWidth()-r,0,n),Ce.embedPositionDetectionPattern(0,n.getWidth()-r,n);const i=8;Ce.embedHorizontalSeparationPattern(0,i-1,n),Ce.embedHorizontalSeparationPattern(n.getWidth()-i,i-1,n),Ce.embedHorizontalSeparationPattern(0,n.getWidth()-i,n);const o=7;Ce.embedVerticalSeparationPattern(o,0,n),Ce.embedVerticalSeparationPattern(n.getHeight()-o-1,0,n),Ce.embedVerticalSeparationPattern(o,n.getHeight()-o,n)}static maybeEmbedPositionAdjustmentPatterns(n,r){if(n.getVersionNumber()<2)return;const i=n.getVersionNumber()-1,o=Ce.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[i];for(let l=0,d=o.length;l!==d;l++){const h=o[l];if(h>=0)for(let g=0;g!==d;g++){const p=o[g];p>=0&&Ce.isEmpty(r.get(p,h))&&Ce.embedPositionAdjustmentPattern(p-2,h-2,r)}}}}Ce.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ce.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ce.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ce.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ce.VERSION_INFO_POLY=7973,Ce.TYPE_INFO_POLY=1335,Ce.TYPE_INFO_MASK_PATTERN=21522;class Wx{constructor(n,r){this.dataBytes=n,this.errorCorrectionBytes=r}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Ze{constructor(){}static calculateMaskPenalty(n){return ut.applyMaskPenaltyRule1(n)+ut.applyMaskPenaltyRule2(n)+ut.applyMaskPenaltyRule3(n)+ut.applyMaskPenaltyRule4(n)}static encode(n,r,i=null){let o=Ze.DEFAULT_BYTE_MODE_ENCODING;const l=i!==null&&i.get(vt.CHARACTER_SET)!==void 0;l&&(o=i.get(vt.CHARACTER_SET).toString());const d=this.chooseMode(n,o),h=new k;if(d===be.BYTE&&(l||Ze.DEFAULT_BYTE_MODE_ENCODING!==o)){const ae=P.getCharacterSetECIByName(o);ae!==void 0&&this.appendECI(ae,h)}this.appendModeInfo(d,h);const g=new k;this.appendBytes(n,d,g,o);let p;if(i!==null&&i.get(vt.QR_VERSION)!==void 0){const ae=Number.parseInt(i.get(vt.QR_VERSION).toString(),10);p=ve.getVersionForNumber(ae);const re=this.calculateBitsNeeded(d,h,g,p);if(!this.willFit(re,p,r))throw new Ge("Data too big for requested version")}else p=this.recommendVersion(r,d,h,g);const v=new k;v.appendBitArray(h);const S=d===be.BYTE?g.getSizeInBytes():n.length;this.appendLengthInfo(S,p,d,v),v.appendBitArray(g);const I=p.getECBlocksForLevel(r),D=p.getTotalCodewords()-I.getTotalECCodewords();this.terminateBits(D,v);const F=this.interleaveWithECBytes(v,p.getTotalCodewords(),D,I.getNumBlocks()),z=new Xr;z.setECLevel(r),z.setMode(d),z.setVersion(p);const W=p.getDimensionForVersion(),q=new Ia(W,W),ie=this.chooseMaskPattern(F,r,p,q);return z.setMaskPattern(ie),Ce.buildMatrix(F,r,p,ie,q),z.setMatrix(q),z}static recommendVersion(n,r,i,o){const l=this.calculateBitsNeeded(r,i,o,ve.getVersionForNumber(1)),d=this.chooseVersion(l,n),h=this.calculateBitsNeeded(r,i,o,d);return this.chooseVersion(h,n)}static calculateBitsNeeded(n,r,i,o){return r.getSize()+n.getCharacterCountBits(o)+i.getSize()}static getAlphanumericCode(n){return n<Ze.ALPHANUMERIC_TABLE.length?Ze.ALPHANUMERIC_TABLE[n]:-1}static chooseMode(n,r=null){if(P.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(n))return be.KANJI;let i=!1,o=!1;for(let l=0,d=n.length;l<d;++l){const h=n.charAt(l);if(Ze.isDigit(h))i=!0;else if(this.getAlphanumericCode(h.charCodeAt(0))!==-1)o=!0;else return be.BYTE}return o?be.ALPHANUMERIC:i?be.NUMERIC:be.BYTE}static isOnlyDoubleByteKanji(n){let r;try{r=ee.encode(n,P.SJIS)}catch{return!1}const i=r.length;if(i%2!==0)return!1;for(let o=0;o<i;o+=2){const l=r[o]&255;if((l<129||l>159)&&(l<224||l>235))return!1}return!0}static chooseMaskPattern(n,r,i,o){let l=Number.MAX_SAFE_INTEGER,d=-1;for(let h=0;h<Xr.NUM_MASK_PATTERNS;h++){Ce.buildMatrix(n,r,i,h,o);let g=this.calculateMaskPenalty(o);g<l&&(l=g,d=h)}return d}static chooseVersion(n,r){for(let i=1;i<=40;i++){const o=ve.getVersionForNumber(i);if(Ze.willFit(n,o,r))return o}throw new Ge("Data too big")}static willFit(n,r,i){const o=r.getTotalCodewords(),d=r.getECBlocksForLevel(i).getTotalECCodewords(),h=o-d,g=(n+7)/8;return h>=g}static terminateBits(n,r){const i=n*8;if(r.getSize()>i)throw new Ge("data bits cannot fit in the QR Code"+r.getSize()+" > "+i);for(let d=0;d<4&&r.getSize()<i;++d)r.appendBit(!1);const o=r.getSize()&7;if(o>0)for(let d=o;d<8;d++)r.appendBit(!1);const l=n-r.getSizeInBytes();for(let d=0;d<l;++d)r.appendBits(d&1?17:236,8);if(r.getSize()!==i)throw new Ge("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(n,r,i,o,l,d){if(o>=i)throw new Ge("Block ID too large");const h=n%i,g=i-h,p=Math.floor(n/i),v=p+1,S=Math.floor(r/i),I=S+1,D=p-S,F=v-I;if(D!==F)throw new Ge("EC bytes mismatch");if(i!==g+h)throw new Ge("RS blocks mismatch");if(n!==(S+D)*g+(I+F)*h)throw new Ge("Total bytes mismatch");o<g?(l[0]=S,d[0]=D):(l[0]=I,d[0]=F)}static interleaveWithECBytes(n,r,i,o){if(n.getSizeInBytes()!==i)throw new Ge("Number of bits and data bytes does not match");let l=0,d=0,h=0;const g=new Array;for(let v=0;v<o;++v){const S=new Int32Array(1),I=new Int32Array(1);Ze.getNumDataBytesAndNumECBytesForBlockID(r,i,o,v,S,I);const D=S[0],F=new Uint8Array(D);n.toBytes(8*l,F,0,D);const z=Ze.generateECBytes(F,I[0]);g.push(new Wx(F,z)),d=Math.max(d,D),h=Math.max(h,z.length),l+=S[0]}if(i!==l)throw new Ge("Data bytes does not match offset");const p=new k;for(let v=0;v<d;++v)for(const S of g){const I=S.getDataBytes();v<I.length&&p.appendBits(I[v],8)}for(let v=0;v<h;++v)for(const S of g){const I=S.getErrorCorrectionBytes();v<I.length&&p.appendBits(I[v],8)}if(r!==p.getSizeInBytes())throw new Ge("Interleaving error: "+r+" and "+p.getSizeInBytes()+" differ.");return p}static generateECBytes(n,r){const i=n.length,o=new Int32Array(i+r);for(let d=0;d<i;d++)o[d]=n[d]&255;new Nl(Me.QR_CODE_FIELD_256).encode(o,r);const l=new Uint8Array(r);for(let d=0;d<r;d++)l[d]=o[i+d];return l}static appendModeInfo(n,r){r.appendBits(n.getBits(),4)}static appendLengthInfo(n,r,i,o){const l=i.getCharacterCountBits(r);if(n>=1<<l)throw new Ge(n+" is bigger than "+((1<<l)-1));o.appendBits(n,l)}static appendBytes(n,r,i,o){switch(r){case be.NUMERIC:Ze.appendNumericBytes(n,i);break;case be.ALPHANUMERIC:Ze.appendAlphanumericBytes(n,i);break;case be.BYTE:Ze.append8BitBytes(n,i,o);break;case be.KANJI:Ze.appendKanjiBytes(n,i);break;default:throw new Ge("Invalid mode: "+r)}}static getDigit(n){return n.charCodeAt(0)-48}static isDigit(n){const r=Ze.getDigit(n);return r>=0&&r<=9}static appendNumericBytes(n,r){const i=n.length;let o=0;for(;o<i;){const l=Ze.getDigit(n.charAt(o));if(o+2<i){const d=Ze.getDigit(n.charAt(o+1)),h=Ze.getDigit(n.charAt(o+2));r.appendBits(l*100+d*10+h,10),o+=3}else if(o+1<i){const d=Ze.getDigit(n.charAt(o+1));r.appendBits(l*10+d,7),o+=2}else r.appendBits(l,4),o++}}static appendAlphanumericBytes(n,r){const i=n.length;let o=0;for(;o<i;){const l=Ze.getAlphanumericCode(n.charCodeAt(o));if(l===-1)throw new Ge;if(o+1<i){const d=Ze.getAlphanumericCode(n.charCodeAt(o+1));if(d===-1)throw new Ge;r.appendBits(l*45+d,11),o+=2}else r.appendBits(l,6),o++}}static append8BitBytes(n,r,i){let o;try{o=ee.encode(n,i)}catch(l){throw new Ge(l)}for(let l=0,d=o.length;l!==d;l++){const h=o[l];r.appendBits(h,8)}}static appendKanjiBytes(n,r){let i;try{i=ee.encode(n,P.SJIS)}catch(l){throw new Ge(l)}const o=i.length;for(let l=0;l<o;l+=2){const d=i[l]&255,h=i[l+1]&255,g=d<<8&4294967295|h;let p=-1;if(g>=33088&&g<=40956?p=g-33088:g>=57408&&g<=60351&&(p=g-49472),p===-1)throw new Ge("Invalid byte sequence");const v=(p>>8)*192+(p&255);r.appendBits(v,13)}}static appendECI(n,r){r.appendBits(be.ECI.getBits(),4),r.appendBits(n.getValue(),8)}}Ze.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Ze.DEFAULT_BYTE_MODE_ENCODING=P.UTF8.getName();class Yr{write(n,r,i,o=null){if(n.length===0)throw new b("Found empty contents");if(r<0||i<0)throw new b("Requested dimensions are too small: "+r+"x"+i);let l=qe.L,d=Yr.QUIET_ZONE_SIZE;o!==null&&(o.get(vt.ERROR_CORRECTION)!==void 0&&(l=qe.fromString(o.get(vt.ERROR_CORRECTION).toString())),o.get(vt.MARGIN)!==void 0&&(d=Number.parseInt(o.get(vt.MARGIN).toString(),10)));const h=Ze.encode(n,l,o);return this.renderResult(h,r,i,d)}writeToDom(n,r,i,o,l=null){typeof n=="string"&&(n=document.querySelector(n));const d=this.write(r,i,o,l);n&&n.appendChild(d)}renderResult(n,r,i,o){const l=n.getMatrix();if(l===null)throw new Bn;const d=l.getWidth(),h=l.getHeight(),g=d+o*2,p=h+o*2,v=Math.max(r,g),S=Math.max(i,p),I=Math.min(Math.floor(v/g),Math.floor(S/p)),D=Math.floor((v-d*I)/2),F=Math.floor((S-h*I)/2),z=this.createSVGElement(v,S);for(let W=0,q=F;W<h;W++,q+=I)for(let ie=0,ae=D;ie<d;ie++,ae+=I)if(l.get(ie,W)===1){const re=this.createSvgRectElement(ae,q,I,I);z.appendChild(re)}return z}createSVGElement(n,r){const i=document.createElementNS(Yr.SVG_NS,"svg");return i.setAttributeNS(null,"height",n.toString()),i.setAttributeNS(null,"width",r.toString()),i}createSvgRectElement(n,r,i,o){const l=document.createElementNS(Yr.SVG_NS,"rect");return l.setAttributeNS(null,"x",n.toString()),l.setAttributeNS(null,"y",r.toString()),l.setAttributeNS(null,"height",i.toString()),l.setAttributeNS(null,"width",o.toString()),l.setAttributeNS(null,"fill","#000000"),l}}Yr.QUIET_ZONE_SIZE=4,Yr.SVG_NS="http://www.w3.org/2000/svg";class ms{encode(n,r,i,o,l){if(n.length===0)throw new b("Found empty contents");if(r!==oe.QR_CODE)throw new b("Can only encode QR_CODE, but got "+r);if(i<0||o<0)throw new b(`Requested dimensions are too small: ${i}x${o}`);let d=qe.L,h=ms.QUIET_ZONE_SIZE;l!==null&&(l.get(vt.ERROR_CORRECTION)!==void 0&&(d=qe.fromString(l.get(vt.ERROR_CORRECTION).toString())),l.get(vt.MARGIN)!==void 0&&(h=Number.parseInt(l.get(vt.MARGIN).toString(),10)));const g=Ze.encode(n,d,l);return ms.renderResult(g,i,o,h)}static renderResult(n,r,i,o){const l=n.getMatrix();if(l===null)throw new Bn;const d=l.getWidth(),h=l.getHeight(),g=d+o*2,p=h+o*2,v=Math.max(r,g),S=Math.max(i,p),I=Math.min(Math.floor(v/g),Math.floor(S/p)),D=Math.floor((v-d*I)/2),F=Math.floor((S-h*I)/2),z=new Ne(v,S);for(let W=0,q=F;W<h;W++,q+=I)for(let ie=0,ae=D;ie<d;ie++,ae+=I)l.get(ie,W)===1&&z.setRegion(ae,q,I,I);return z}}ms.QUIET_ZONE_SIZE=4;class Gx{encode(n,r,i,o,l){let d;switch(r){case oe.QR_CODE:d=new ms;break;default:throw new b("No encoder available for format "+r)}return d.encode(n,r,i,o,l)}}class zn extends ${constructor(n,r,i,o,l,d,h,g){if(super(d,h),this.yuvData=n,this.dataWidth=r,this.dataHeight=i,this.left=o,this.top=l,o+d>r||l+h>i)throw new b("Crop rectangle does not fit within image data.");g&&this.reverseHorizontal(d,h)}getRow(n,r){if(n<0||n>=this.getHeight())throw new b("Requested row is outside the image: "+n);const i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));const o=(n+this.top)*this.dataWidth+this.left;return M.arraycopy(this.yuvData,o,r,0,i),r}getMatrix(){const n=this.getWidth(),r=this.getHeight();if(n===this.dataWidth&&r===this.dataHeight)return this.yuvData;const i=n*r,o=new Uint8ClampedArray(i);let l=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return M.arraycopy(this.yuvData,l,o,0,i),o;for(let d=0;d<r;d++){const h=d*n;M.arraycopy(this.yuvData,l,o,h,n),l+=this.dataWidth}return o}isCropSupported(){return!0}crop(n,r,i,o){return new zn(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+r,i,o,!1)}renderThumbnail(){const n=this.getWidth()/zn.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/zn.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(n*r),o=this.yuvData;let l=this.top*this.dataWidth+this.left;for(let d=0;d<r;d++){const h=d*n;for(let g=0;g<n;g++){const p=o[l+g*zn.THUMBNAIL_SCALE_FACTOR]&255;i[h+g]=4278190080|p*65793}l+=this.dataWidth*zn.THUMBNAIL_SCALE_FACTOR}return i}getThumbnailWidth(){return this.getWidth()/zn.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/zn.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(n,r){const i=this.yuvData;for(let o=0,l=this.top*this.dataWidth+this.left;o<r;o++,l+=this.dataWidth){const d=l+n/2;for(let h=l,g=l+n-1;h<d;h++,g--){const p=i[h];i[h]=i[g],i[g]=p}}}invert(){return new Z(this)}}zn.THUMBNAIL_SCALE_FACTOR=2;class Al extends ${constructor(n,r,i,o,l,d,h){if(super(r,i),this.dataWidth=o,this.dataHeight=l,this.left=d,this.top=h,n.BYTES_PER_ELEMENT===4){const g=r*i,p=new Uint8ClampedArray(g);for(let v=0;v<g;v++){const S=n[v],I=S>>16&255,D=S>>7&510,F=S&255;p[v]=(I+D+F)/4&255}this.luminances=p}else this.luminances=n;if(o===void 0&&(this.dataWidth=r),l===void 0&&(this.dataHeight=i),d===void 0&&(this.left=0),h===void 0&&(this.top=0),this.left+r>this.dataWidth||this.top+i>this.dataHeight)throw new b("Crop rectangle does not fit within image data.")}getRow(n,r){if(n<0||n>=this.getHeight())throw new b("Requested row is outside the image: "+n);const i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));const o=(n+this.top)*this.dataWidth+this.left;return M.arraycopy(this.luminances,o,r,0,i),r}getMatrix(){const n=this.getWidth(),r=this.getHeight();if(n===this.dataWidth&&r===this.dataHeight)return this.luminances;const i=n*r,o=new Uint8ClampedArray(i);let l=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return M.arraycopy(this.luminances,l,o,0,i),o;for(let d=0;d<r;d++){const h=d*n;M.arraycopy(this.luminances,l,o,h,n),l+=this.dataWidth}return o}isCropSupported(){return!0}crop(n,r,i,o){return new Al(this.luminances,i,o,this.dataWidth,this.dataHeight,this.left+n,this.top+r)}invert(){return new Z(this)}}class Od extends P{static forName(n){return this.getCharacterSetECIByName(n)}}class Sl{}Sl.ISO_8859_1=P.ISO8859_1;class Dd{isCompact(){return this.compact}setCompact(n){this.compact=n}getSize(){return this.size}setSize(n){this.size=n}getLayers(){return this.layers}setLayers(n){this.layers=n}getCodeWords(){return this.codeWords}setCodeWords(n){this.codeWords=n}getMatrix(){return this.matrix}setMatrix(n){this.matrix=n}}class Md{static singletonList(n){return[n]}static min(n,r){return n.sort(r)[0]}}class Xx{constructor(n){this.previous=n}getPrevious(){return this.previous}}class ys extends Xx{constructor(n,r,i){super(n),this.value=r,this.bitCount=i}appendTo(n,r){n.appendBits(this.value,this.bitCount)}add(n,r){return new ys(this,n,r)}addBinaryShift(n,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ys(this,n,r)}toString(){let n=this.value&(1<<this.bitCount)-1;return n|=1<<this.bitCount,"<"+E.toBinaryString(n|1<<this.bitCount).substring(1)+">"}}class _l extends ys{constructor(n,r,i){super(n,0,0),this.binaryShiftStart=r,this.binaryShiftByteCount=i}appendTo(n,r){for(let i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):i===0?n.appendBits(Math.min(this.binaryShiftByteCount,31),5):n.appendBits(this.binaryShiftByteCount-31,5)),n.appendBits(r[this.binaryShiftStart+i],8)}addBinaryShift(n,r){return new _l(this,n,r)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Yx(A,n,r){return new _l(A,n,r)}function pi(A,n,r){return new ys(A,n,r)}const qx=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],mr=0,Ta=1,wn=2,Ld=3,Vn=4,Kx=new ys(null,0,0),Il=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Zx(A){for(let n of A)C.fill(n,-1);return A[mr][Vn]=0,A[Ta][Vn]=0,A[Ta][mr]=28,A[Ld][Vn]=0,A[wn][Vn]=0,A[wn][mr]=15,A}const Bd=Zx(C.createInt32Array(6,6));class Hn{constructor(n,r,i,o){this.token=n,this.mode=r,this.binaryShiftByteCount=i,this.bitCount=o}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(n,r){let i=this.bitCount,o=this.token;if(n!==this.mode){let d=Il[this.mode][n];o=pi(o,d&65535,d>>16),i+=d>>16}let l=n===wn?4:5;return o=pi(o,r,l),new Hn(o,n,0,i+l)}shiftAndAppend(n,r){let i=this.token,o=this.mode===wn?4:5;return i=pi(i,Bd[this.mode][n],o),i=pi(i,r,5),new Hn(i,this.mode,0,this.bitCount+o+5)}addBinaryShiftChar(n){let r=this.token,i=this.mode,o=this.bitCount;if(this.mode===Vn||this.mode===wn){let h=Il[i][mr];r=pi(r,h&65535,h>>16),o+=h>>16,i=mr}let l=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,d=new Hn(r,i,this.binaryShiftByteCount+1,o+l);return d.binaryShiftByteCount===2078&&(d=d.endBinaryShift(n+1)),d}endBinaryShift(n){if(this.binaryShiftByteCount===0)return this;let r=this.token;return r=Yx(r,n-this.binaryShiftByteCount,this.binaryShiftByteCount),new Hn(r,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(n){let r=this.bitCount+(Il[this.mode][n.mode]>>16);return this.binaryShiftByteCount<n.binaryShiftByteCount?r+=Hn.calculateBinaryShiftCost(n)-Hn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>n.binaryShiftByteCount&&n.binaryShiftByteCount>0&&(r+=10),r<=n.bitCount}toBitArray(n){let r=[];for(let o=this.endBinaryShift(n.length).token;o!==null;o=o.getPrevious())r.unshift(o);let i=new k;for(const o of r)o.appendTo(i,n);return i}toString(){return ne.format("%s bits=%d bytes=%d",qx[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(n){return n.binaryShiftByteCount>62?21:n.binaryShiftByteCount>31?20:n.binaryShiftByteCount>0?10:0}}Hn.INITIAL_STATE=new Hn(Kx,mr,0,0);function Qx(A){const n=ne.getCharCode(" "),r=ne.getCharCode("."),i=ne.getCharCode(",");A[mr][n]=1;const o=ne.getCharCode("Z"),l=ne.getCharCode("A");for(let I=l;I<=o;I++)A[mr][I]=I-l+2;A[Ta][n]=1;const d=ne.getCharCode("z"),h=ne.getCharCode("a");for(let I=h;I<=d;I++)A[Ta][I]=I-h+2;A[wn][n]=1;const g=ne.getCharCode("9"),p=ne.getCharCode("0");for(let I=p;I<=g;I++)A[wn][I]=I-p+2;A[wn][i]=12,A[wn][r]=13;const v=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let I=0;I<v.length;I++)A[Ld][ne.getCharCode(v[I])]=I;const S=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let I=0;I<S.length;I++)ne.getCharCode(S[I])>0&&(A[Vn][ne.getCharCode(S[I])]=I);return A}const Tl=Qx(C.createInt32Array(5,256));class mi{constructor(n){this.text=n}encode(){const n=ne.getCharCode(" "),r=ne.getCharCode(`
`);let i=Md.singletonList(Hn.INITIAL_STATE);for(let l=0;l<this.text.length;l++){let d,h=l+1<this.text.length?this.text[l+1]:0;switch(this.text[l]){case ne.getCharCode("\r"):d=h===r?2:0;break;case ne.getCharCode("."):d=h===n?3:0;break;case ne.getCharCode(","):d=h===n?4:0;break;case ne.getCharCode(":"):d=h===n?5:0;break;default:d=0}d>0?(i=mi.updateStateListForPair(i,l,d),l++):i=this.updateStateListForChar(i,l)}return Md.min(i,(l,d)=>l.getBitCount()-d.getBitCount()).toBitArray(this.text)}updateStateListForChar(n,r){const i=[];for(let o of n)this.updateStateForChar(o,r,i);return mi.simplifyStates(i)}updateStateForChar(n,r,i){let o=this.text[r]&255,l=Tl[n.getMode()][o]>0,d=null;for(let h=0;h<=Vn;h++){let g=Tl[h][o];if(g>0){if(d==null&&(d=n.endBinaryShift(r)),!l||h===n.getMode()||h===wn){const p=d.latchAndAppend(h,g);i.push(p)}if(!l&&Bd[n.getMode()][h]>=0){const p=d.shiftAndAppend(h,g);i.push(p)}}}if(n.getBinaryShiftByteCount()>0||Tl[n.getMode()][o]===0){let h=n.addBinaryShiftChar(r);i.push(h)}}static updateStateListForPair(n,r,i){const o=[];for(let l of n)this.updateStateForPair(l,r,i,o);return this.simplifyStates(o)}static updateStateForPair(n,r,i,o){let l=n.endBinaryShift(r);if(o.push(l.latchAndAppend(Vn,i)),n.getMode()!==Vn&&o.push(l.shiftAndAppend(Vn,i)),i===3||i===4){let d=l.latchAndAppend(wn,16-i).latchAndAppend(wn,1);o.push(d)}if(n.getBinaryShiftByteCount()>0){let d=n.addBinaryShiftChar(r).addBinaryShiftChar(r+1);o.push(d)}}static simplifyStates(n){let r=[];for(const i of n){let o=!0;for(const l of r){if(l.isBetterThanOrEqualTo(i)){o=!1;break}i.isBetterThanOrEqualTo(l)&&(r=r.filter(d=>d!==l))}o&&r.push(i)}return r}}class Oe{constructor(){}static encodeBytes(n){return Oe.encode(n,Oe.DEFAULT_EC_PERCENT,Oe.DEFAULT_AZTEC_LAYERS)}static encode(n,r,i){let o=new mi(n).encode(),l=E.truncDivision(o.getSize()*r,100)+11,d=o.getSize()+l,h,g,p,v,S;if(i!==Oe.DEFAULT_AZTEC_LAYERS){if(h=i<0,g=Math.abs(i),g>(h?Oe.MAX_NB_BITS_COMPACT:Oe.MAX_NB_BITS))throw new b(ne.format("Illegal value %s for layers",i));p=Oe.totalBitsInLayer(g,h),v=Oe.WORD_SIZE[g];let re=p-p%v;if(S=Oe.stuffBits(o,v),S.getSize()+l>re)throw new b("Data to large for user specified layer");if(h&&S.getSize()>v*64)throw new b("Data to large for user specified layer")}else{v=0,S=null;for(let re=0;;re++){if(re>Oe.MAX_NB_BITS)throw new b("Data too large for an Aztec code");if(h=re<=3,g=h?re+1:re,p=Oe.totalBitsInLayer(g,h),d>p)continue;(S==null||v!==Oe.WORD_SIZE[g])&&(v=Oe.WORD_SIZE[g],S=Oe.stuffBits(o,v));let je=p-p%v;if(!(h&&S.getSize()>v*64)&&S.getSize()+l<=je)break}}let I=Oe.generateCheckWords(S,p,v),D=S.getSize()/v,F=Oe.generateModeMessage(h,g,D),z=(h?11:14)+g*4,W=new Int32Array(z),q;if(h){q=z;for(let re=0;re<W.length;re++)W[re]=re}else{q=z+1+2*E.truncDivision(E.truncDivision(z,2)-1,15);let re=E.truncDivision(z,2),je=E.truncDivision(q,2);for(let Ae=0;Ae<re;Ae++){let Qt=Ae+E.truncDivision(Ae,15);W[re-Ae-1]=je-Qt-1,W[re+Ae]=je+Qt+1}}let ie=new Ne(q);for(let re=0,je=0;re<g;re++){let Ae=(g-re)*4+(h?9:12);for(let Qt=0;Qt<Ae;Qt++){let Tn=Qt*2;for(let Jt=0;Jt<2;Jt++)I.get(je+Tn+Jt)&&ie.set(W[re*2+Jt],W[re*2+Qt]),I.get(je+Ae*2+Tn+Jt)&&ie.set(W[re*2+Qt],W[z-1-re*2-Jt]),I.get(je+Ae*4+Tn+Jt)&&ie.set(W[z-1-re*2-Jt],W[z-1-re*2-Qt]),I.get(je+Ae*6+Tn+Jt)&&ie.set(W[z-1-re*2-Qt],W[re*2+Jt])}je+=Ae*8}if(Oe.drawModeMessage(ie,h,q,F),h)Oe.drawBullsEye(ie,E.truncDivision(q,2),5);else{Oe.drawBullsEye(ie,E.truncDivision(q,2),7);for(let re=0,je=0;re<E.truncDivision(z,2)-1;re+=15,je+=16)for(let Ae=E.truncDivision(q,2)&1;Ae<q;Ae+=2)ie.set(E.truncDivision(q,2)-je,Ae),ie.set(E.truncDivision(q,2)+je,Ae),ie.set(Ae,E.truncDivision(q,2)-je),ie.set(Ae,E.truncDivision(q,2)+je)}let ae=new Dd;return ae.setCompact(h),ae.setSize(q),ae.setLayers(g),ae.setCodeWords(D),ae.setMatrix(ie),ae}static drawBullsEye(n,r,i){for(let o=0;o<i;o+=2)for(let l=r-o;l<=r+o;l++)n.set(l,r-o),n.set(l,r+o),n.set(r-o,l),n.set(r+o,l);n.set(r-i,r-i),n.set(r-i+1,r-i),n.set(r-i,r-i+1),n.set(r+i,r-i),n.set(r+i,r-i+1),n.set(r+i,r+i-1)}static generateModeMessage(n,r,i){let o=new k;return n?(o.appendBits(r-1,2),o.appendBits(i-1,6),o=Oe.generateCheckWords(o,28,4)):(o.appendBits(r-1,5),o.appendBits(i-1,11),o=Oe.generateCheckWords(o,40,4)),o}static drawModeMessage(n,r,i,o){let l=E.truncDivision(i,2);if(r)for(let d=0;d<7;d++){let h=l-3+d;o.get(d)&&n.set(h,l-5),o.get(d+7)&&n.set(l+5,h),o.get(20-d)&&n.set(h,l+5),o.get(27-d)&&n.set(l-5,h)}else for(let d=0;d<10;d++){let h=l-5+d+E.truncDivision(d,5);o.get(d)&&n.set(h,l-7),o.get(d+10)&&n.set(l+7,h),o.get(29-d)&&n.set(h,l+7),o.get(39-d)&&n.set(l-7,h)}}static generateCheckWords(n,r,i){let o=n.getSize()/i,l=new Nl(Oe.getGF(i)),d=E.truncDivision(r,i),h=Oe.bitsToWords(n,i,d);l.encode(h,d-o);let g=r%i,p=new k;p.appendBits(0,g);for(const v of Array.from(h))p.appendBits(v,i);return p}static bitsToWords(n,r,i){let o=new Int32Array(i),l,d;for(l=0,d=n.getSize()/r;l<d;l++){let h=0;for(let g=0;g<r;g++)h|=n.get(l*r+g)?1<<r-g-1:0;o[l]=h}return o}static getGF(n){switch(n){case 4:return Me.AZTEC_PARAM;case 6:return Me.AZTEC_DATA_6;case 8:return Me.AZTEC_DATA_8;case 10:return Me.AZTEC_DATA_10;case 12:return Me.AZTEC_DATA_12;default:throw new b("Unsupported word size "+n)}}static stuffBits(n,r){let i=new k,o=n.getSize(),l=(1<<r)-2;for(let d=0;d<o;d+=r){let h=0;for(let g=0;g<r;g++)(d+g>=o||n.get(d+g))&&(h|=1<<r-1-g);(h&l)===l?(i.appendBits(h&l,r),d--):h&l?i.appendBits(h,r):(i.appendBits(h|1,r),d--)}return i}static totalBitsInLayer(n,r){return((r?88:112)+16*n)*n}}Oe.DEFAULT_EC_PERCENT=33,Oe.DEFAULT_AZTEC_LAYERS=0,Oe.MAX_NB_BITS=32,Oe.MAX_NB_BITS_COMPACT=4,Oe.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ja{encode(n,r,i,o){return this.encodeWithHints(n,r,i,o,null)}encodeWithHints(n,r,i,o,l){let d=Sl.ISO_8859_1,h=Oe.DEFAULT_EC_PERCENT,g=Oe.DEFAULT_AZTEC_LAYERS;return l!=null&&(l.has(vt.CHARACTER_SET)&&(d=Od.forName(l.get(vt.CHARACTER_SET).toString())),l.has(vt.ERROR_CORRECTION)&&(h=E.parseInt(l.get(vt.ERROR_CORRECTION).toString())),l.has(vt.AZTEC_LAYERS)&&(g=E.parseInt(l.get(vt.AZTEC_LAYERS).toString()))),ja.encodeLayers(n,r,i,o,d,h,g)}static encodeLayers(n,r,i,o,l,d,h){if(r!==oe.AZTEC)throw new b("Can only encode AZTEC, but got "+r);let g=Oe.encode(ne.getBytes(n,l),d,h);return ja.renderResult(g,i,o)}static renderResult(n,r,i){let o=n.getMatrix();if(o==null)throw new Bn;let l=o.getWidth(),d=o.getHeight(),h=Math.max(r,l),g=Math.max(i,d),p=Math.min(h/l,g/d),v=(h-l*p)/2,S=(g-d*p)/2,I=new Ne(h,g);for(let D=0,F=S;D<d;D++,F+=p)for(let z=0,W=v;z<l;z++,W+=p)o.get(z,D)&&I.setRegion(W,F,p,p);return I}}s.AbstractExpandedDecoder=xl,s.ArgumentException=N,s.ArithmeticException=ya,s.AztecCode=Dd,s.AztecCodeReader=ba,s.AztecCodeWriter=ja,s.AztecDecoder=Ye,s.AztecDetector=vd,s.AztecDetectorResult=yd,s.AztecEncoder=Oe,s.AztecHighLevelEncoder=mi,s.AztecPoint=Ut,s.BarcodeFormat=oe,s.Binarizer=B,s.BinaryBitmap=T,s.BitArray=k,s.BitMatrix=Ne,s.BitSource=yl,s.BrowserAztecCodeReader=Ex,s.BrowserBarcodeReader=Ix,s.BrowserCodeReader=Ie,s.BrowserDatamatrixCodeReader=jx,s.BrowserMultiFormatReader=zx,s.BrowserPDF417Reader=Vx,s.BrowserQRCodeReader=Hx,s.BrowserQRCodeSvgWriter=Yr,s.CharacterSetECI=P,s.ChecksumException=j,s.Code128Reader=de,s.Code39Reader=yt,s.DataMatrixDecodedBitStreamParser=hr,s.DataMatrixReader=xr,s.DecodeHintType=U,s.DecoderResult=ai,s.DefaultGridSampler=wd,s.DetectorResult=va,s.EAN13Reader=Vr,s.EncodeHintType=vt,s.Exception=w,s.FormatException=L,s.GenericGF=Me,s.GenericGFPoly=Yt,s.GlobalHistogramBinarizer=le,s.GridSampler=ul,s.GridSamplerInstance=dr,s.HTMLCanvasElementLuminanceSource=Q,s.HybridBinarizer=ce,s.ITFReader=We,s.IllegalArgumentException=b,s.IllegalStateException=Bn,s.InvertedLuminanceSource=Z,s.LuminanceSource=$,s.MathUtils=Re,s.MultiFormatOneDReader=gs,s.MultiFormatReader=Rd,s.MultiFormatWriter=Gx,s.NotFoundException=K,s.OneDReader=gt,s.PDF417DecodedBitStreamParser=Y,s.PDF417DecoderErrorCorrection=Sd,s.PDF417Reader=Tt,s.PDF417ResultMetadata=Id,s.PerspectiveTransform=_n,s.PlanarYUVLuminanceSource=zn,s.QRCodeByteMatrix=Ia,s.QRCodeDataMask=mn,s.QRCodeDecodedBitStreamParser=rt,s.QRCodeDecoderErrorCorrectionLevel=qe,s.QRCodeDecoderFormatInformation=Mt,s.QRCodeEncoder=Ze,s.QRCodeEncoderQRCode=Xr,s.QRCodeMaskUtil=ut,s.QRCodeMatrixUtil=Ce,s.QRCodeMode=be,s.QRCodeReader=gr,s.QRCodeVersion=ve,s.QRCodeWriter=ms,s.RGBLuminanceSource=Al,s.RSS14Reader=ct,s.RSSExpandedReader=te,s.ReaderException=_a,s.ReedSolomonDecoder=li,s.ReedSolomonEncoder=Nl,s.ReedSolomonException=ds,s.Result=He,s.ResultMetadataType=ft,s.ResultPoint=we,s.StringUtils=ne,s.UnsupportedOperationException=J,s.VideoInputDevice=xe,s.WhiteRectangleDetector=Zn,s.WriterException=Ge,s.ZXingArrays=C,s.ZXingCharset=Od,s.ZXingInteger=E,s.ZXingStandardCharsets=Sl,s.ZXingStringBuilder=fe,s.ZXingStringEncoding=ee,s.ZXingSystem=M,s.createAbstractExpandedDecoder=Nd,Object.defineProperty(s,"__esModule",{value:!0})})})(xu,xu.exports);var Je=xu.exports;const Dw=w1(Je),Mw=y1({__proto__:null,default:Dw},[Je]);var u1=function(){function e(t,s,a){if(this.formatMap=new Map([[ge.QR_CODE,Je.BarcodeFormat.QR_CODE],[ge.AZTEC,Je.BarcodeFormat.AZTEC],[ge.CODABAR,Je.BarcodeFormat.CODABAR],[ge.CODE_39,Je.BarcodeFormat.CODE_39],[ge.CODE_93,Je.BarcodeFormat.CODE_93],[ge.CODE_128,Je.BarcodeFormat.CODE_128],[ge.DATA_MATRIX,Je.BarcodeFormat.DATA_MATRIX],[ge.MAXICODE,Je.BarcodeFormat.MAXICODE],[ge.ITF,Je.BarcodeFormat.ITF],[ge.EAN_13,Je.BarcodeFormat.EAN_13],[ge.EAN_8,Je.BarcodeFormat.EAN_8],[ge.PDF_417,Je.BarcodeFormat.PDF_417],[ge.RSS_14,Je.BarcodeFormat.RSS_14],[ge.RSS_EXPANDED,Je.BarcodeFormat.RSS_EXPANDED],[ge.UPC_A,Je.BarcodeFormat.UPC_A],[ge.UPC_E,Je.BarcodeFormat.UPC_E],[ge.UPC_EAN_EXTENSION,Je.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Mw)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=s,this.logger=a;var u=this.createZXingFormats(t),f=new Map;f.set(Je.DecodeHintType.POSSIBLE_FORMATS,u),f.set(Je.DecodeHintType.TRY_HARDER,!1),this.hints=f}return e.prototype.decodeAsync=function(t){var s=this;return new Promise(function(a,u){try{a(s.decode(t))}catch(f){u(f)}})},e.prototype.decode=function(t){var s=new Je.MultiFormatReader(this.verbose,this.hints),a=new Je.HTMLCanvasElementLuminanceSource(t),u=new Je.BinaryBitmap(new Je.HybridBinarizer(a)),f=s.decode(u);return{text:f.text,format:mx.create(this.toHtml5QrcodeSupportedFormats(f.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(s,a,u){t.set(s,a)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var s=[],a=0,u=t;a<u.length;a++){var f=u[a];this.formatMap.has(f)?s.push(this.formatMap.get(f)):this.logger.logError("".concat(f," is not supported by")+"ZXingHtml5QrcodeShim")}return s},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),Lw=function(e,t,s,a){function u(f){return f instanceof s?f:new s(function(x){x(f)})}return new(s||(s=Promise))(function(f,x){function m(N){try{w(a.next(N))}catch(b){x(b)}}function y(N){try{w(a.throw(N))}catch(b){x(b)}}function w(N){N.done?f(N.value):u(N.value).then(m,y)}w((a=a.apply(e,t||[])).next())})},Bw=function(e,t){var s={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,u,f,x;return x={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function m(w){return function(N){return y([w,N])}}function y(w){if(a)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(s=0)),s;)try{if(a=1,u&&(f=w[0]&2?u.return:w[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,w[1])).done)return f;switch(u=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return s.label++,{value:w[1],done:!1};case 5:s.label++,u=w[1],w=[0];continue;case 7:w=s.ops.pop(),s.trys.pop();continue;default:if(f=s.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){s=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){s.label=w[1];break}if(w[0]===6&&s.label<f[1]){s.label=f[1],f=w;break}if(f&&s.label<f[2]){s.label=f[2],s.ops.push(w);break}f[2]&&s.ops.pop(),s.trys.pop();continue}w=t.call(e,s)}catch(N){w=[6,N],u=0}finally{a=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},d1=function(){function e(t,s,a){if(this.formatMap=new Map([[ge.QR_CODE,"qr_code"],[ge.AZTEC,"aztec"],[ge.CODABAR,"codabar"],[ge.CODE_39,"code_39"],[ge.CODE_93,"code_93"],[ge.CODE_128,"code_128"],[ge.DATA_MATRIX,"data_matrix"],[ge.ITF,"itf"],[ge.EAN_13,"ean_13"],[ge.EAN_8,"ean_8"],[ge.PDF_417,"pdf417"],[ge.UPC_A,"upc_a"],[ge.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=s,this.logger=a;var u=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(u),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return Lw(this,void 0,void 0,function(){var s,a;return Bw(this,function(u){switch(u.label){case 0:return[4,this.detector.detect(t)];case 1:if(s=u.sent(),!s||s.length===0)throw"No barcode or QR code detected.";return a=this.selectLargestBarcode(s),[2,{text:a.rawValue,format:mx.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var s=null,a=0,u=0,f=t;u<f.length;u++){var x=f[u],m=x.boundingBox.width*x.boundingBox.height;m>a&&(a=m,s=x)}if(!s)throw"No largest barcode found";return s},e.prototype.createBarcodeDetectorFormats=function(t){for(var s=[],a=0,u=t;a<u.length;a++){var f=u[a];this.formatMap.has(f)?s.push(this.formatMap.get(f)):this.logger.warn("".concat(f," is not supported by")+"BarcodeDetectorDelegate")}return{formats:s}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(s,a,u){t.set(s,a)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),f1=function(e,t,s,a){function u(f){return f instanceof s?f:new s(function(x){x(f)})}return new(s||(s=Promise))(function(f,x){function m(N){try{w(a.next(N))}catch(b){x(b)}}function y(N){try{w(a.throw(N))}catch(b){x(b)}}function w(N){N.done?f(N.value):u(N.value).then(m,y)}w((a=a.apply(e,t||[])).next())})},h1=function(e,t){var s={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,u,f,x;return x={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function m(w){return function(N){return y([w,N])}}function y(w){if(a)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(s=0)),s;)try{if(a=1,u&&(f=w[0]&2?u.return:w[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,w[1])).done)return f;switch(u=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return s.label++,{value:w[1],done:!1};case 5:s.label++,u=w[1],w=[0];continue;case 7:w=s.ops.pop(),s.trys.pop();continue;default:if(f=s.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){s=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){s.label=w[1];break}if(w[0]===6&&s.label<f[1]){s.label=f[1],f=w;break}if(f&&s.label<f[2]){s.label=f[2],s.ops.push(w);break}f[2]&&s.ops.pop(),s.trys.pop();continue}w=t.call(e,s)}catch(N){w=[6,N],u=0}finally{a=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Pw=function(){function e(t,s,a,u){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=a,s&&d1.isSupported()?(this.primaryDecoder=new d1(t,a,u),this.secondaryDecoder=new u1(t,a,u)):this.primaryDecoder=new u1(t,a,u)}return e.prototype.decodeAsync=function(t){return f1(this,void 0,void 0,function(){var s;return h1(this,function(a){switch(a.label){case 0:s=performance.now(),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,a.sent()];case 3:return this.possiblyLogPerformance(s),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return f1(this,void 0,void 0,function(){var s,a;return h1(this,function(u){switch(u.label){case 0:s=performance.now(),u.label=1;case 1:return u.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,u.sent()];case 3:if(a=u.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw a;case 4:return this.possiblyLogPerformance(s),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var s=performance.now()-t;this.executionResults.push(s),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,s=0,a=this.executionResults;s<a.length;s++){var u=a[s];t+=u}var f=t/this.executionResults.length;console.log("".concat(f," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),md=function(){var e=function(t,s){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(a[f]=u[f])},e(t,s)};return function(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");e(t,s);function a(){this.constructor=t}t.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}}(),Lo=function(e,t,s,a){function u(f){return f instanceof s?f:new s(function(x){x(f)})}return new(s||(s=Promise))(function(f,x){function m(N){try{w(a.next(N))}catch(b){x(b)}}function y(N){try{w(a.throw(N))}catch(b){x(b)}}function w(N){N.done?f(N.value):u(N.value).then(m,y)}w((a=a.apply(e,t||[])).next())})},Bo=function(e,t){var s={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,u,f,x;return x={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function m(w){return function(N){return y([w,N])}}function y(w){if(a)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(s=0)),s;)try{if(a=1,u&&(f=w[0]&2?u.return:w[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,w[1])).done)return f;switch(u=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return s.label++,{value:w[1],done:!1};case 5:s.label++,u=w[1],w=[0];continue;case 7:w=s.ops.pop(),s.trys.pop();continue;default:if(f=s.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){s=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){s.label=w[1];break}if(w[0]===6&&s.label<f[1]){s.label=f[1],f=w;break}if(f&&s.label<f[2]){s.label=f[2],s.ops.push(w);break}f[2]&&s.ops.pop(),s.trys.pop();continue}w=t.call(e,s)}catch(N){w=[6,N],u=0}finally{a=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},wx=function(){function e(t,s){this.name=t,this.track=s}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var s={};s[this.name]=t;var a={advanced:[s]};return this.track.applyConstraints(a)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var s=t[this.name];return s}return null},e}(),Fw=function(e){md(t,e);function t(s,a){return e.call(this,s,a)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(s){var a={};a[this.name]=s;var u={advanced:[a]};return this.track.applyConstraints(u)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var s=this.track.getCapabilities(),a=s[this.name];return{min:a.min,max:a.max,step:a.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(wx),Uw=function(e){md(t,e);function t(s){return e.call(this,"zoom",s)||this}return t}(Fw),zw=function(e){md(t,e);function t(s){return e.call(this,"torch",s)||this}return t}(wx),Vw=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new Uw(this.track)},e.prototype.torchFeature=function(){return new zw(this.track)},e}(),Hw=function(){function e(t,s,a){this.isClosed=!1,this.parentElement=t,this.mediaStream=s,this.callbacks=a,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var s=document.createElement("video");return s.style.width="".concat(t,"px"),s.style.display="block",s.muted=!0,s.setAttribute("muted","true"),s.playsInline=!0,s},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var s=function(){var a=t.surface.clientWidth,u=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(a,u),t.surface.removeEventListener("playing",s)};this.surface.addEventListener("playing",s),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,s,a,u){return Lo(this,void 0,void 0,function(){var f,x;return Bo(this,function(m){switch(m.label){case 0:return f=new e(t,s,u),a.aspectRatio?(x={aspectRatio:a.aspectRatio},[4,f.getFirstTrackOrFail().applyConstraints(x)]):[3,2];case 1:m.sent(),m.label=2;case 2:return f.setupSurface(),[2,f]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var s=this,a=function(){setTimeout(t,200),s.surface.removeEventListener("playing",a)};this.surface.addEventListener("playing",a),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return Lo(this,void 0,void 0,function(){return Bo(this,function(s){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(s,a){var u=t.mediaStream.getVideoTracks(),f=u.length,x=0;t.mediaStream.getVideoTracks().forEach(function(m){t.mediaStream.removeTrack(m),m.stop(),++x,x>=f&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),s())})})},e.prototype.getCapabilities=function(){return new Vw(this.getFirstTrackOrFail())},e}(),Ww=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,s,a){return Lo(this,void 0,void 0,function(){return Bo(this,function(u){return[2,Hw.create(t,this.mediaStream,s,a)]})})},e.create=function(t){return Lo(this,void 0,void 0,function(){var s,a;return Bo(this,function(u){switch(u.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return s={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(s)];case 1:return a=u.sent(),[2,new e(a)]}})})},e}(),x1=function(e,t,s,a){function u(f){return f instanceof s?f:new s(function(x){x(f)})}return new(s||(s=Promise))(function(f,x){function m(N){try{w(a.next(N))}catch(b){x(b)}}function y(N){try{w(a.throw(N))}catch(b){x(b)}}function w(N){N.done?f(N.value):u(N.value).then(m,y)}w((a=a.apply(e,t||[])).next())})},g1=function(e,t){var s={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,u,f,x;return x={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function m(w){return function(N){return y([w,N])}}function y(w){if(a)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(s=0)),s;)try{if(a=1,u&&(f=w[0]&2?u.return:w[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,w[1])).done)return f;switch(u=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return s.label++,{value:w[1],done:!1};case 5:s.label++,u=w[1],w=[0];continue;case 7:w=s.ops.pop(),s.trys.pop();continue;default:if(f=s.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){s=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){s.label=w[1];break}if(w[0]===6&&s.label<f[1]){s.label=f[1],f=w;break}if(f&&s.label<f[2]){s.label=f[2],s.ops.push(w);break}f[2]&&s.ops.pop(),s.trys.pop();continue}w=t.call(e,s)}catch(N){w=[6,N],u=0}finally{a=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Gw=function(){function e(){}return e.failIfNotSupported=function(){return x1(this,void 0,void 0,function(){return g1(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return x1(this,void 0,void 0,function(){return g1(this,function(s){return[2,Ww.create(t)]})})},e}(),Xw=function(e,t,s,a){function u(f){return f instanceof s?f:new s(function(x){x(f)})}return new(s||(s=Promise))(function(f,x){function m(N){try{w(a.next(N))}catch(b){x(b)}}function y(N){try{w(a.throw(N))}catch(b){x(b)}}function w(N){N.done?f(N.value):u(N.value).then(m,y)}w((a=a.apply(e,t||[])).next())})},Yw=function(e,t){var s={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},a,u,f,x;return x={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function m(w){return function(N){return y([w,N])}}function y(w){if(a)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(s=0)),s;)try{if(a=1,u&&(f=w[0]&2?u.return:w[0]?u.throw||((f=u.return)&&f.call(u),0):u.next)&&!(f=f.call(u,w[1])).done)return f;switch(u=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return s.label++,{value:w[1],done:!1};case 5:s.label++,u=w[1],w=[0];continue;case 7:w=s.ops.pop(),s.trys.pop();continue;default:if(f=s.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){s=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){s.label=w[1];break}if(w[0]===6&&s.label<f[1]){s.label=f[1],f=w;break}if(f&&s.label<f[2]){s.label=f[2],s.ops.push(w);break}f[2]&&s.ops.pop(),s.trys.pop();continue}w=t.call(e,s)}catch(N){w=[6,N],u=0}finally{a=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},qw=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Ms.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Ms.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return Xw(this,void 0,void 0,function(){var t,s,a,u,f,x,m;return Yw(this,function(y){switch(y.label){case 0:return t=function(w){for(var N=w.getVideoTracks(),b=0,T=N;b<T.length;b++){var j=T[b];j.enabled=!1,j.stop(),w.removeTrack(j)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return s=y.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(a=y.sent(),u=[],f=0,x=a;f<x.length;f++)m=x[f],m.kind==="videoinput"&&u.push({id:m.deviceId,label:m.label});return t(s),[2,u]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,s){var a=function(f){for(var x=[],m=0,y=f;m<y.length;m++){var w=y[m];w.kind==="video"&&x.push({id:w.id,label:w.label})}t(x)},u=MediaStreamTrack;u.getSources(a)})},e}(),st;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(st||(st={}));var Kw=function(){function e(){this.state=st.NOT_STARTED,this.onGoingTransactionNewState=st.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===st.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=st.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===st.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=st.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==st.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case st.UNKNOWN:throw"Transition from unknown is not allowed";case st.NOT_STARTED:this.failIfNewStateIs(t,[st.PAUSED]);break;case st.SCANNING:break;case st.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,s){for(var a=0,u=s;a<u.length;a++){var f=u[a];if(t===f)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),Zw=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===st.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==st.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===st.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===st.PAUSED},e}(),Qw=function(){function e(){}return e.create=function(){return new Zw(new Kw)},e}(),Jw=function(){var e=function(t,s){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(a[f]=u[f])},e(t,s)};return function(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");e(t,s);function a(){this.constructor=t}t.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}}(),ln=function(e){Jw(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(kw),$w=function(){function e(t,s){this.logger=s,this.fps=ln.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=ln.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?yx.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Qn(this.qrbox)},e.create=function(t,s){return new e(t,s)},e}(),vx=function(){function e(t,s){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var a;typeof s=="boolean"?this.verbose=s===!0:s&&(a=s,this.verbose=a.verbose===!0,a.experimentalFeatures),this.logger=new Ow(this.verbose),this.qrcode=new Pw(this.getSupportedFormats(s),this.getUseBarCodeDetectorIfSupported(a),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Qw.create()}return e.prototype.start=function(t,s,a,u){var f=this;if(!t)throw"cameraIdOrConfig is required";if(!a||typeof a!="function")throw"qrCodeSuccessCallback is required and should be a function.";var x;u?x=u:x=this.verbose?this.logger.log:function(){};var m=$w.create(s,this.logger);this.clearElement();var y=!1;m.videoConstraints&&(m.isMediaStreamConstraintsValid()?y=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var w=y,N=document.getElementById(this.elementId);N.clientWidth?N.clientWidth:ln.DEFAULT_WIDTH,N.style.position="relative",this.shouldScan=!0,this.element=N;var b=this,T=this.stateManagerProxy.startTransition(st.SCANNING);return new Promise(function(j,B){var M=w?m.videoConstraints:b.createVideoConstraints(t);if(!M){T.cancel(),B("videoConstraints should be defined");return}var H={};(!w||m.aspectRatio)&&(H.aspectRatio=m.aspectRatio);var _={onRenderSurfaceReady:function(C,E){b.setupUi(C,E,m),b.isScanning=!0,b.foreverScan(m,a,x)}};Gw.failIfNotSupported().then(function(C){C.create(M).then(function(E){return E.render(f.element,H,_).then(function(k){b.renderedCamera=k,T.execute(),j(null)}).catch(function(k){T.cancel(),B(k)})}).catch(function(E){T.cancel(),B(Ms.errorGettingUserMedia(E))})}).catch(function(C){T.cancel(),B(Ms.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(st.PAUSED),this.showPausedState(),(Qn(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,s=function(){t.stateManagerProxy.directTransition(st.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){s();return}this.renderedCamera.resume(function(){s()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var s=this.stateManagerProxy.startTransition(st.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var a=function(){if(t.element){var f=document.getElementById(ln.SHADED_REGION_ELEMENT_ID);f&&t.element.removeChild(f)}},u=this;return this.renderedCamera.close().then(function(){return u.renderedCamera=null,u.element&&(u.element.removeChild(u.canvasElement),u.canvasElement=null),a(),u.qrRegion&&(u.qrRegion=null),u.context&&(u.context=null),s.execute(),u.hidePausedState(),u.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,s){return this.scanFileV2(t,s).then(function(a){return a.decodedText})},e.prototype.scanFileV2=function(t,s){var a=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Qn(s)&&(s=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(u,f){a.possiblyCloseLastScanImageFile(),a.clearElement(),a.lastScanImageFile=URL.createObjectURL(t);var x=new Image;x.onload=function(){var m=x.width,y=x.height,w=document.getElementById(a.elementId),N=w.clientWidth?w.clientWidth:ln.DEFAULT_WIDTH,b=Math.max(w.clientHeight?w.clientHeight:y,ln.FILE_SCAN_MIN_HEIGHT),T=a.computeCanvasDrawConfig(m,y,N,b);if(s){var j=a.createCanvasElement(N,b,"qr-canvas-visible");j.style.display="inline-block",w.appendChild(j);var B=j.getContext("2d");if(!B)throw"Unable to get 2d context from canvas";B.canvas.width=N,B.canvas.height=b,B.drawImage(x,0,0,m,y,T.x,T.y,T.width,T.height)}var M=ln.FILE_SCAN_HIDDEN_CANVAS_PADDING,H=Math.max(x.width,T.width),_=Math.max(x.height,T.height),C=H+2*M,E=_+2*M,k=a.createCanvasElement(C,E);w.appendChild(k);var V=k.getContext("2d");if(!V)throw"Unable to get 2d context from canvas";V.canvas.width=C,V.canvas.height=E,V.drawImage(x,0,0,m,y,M,M,H,_);try{a.qrcode.decodeRobustlyAsync(k).then(function(U){u(c1.createFromQrcodeResult(U))}).catch(f)}catch(U){f("QR code parse error, error = ".concat(U))}},x.onerror=f,x.onabort=f,x.onstalled=f,x.onsuspend=f,x.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return qw.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!yx.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var s=[ge.QR_CODE,ge.AZTEC,ge.CODABAR,ge.CODE_39,ge.CODE_93,ge.CODE_128,ge.DATA_MATRIX,ge.MAXICODE,ge.ITF,ge.EAN_13,ge.EAN_8,ge.PDF_417,ge.RSS_14,ge.RSS_EXPANDED,ge.UPC_A,ge.UPC_E,ge.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return s;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var a=[],u=0,f=t.formatsToSupport;u<f.length;u++){var x=f[u];jw(x)?a.push(x):this.logger.warn("Invalid format: ".concat(x," passed in config, ignoring."))}if(a.length===0)throw"None of formatsToSupport match supported values.";return a},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(Qn(t))return!0;if(!Qn(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(Qn(t.experimentalFeatures))return!0;var s=t.experimentalFeatures;return Qn(s.useBarCodeDetectorIfSupported)?!0:s.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,s,a){var u=this,f=a.qrbox;this.validateQrboxConfig(f);var x=this.toQrdimensions(t,s,f),m=function(w){if(w<ln.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(ln.MIN_QR_BOX_SIZE,"px.")},y=function(w){return w>t&&(u.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),w=t),w};m(x.width),m(x.height),x.width=y(x.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,s,a){if(typeof a=="number")return{width:a,height:a};if(typeof a=="function")try{return a(t,s)}catch(u){throw new Error("qrbox config was passed as a function but it failed with unknown error"+u)}return a},e.prototype.setupUi=function(t,s,a){a.isShadedBoxEnabled()&&this.validateQrboxSize(t,s,a);var u=Qn(a.qrbox)?{width:t,height:s}:a.qrbox;this.validateQrboxConfig(u);var f=this.toQrdimensions(t,s,u);f.height>s&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var x=a.isShadedBoxEnabled()&&f.height<=s,m={x:0,y:0,width:t,height:s},y=x?this.getShadedRegionBounds(t,s,f):m,w=this.createCanvasElement(y.width,y.height),N={willReadFrequently:!0},b=w.getContext("2d",N);b.canvas.width=y.width,b.canvas.height=y.height,this.element.append(w),x&&this.possiblyInsertShadingElement(this.element,t,s,f),this.createScannerPausedUiElement(this.element),this.qrRegion=y,this.context=b,this.canvasElement=w},e.prototype.createScannerPausedUiElement=function(t){var s=document.createElement("div");s.innerText=Ms.scannerPaused(),s.style.display="none",s.style.position="absolute",s.style.top="0px",s.style.zIndex="1",s.style.background="rgba(9, 9, 9, 0.46)",s.style.color="#FFECEC",s.style.textAlign="center",s.style.width="100%",t.appendChild(s),this.scannerPausedUiElement=s},e.prototype.scanContext=function(t,s){var a=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(u){return t(u.text,c1.createFromQrcodeResult(u)),a.possiblyUpdateShaders(!0),!0}).catch(function(u){a.possiblyUpdateShaders(!1);var f=Ms.codeParseError(u);return s(f,Rw.createFrom(f)),!1})},e.prototype.foreverScan=function(t,s,a){var u=this;if(this.shouldScan&&this.renderedCamera){var f=this.renderedCamera.getSurface(),x=f.videoWidth/f.clientWidth,m=f.videoHeight/f.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var y=this.qrRegion.width*x,w=this.qrRegion.height*m,N=this.qrRegion.x*x,b=this.qrRegion.y*m;this.context.drawImage(f,N,b,y,w,0,0,this.qrRegion.width,this.qrRegion.height);var T=function(){u.foreverScanTimeout=setTimeout(function(){u.foreverScan(t,s,a)},u.getTimeoutFps(t.fps))};this.scanContext(s,a).then(function(j){!j&&t.disableFlip!==!0?(u.context.translate(u.context.canvas.width,0),u.context.scale(-1,1),u.scanContext(s,a).finally(function(){T()})):T()}).catch(function(j){u.logger.logError("Error happend while scanning context",j),T()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var s="facingMode",a="deviceId",u={user:!0,environment:!0},f="exact",x=function(B){if(B in u)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(B,"'")},m=Object.keys(t);if(m.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(m.length," keys");var y=Object.keys(t)[0];if(y!==s&&y!==a)throw"Only '".concat(s,"' and '").concat(a,"' ")+" are supported for 'cameraIdOrConfig'";if(y===s){var w=t.facingMode;if(typeof w=="string"){if(x(w))return{facingMode:w}}else if(typeof w=="object")if(f in w){if(x(w["".concat(f)]))return{facingMode:{exact:w["".concat(f)]}}}else throw"'facingMode' should be string or object with"+" ".concat(f," as key.");else{var N=typeof w;throw"Invalid type of 'facingMode' = ".concat(N)}}else{var b=t.deviceId;if(typeof b=="string")return{deviceId:b};if(typeof b=="object"){if(f in b)return{deviceId:{exact:b["".concat(f)]}};throw"'deviceId' should be string or object with"+" ".concat(f," as key.")}else{var T=typeof b;throw"Invalid type of 'deviceId' = ".concat(T)}}}var j=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(j)},e.prototype.computeCanvasDrawConfig=function(t,s,a,u){if(t<=a&&s<=u){var f=(a-t)/2,x=(u-s)/2;return{x:f,y:x,width:t,height:s}}else{var m=t,y=s;return t>a&&(s=a/t*s,t=a),s>u&&(t=u/s*t,s=u),this.logger.log("Image downsampled from "+"".concat(m,"X").concat(y)+" to ".concat(t,"X").concat(s,".")),this.computeCanvasDrawConfig(t,s,a,u)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(s){s.style.backgroundColor=t?ln.BORDER_SHADER_MATCH_COLOR:ln.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,s,a){var u=t,f=s,x=document.createElement("canvas");return x.style.width="".concat(u,"px"),x.style.height="".concat(f,"px"),x.style.display="none",x.id=Qn(a)?"qr-canvas":a,x},e.prototype.getShadedRegionBounds=function(t,s,a){if(a.width>t||a.height>s)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-a.width)/2,y:(s-a.height)/2,width:a.width,height:a.height}},e.prototype.possiblyInsertShadingElement=function(t,s,a,u){if(!(s-u.width<1||a-u.height<1)){var f=document.createElement("div");f.style.position="absolute";var x=(s-u.width)/2,m=(a-u.height)/2;if(f.style.borderLeft="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderRight="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderTop="".concat(m,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderBottom="".concat(m,"px solid rgba(0, 0, 0, 0.48)"),f.style.boxSizing="border-box",f.style.top="0px",f.style.bottom="0px",f.style.left="0px",f.style.right="0px",f.id="".concat(ln.SHADED_REGION_ELEMENT_ID),s-u.width<11||a-u.height<11)this.hasBorderShaders=!1;else{var y=5,w=40;this.insertShaderBorders(f,w,y,-y,null,0,!0),this.insertShaderBorders(f,w,y,-y,null,0,!1),this.insertShaderBorders(f,w,y,null,-y,0,!0),this.insertShaderBorders(f,w,y,null,-y,0,!1),this.insertShaderBorders(f,y,w+y,-y,null,-y,!0),this.insertShaderBorders(f,y,w+y,null,-y,-y,!0),this.insertShaderBorders(f,y,w+y,-y,null,-y,!1),this.insertShaderBorders(f,y,w+y,null,-y,-y,!1),this.hasBorderShaders=!0}t.append(f)}},e.prototype.insertShaderBorders=function(t,s,a,u,f,x,m){var y=document.createElement("div");y.style.position="absolute",y.style.backgroundColor=ln.BORDER_SHADER_DEFAULT_COLOR,y.style.width="".concat(s,"px"),y.style.height="".concat(a,"px"),u!==null&&(y.style.top="".concat(u,"px")),f!==null&&(y.style.bottom="".concat(f,"px")),m?y.style.left="".concat(x,"px"):y.style.right="".concat(x,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(y),t.appendChild(y)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),p1;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(p1||(p1={}));const cl=Object.freeze(Object.defineProperty({__proto__:null,Html5Qrcode:vx,get Html5QrcodeScanType(){return la},get Html5QrcodeScannerState(){return st},get Html5QrcodeSupportedFormats(){return ge}},Symbol.toStringTag,{value:"Module"})),e3=()=>{const{setTitle:e}=sn();R.useEffect(()=>{e("Logix - Inbound")},[e]);const[t,s]=R.useState(""),[a,u]=R.useState(""),[f,x]=R.useState(""),[m,y]=R.useState(""),[w,N]=R.useState(""),[b,T]=R.useState(null),[j,B]=R.useState([]),[M,H]=R.useState([]),[_,C]=R.useState(!1),[E,k]=R.useState(!1),[V,U]=R.useState(!1),[L,X]=R.useState(null),[P,J]=R.useState(null),ee=R.useRef(null),ne=R.useRef(null);R.useEffect(()=>{fe(),Ne()},[]),R.useEffect(()=>{b!=null&&b.itemCode?ii.toDataURL(b.itemCode,{width:96,margin:1}).then(ue=>X(ue)).catch(ue=>console.error(ue)):X(null)},[b]);const fe=async(ue="")=>{try{const oe=ue?`http://localhost:8000/api/get_logs?version_date=${ue}`:"http://localhost:8000/api/get_logs",nt=await fetch(oe);nt.ok&&B(await nt.json())}catch(oe){console.error("Error loading logs",oe)}},Ne=async()=>{try{const ue=await fetch("http://localhost:8000/api/inbound/versions");ue.ok&&H(await ue.json())}catch(ue){console.error(ue)}},K=async()=>{var ue;if(!f||!t){alert("Ingrese Import Reference e Item Code");return}C(!0);try{const oe=await fetch(`http://localhost:8000/api/find_item/${encodeURIComponent(f)}/${encodeURIComponent(t)}`),nt=await oe.json();oe.ok?(T(nt),P||y(""),(ue=ne.current)==null||ue.focus()):(alert(nt.error||"Item no encontrado"),T(null))}catch{alert("Error de conexin")}finally{C(!1)}},le=async ue=>{if(ue.preventDefault(),!b)return alert("Busque un item primero");const oe={importReference:t.toUpperCase(),waybill:a.toUpperCase(),itemCode:b.itemCode,quantity:parseInt(m),relocatedBin:w.toUpperCase()};try{let nt;if(P?nt=await fetch(`http://localhost:8000/api/inbound/log/${P}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({waybill:oe.waybill,qtyReceived:oe.quantity,relocatedBin:oe.relocatedBin})}):nt=await fetch("http://localhost:8000/api/add_log",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(oe)}),nt.ok)fe(),Z();else{const ft=await nt.json();alert(ft.detail||ft.error||"Error al guardar")}}catch{alert("Error de conexin")}},ce=async ue=>{if(confirm("Eliminar registro?"))try{await fetch(`http://localhost:8000/api/delete_log/${ue}`,{method:"DELETE"}),fe()}catch{alert("Error")}},$=async()=>{if(confirm("Archivar registros actuales y limpiar base?"))try{await fetch("http://localhost:8000/api/inbound/archive",{method:"POST"}),fe(),Ne()}catch{alert("Error")}},Z=()=>{J(null),x(""),y(""),N(""),T(null)},Q=ue=>{J(ue.id),s(ue.importReference),u(ue.waybill),x(ue.itemCode),y(ue.qtyReceived),N(ue.relocatedBin||""),fetch(`http://localhost:8000/api/find_item/${encodeURIComponent(ue.itemCode)}/${encodeURIComponent(ue.importReference)}`).then(oe=>oe.json()).then(oe=>T(oe))};R.useEffect(()=>{if(E){const ue=new vx("reader");ee.current=ue,ue.start({facingMode:"environment"},{fps:10,qrbox:250},oe=>{x(oe.toUpperCase()),ue.stop().then(()=>{ue.clear(),k(!1),ee.current=null,setTimeout(()=>ye(oe.toUpperCase()),200)}).catch(console.error)},()=>{}).catch(oe=>{console.error(oe),k(!1),alert("No se pudo iniciar la cmara")})}return()=>{ee.current&&ee.current.isScanning&&ee.current.stop().catch(console.error)}},[E]);const xe=()=>{ee.current&&ee.current.applyVideoConstraints({advanced:[{torch:!V}]}).then(()=>U(!V)).catch(ue=>{console.error(ue),alert("Flash no disponible")})},ye=ue=>{!ue||!t||(C(!0),fetch(`http://localhost:8000/api/find_item/${encodeURIComponent(ue)}/${encodeURIComponent(t)}`).then(oe=>oe.json()).then(oe=>{var nt;oe.error?(alert(oe.error),T(null)):(T(oe),P||y(""),(nt=ne.current)==null||nt.focus())}).catch(()=>alert("Error de conexin")).finally(()=>C(!1)))},Ie=b?parseInt(m||0)-(b.defaultQtyGrn||0):0,He=b?(parseFloat(b.weight||0)*parseInt(m||1)).toFixed(2):"N/A";return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"container-wrapper px-4 py-4",children:[c.jsx("form",{onSubmit:le,children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-4",children:[c.jsxs("div",{className:"lg:col-span-2 bg-white p-4 rounded shadow border border-gray-200",children:[c.jsx("div",{className:"bg-gray-50 text-gray-900 px-4 py-3 -mx-4 -mt-4 mb-4 rounded-t border-b border-gray-200",children:c.jsx("h1",{className:"text-base font-semibold tracking-tight",children:"Inbound - Recepcin"})}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4 mb-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"form-label",children:"Import Reference"}),c.jsx("input",{type:"text",value:t,onChange:ue=>s(ue.target.value.toUpperCase()),placeholder:"I.R.",required:!0,disabled:!!P})]}),c.jsxs("div",{children:[c.jsx("label",{className:"form-label",children:"Waybill"}),c.jsx("input",{type:"text",value:a,onChange:ue=>u(ue.target.value.toUpperCase()),placeholder:"W.B.",required:!0})]}),c.jsxs("div",{className:"sm:col-span-2",children:[c.jsx("label",{className:"form-label",children:"Item Code"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",value:f,onChange:ue=>x(ue.target.value.toUpperCase()),onKeyDown:ue=>ue.key==="Enter"&&(ue.preventDefault(),K()),placeholder:"Escanear o Escribir",required:!0,disabled:!!P}),!P&&c.jsxs(c.Fragment,{children:[c.jsx("button",{type:"button",className:"btn-sap btn-secondary",onClick:()=>k(!0),title:"Escanear",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:[c.jsx("path",{d:"M0 .5A.5.5 0 0 1 .5 0h3a.5.5 0 0 1 0 1H1v2.5a.5.5 0 0 1-1 0zm12 0a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0V1h-2.5a.5.5 0 0 1-.5-.5M.5 12a.5.5 0 0 1 .5.5V15h2.5a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5m15 0a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1 0-1H15v-2.5a.5.5 0 0 1 .5-.5M4 4h1v1H4z"}),c.jsx("path",{d:"M7 2H2v5h5zM3 3h3v3H3zm2 8H4v1h1z"}),c.jsx("path",{d:"M7 9H2v5h5zm-4 1h3v3H3zm8-6h1v1h-1z"}),c.jsx("path",{d:"M9 2h5v5H9zm1 1v3h3V3zM8 8v2h1v1H8v1h2v-2h1v2h1v-1h2v-1h-3V8zm2 2H9V9h1zm4 2h-1v1h-2v1h3zm-4 2v-1H8v1z"}),c.jsx("path",{d:"M12 9h2V8h-2z"})]})}),c.jsx("button",{type:"button",className:"btn-sap btn-secondary",onClick:K,disabled:_,children:_?"...":""})]})]})]})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"form-label",children:"Item Description"}),c.jsx("div",{className:"data-field",children:(b==null?void 0:b.description)||""})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 mb-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"form-label",children:"Qty Received"}),c.jsx("input",{type:"number",ref:ne,value:m,onChange:ue=>y(ue.target.value),required:!0,min:"1"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"form-label",children:"Bin (Original)"}),c.jsx("div",{className:"data-field",children:(b==null?void 0:b.binLocation)||""})]}),c.jsxs("div",{children:[c.jsx("label",{className:"form-label",children:"Relocate (New)"}),c.jsx("input",{type:"text",value:w,onChange:ue=>N(ue.target.value.toUpperCase()),placeholder:"(Opcional)"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"form-label",children:"Aditional Bins"}),c.jsx("div",{className:"data-field text-xs",children:(b==null?void 0:b.aditionalBins)||""})]}),c.jsxs("div",{children:[c.jsx("label",{className:"form-label",children:"ABC Type"}),c.jsx("div",{className:"data-field",children:(b==null?void 0:b.itemType)||""})]}),c.jsxs("div",{children:[c.jsx("label",{className:"form-label",children:"SIC Code"}),c.jsx("div",{className:"data-field",children:(b==null?void 0:b.sicCode)||""})]})]}),c.jsxs("div",{className:"bg-gray-50 p-4 border border-gray-300 rounded mb-4",children:[c.jsx("h3",{className:"text-xs font-bold uppercase text-gray-700 border-b-2 border-blue-600 pb-1 mb-3",children:"Resumen de Cantidades"}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"form-label",children:"Qty Received"}),c.jsx("div",{className:"data-field",children:m||0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"form-label",children:"Qty Expected (GRN)"}),c.jsx("div",{className:"data-field",children:(b==null?void 0:b.defaultQtyGrn)||0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"form-label",children:"Difference"}),c.jsx("div",{className:`data-field font-bold ${Ie<0?"text-red-600":Ie>0?"text-blue-600":""}`,children:Ie>0?`+${Ie}`:Ie})]})]})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{type:"submit",className:"btn-sap btn-primary w-60 h-10",children:P?"Guardar Cambios":"Aadir Registro"}),P&&c.jsx("button",{type:"button",onClick:Z,className:"btn-sap btn-secondary w-60 h-10",children:"Cancelar"})]})]}),c.jsxs("div",{className:"lg:col-span-1",children:[c.jsx("h2",{className:"text-lg font-semibold text-center mb-3",children:"Vista Etiqueta"}),c.jsx("div",{className:"label-print-area",children:c.jsxs("div",{className:"label-container",children:[c.jsxs("div",{children:[c.jsx("img",{src:"/static/images/logoytpe_sandvik.png",alt:"Sandvik",className:"label-logo"}),c.jsx("p",{className:"label-item-code",children:(b==null?void 0:b.itemCode)||"ITEM CODE"}),c.jsx("p",{className:"label-item-description",children:(b==null?void 0:b.description)||"Item Description"}),c.jsxs("div",{className:"label-data-field",children:[c.jsx("span",{children:"Quantity Received"}),c.jsx("span",{children:m||1})]}),c.jsxs("div",{className:"label-data-field",children:[c.jsx("span",{children:"Product weight"}),c.jsx("span",{children:He})]}),c.jsxs("div",{className:"label-data-field",children:[c.jsx("span",{children:"Bin Location"}),c.jsx("span",{children:w||(b==null?void 0:b.binLocation)||"BIN"})]}),c.jsxs("div",{className:"label-data-field",children:[c.jsx("span",{children:"Reception Date"}),c.jsx("span",{children:new Date().toLocaleDateString("es-CO",{year:"2-digit",month:"2-digit",day:"2-digit"})})]})]}),c.jsxs("div",{className:"label-bottom-section",children:[c.jsx("p",{className:"label-disclaimer",children:"All trademarks and logotypes appearing on this label are owned by Sandvik Group"}),c.jsx("div",{id:"qrCodeContainer",children:L?c.jsx("img",{src:L,alt:"QR"}):c.jsx("span",{className:"text-xs text-gray-400",children:"QR Code"})})]})]})}),c.jsx("button",{type:"button",onClick:()=>window.print(),className:"btn-sap btn-primary w-full mt-4 h-10",disabled:!b,children:"Imprimir Etiqueta"})]})]})}),c.jsxs("div",{className:"bg-white border border-gray-300 rounded shadow-sm overflow-hidden",children:[c.jsxs("div",{className:"bg-gray-50 text-gray-900 px-4 py-3 border-b border-gray-200 flex justify-between items-center",children:[c.jsx("h2",{className:"text-base font-semibold tracking-tight",children:"Registros de Inbound"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>window.location.href="/update",className:"btn-sap btn-secondary toolbar-btn",children:"Act. Archivos"}),c.jsxs("button",{onClick:()=>window.location.href="/api/inbound/export",className:"btn-sap btn-secondary toolbar-btn flex items-center gap-1",children:[c.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 011.414.586l2.914 2.914a1 1 0 01.586 1.414V19a2 2 0 01-2 2z"})}),"Exportar"]}),c.jsxs("select",{onChange:ue=>fe(ue.target.value),className:"h-8 text-black text-xs rounded border border-gray-300",children:[c.jsx("option",{value:"",children:"-- Versin Actual --"}),M.map(ue=>c.jsxs("option",{value:ue,children:["Archivado: ",new Date(ue).toLocaleString()]},ue))]}),c.jsx("button",{onClick:$,className:"btn-sap bg-red-600 text-white border-red-700 hover:bg-red-700 toolbar-btn",children:"Base Limpia"})]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left border-collapse sap-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Ref"}),c.jsx("th",{children:"Waybill"}),c.jsx("th",{children:"Item Code"}),c.jsx("th",{children:"Descripcin"}),c.jsx("th",{children:"Bin (Orig)"}),c.jsx("th",{children:"Bin (New)"}),c.jsx("th",{children:"Qty Rec"}),c.jsx("th",{children:"Qty Exp"}),c.jsx("th",{children:"Dif"}),c.jsx("th",{children:"Hora"}),c.jsx("th",{children:"Acciones"})]})}),c.jsx("tbody",{children:j.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:"11",className:"text-center p-4 text-gray-500",children:"No hay registros"})}):j.map(ue=>c.jsxs("tr",{children:[c.jsx("td",{children:ue.importReference}),c.jsx("td",{children:ue.waybill}),c.jsx("td",{children:ue.itemCode}),c.jsx("td",{className:"max-w-[200px] truncate",title:ue.itemDescription,children:ue.itemDescription}),c.jsx("td",{children:ue.binLocation}),c.jsx("td",{children:ue.relocatedBin}),c.jsx("td",{children:ue.qtyReceived}),c.jsx("td",{children:ue.qtyGrn}),c.jsx("td",{className:ue.difference<0?"text-red-600 font-bold":ue.difference>0?"text-blue-600 font-bold":"",children:ue.difference}),c.jsx("td",{children:new Date(ue.timestamp).toLocaleTimeString()}),c.jsxs("td",{className:"flex gap-1 justify-center",children:[c.jsx("button",{onClick:()=>Q(ue),className:"text-blue-600 hover:bg-blue-50 p-1 rounded",children:""}),c.jsx("button",{onClick:()=>ce(ue.id),className:"text-red-600 hover:bg-red-50 p-1 rounded",children:""})]})]},ue.id))})]})})]})]}),E&&c.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg relative",children:[c.jsx("h3",{className:"text-center font-bold text-lg mb-4 text-gray-800",children:"Apunta la cmara al cdigo de barras"}),c.jsx("div",{id:"reader",className:"rounded-lg overflow-hidden mb-4 border-2 border-gray-100"}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:xe,className:`flex items-center justify-center w-14 h-12 rounded bg-[#34495e] hover:bg-[#2c3e50] text-white transition-colors ${V?"ring-2 ring-yellow-400":""}`,title:V?"Apagar Flash":"Encender Flash",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 16 16",children:c.jsx("path",{d:"M2 6a6 6 0 1 1 10.174 4.31c-.203.196-.359.4-.453.619l-.762 1.769A.5.5 0 0 1 10.5 13a.5.5 0 0 1 0 1 .5.5 0 0 1 0 1l-.224.447a1 1 0 0 1-.894.553H6.618a1 1 0 0 1-.894-.553L5.5 15a.5.5 0 0 1 0-1 .5.5 0 0 1 0-1 .5.5 0 0 1-.46-.302l-.761-1.77a1.964 1.964 0 0 0-.453-.618A5.984 5.984 0 0 1 2 6zm6-5a5 5 0 0 0-3.479 8.592c.263.254.514.564.676.941L5.83 12h4.342l.632-1.467c.162-.377.413-.687.676-.941A5 5 0 0 0 8 1z"})})}),c.jsx("button",{onClick:()=>{ee.current&&ee.current.stop(),k(!1)},className:"flex-grow bg-[#d32f2f] hover:bg-[#b71c1c] text-white font-bold py-2 px-4 rounded transition-colors text-lg",children:"Cancelar"})]})]})})]})},t3=()=>{const{setTitle:e}=sn();R.useEffect(()=>{e("Logix - Conteo de Inventario")},[e]);const[t,s]=R.useState(null),[a,u]=R.useState(!0),[f,x]=R.useState(""),[m,y]=R.useState(""),[w,N]=R.useState(""),[b,T]=R.useState(""),[j,B]=R.useState(""),[M,H]=R.useState(!1),[_,C]=R.useState([]),[E,k]=R.useState([]),[V,U]=R.useState(!1),[L,X]=R.useState(null),P=R.useRef(null);R.useEffect(()=>{J()},[]),R.useEffect(()=>{t&&fe()},[t,f]);const J=async()=>{u(!0);try{const Q=await fetch("/api/sessions/active");if(Q.ok){const xe=await Q.json();s(xe)}else s(null)}catch(Q){console.error(Q),s(null)}finally{u(!1)}},ee=async()=>{try{const Q=await fetch("/api/sessions/start",{method:"POST"});if(Q.ok){const xe=await Q.json();s(xe),he.success("Sesin iniciada")}else he.error("Error iniciando sesin")}catch{he.error("Error de conexin")}},ne=async()=>{if(t&&confirm("Seguro que desea finalizar la sesin?"))try{(await fetch(`/api/sessions/${t.id}/close`,{method:"POST"})).ok?(s(null),$(),he.success("Sesin finalizada")):he.error("Error finalizando sesin")}catch{he.error("Error de conexin")}},fe=async()=>{if(t){try{const Q=await fetch(`/api/sessions/${t.id}/locations`);Q.ok&&k(await Q.json())}catch(Q){console.error(Q)}if(f)try{const Q=await fetch(`/api/sessions/${t.id}/counts/${encodeURIComponent(f)}`);Q.ok&&C(await Q.json())}catch(Q){console.error(Q)}else C([])}},Ne=async Q=>{var xe;if(Q){H(!0),N(""),T("");try{const ye=await fetch(`/api/get_item_for_counting/${encodeURIComponent(Q)}`);if(ye.ok){const Ie=await ye.json();y(Ie.item_code),N(Ie.description),T(Ie.bin_location||"N/A"),(xe=document.getElementById("counted_qty"))==null||xe.focus()}else he.error("Item no encontrado o no requerido en esta etapa")}catch{he.error("Error buscando item")}finally{H(!1)}}},K=async Q=>{var ye;if(Q.preventDefault(),!t||!f||!m||j===""){he.warning("Complete todos los campos obligatorios");return}const xe={session_id:t.id,item_code:m,counted_qty:parseInt(j),counted_location:f,description:w,bin_location_system:b};try{const Ie=await fetch("/api/save_count",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(xe)});if(Ie.ok)he.success("Conteo guardado"),y(""),N(""),T(""),B(""),fe(),(ye=document.getElementById("itemCode"))==null||ye.focus();else{const He=await Ie.json();he.error(He.detail||"Error guardando")}}catch{he.error("Error de conexin")}},le=async()=>{if(!(!t||!f)&&confirm(`Cerrar ubicacin ${f}?`))try{(await fetch("/api/locations/close",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:t.id,location_code:f})})).ok?(he.success(`Ubicacin ${f} cerrada`),x(""),$(),fe()):he.error("Error cerrando ubicacin")}catch{he.error("Error de conexin")}},ce=async Q=>{if(confirm("Eliminar este conteo?"))try{(await fetch(`/api/counts/${Q}`,{method:"DELETE"})).ok&&(he.success("Eliminado"),fe())}catch{he.error("Error al eliminar")}},$=()=>{y(""),N(""),T(""),B("")},Z=Q=>{X(Q),U(!0)};return R.useEffect(()=>{V&&!P.current&&tl(async()=>{const{Html5Qrcode:Q}=await Promise.resolve().then(()=>cl);return{Html5Qrcode:Q}},void 0).then(({Html5Qrcode:Q})=>{const xe=new Q("reader");P.current=xe,xe.start({facingMode:"environment"},{fps:10,qrbox:250},ye=>{U(!1),P.current.stop().then(()=>{P.current.clear(),P.current=null,L==="location"?x(ye.toUpperCase()):L==="item"&&(y(ye.toUpperCase()),Ne(ye.toUpperCase()))})},()=>{}).catch(ye=>{U(!1),he.error("Cmara no disponible")})})},[V]),a?c.jsx("div",{className:"p-8 text-center",children:"Cargando sesin..."}):t?c.jsxs("div",{className:"container-wrapper px-4 py-4",children:[c.jsx(Ks,{position:"top-right",autoClose:2e3}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"md:col-span-2 bg-white p-6 rounded-lg shadow border border-gray-200",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-2",children:[c.jsxs("div",{children:[c.jsxs("h1",{className:"text-xl font-bold text-gray-800",children:["Sesin #",t.id]}),c.jsxs("p",{className:"text-xs text-gray-500",children:["Usuario: ",t.user_username]})]}),c.jsx("button",{onClick:ne,className:"btn-sap btn-secondary text-xs",children:"Finalizar Sesin"})]}),c.jsxs("form",{onSubmit:K,className:"space-y-4",children:[c.jsxs("div",{className:"flex items-end gap-2",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("label",{className:"form-label",children:"Ubicacin Contada*"}),c.jsx("input",{type:"text",value:f,onChange:Q=>x(Q.target.value.toUpperCase()),className:"uppercase font-bold text-blue-800",placeholder:"SCAN UBICACIN",required:!0})]}),c.jsx("button",{type:"button",onClick:()=>Z("location"),className:"btn-sap btn-secondary h-[38px] px-3",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:[c.jsx("path",{d:"M0 .5A.5.5 0 0 1 .5 0h3a.5.5 0 0 1 0 1H1v2.5a.5.5 0 0 1-1 0zm12 0a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0V1h-2.5a.5.5 0 0 1-.5-.5M.5 12a.5.5 0 0 1 .5.5V15h2.5a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5m15 0a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1 0-1H15v-2.5a.5.5 0 0 1 .5-.5M4 4h1v1H4z"}),c.jsx("path",{d:"M7 2H2v5h5zM3 3h3v3H3zm2 8H4v1h1z"}),c.jsx("path",{d:"M7 9H2v5h5zm-4 1h3v3H3zm8-6h1v1h-1z"}),c.jsx("path",{d:"M9 2h5v5H9zm1 1v3h3V3zM8 8v2h1v1H8v1h2v-2h1v2h1v-1h2v-1h-3V8zm2 2H9V9h1zm4 2h-1v1h-2v1h3zm-4 2v-1H8v1z"}),c.jsx("path",{d:"M12 9h2V8h-2z"})]})})]}),c.jsxs("div",{className:"flex items-end gap-2",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("label",{className:"form-label",children:"Item Code*"}),c.jsx("input",{id:"itemCode",type:"text",value:m,onChange:Q=>y(Q.target.value.toUpperCase()),onKeyDown:Q=>Q.key==="Enter"&&(Q.preventDefault(),Ne(m)),className:"uppercase",placeholder:"SCAN ITEM",required:!0})]}),c.jsx("button",{type:"button",onClick:()=>Z("item"),className:"btn-sap btn-secondary h-[38px] px-3",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:[c.jsx("path",{d:"M0 .5A.5.5 0 0 1 .5 0h3a.5.5 0 0 1 0 1H1v2.5a.5.5 0 0 1-1 0zm12 0a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0V1h-2.5a.5.5 0 0 1-.5-.5M.5 12a.5.5 0 0 1 .5.5V15h2.5a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5m15 0a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1 0-1H15v-2.5a.5.5 0 0 1 .5-.5M4 4h1v1H4z"}),c.jsx("path",{d:"M7 2H2v5h5zM3 3h3v3H3zm2 8H4v1h1z"}),c.jsx("path",{d:"M7 9H2v5h5zm-4 1h3v3H3zm8-6h1v1h-1z"}),c.jsx("path",{d:"M9 2h5v5H9zm1 1v3h3V3zM8 8v2h1v1H8v1h2v-2h1v2h1v-1h2v-1h-3V8zm2 2H9V9h1zm4 2h-1v1h-2v1h3zm-4 2v-1H8v1z"}),c.jsx("path",{d:"M12 9h2V8h-2z"})]})}),c.jsx("button",{type:"button",onClick:()=>Ne(m),className:"btn-sap btn-secondary h-[38px]",children:M?"...":"Buscar"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"form-label",children:"Descripcin"}),c.jsx("div",{className:"data-field bg-gray-50",children:w})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"form-label",children:"Ubic. Sistema"}),c.jsx("div",{className:"data-field bg-gray-50",children:b})]}),c.jsxs("div",{children:[c.jsx("label",{className:"form-label",children:"Cantidad Contada*"}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("button",{type:"button",onClick:()=>B(Q=>Math.max(0,(parseInt(Q)||0)-1)),className:"px-3 py-2 border bg-gray-100",children:"-"}),c.jsx("input",{id:"counted_qty",type:"number",value:j,onChange:Q=>B(Q.target.value),className:"text-center font-bold text-lg",min:"0",required:!0}),c.jsx("button",{type:"button",onClick:()=>B(Q=>(parseInt(Q)||0)+1),className:"px-3 py-2 border bg-gray-100",children:"+"})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[c.jsx("button",{type:"button",onClick:$,className:"btn-sap btn-secondary",children:"Limpiar"}),c.jsx("button",{type:"submit",className:"btn-sap btn-primary",children:"Guardar Conteo"})]})]})]}),c.jsxs("div",{className:"md:col-span-1 space-y-4",children:[c.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[c.jsxs("h3",{className:"font-bold text-sm text-gray-700 mb-2 border-b uppercase",children:["Items en ",f||"..."]}),c.jsx("div",{className:"max-h-60 overflow-y-auto space-y-1",children:_.length===0?c.jsx("p",{className:"text-xs text-gray-400 text-center py-2",children:"Vaco"}):_.map(Q=>c.jsxs("div",{className:"flex justify-between items-center text-sm p-1 hover:bg-gray-50",children:[c.jsx("span",{className:"font-mono",children:Q.item_code}),c.jsx("span",{className:"font-bold",children:Q.counted_qty}),c.jsx("button",{onClick:()=>ce(Q.id),className:"text-red-500 font-bold px-2",children:""})]},Q.id))})]}),c.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[c.jsx("h3",{className:"font-bold text-sm text-gray-700 mb-2 border-b uppercase",children:"Progreso Sesin"}),c.jsx("div",{className:"max-h-60 overflow-y-auto space-y-1 mb-2",children:E.map(Q=>c.jsxs("div",{className:"flex justify-between text-xs p-1",children:[c.jsx("span",{children:Q.location_code}),c.jsx("span",{className:Q.status==="open"?"text-green-600":"text-red-600 font-bold",children:Q.status})]},Q.id))}),f&&c.jsxs("button",{onClick:le,className:"btn-sap btn-primary w-full text-xs",children:["Cerrar ",f]})]})]})]}),V&&c.jsx("div",{className:"fixed inset-0 bg-black/80 z-[100] flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg p-4 w-full max-w-md",children:[c.jsxs("h3",{className:"text-center font-bold mb-2",children:["Escanear ",L]}),c.jsx("div",{id:"reader",className:"rounded overflow-hidden"}),c.jsx("button",{onClick:()=>{P.current&&P.current.stop(),U(!1)},className:"btn-sap bg-red-600 text-white w-full mt-4",children:"Cancelar"})]})})]}):c.jsxs("div",{className:"container-wrapper max-w-lg mx-auto px-4 py-8 text-center bg-white rounded shadow mt-8",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-700 mb-4",children:"Gestin de Sesiones"}),c.jsx("p",{className:"mb-6 text-gray-500",children:"Inicie una sesin para comenzar el conteo de inventario."}),c.jsx("button",{onClick:ee,className:"btn-sap btn-primary w-full py-3",children:"Iniciar Nueva Sesin"})]})},n3=()=>{const{setTitle:e}=sn();R.useEffect(()=>{e("Logix - Etiquetado")},[e]);const[t,s]=R.useState(""),[a,u]=R.useState(1),[f,x]=R.useState(null),[m,y]=R.useState(!1),[w,N]=R.useState(null),b=R.useRef(null);R.useEffect(()=>{f!=null&&f.itemCode?ii.toDataURL(f.itemCode,{width:96,margin:1}).then(M=>N(M)).catch(M=>console.error(M)):N(null)},[f]);const T=async()=>{if(!t.trim()){he.error("Ingrese un cdigo de item");return}y(!0),x(null);try{const M=await fetch(`http://localhost:8000/api/get_item_details/${encodeURIComponent(t.toUpperCase())}`),H=await M.json();M.ok?(x({itemCode:H.item_code,description:H.description,binLocation:H.bin_location,aditionalBins:H.additional_bins,weight:H.weight_kg}),he.success("Item encontrado")):he.error(H.detail||"Item no encontrado")}catch(M){console.error(M),he.error("Error de conexin")}finally{y(!1)}},j=()=>{f&&window.print()},B=f?(parseFloat(f.weight||0)*parseInt(a||1)).toFixed(2):"N/A";return c.jsxs("div",{className:"container-wrapper px-4 py-4",children:[c.jsx(Ks,{position:"top-right",autoClose:3e3}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:[c.jsxs("div",{className:"lg:col-span-2 space-y-5 bg-white p-6 rounded-md shadow-md border border-gray-200",children:[c.jsx("div",{className:"bg-gray-50 text-gray-900 px-4 py-3 -mx-6 -mt-6 rounded-t-md mb-6 border-b border-gray-200",children:c.jsx("h1",{className:"text-base font-semibold tracking-tight",children:"Imprimir Etiqueta"})}),c.jsxs("div",{children:[c.jsx("label",{className:"form-label",children:"Item Code"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{ref:b,type:"text",value:t,onChange:M=>s(M.target.value.toUpperCase()),onKeyDown:M=>M.key==="Enter"&&T(),className:"flex-grow uppercase",placeholder:"Ingrese cdigo y presione Enter",autoFocus:!0}),c.jsx("button",{onClick:T,className:"btn-sap btn-secondary h-[38px] px-3 flex-shrink-0",disabled:m,children:m?"...":c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:c.jsx("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"})})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"form-label",children:"Item Description"}),c.jsx("div",{className:"data-field bg-gray-50",children:(f==null?void 0:f.description)||""})]}),c.jsxs("div",{children:[c.jsx("label",{className:"form-label",children:"Quantity Received"}),c.jsx("input",{type:"number",value:a,onChange:M=>u(M.target.value),min:"1",className:"w-1/3"})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-5",children:[c.jsxs("div",{children:[c.jsx("label",{className:"form-label",children:"Bin Location"}),c.jsx("div",{className:"data-field bg-gray-50",children:(f==null?void 0:f.binLocation)||""})]}),c.jsxs("div",{children:[c.jsx("label",{className:"form-label",children:"Additional Bins"}),c.jsx("div",{className:"data-field bg-gray-50 text-xs",children:(f==null?void 0:f.aditionalBins)||""})]})]})]}),c.jsxs("div",{className:"lg:col-span-1",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-700 mb-3 text-center",children:"Vista Previa"}),c.jsx("div",{className:"label-print-area flex justify-center",children:c.jsxs("div",{className:"label-container bg-white",children:[c.jsxs("div",{children:[c.jsx("img",{src:"/static/images/logoytpe_sandvik.png",alt:"Sandvik",className:"label-logo"}),c.jsx("p",{className:"label-item-code",children:(f==null?void 0:f.itemCode)||"ITEM CODE"}),c.jsx("p",{className:"label-item-description",children:(f==null?void 0:f.description)||"Item Description"}),c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"label-data-field",children:[c.jsx("span",{children:"Quantity Received"}),c.jsx("span",{children:a})]}),c.jsxs("div",{className:"label-data-field",children:[c.jsx("span",{children:"Product weight"}),c.jsxs("span",{children:[B," ",B!=="N/A"?"kg":""]})]}),c.jsxs("div",{className:"label-data-field",children:[c.jsx("span",{children:"Bin Location"}),c.jsx("span",{children:(f==null?void 0:f.binLocation)||"BIN"})]}),c.jsxs("div",{className:"label-data-field",children:[c.jsx("span",{children:"Packing Date"}),c.jsx("span",{children:new Date().toLocaleDateString("es-CO",{year:"2-digit",month:"2-digit",day:"2-digit"})})]})]})]}),c.jsxs("div",{className:"label-bottom-section mt-auto pt-4 flex items-end justify-between",children:[c.jsx("p",{className:"label-disclaimer text-[10px] leading-tight text-gray-500 max-w-[60%]",children:"All trademarks and logotypes appearing on this label are owned by Sandvik Group"}),c.jsx("div",{id:"qrCodeContainer",className:"border border-gray-200 rounded p-1",children:w?c.jsx("img",{src:w,alt:"QR",className:"w-full h-full object-contain"}):c.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-gray-400",children:"QR Code"})})]})]})}),c.jsx("button",{onClick:j,disabled:!f,className:"btn-sap btn-primary w-full mt-6 py-2",children:"Imprimir Etiqueta"})]})]})]})},r3=()=>{const{setTitle:e}=sn(),[t,s]=R.useState({start_date:"",end_date:"",holidays:[]}),[a,u]=R.useState([]),[f,x]=R.useState(!1),[m,y]=R.useState({executed:{},delta:{}}),[w,N]=R.useState("");R.useEffect(()=>{e("Logix - Planeacin de Conteos")},[e]);const[b,T]=R.useState({counts:{A:0,B:0,C:0},req:{A:0,B:0,C:0},daily:{A:0,B:0,C:0},workingDays:0,totalReq:0,totalDaily:0,monthlyPlanned:{A:Array(12).fill(0),B:Array(12).fill(0),C:Array(12).fill(0),Total:Array(12).fill(0)}});R.useEffect(()=>{(async()=>{try{const C=await fetch("http://localhost:8000/api/planner/config");if(C.ok){const V=await C.json();s(V),N(V.holidays?V.holidays.join(`
`):"")}const E=await fetch("http://localhost:8000/api/planner/current_plan");if(E.ok){const V=await E.json(),U=Array.isArray(V)?V:V.details||[];u(U)}const k=await fetch("http://localhost:8000/api/planner/execution/stats");if(k.ok){const V=await k.json();y(V)}}catch(C){console.error("Error cargando datos planner:",C)}})()},[]),R.useEffect(()=>{j()},[a,t]);const j=()=>{if(!a.length)return;const _={A:new Set,B:new Set,C:new Set},C={A:Array(12).fill(0),B:Array(12).fill(0),C:Array(12).fill(0)};a.forEach(L=>{const X=L["ABC Code"]||"C",P=L["Item Code"],J=L["Planned Date"];if(!J)return;const ne=new Date(J).getMonth();_[X]&&_[X].add(P),C[X]&&C[X][ne]++});const E={A:_.A.size,B:_.B.size,C:_.C.size},k={A:E.A*3,B:E.B*2,C:E.C*1};let V=0;if(t.start_date&&t.end_date){const L=new Date(t.start_date),X=new Date(t.end_date),P=w.split(`
`).filter(ee=>ee.trim()).map(ee=>new Date(ee).toDateString());let J=new Date(L);for(;J<=X;){const ee=J.getDay();ee!==0&&ee!==6&&!P.includes(J.toDateString())&&V++,J.setDate(J.getDate()+1)}}const U=Array(12).fill(0).map((L,X)=>C.A[X]+C.B[X]+C.C[X]);T({counts:E,req:k,daily:{A:V?(k.A/V).toFixed(1):0,B:V?(k.B/V).toFixed(1):0,C:V?(k.C/V).toFixed(1):0},workingDays:V,totalReq:k.A+k.B+k.C,totalDaily:V?((k.A+k.B+k.C)/V).toFixed(1):0,monthlyPlanned:{...C,Total:U}})},B=async()=>{x(!0);try{const _=new URLSearchParams({start_date:t.start_date,end_date:t.end_date}).toString(),C=await fetch(`http://localhost:8000/api/planner/update_plan?${_}`,{method:"POST"});if(C.ok){const E=await C.json();u(E.details||[]),alert("Planificacin actualizada correctamente.")}else alert("Error al actualizar planificacin.")}catch{alert("Error de conexin.")}finally{x(!1)}},M=async()=>{const _=w.split(`
`).map(E=>E.trim()).filter(E=>E),C={...t,holidays:_};try{(await fetch("http://localhost:8000/api/planner/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)})).ok&&(s(C),alert("Configuracin guardada."))}catch{alert("Error guardando configuracin.")}},H=({label:_,data:C,isTotal:E=!1})=>c.jsxs("tr",{children:[c.jsx("td",{className:`border border-gray-300 px-3 py-1 text-left ${E?"font-bold bg-gray-50":"font-medium"}`,children:_}),C&&C.map((k,V)=>c.jsx("td",{className:"border border-gray-300 px-2 py-1 text-center",children:k},V)),c.jsx("td",{className:`border border-gray-300 px-2 py-1 text-center ${E?"font-bold bg-gray-100":"font-bold bg-gray-50 text-gray-900"}`,children:C?C.reduce((k,V)=>k+V,0):0})]});return c.jsxs("div",{className:"container-wrapper max-w-[1600px] mx-auto p-4 font-sans text-sm text-[#32383e]",children:[c.jsxs("div",{className:"bg-white p-4 rounded shadow-sm border border-gray-200 mb-6",children:[c.jsx("h2",{className:"text-base font-bold text-gray-800 mb-2 border-l-4 border-[#0070d2] pl-2",children:"Parmetros Generales"}),c.jsxs("div",{className:"flex flex-wrap items-end gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"Fecha Inicial"}),c.jsx("input",{type:"date",className:"border border-gray-300 rounded px-2 py-1 text-sm focus:border-blue-500 outline-none",value:t.start_date,onChange:_=>s({...t,start_date:_.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"Fecha Final"}),c.jsx("input",{type:"date",className:"border border-gray-300 rounded px-2 py-1 text-sm focus:border-blue-500 outline-none",value:t.end_date,onChange:_=>s({...t,end_date:_.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"Festivos (Calc)"}),c.jsx("input",{readOnly:!0,className:"border border-gray-300 rounded px-2 py-1 text-sm bg-gray-100 w-20 text-center",value:t.holidays?t.holidays.length:0})]}),c.jsxs("div",{className:"ml-auto flex gap-2",children:[c.jsx("button",{onClick:M,className:"bg-green-600 text-white px-4 py-1.5 rounded text-sm hover:bg-green-700",children:"Guardar Fechas"}),c.jsx("button",{onClick:B,disabled:f,className:"bg-blue-800 text-white px-4 py-1.5 rounded text-sm hover:bg-blue-900 border border-blue-900",children:f?"Calculando...":"Actualizar Planificacin"}),c.jsx("button",{onClick:()=>window.location.href=`http://localhost:8000/api/planner/generate_plan?start_date=${t.start_date}&end_date=${t.end_date}`,className:"bg-blue-600 text-white px-4 py-1.5 rounded text-sm hover:bg-blue-700",children:"Generar Excel"})]})]})]}),c.jsxs("div",{className:"bg-white p-4 rounded shadow-sm border border-gray-200 mb-6 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-base font-bold text-purple-800 mb-0 border-l-4 border-purple-800 pl-2",children:"Ejecucin Diaria"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1 pl-3",children:"Accede a la interfaz de conteo ciego."})]}),c.jsx(or,{to:"/planner/execution",target:"_blank",className:"bg-purple-700 text-white px-6 py-2.5 rounded shadow hover:bg-purple-800 flex items-center gap-2 font-bold no-underline",children:"Ir a Pantalla de Conteo"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-base font-bold text-gray-800 mb-2 border-l-4 border-[#0070d2] pl-2",children:"Resumen Categoras (ABC)"}),c.jsxs("table",{className:"w-full border-collapse text-xs",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-200",children:[c.jsx("th",{className:"border border-gray-400 px-2 py-1",children:"Categora"}),c.jsx("th",{className:"border border-gray-400 px-2 py-1",children:"N Items"}),c.jsx("th",{className:"border border-gray-400 px-2 py-1",children:"Ciclos"}),c.jsx("th",{className:"border border-gray-400 px-2 py-1",children:"Total Req"}),c.jsx("th",{className:"border border-gray-400 px-2 py-1",children:"Items/Da"})]})}),c.jsxs("tbody",{children:[["A","B","C"].map(_=>c.jsxs("tr",{children:[c.jsx("td",{className:"border border-gray-400 px-2 py-1 font-bold text-center",children:_}),c.jsx("td",{className:"border border-gray-400 px-2 py-1 text-center bg-gray-50",children:b.counts[_]}),c.jsx("td",{className:"border border-gray-400 px-2 py-1 text-center",children:_==="A"?3:_==="B"?2:1}),c.jsx("td",{className:"border border-gray-400 px-2 py-1 text-center bg-gray-50",children:b.req[_]}),c.jsx("td",{className:"border border-gray-400 px-2 py-1 text-center bg-gray-50",children:b.daily[_]})]},_)),c.jsxs("tr",{className:"border-t-2 border-gray-400",children:[c.jsx("td",{colSpan:"2",className:"border border-gray-400 px-2 py-1 font-bold text-right",children:"Das tiles:"}),c.jsx("td",{colSpan:"3",className:"border border-gray-400 px-2 py-1 font-bold bg-yellow-50 text-center",children:b.workingDays})]}),c.jsxs("tr",{children:[c.jsx("td",{colSpan:"2",className:"border border-gray-400 px-2 py-1 font-bold text-right",children:"Total Requerido:"}),c.jsx("td",{colSpan:"3",className:"border border-gray-400 px-2 py-1 font-bold bg-yellow-50 text-center",children:b.totalReq})]})]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-base font-bold text-gray-800 mb-2 border-l-4 border-[#0070d2] pl-2",children:"Leyenda / Clasificacin"}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("table",{className:"w-auto border-collapse text-xs h-fit shadow-sm",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-[#34495e] text-white",children:[c.jsx("th",{className:"border border-gray-400 px-2 py-1 uppercase tracking-wider text-[10px]",children:"Cdigo"}),c.jsx("th",{className:"border border-gray-400 px-2 py-1 uppercase tracking-wider text-[10px] w-32",children:"Criterio (Hits)"})]})}),c.jsx("tbody",{children:[{c:"W",h:"More than 30 hits"},{c:"X",h:"11-30 hits"},{c:"Y",h:"7-10 hits"},{c:"K",h:"5-6 hits"},{c:"L",h:"3-4 hits"},{c:"Z",h:"1-2 hits"},{c:"0",h:"Non moving item"}].map(_=>c.jsxs("tr",{children:[c.jsx("td",{className:"border border-gray-300 px-2 py-0.5 font-bold text-center bg-gray-50",children:_.c}),c.jsx("td",{className:"border border-gray-300 px-2 py-0.5 text-left whitespace-nowrap bg-white",children:_.h})]},_.c))})]}),c.jsxs("div",{className:"flex-grow border border-gray-300 rounded bg-white flex flex-col shadow-sm",children:[c.jsx("div",{className:"bg-gray-200 px-2 py-1 text-xs font-bold border-b border-gray-300 text-center text-gray-700",children:"Festivos (YYYY-MM-DD)"}),c.jsx("textarea",{className:"w-full p-2 text-xs bg-transparent outline-none resize-none font-mono flex-grow",value:w,onChange:_=>N(_.target.value),placeholder:`2024-01-01
2024-05-01`})]})]})]})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white rounded shadow-sm border border-gray-200 overflow-hidden",children:[c.jsx("div",{className:"border-l-4 border-blue-600 bg-gray-50 px-4 py-2",children:c.jsx("h3",{className:"text-sm font-bold text-blue-800",children:"Planeado (Conteos Programados)"})}),c.jsx("div",{className:"p-0 overflow-x-auto",children:c.jsxs("table",{className:"w-full border-collapse text-xs",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"border border-gray-300 px-3 py-1.5 text-left font-bold min-w-[150px]",children:"Categoria/Mes"}),["ENE","FEB","MAR","ABR","MAY","JUN","JUL","AGO","SEP","OCT","NOV","DIC"].map(_=>c.jsx("th",{className:"border border-gray-300 px-2 py-1.5 text-center font-bold",children:_},_)),c.jsx("th",{className:"border border-gray-300 px-2 py-1.5 text-center font-bold",children:"TOTAL"})]})}),c.jsxs("tbody",{className:"text-gray-600",children:[c.jsx(H,{label:"A",data:b.monthlyPlanned.A}),c.jsx(H,{label:"B",data:b.monthlyPlanned.B}),c.jsx(H,{label:"C",data:b.monthlyPlanned.C}),c.jsx(H,{label:"TOTAL",data:b.monthlyPlanned.Total,isTotal:!0})]})]})})]}),c.jsxs("div",{className:"bg-white rounded shadow-sm border border-gray-200 overflow-hidden",children:[c.jsx("div",{className:"border-l-4 border-green-600 bg-gray-50 px-4 py-2",children:c.jsx("h3",{className:"text-sm font-bold text-green-800",children:"Ejecutado (Real)"})}),c.jsx("div",{className:"p-0 overflow-x-auto",children:c.jsxs("table",{className:"w-full border-collapse text-xs",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"border border-gray-300 px-3 py-1.5 text-left font-bold min-w-[150px]",children:"Categoria/Mes"}),["ENE","FEB","MAR","ABR","MAY","JUN","JUL","AGO","SEP","OCT","NOV","DIC"].map(_=>c.jsx("th",{className:"border border-gray-300 px-2 py-1.5 text-center font-bold",children:_},_)),c.jsx("th",{className:"border border-gray-300 px-2 py-1.5 text-center font-bold",children:"W2W"})]})}),c.jsxs("tbody",{className:"text-gray-600",children:[m.executed&&c.jsxs(c.Fragment,{children:[c.jsx(H,{label:"A",data:m.executed.A||Array(12).fill(0)}),c.jsx(H,{label:"B",data:m.executed.B||Array(12).fill(0)}),c.jsx(H,{label:"C",data:m.executed.C||Array(12).fill(0)}),c.jsxs("tr",{children:[c.jsx("td",{className:"border border-gray-300 px-3 py-1 text-left font-bold bg-gray-50",children:"TOTAL"}),Array(12).fill(0).map((_,C)=>{var k,V,U;const E=(((k=m.executed.A)==null?void 0:k[C])||0)+(((V=m.executed.B)==null?void 0:V[C])||0)+(((U=m.executed.C)==null?void 0:U[C])||0);return c.jsx("td",{className:"border border-gray-300 px-2 py-1 text-center font-bold bg-gray-50",children:E},C)}),c.jsx("td",{className:"border border-gray-300 px-2 py-1 text-center font-bold bg-gray-200",children:["A","B","C"].reduce((_,C)=>_+(m.executed[C]||[]).reduce((E,k)=>E+k,0),0)})]})]}),!m.executed&&c.jsx("tr",{children:c.jsx("td",{colSpan:"14",className:"text-center py-4 italic text-gray-400",children:"Cargando datos de ejecucin..."})})]})]})})]}),c.jsxs("div",{className:"bg-white rounded shadow-sm border border-gray-200 overflow-hidden",children:[c.jsx("div",{className:"border-l-4 border-red-600 bg-gray-50 px-4 py-2",children:c.jsx("h3",{className:"text-sm font-bold text-red-800",children:"Delta (Diferencia)"})}),c.jsx("div",{className:"p-0 overflow-x-auto",children:c.jsxs("table",{className:"w-full border-collapse text-xs",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"border border-gray-300 px-3 py-1.5 text-left font-bold min-w-[150px]",children:"Categoria/Mes"}),["ENE","FEB","MAR","ABR","MAY","JUN","JUL","AGO","SEP","OCT","NOV","DIC"].map(_=>c.jsx("th",{className:"border border-gray-300 px-2 py-1.5 text-center font-bold",children:_},_)),c.jsx("th",{className:"border border-gray-300 px-2 py-1.5 text-center font-bold",children:"TOTAL"})]})}),c.jsx("tbody",{className:"text-gray-600",children:m.delta&&c.jsxs(c.Fragment,{children:[c.jsx(H,{label:"A",data:m.delta.A||Array(12).fill(0)}),c.jsx(H,{label:"B",data:m.delta.B||Array(12).fill(0)}),c.jsx(H,{label:"C",data:m.delta.C||Array(12).fill(0)}),c.jsxs("tr",{children:[c.jsx("td",{className:"border border-gray-300 px-3 py-1 text-left font-bold bg-gray-50",children:"TOTAL"}),Array(12).fill(0).map((_,C)=>{var k,V,U;const E=(((k=m.delta.A)==null?void 0:k[C])||0)+(((V=m.delta.B)==null?void 0:V[C])||0)+(((U=m.delta.C)==null?void 0:U[C])||0);return c.jsx("td",{className:"border border-gray-300 px-2 py-1 text-center font-bold bg-gray-50",children:E},C)}),c.jsx("td",{className:"border border-gray-300 px-2 py-1 text-center font-bold bg-gray-200",children:["A","B","C"].reduce((_,C)=>_+(m.delta[C]||[]).reduce((E,k)=>E+k,0),0)})]})]})})]})})]})]})]})},s3=()=>{const{setTitle:e}=sn(),[t]=Yh(),s=new Date().toISOString().split("T")[0],[a,u]=R.useState(t.get("date")||s);R.useEffect(()=>{e("Ejecucin Diaria de Conteos")},[e]);const[f,x]=R.useState([]),[m,y]=R.useState(!1),[w,N]=R.useState(null),[b,T]=R.useState(null),[j,B]=R.useState(!1),[M,H]=R.useState(!1),[_,C]=R.useState(!1),E=R.useRef(null);R.useEffect(()=>{a&&U(a)},[a]),R.useEffect(()=>(M&&tl(async()=>{const{Html5Qrcode:J}=await Promise.resolve().then(()=>cl);return{Html5Qrcode:J}},void 0).then(({Html5Qrcode:J})=>{const ee=new J("planner-reader");E.current=ee,ee.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},ne=>{V(ne)},ne=>{}).catch(ne=>{console.error(ne),H(!1),he.error("Error al iniciar cmara")})}),()=>{E.current&&E.current.isScanning&&E.current.stop().then(()=>E.current.clear()).catch(console.error)}),[M]);const k=()=>{E.current&&E.current.applyVideoConstraints({advanced:[{torch:!_}]}).then(()=>C(!_)).catch(J=>{console.error(J),he.error("Flash no disponible")})},V=J=>{const ee=J.trim().toUpperCase(),ne=f.findIndex(fe=>fe.item_code===ee);ne!==-1?(he.success(`Item encontrado: ${ee}`),setTimeout(()=>{const fe=document.getElementById(`qty-${ne}`);fe&&(fe.scrollIntoView({behavior:"smooth",block:"center"}),fe.focus(),fe.select())},100),H(!1),E.current&&E.current.stop().then(()=>E.current.clear())):he.warning("Item no est en la lista de hoy")},U=async J=>{y(!0),N(null),x([]);try{const ee=await fetch(`http://localhost:8000/api/planner/execution/daily_items?date=${J}`);if(!ee.ok)throw new Error("Error al cargar tems planificados");const fe=(await ee.json()).map(Ne=>({...Ne,physical_qty:"",difference:null,status:"pending"}));x(fe)}catch(ee){N(ee.message)}finally{y(!1)}},L=(J,ee)=>{const ne=[...f];ne[J].physical_qty=ee,x(ne)},X=J=>{const ee=[...f],ne=ee[J],fe=parseInt(ne.physical_qty);if(!isNaN(fe)){const Ne=ne.system_qty||0;ne.difference=fe-Ne,ne.status="counted"}x(ee)},P=async J=>{const ee=f[J];if(ee.status==="counted"){B(!0),N(null),T(null);try{const ne={item_code:ee.item_code,item_description:ee.description,bin_location:ee.bin_location||"N/A",system_qty:ee.system_qty||0,physical_qty:parseInt(ee.physical_qty),difference:ee.difference,executed_date:a,username:"admin",abc_code:ee.abc_code};if(!(await fetch("http://localhost:8000/api/planner/save_execution",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ne)})).ok)throw new Error("Error al guardar el conteo");T(`Conteo guardado para ${ee.item_code}`),he.success(`Guardado: ${ee.item_code}`);const Ne=[...f];Ne[J].saved=!0,x(Ne)}catch(ne){N(ne.message),he.error("Error al guardar")}finally{B(!1)}}};return c.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[c.jsxs("div",{className:"bg-white p-4 rounded-lg shadow mb-6 flex items-center gap-4",children:[c.jsx("label",{className:"font-semibold text-gray-700",children:"Fecha de Ejecucin:"}),c.jsx("input",{type:"date",value:a,onChange:J=>u(J.target.value),className:"rounded border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"}),c.jsx("button",{onClick:()=>U(a),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded text-sm font-medium transition-colors",children:"Actualizar"}),c.jsxs("button",{onClick:()=>H(!0),className:"bg-gray-700 hover:bg-gray-800 text-white px-4 py-2 rounded text-sm font-medium transition-colors flex items-center gap-2 ml-auto",children:[c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:[c.jsx("path",{d:"M0 .5A.5.5 0 0 1 .5 0h3a.5.5 0 0 1 0 1H1v2.5a.5.5 0 0 1-1 0zm12 0a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0V1h-2.5a.5.5 0 0 1-.5-.5M.5 12a.5.5 0 0 1 .5.5V15h2.5a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5m15 0a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1 0-1H15v-2.5a.5.5 0 0 1 .5-.5M4 4h1v1H4z"}),c.jsx("path",{d:"M7 2H2v5h5zM3 3h3v3H3zm2 8H4v1h1z"}),c.jsx("path",{d:"M7 9H2v5h5zm-4 1h3v3H3zm8-6h1v1h-1z"}),c.jsx("path",{d:"M9 2h5v5H9zm1 1v3h3V3zM8 8v2h1v1H8v1h2v-2h1v2h1v-1h2v-1h-3V8zm2 2H9V9h1zm4 2h-1v1h-2v1h3zm-4 2v-1H8v1z"}),c.jsx("path",{d:"M12 9h2V8h-2z"})]}),"Escanear"]}),b&&c.jsx("span",{className:"text-green-600 text-sm font-medium ml-auto",children:b})]}),m?c.jsx("div",{className:"flex justify-center py-12",children:c.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-600"})}):w?c.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 p-4 rounded",children:w}):f.length===0?c.jsx("div",{className:"text-center py-12 text-gray-500 bg-white rounded shadow",children:"No hay tems planificados para esta fecha."}):c.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Item"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Ubicacin"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"ABC"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider",children:"Sistema"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider w-32",children:"Fsico"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider",children:"Dif"}),c.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium uppercase tracking-wider",children:"Accin"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map((J,ee)=>c.jsxs("tr",{className:J.saved?"bg-green-50":"",children:[c.jsxs("td",{className:"px-6 py-4",children:[c.jsx("div",{className:"text-sm font-medium text-indigo-600",children:J.item_code}),c.jsx("div",{className:"text-xs text-gray-500 truncate max-w-xs",children:J.description})]}),c.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 font-mono",children:J.bin_location||"N/A"}),c.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:J.abc_code}),c.jsx("td",{className:"px-6 py-4 text-sm text-right text-gray-900 font-medium",children:J.system_qty||0}),c.jsx("td",{className:"px-6 py-4 text-right",children:c.jsx("input",{type:"number",className:"w-24 text-right p-1 border rounded border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 text-sm",value:J.physical_qty,onChange:ne=>L(ee,ne.target.value),onBlur:()=>X(ee),disabled:J.saved})}),c.jsx("td",{className:"px-6 py-4 text-right",children:J.difference!==null&&c.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${J.difference===0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:J.difference>0?`+${J.difference}`:J.difference})}),c.jsx("td",{className:"px-6 py-4 text-center",children:J.saved?c.jsx("span",{className:"text-green-600 font-bold text-xs",children:"OK"}):c.jsx("button",{onClick:()=>P(ee),disabled:j||J.status!=="counted",className:`text-white px-3 py-1 rounded text-xs font-bold transition-colors ${J.status==="counted"?"bg-indigo-600 hover:bg-indigo-700":"bg-gray-300 cursor-not-allowed"}`,children:"Guardar"})})]},ee))})]})}),M&&c.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg relative",children:[c.jsx("h3",{className:"text-center font-bold text-lg mb-4 text-gray-800",children:"Apunta la cmara al cdigo de barras"}),c.jsx("div",{id:"planner-reader",className:"rounded-lg overflow-hidden mb-4 border-2 border-gray-100"}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:k,className:`flex items-center justify-center w-14 h-12 rounded bg-[#34495e] hover:bg-[#2c3e50] text-white transition-colors ${_?"ring-2 ring-yellow-400":""}`,title:_?"Apagar Flash":"Encender Flash",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 16 16",children:c.jsx("path",{d:"M2 6a6 6 0 1 1 10.174 4.31c-.203.196-.359.4-.453.619l-.762 1.769A.5.5 0 0 1 10.5 13a.5.5 0 0 1 0 1 .5.5 0 0 1 0 1l-.224.447a1 1 0 0 1-.894.553H6.618a1 1 0 0 1-.894-.553L5.5 15a.5.5 0 0 1 0-1 .5.5 0 0 1 0-1 .5.5 0 0 1-.46-.302l-.761-1.77a1.964 1.964 0 0 0-.453-.618A5.984 5.984 0 0 1 2 6zm6-5a5 5 0 0 0-3.479 8.592c.263.254.514.564.676.941L5.83 12h4.342l.632-1.467c.162-.377.413-.687.676-.941A5 5 0 0 0 8 1z"})})}),c.jsx("button",{onClick:()=>{E.current&&E.current.stop(),H(!1)},className:"flex-grow bg-[#d32f2f] hover:bg-[#b71c1c] text-white font-bold py-2 px-4 rounded transition-colors text-lg",children:"Cancelar"})]})]})})]})},bx=(e,t)=>{try{const s=new(window.AudioContext||window.webkitAudioContext),a=s.createOscillator(),u=s.createGain();a.connect(u),u.connect(s.destination),a.frequency.value=e,a.type=e>600?"sine":"square",u.gain.setValueAtTime(.3,s.currentTime),u.gain.exponentialRampToValueAtTime(.01,s.currentTime+t),a.start(s.currentTime),a.stop(s.currentTime+t)}catch(s){console.error("Audio error",s)}},i3=()=>bx(800,.1),m1=()=>bx(200,.2),a3=()=>{const{setTitle:e}=sn(),[t,s]=R.useState(""),[a,u]=R.useState(""),[f,x]=R.useState(!1),[m,y]=R.useState([]),[w,N]=R.useState(!1),[b,T]=R.useState(""),[j,B]=R.useState([]),[M,H]=R.useState(""),[_,C]=R.useState(!1),[E,k]=R.useState(!1),V=R.useRef(null),[U,L]=R.useState(!1),[X,P]=R.useState(!1),[J,ee]=R.useState("");R.useEffect(()=>{e("Logix - Chequeo de Picking"),ne()},[e]);const ne=async()=>{try{const Z=await fetch("/api/picking/tracking");Z.ok&&y(await Z.json())}catch(Z){console.error(Z)}},fe=async()=>{if(!t||!a){he.error("Ingrese Order y Despatch Number");return}x(!0);try{const Z=await fetch(`/api/picking/order/${t}/${a}`);if(Z.ok){const Q=await Z.json();if(Q&&Q.length>0){T(Q[0]["Customer Name"]);const xe=Q.map(ye=>({code:ye["Item Code"],description:ye["Item Description"],order_line:ye["Order Line"],qty_req:parseInt(ye.Qty||0),qty_scan:0,difference:0}));B(xe),N(!0),he.success("Pedido cargado")}else he.error("Pedido vacio o no encontrado")}else he.error("Pedido no encontrado")}catch{he.error("Error de conexin")}finally{x(!1)}},Ne=()=>{N(!1),B([]),s(""),u(""),T(""),ne()},K=Z=>{const Q=Z.trim().toUpperCase();if(!Q)return;const xe=j.findIndex(ye=>ye.code===Q);if(xe>-1){const ye=[...j],Ie=ye[xe];Ie.qty_scan+=1,Ie.difference=Ie.qty_scan-Ie.qty_req,B(ye),H(""),Ie.qty_scan<=Ie.qty_req?(i3(),he.success(`Ledo: ${Ie.code}`)):(m1(),he.warning(`Exceso: ${Ie.code}`))}else m1(),he.error(`Item NO pertenece al pedido: ${Q}`)},le=()=>{j.some(Q=>Q.qty_scan!==Q.qty_req)?L(!0):P(!0)},ce=async Z=>{const Q={order_number:t,despatch_number:a,customer_name:b,status:j.some(xe=>xe.qty_scan!==xe.qty_req)?"Con Diferencia":"Completo",items:j.map(xe=>({code:xe.code,description:xe.description,order_line:xe.order_line,qty_req:xe.qty_req,qty_scan:xe.qty_scan})),packages:parseInt(J||0)};try{const xe=await fetch("/api/save_picking_audit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)});if(xe.ok)he.success("Auditora Finalizada Correctamente"),Ne(),L(!1),P(!1),ee("");else{const ye=await xe.json();he.error(ye.detail||"Error al guardar")}}catch{he.error("Error de conexin")}};R.useEffect(()=>{if(_){let Z;return tl(async()=>{const{Html5Qrcode:Q}=await Promise.resolve().then(()=>cl);return{Html5Qrcode:Q}},void 0).then(({Html5Qrcode:Q})=>{Z=new Q("audit-reader"),V.current=Z,Z.start({facingMode:"environment"},{fps:10,qrbox:250},xe=>{Z.stop().then(()=>{Z.clear(),C(!1),V.current=null,K(xe)}).catch(console.error)},xe=>{}).catch(xe=>{console.error(xe),C(!1),he.error("Cmara no disponible")})}),()=>{Z&&Z.isScanning&&Z.stop().then(()=>Z.clear()).catch(console.error)}}},[_]);const $=()=>{V.current&&V.current.applyVideoConstraints({advanced:[{torch:!E}]}).then(()=>k(!E)).catch(Z=>{console.error(Z),he.error("Flash no disponible")})};return w?c.jsxs("div",{className:"container-wrapper max-w-5xl mx-auto px-4 py-4",children:[c.jsx(Ks,{position:"top-right",autoClose:2e3}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200",children:[c.jsxs("div",{className:"flex justify-between items-start mb-6 border-b pb-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Auditora en Curso"}),c.jsxs("p",{className:"text-gray-600",children:["Orden: ",c.jsxs("span",{className:"font-mono font-bold text-black",children:[t," / ",a]})]}),c.jsxs("p",{className:"text-gray-600",children:["Cliente: ",c.jsx("span",{className:"font-bold text-black",children:b})]})]}),c.jsx("button",{onClick:Ne,className:"btn-sap btn-secondary text-xs",children:"Cancelar / Salir"})]}),c.jsxs("div",{className:"mb-6 flex gap-2",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("label",{className:"form-label",children:"Item Code (Scan)"}),c.jsx("input",{type:"text",value:M,onChange:Z=>H(Z.target.value.toUpperCase()),onKeyDown:Z=>{Z.key==="Enter"&&(Z.preventDefault(),K(M))},className:"w-full uppercase",placeholder:"Escanear o escribir...",autoFocus:!0})]}),c.jsxs("div",{className:"flex items-end gap-2",children:[c.jsx("button",{onClick:()=>C(!0),className:"btn-sap btn-secondary h-[38px] px-3",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:[c.jsx("path",{d:"M0 .5A.5.5 0 0 1 .5 0h3a.5.5 0 0 1 0 1H1v2.5a.5.5 0 0 1-1 0zm12 0a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0V1h-2.5a.5.5 0 0 1-.5-.5M.5 12a.5.5 0 0 1 .5.5V15h2.5a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5m15 0a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1 0-1H15v-2.5a.5.5 0 0 1 .5-.5M4 4h1v1H4z"}),c.jsx("path",{d:"M7 2H2v5h5zM3 3h3v3H3zm2 8H4v1h1z"}),c.jsx("path",{d:"M7 9H2v5h5zm-4 1h3v3H3zm8-6h1v1h-1z"}),c.jsx("path",{d:"M9 2h5v5H9zm1 1v3h3V3zM8 8v2h1v1H8v1h2v-2h1v2h1v-1h2v-1h-3V8zm2 2H9V9h1zm4 2h-1v1h-2v1h3zm-4 2v-1H8v1z"}),c.jsx("path",{d:"M12 9h2V8h-2z"})]})}),c.jsx("button",{onClick:()=>K(M),className:"btn-sap btn-secondary h-[38px]",children:"Buscar"})]})]}),c.jsx("div",{className:"overflow-x-auto border border-gray-300 rounded mb-6",children:c.jsxs("table",{className:"w-full text-left sap-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Item"}),c.jsx("th",{children:"Descripcin"}),c.jsx("th",{className:"text-center w-16",children:"Req"}),c.jsx("th",{className:"text-center w-16",children:"Scan"}),c.jsx("th",{className:"text-center w-16",children:"Dif"})]})}),c.jsx("tbody",{children:j.map((Z,Q)=>{const xe=Z.qty_scan-Z.qty_req,ye=Z.qty_scan===Z.qty_req,Ie=Z.qty_scan>Z.qty_req;return c.jsxs("tr",{className:ye?"bg-green-50":Ie?"bg-red-50":"",children:[c.jsx("td",{className:"font-medium",children:Z.code}),c.jsx("td",{className:"text-sm truncate max-w-[200px]",children:Z.description}),c.jsx("td",{className:"text-center",children:Z.qty_req}),c.jsx("td",{className:"text-center font-bold",children:Z.qty_scan}),c.jsx("td",{className:`text-center font-bold ${xe!==0?"text-red-600":"text-green-600"}`,children:xe>0?`+${xe}`:xe})]},Q)})})]})}),c.jsx("button",{onClick:le,className:"btn-sap btn-primary w-full py-3 text-lg",children:"Finalizar Auditora"})]}),_&&c.jsx("div",{className:"fixed inset-0 bg-black/80 z-[100] flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg p-4 w-full max-w-md",children:[c.jsx("h3",{className:"text-center font-bold mb-2",children:"Escanear Cdigo"}),c.jsx("div",{id:"audit-reader",className:"rounded overflow-hidden"}),c.jsx("button",{onClick:$,className:"btn-sap btn-secondary w-full mt-2",children:E?"Apagar Flash ":"Encender Flash "}),c.jsx("button",{onClick:()=>{V.current&&V.current.stop(),C(!1)},className:"btn-sap bg-red-600 text-white w-full mt-4",children:"Cancelar"})]})}),U&&c.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-sm w-full",children:[c.jsx("h3",{className:"text-lg font-bold text-yellow-600 mb-2",children:"Diferencias Detectadas"}),c.jsx("p",{className:"mb-4 text-gray-700",children:"Hay tems con diferencias. Desea finalizar con errores?"}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx("button",{onClick:()=>L(!1),className:"btn-sap btn-secondary",children:"Cancelar"}),c.jsx("button",{onClick:()=>{L(!1),P(!0)},className:"btn-sap btn-primary bg-yellow-500 border-yellow-600",children:"S, Continuar"})]})]})}),X&&c.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-sm w-full",children:[c.jsx("h3",{className:"text-lg font-bold mb-2",children:"Cantidad de Bultos"}),c.jsx("p",{className:"mb-2 text-gray-600",children:"Ingrese total de paquetes:"}),c.jsx("input",{type:"number",value:J,onChange:Z=>ee(Z.target.value),className:"mb-4 text-center text-xl",autoFocus:!0,min:"0"}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx("button",{onClick:()=>P(!1),className:"btn-sap btn-secondary",children:"Cancelar"}),c.jsx("button",{onClick:()=>ce(),className:"btn-sap btn-success bg-green-600 border-green-700 text-white",children:"Finalizar"})]})]})})]}):c.jsxs("div",{className:"container-wrapper max-w-3xl mx-auto px-4 py-8",children:[c.jsx(Ks,{position:"top-right",autoClose:3e3}),c.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-xl border border-gray-200",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Cargar Pedido Picking"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"form-label",children:"Order Number"}),c.jsx("input",{type:"text",value:t,onChange:Z=>s(Z.target.value),placeholder:"Ej: 0043785"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"form-label",children:"Despatch Number"}),c.jsx("input",{type:"text",value:a,onChange:Z=>u(Z.target.value),placeholder:"Ej: 00"})]})]}),c.jsx("button",{onClick:fe,disabled:f,className:"btn-sap btn-primary w-full py-3 mb-8 text-base shadow-sm",children:f?"Cargando...":"Comenzar Auditora"}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("h3",{className:"font-semibold text-gray-700",children:"Pedidos Recientes"}),c.jsx("button",{onClick:ne,className:"text-blue-600 text-sm hover:underline",children:"Actualizar"})]}),c.jsx("div",{className:"border border-gray-200 rounded overflow-hidden max-h-60 overflow-y-auto",children:c.jsxs("table",{className:"w-full text-left text-sm sap-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Order"}),c.jsx("th",{children:"Despatch"}),c.jsx("th",{children:"Cliente"}),c.jsx("th",{children:"Lneas"}),c.jsx("th",{children:"Fecha"})]})}),c.jsx("tbody",{children:m.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:"5",className:"text-center p-4 text-gray-500",children:"No hay pedidos recientes"})}):m.map((Z,Q)=>c.jsxs("tr",{className:"cursor-pointer hover:bg-blue-50",onClick:()=>{s(Z.order_number),u(Z.despatch_number)},children:[c.jsx("td",{className:"font-medium",children:Z.order_number}),c.jsx("td",{children:Z.despatch_number}),c.jsx("td",{className:"truncate max-w-[150px]",children:Z.customer_name}),c.jsx("td",{className:"text-center font-bold text-blue-600",children:Z.total_lines}),c.jsx("td",{className:"text-gray-500 text-xs",children:Z.print_date})]},Q))})]})})]})]})]})},o3=()=>{const e=Sn(),[t,s]=R.useState(""),[a,u]=R.useState(""),f=async x=>{x.preventDefault();try{(await fetch("/api/admin/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:t})})).ok?e("/admin/users"):u("Contrasea incorrecta")}catch{u("Error de conexin")}};return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:c.jsxs("div",{className:"fiori-login-card",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Admin Login"}),c.jsx("p",{className:"text-gray-500",children:"Acceso restringido"})]}),a&&c.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded mb-4",children:a}),c.jsxs("form",{onSubmit:f,children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Contrasea Admin"}),c.jsx("input",{type:"password",className:"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500",value:t,onChange:x=>s(x.target.value),autoFocus:!0})]}),c.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white font-bold py-2 rounded hover:bg-blue-700",children:"Entrar"})]}),c.jsx("div",{className:"mt-4 text-center",children:c.jsx("button",{onClick:()=>e("/"),className:"text-sm text-gray-500 hover:text-gray-700",children:"Volver a Inicio"})})]})})},Cx=({children:e,title:t})=>{const s=Sn(),a=async()=>{s("/")};return c.jsxs("div",{className:"min-h-screen bg-[#f7f7f7] font-sans text-[#32363a]",children:[c.jsx("header",{className:"fixed top-0 w-full z-50 bg-[#354a5f] text-white h-12 flex items-center px-4 shadow-sm",children:c.jsxs("div",{className:"flex items-center gap-4 w-full max-w-7xl mx-auto",children:[c.jsx("img",{src:"/static/images/gear-wide-connected.svg",alt:"Logo",className:"h-6 w-6 opacity-80"}),c.jsx("h1",{className:"text-lg font-bold tracking-wide",children:"Panel de Administracin"}),c.jsxs("div",{className:"ml-auto flex gap-4 text-sm",children:[c.jsxs("button",{onClick:u=>{u.preventDefault()},className:"bg-transparent hover:bg-white/10 text-white px-3 py-1 rounded transition-colors flex items-center gap-2",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Recargar CSVs"]}),c.jsx(or,{to:"/admin/inventory",className:"bg-transparent hover:bg-white/10 text-white px-3 py-1 rounded transition-colors flex items-center",children:"Gestionar Inventario"}),c.jsx("button",{onClick:a,className:"bg-transparent hover:bg-white/10 text-white px-3 py-1 rounded transition-colors flex items-center",children:"Cerrar Sesin"})]})]})}),c.jsx("main",{className:"pt-20 px-4 md:px-8 pb-8 max-w-[1400px] mx-auto",children:e})]})},l3=()=>{const e=Sn(),[t,s]=R.useState([]),[a,u]=R.useState(null),[f,x]=R.useState(null),m=async()=>{try{const b=await fetch("/api/admin/users");if(b.status===401){e("/admin/login");return}if(!b.ok)throw new Error("Error loading users");const T=await b.json();s(T)}catch(b){x(b.message)}};R.useEffect(()=>{m()},[]);const y=async b=>{if(window.confirm("Aprobar este usuario?"))try{if(!(await fetch(`/api/admin/approve/${b}`,{method:"POST"})).ok)throw new Error("Failed to approve");u(`Usuario ${b} aprobado`),m()}catch(T){x(T.message)}},w=async b=>{if(window.confirm("ELIMINAR este usuario permanentemente?"))try{if(!(await fetch(`/api/admin/delete/${b}`,{method:"POST"})).ok)throw new Error("Failed to delete");u(`Usuario ${b} eliminado`),m()}catch(T){x(T.message)}},N=async b=>{const T=prompt("Ingrese nueva contrasea:");if(T)try{const j=new FormData;if(j.append("new_password",T),!(await fetch(`/api/admin/reset_password/${b}`,{method:"POST",body:j})).ok)throw new Error("Failed to reset password");u(`Contrasea restablecida para usuario ${b}`)}catch(j){x(j.message)}};return c.jsxs(Cx,{title:"Gestin de Usuarios",children:[a&&c.jsxs("div",{className:"mb-6 p-4 border-l-4 border-green-600 bg-green-50 text-green-800 rounded-r shadow-sm flex items-center gap-3",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),a]}),f&&c.jsxs("div",{className:"mb-6 p-4 border-l-4 border-red-600 bg-red-50 text-red-800 rounded-r shadow-sm flex items-center gap-3",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),f]}),c.jsxs("div",{className:"bg-white rounded shadow-sm border border-transparent hover:shadow-md transition-shadow",children:[c.jsxs("div",{className:"flex justify-between items-center p-6 bg-gray-50 border-b border-gray-200",children:[c.jsx("h2",{className:"text-xl font-normal text-gray-800",children:"Usuarios Registrados"}),c.jsxs("span",{className:"text-sm text-gray-500",children:[t.length," Usuarios"]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-sm text-left",children:[c.jsx("thead",{className:"uppercase font-normal text-xs border-b border-gray-200",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-center w-16",children:"ID"}),c.jsx("th",{className:"px-6 py-3 font-normal",children:"Usuario"}),c.jsx("th",{className:"px-6 py-3 text-center font-normal",children:"Estado"}),c.jsx("th",{className:"px-6 py-3 text-center font-normal",children:"Acciones"})]})}),c.jsxs("tbody",{className:"divide-y divide-gray-200",children:[t.map(b=>c.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[c.jsx("td",{className:"px-6 py-4 text-center text-gray-500",children:b.id}),c.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:b.username}),c.jsx("td",{className:"px-6 py-4 text-center",children:b.is_approved?c.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-700 border border-green-200/50",children:"Aprobado"}):c.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-orange-100 text-orange-700 border border-orange-200/50",children:"Pendiente"})}),c.jsx("td",{className:"px-6 py-4 text-center",children:c.jsxs("div",{className:"flex justify-center items-center gap-2",children:[c.jsx("button",{className:"px-3 py-1 border border-blue-500 text-blue-600 rounded text-xs hover:bg-blue-50 transition-colors",onClick:()=>{alert("Verificar contrasea (no implementado en React an)")},children:"Verificar"}),!b.is_approved&&c.jsx("button",{onClick:()=>y(b.id),className:"px-3 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 transition-colors border border-blue-600",children:"Aprobar"}),c.jsx("button",{onClick:()=>N(b.id),className:"px-3 py-1 border border-blue-500 text-blue-600 rounded text-xs hover:bg-blue-50 transition-colors",children:"Reset Pass"}),c.jsx("button",{onClick:()=>w(b.id),className:"p-1 text-red-600 hover:bg-red-50 rounded border border-red-200 ml-1",title:"Eliminar",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},b.id)),t.length===0&&c.jsx("tr",{children:c.jsx("td",{colSpan:"4",className:"text-center py-8 text-gray-400 italic",children:"No hay usuarios registrados."})})]})]})})]}),c.jsx("div",{className:"mt-8 text-center",children:c.jsxs("button",{onClick:()=>e("/"),className:"text-sm text-gray-500 hover:text-gray-800 flex items-center justify-center gap-2 mx-auto",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Volver a la aplicacin principal"]})})]})},c3=()=>{var M;const e=Sn(),[t,s]=R.useState(null),[a,u]=R.useState(0),[f,x]=R.useState(!1),[m,y]=R.useState(null),[w,N]=R.useState(null),b=async()=>{try{const H=await fetch("/api/admin/inventory/summary");if(H.status===401||H.status===403){e("/admin/login");return}if(!H.ok)throw new Error("Error al cargar estadsticas");const _=await H.json();s(_.stats),u(_.stage)}catch(H){N(H.message)}};R.useEffect(()=>{b()},[]);const T=async(H,_)=>{if(window.confirm(_)){x(!0),y(null),N(null);try{const C=await fetch(H,{method:"POST"});if(!C.ok){const k=await C.json();throw new Error(k.detail||"Error en la operacin")}const E=await C.json();y(E.message),b()}catch(C){N(C.message)}finally{x(!1)}}},j=H=>{window.location.href=`/api/export_recount_list/${H}`},B=()=>{window.location.href="/admin/inventory/report"};return c.jsxs(Cx,{title:"Administracin de Inventario",children:[c.jsxs("div",{className:"flex justify-between items-center mb-8 border-b border-gray-200 pb-4",children:[c.jsx("h1",{className:"text-2xl font-normal text-gray-800",children:"Panel de Control de Inventario"}),c.jsx("div",{className:"flex gap-4",children:c.jsx("button",{onClick:()=>e("/admin/users"),className:"bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-50 transition-colors text-sm font-medium",children:"Gestionar Usuarios"})})]}),m&&c.jsx("div",{className:"bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-6 rounded-r shadow-sm",children:m}),w&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6 rounded-r shadow-sm",children:w}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded shadow-sm border-t-4 border-[#0a6ed1] text-center",children:[c.jsx("h3",{className:"text-gray-500 uppercase text-xs font-bold tracking-wider mb-2",children:"Etapa Actual"}),c.jsx("div",{className:"text-4xl font-light text-[#0a6ed1]",children:a===0?"Sin Ciclo Activo":`Etapa ${a}`})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:`p-5 rounded shadow-sm border transition-all ${a===0||a===4?"bg-white border-blue-200 ring-1 ring-blue-100":"bg-gray-50 border-gray-200 opacity-60"}`,children:[c.jsxs("div",{className:"flex justify-between items-start mb-3",children:[c.jsx("h3",{className:"font-medium text-gray-900",children:"Etapa 1: Conteo Total"}),c.jsx("span",{className:"text-xs font-mono bg-gray-100 px-2 py-0.5 rounded text-gray-500",children:"INIT"})]}),c.jsx("p",{className:"text-gray-500 text-xs mb-4",children:"Inicia un nuevo ciclo. Limpia conteos anteriores. Requiere confirmacin."}),c.jsx("button",{onClick:()=>T("/api/admin/inventory/start_stage_1","Iniciar Etapa 1? Se borrarn todos los datos anteriores."),disabled:f||a!==0&&a!==4,className:"w-full bg-[#0a6ed1] text-white py-2 rounded text-sm hover:bg-[#0854a0] disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Iniciar Inventario"})]}),c.jsxs("div",{className:`p-5 rounded shadow-sm border transition-all ${a===1?"bg-white border-[#e9730c] ring-1 ring-orange-100":"bg-gray-50 border-gray-200 opacity-60"}`,children:[c.jsxs("div",{className:"flex justify-between items-start mb-3",children:[c.jsx("h3",{className:"font-medium text-gray-900",children:"Etapa 2: Primer Reconteo"}),c.jsx("span",{className:"text-xs font-mono bg-gray-100 px-2 py-0.5 rounded text-gray-500",children:"R1"})]}),c.jsx("p",{className:"text-gray-500 text-xs mb-4",children:"Calcula diferencias de Etapa 1 y genera listas."}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("button",{onClick:()=>T("/api/admin/inventory/advance_stage/2","Avanzar a Etapa 2?"),disabled:f||a!==1,className:"w-full bg-[#e9730c] text-white py-2 rounded text-sm hover:bg-[#cf660b] disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Calcular y Avanzar"}),a===2&&c.jsx("button",{onClick:()=>j(2),className:"w-full border border-green-600 text-green-700 py-1.5 rounded text-sm hover:bg-green-50 transition-colors",children:"Descargar Lista Reconteo"})]})]}),c.jsxs("div",{className:`p-5 rounded shadow-sm border transition-all ${a===2?"bg-white border-[#e9730c] ring-1 ring-orange-100":"bg-gray-50 border-gray-200 opacity-60"}`,children:[c.jsxs("div",{className:"flex justify-between items-start mb-3",children:[c.jsx("h3",{className:"font-medium text-gray-900",children:"Etapa 3: Segundo Reconteo"}),c.jsx("span",{className:"text-xs font-mono bg-gray-100 px-2 py-0.5 rounded text-gray-500",children:"R2"})]}),c.jsx("p",{className:"text-gray-500 text-xs mb-4",children:"Revisin de diferencias persistentes."}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("button",{onClick:()=>T("/api/admin/inventory/advance_stage/3","Avanzar a Etapa 3?"),disabled:f||a!==2,className:"w-full bg-[#e9730c] text-white py-2 rounded text-sm hover:bg-[#cf660b] disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Calcular y Avanzar"}),a===3&&c.jsx("button",{onClick:()=>j(3),className:"w-full border border-green-600 text-green-700 py-1.5 rounded text-sm hover:bg-green-50 transition-colors",children:"Descargar Lista Reconteo"})]})]}),c.jsxs("div",{className:`p-5 rounded shadow-sm border transition-all ${a===3?"bg-white border-[#e9730c] ring-1 ring-orange-100":"bg-gray-50 border-gray-200 opacity-60"}`,children:[c.jsxs("div",{className:"flex justify-between items-start mb-3",children:[c.jsx("h3",{className:"font-medium text-gray-900",children:"Etapa 4: Final"}),c.jsx("span",{className:"text-xs font-mono bg-gray-100 px-2 py-0.5 rounded text-gray-500",children:"FIN"})]}),c.jsx("p",{className:"text-gray-500 text-xs mb-4",children:"ltimo conteo de diferencias restantes."}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("button",{onClick:()=>T("/api/admin/inventory/advance_stage/4","Avanzar a Etapa 4?"),disabled:f||a!==3,className:"w-full bg-[#e9730c] text-white py-2 rounded text-sm hover:bg-[#cf660b] disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Avanzar a Etapa 4"}),a===4&&c.jsx("button",{onClick:()=>j(4),className:"w-full border border-green-600 text-green-700 py-1.5 rounded text-sm hover:bg-green-50 transition-colors",children:"Descargar Lista Reconteo"})]})]})]}),c.jsxs("div",{className:`p-6 rounded shadow-sm border transition-all ${a===4?"bg-white border-green-500 ring-1 ring-green-100 check-pattern":"bg-gray-50 border-gray-200 opacity-60"}`,children:[c.jsx("h3",{className:"text-lg font-medium text-green-800 mb-2",children:"Finalizar Ciclo"}),c.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Cierra el inventario y permite generar informe final."}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a===4&&c.jsx("button",{onClick:B,className:"flex-1 bg-white border border-blue-600 text-blue-700 py-2 rounded text-sm hover:bg-blue-50 transition-colors font-medium",children:"Generar Informe Final (Excel)"}),c.jsx("button",{onClick:()=>T("/api/admin/inventory/finalize","Finalizar Inventario?"),disabled:f||a!==4,className:"flex-1 bg-[#107e3e] text-white py-2 rounded text-sm hover:bg-[#0c6b33] disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors font-medium",children:"Finalizar y Cerrar Inventario"})]})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded shadow-sm h-fit border border-gray-200 sticky top-20",children:[c.jsx("h2",{className:"text-lg font-normal text-gray-800 mb-4 border-b pb-2",children:"Resumen en Tiempo Real"}),t?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"General"}),c.jsxs("div",{className:"flex justify-between items-center text-sm mb-2",children:[c.jsx("span",{className:"text-gray-600",children:"Items en Maestro"}),c.jsx("span",{className:"font-mono font-medium bg-gray-100 px-2 py-0.5 rounded",children:((M=t.general)==null?void 0:M.total_items_master)||0})]})]}),c.jsx("div",{className:"space-y-4",children:t.stages&&Object.entries(t.stages).map(([H,_])=>c.jsxs("div",{className:"group",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),c.jsxs("h4",{className:"font-medium text-sm text-gray-800",children:["Etapa ",H]})]}),c.jsxs("div",{className:"pl-4 border-l-2 border-gray-100 group-hover:border-blue-100 transition-colors space-y-1",children:[c.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[c.jsx("span",{children:"Contados:"}),c.jsx("span",{className:"font-medium",children:_.items_counted})]}),c.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[c.jsx("span",{children:"Unidades:"}),c.jsx("span",{className:"font-medium",children:_.total_units_counted})]}),c.jsxs("div",{className:"flex justify-between text-xs text-red-600 bg-red-50 px-1 rounded",children:[c.jsx("span",{children:"Diferencias:"}),c.jsx("span",{className:"font-bold",children:_.items_with_discrepancy})]}),c.jsxs("div",{className:"flex justify-between text-xs text-green-700 bg-green-50 px-1 rounded mt-1",children:[c.jsx("span",{children:"Precisin:"}),c.jsx("span",{className:"font-bold",children:_.accuracy})]}),_.items_in_recount_list!==void 0&&_.items_in_recount_list>0&&c.jsxs("div",{className:"flex justify-between text-xs font-bold text-orange-600 mt-2 border-t pt-1 border-gray-100",children:[c.jsx("span",{children:"Para Reconteo:"}),c.jsx("span",{children:_.items_in_recount_list})]})]})]},H))})]}):c.jsx("div",{className:"flex justify-center py-8 text-gray-400",children:c.jsx("span",{className:"text-sm",children:"Cargando datos..."})})]})]})]})},u3=()=>{const e=Sn(),{setTitle:t}=sn(),[s,a]=R.useState([]),[u,f]=R.useState(!0),[x,m]=R.useState(null),[y,w]=R.useState(""),[N,b]=R.useState(""),[T,j]=R.useState("");R.useEffect(()=>{t("Gestionar Conteos")},[t]);const B=async()=>{f(!0);try{const _=await fetch("/api/counts/all");if(!_.ok)throw new Error("Error loading counts");const C=await _.json();a(C)}catch(_){m(_.message)}finally{f(!1)}};R.useEffect(()=>{B()},[]);const M=async _=>{if(window.confirm("Eliminar este conteo permanentemente?"))try{if(!(await fetch(`/api/counts/${_}`,{method:"DELETE"})).ok)throw new Error("Error deleting");B()}catch(C){alert(C.message)}},H=async _=>{_.preventDefault();try{const C=await fetch("/api/locations/reopen",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:parseInt(y),location_code:N})});if(!C.ok){const E=await C.json();throw new Error(E.detail||"Error")}j(`Ubicacin ${N} reabierta.`),w(""),b(""),setTimeout(()=>j(""),5e3)}catch(C){alert(C.message)}};return c.jsxs("div",{className:"max-w-[1920px] mx-auto px-4 py-6 font-sans text-sm text-[#32363a]",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h1",{className:"text-xl font-normal text-[#32363a] mb-1",children:"Gestionar Conteos Individuales"}),c.jsx("p",{className:"text-sm text-[#6a6d70]",children:"Visualiza y administra todos los registros de conteo del sistema"})]}),c.jsx("div",{className:"mb-6 max-w-lg",children:c.jsxs("div",{className:"bg-[#fff3cd] border-l-4 border-[#e9730c] rounded p-4 shadow-sm",children:[c.jsxs("div",{className:"flex items-center mb-3 text-[#e9730c]",children:[c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),c.jsx("h2",{className:"text-base font-semibold text-[#32363a]",children:"Reabrir Ubicacin"})]}),T&&c.jsx("div",{className:"text-green-600 text-xs font-bold mb-2",children:T}),c.jsxs("form",{onSubmit:H,className:"space-y-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-semibold text-[#32363a] mb-0.5",children:"ID Sesin:"}),c.jsx("input",{type:"number",value:y,onChange:_=>w(_.target.value),className:"block w-full border border-[#89919a] rounded p-1 h-9",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-semibold text-[#32363a] mb-0.5",children:"Cd. Ubicacin:"}),c.jsx("input",{type:"text",value:N,onChange:_=>b(_.target.value.toUpperCase()),className:"block w-full border border-[#89919a] rounded p-1 h-9",required:!0})]}),c.jsx("button",{type:"submit",className:"w-full bg-[#e9730c] hover:bg-[#d1670b] text-white font-medium py-2 rounded text-sm transition-colors h-9",children:"Reabrir"})]})]})}),c.jsx("div",{className:"flex justify-end items-center mb-6",children:c.jsxs("button",{onClick:()=>e("/view_counts"),className:"inline-flex items-center px-4 py-2 border border-[#0854a0] text-[#0a6ed1] bg-white text-sm font-medium rounded hover:bg-[#ebf5fe] transition-colors",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16l-4-4m0 0l4-4m-4 4h18"})}),"Volver a vista agrupada (Validar)"]})}),c.jsxs("div",{className:"bg-white shadow-sm rounded border border-[#d9d9d9] overflow-hidden",children:[c.jsxs("div",{className:"bg-[#f2f2f2] px-4 py-3 border-b border-[#e5e5e5] flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2 text-[#32363a]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),c.jsx("h2",{className:"text-sm font-semibold text-[#32363a]",children:"Tabla de Conteos"})]}),c.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-[#f2f2f2] text-[#6a6d70]",children:[s.length," registros"]})]}),c.jsx("div",{className:"overflow-x-auto max-h-[70vh]",children:c.jsxs("table",{className:"min-w-full text-left border-collapse",children:[c.jsx("thead",{className:"sticky top-0 z-10",children:c.jsx("tr",{children:["ID Conteo","ID Sesin","Usuario","Timestamp","Item Code","Descripcin","Ubic. Contada","Cant. Contada","Accin"].map((_,C)=>c.jsx("th",{className:"px-4 py-2 border-b border-[#e5e5e5] text-xs font-semibold uppercase tracking-wider whitespace-nowrap",children:_},C))})}),"                        ",c.jsx("tbody",{className:"divide-y divide-[#e5e5e5]",children:u?c.jsx("tr",{children:c.jsx("td",{colSpan:"9",className:"p-8 text-center text-gray-500",children:"Cargando..."})}):s.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:"9",className:"p-12 text-center text-gray-500",children:c.jsx("p",{className:"font-medium",children:"No hay registros"})})}):s.map(_=>c.jsxs("tr",{className:"hover:bg-[#f5f5f5] transition-colors",children:[c.jsx("td",{className:"px-4 py-2 border-b border-[#e5e5e5] text-sm font-semibold",children:_.id}),c.jsx("td",{className:"px-4 py-2 border-b border-[#e5e5e5] text-sm",children:_.session_id}),c.jsx("td",{className:"px-4 py-2 border-b border-[#e5e5e5] text-sm font-medium",children:_.username||"-"}),c.jsx("td",{className:"px-4 py-2 border-b border-[#e5e5e5] text-xs text-gray-600 whitespace-nowrap",children:_.timestamp}),c.jsx("td",{className:"px-4 py-2 border-b border-[#e5e5e5] text-sm font-bold",children:_.item_code}),c.jsx("td",{className:"px-4 py-2 border-b border-[#e5e5e5] text-sm text-gray-600 truncate max-w-[200px]",title:_.item_description,children:_.item_description}),c.jsx("td",{className:"px-4 py-2 border-b border-[#e5e5e5] text-sm",children:_.counted_location}),c.jsx("td",{className:"px-4 py-2 border-b border-[#e5e5e5] text-sm",children:_.counted_qty}),c.jsxs("td",{className:"px-4 py-2 border-b border-[#e5e5e5] text-center flex gap-1 justify-center",children:[c.jsx("button",{onClick:()=>e(`/counts/edit/${_.id}`),title:"Editar",className:"text-indigo-600 hover:bg-indigo-50 p-1 rounded",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),c.jsx("button",{onClick:()=>M(_.id),title:"Eliminar",className:"text-red-600 hover:bg-red-50 p-1 rounded",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},_.id))})]})})]})]})},d3=()=>{const e=Sn(),{setTitle:t}=sn(),[s,a]=R.useState([]),[u,f]=R.useState(!0),[x,m]=R.useState(null),[y,w]=R.useState([]),[N,b]=R.useState({total_items_with_stock:"-",total_items_counted:"-",items_with_differences:"-",items_with_positive_differences:"-",items_with_negative_differences:"-",total_locations_with_stock:"-",counted_locations:"-"}),[T,j]=R.useState([]),[B,M]=R.useState("");R.useEffect(()=>{t("Control de Conteos")},[t]);const H=async()=>{f(!0);try{const E=await fetch("/api/counts/all");if(!E.ok)throw new Error("Error loading counts");const k=await E.json();a(k),w(k);const V=[...new Set(k.map(L=>L.username).filter(Boolean))];j(V);const U=await fetch("/api/counts/stats");if(U.ok){const L=await U.json();b(L)}}catch(E){m(E.message)}finally{f(!1)}};R.useEffect(()=>{H()},[]),R.useEffect(()=>{w(B?s.filter(E=>E.username===B):s)},[B,s]);const _=async E=>{if(window.confirm("Eliminar este conteo permanentemente?"))try{if(!(await fetch(`/api/counts/${E}`,{method:"DELETE"})).ok)throw new Error("Error deleting");H()}catch(k){alert(k.message)}},C=E=>E==null?"text-gray-700":E>0?"text-blue-600":E<0?"text-red-600":"text-gray-700";return c.jsxs("div",{className:"max-w-[1920px] mx-auto px-4 py-6 font-sans text-sm text-[#32363a]",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h1",{className:"text-xl font-normal text-[#32363a] mb-1",children:"Control de Conteos"}),c.jsx("p",{className:"text-sm text-[#6a6d70]",children:"Visualiza y analiza los conteos del inventario"})]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4 mb-8",children:[{title:"Items con Stock",val:N.total_items_with_stock,color:"text-[#6a6d70]"},{title:"Items Contados",val:N.total_items_counted,color:"text-[#107e3e]"},{title:"Items con Diferencia",val:N.items_with_differences,color:"text-[#e9730c]"},{title:"Dif. Positiva",val:N.items_with_positive_differences,color:"text-[#0a6ed1]"},{title:"Dif. Negativa",val:N.items_with_negative_differences,color:"text-[#b00]"},{title:"Ubic. en uso",val:N.total_locations_with_stock,color:"text-[#6a6d70]"},{title:"Ubic. Contadas",val:N.counted_locations,color:"text-[#0a6ed1]"}].map((E,k)=>c.jsxs("div",{className:"bg-white border border-[#d9d9d9] rounded p-4 text-center shadow-[0_0_0_1px_rgba(0,0,0,0.05)] hover:-translate-y-0.5 hover:shadow-[0_2px_8px_0_rgba(0,0,0,0.15)] transition-all",children:[c.jsx("h3",{className:`text-xs font-semibold uppercase tracking-wider mb-2 ${E.color}`,children:E.title}),c.jsx("p",{className:`text-2xl font-bold ${E.color}`,children:E.val})]},k))}),c.jsxs("div",{className:"flex justify-between items-center mb-6 p-3 bg-white rounded border border-[#d9d9d9]",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("label",{className:"text-sm font-normal text-[#32363a]",children:"Filtrar usuario:"}),c.jsxs("select",{value:B,onChange:E=>M(E.target.value),className:"h-9 border border-[#89919a] rounded px-2 bg-white text-[#32363a] focus:border-[#0a6ed1] focus:ring-1 focus:ring-[#0a6ed1] outline-none",children:[c.jsx("option",{value:"",children:"Todos"}),T.map(E=>c.jsx("option",{value:E,children:E},E))]})]}),c.jsx("div",{className:"flex gap-4",children:c.jsxs("a",{href:"/api/export_counts?tz=America/Bogota",className:"inline-flex items-center px-4 py-2 border border-[#0854a0] text-[#0a6ed1] bg-white text-sm font-medium rounded hover:bg-[#ebf5fe] transition-colors",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),"Exportar"]})})]}),c.jsxs("div",{className:"bg-white shadow-sm rounded border border-[#d9d9d9] overflow-hidden",children:[c.jsxs("div",{className:"bg-[#f2f2f2] px-4 py-3 border-b border-[#e5e5e5] flex items-center",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2 text-[#32363a]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),c.jsx("h2",{className:"text-sm font-semibold text-[#32363a]",children:"Detalle de Conteos"})]}),c.jsx("div",{className:"overflow-x-auto max-h-[70vh]",children:c.jsxs("table",{className:"min-w-full text-left border-collapse",children:[c.jsx("thead",{className:"sticky top-0 z-10",children:c.jsx("tr",{children:["Etapa","ID Sesin","Usuario","Timestamp","Item Code","Descripcin","Ubic. Contada","Cant. Sistema","Cant. Contada","Diferencia","Ubic. Sistema","Acciones"].map((E,k)=>c.jsx("th",{className:"px-4 py-2 border-b border-[#e5e5e5] text-xs font-semibold uppercase tracking-wider whitespace-nowrap",children:E},k))})}),c.jsx("tbody",{className:"divide-y divide-[#e5e5e5]",children:u?c.jsx("tr",{children:c.jsx("td",{colSpan:"12",className:"p-8 text-center text-gray-500",children:"Cargando..."})}):y.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:"12",className:"p-12 text-center text-gray-500",children:c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("svg",{className:"h-12 w-12 text-gray-300 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),c.jsx("p",{className:"font-medium",children:"No hay registros de conteo"})]})})}):y.map(E=>c.jsxs("tr",{className:"hover:bg-[#f5f5f5] transition-colors",children:[c.jsx("td",{className:"px-4 py-2 border-b border-[#e5e5e5] text-sm",children:E.inventory_stage||"-"}),c.jsx("td",{className:"px-4 py-2 border-b border-[#e5e5e5] text-sm",children:E.session_id}),c.jsx("td",{className:"px-4 py-2 border-b border-[#e5e5e5] text-sm font-medium",children:E.username||"-"}),c.jsx("td",{className:"px-4 py-2 border-b border-[#e5e5e5] text-xs text-gray-600 whitespace-nowrap",children:E.timestamp}),c.jsx("td",{className:"px-4 py-2 border-b border-[#e5e5e5] text-sm font-bold",children:E.item_code}),c.jsx("td",{className:"px-4 py-2 border-b border-[#e5e5e5] text-sm text-gray-600 truncate max-w-[200px]",title:E.item_description,children:E.item_description}),c.jsx("td",{className:"px-4 py-2 border-b border-[#e5e5e5] text-sm",children:E.counted_location}),c.jsx("td",{className:"px-4 py-2 border-b border-[#e5e5e5] text-sm font-medium",children:E.system_qty!==null?E.system_qty:"-"}),c.jsx("td",{className:"px-4 py-2 border-b border-[#e5e5e5] text-sm",children:E.counted_qty}),c.jsx("td",{className:"px-4 py-2 border-b border-[#e5e5e5] text-sm font-bold",children:c.jsx("span",{className:C(E.difference),children:E.difference!==null?E.difference:"-"})}),c.jsx("td",{className:"px-4 py-2 border-b border-[#e5e5e5] text-sm text-gray-600",children:E.bin_location_system||"-"}),c.jsxs("td",{className:"px-4 py-2 border-b border-[#e5e5e5] text-center flex gap-1",children:[c.jsx("button",{onClick:()=>e(`/counts/edit/${E.id}`),title:"Editar",className:"text-indigo-600 hover:bg-indigo-50 p-1 rounded",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),c.jsx("button",{onClick:()=>_(E.id),title:"Eliminar",className:"text-red-600 hover:bg-red-50 p-1 rounded",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},E.id))})]})})]})]})},f3=()=>{const{id:e}=zh(),t=Sn(),[s,a]=R.useState(null),[u,f]=R.useState(""),[x,m]=R.useState(!0),[y,w]=R.useState(null);R.useEffect(()=>{(async()=>{try{const T=await fetch(`/api/counts/${e}`);if(!T.ok)throw new Error("Count not found");const j=await T.json();a(j),f(j.counted_qty)}catch(T){w(T.message)}finally{m(!1)}})()},[e]);const N=async b=>{b.preventDefault();try{if(!(await fetch(`/api/counts/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({counted_qty:u})})).ok)throw new Error("Error updating count");t("/counts/manage")}catch(T){w(T.message)}};return x?c.jsx(Ds,{children:c.jsx("div",{className:"p-8",children:"Cargando..."})}):y?c.jsx(Ds,{children:c.jsx("div",{className:"p-8 text-red-600",children:y})}):s?c.jsx(Ds,{title:`Editar Conteo #${e}`,children:c.jsx("div",{className:"max-w-2xl mx-auto px-4 py-8",children:c.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[c.jsxs("h1",{className:"text-2xl font-bold mb-6",children:["Editar Conteo #",e]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6 text-sm text-gray-600",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-bold",children:"Item:"})," ",s.item_code]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-bold",children:"Sesin:"})," ",s.session_id]}),c.jsxs("div",{className:"col-span-2",children:[c.jsx("span",{className:"font-bold",children:"Descripcin:"})," ",s.item_description]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-bold",children:"Ubicacin:"})," ",s.counted_location]})]}),c.jsxs("form",{onSubmit:N,children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:"Cantidad Contada"}),c.jsx("input",{type:"number",value:u,onChange:b=>f(b.target.value),className:"w-full border p-2 rounded text-lg",required:!0})]}),c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{type:"button",onClick:()=>t("/counts/manage"),className:"bg-gray-200 text-gray-700 px-4 py-2 rounded hover:bg-gray-300",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 font-bold",children:"Guardar Cambios"})]})]})]})})}):c.jsx(Ds,{children:c.jsx("div",{className:"p-8",children:"No encontrado"})})},h3=()=>{const{setTitle:e}=sn(),[t,s]=R.useState([]),[a,u]=R.useState(!0),[f,x]=R.useState(null),[m,y]=R.useState("");R.useEffect(()=>{e("Historial de Inbound")},[]),R.useEffect(()=>{(async()=>{try{const b=await fetch("/api/logs/inbound");if(!b.ok)throw new Error("Error loading logs");const T=await b.json();s(T)}catch(b){x(b.message)}finally{u(!1)}})()},[]);const w=t.filter(N=>N.itemCode&&N.itemCode.toLowerCase().includes(m.toLowerCase())||N.user&&N.user.toLowerCase().includes(m.toLowerCase()));return c.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Registros de Entrada (Inbound)"}),c.jsx("div",{className:"w-1/3",children:c.jsx("input",{type:"text",placeholder:"Buscar por item o usuario...",className:"w-full border p-2 rounded shadow-sm",value:m,onChange:N=>y(N.target.value)})})]}),f&&c.jsx("div",{className:"bg-red-100 text-red-700 p-3 mb-4 rounded",children:f}),c.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"ID"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Timestamp"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Usuario"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Item"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Recibido"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Sistema"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Diferencia"})]})}),c.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[a&&c.jsx("tr",{children:c.jsx("td",{colSpan:"7",className:"p-4 text-center",children:"Cargando..."})}),w.length===0&&!a&&c.jsx("tr",{children:c.jsx("td",{colSpan:"7",className:"p-4 text-center",children:"No encontrado."})}),w.map(N=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:N.id}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:N.timestamp}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:N.user}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-600 font-bold",children:N.itemCode}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:N.qtyReceived}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:N.qtySystem}),c.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm font-bold ${N.difference<0?"text-red-600":"text-green-600"}`,children:N.difference})]},N.id))]})]})})]})},x3=()=>{const{setTitle:e}=sn(),[t,s]=R.useState({success:"",error:""}),[a,u]=R.useState(!1),[f,x]=R.useState(!1),[m,y]=R.useState([]);R.useEffect(()=>{e("Actualizar Ficheros")},[e]);const[w,N]=R.useState("combine"),[b,T]=R.useState(""),[j,B]=R.useState(""),[M,H]=R.useState([]),[_,C]=R.useState([]),[E,k]=R.useState(!1),[V,U]=R.useState(null);R.useEffect(()=>{const le=m.find(ce=>{const $=ce.name.toLowerCase();return $.includes("280")||$.includes("pedido")||$.includes("reporte")});le?le!==V&&!E&&L(le):(H([]),C([]),U(null))},[m,V,E]);const L=async le=>{k(!0),U(le);try{const ce=new FormData;ce.append("file",le);const $=await fetch("/api/preview_grn_file",{method:"POST",body:ce}),Z=await $.json();$.ok&&Z.grns&&(H(Z.grns),C(Z.grns))}catch(ce){console.error("Error previewing GRNs:",ce),s({success:"",error:"Error al leer las GRNs del archivo."}),U(null)}finally{k(!1)}},X=le=>{le.preventDefault(),le.stopPropagation(),le.type==="dragenter"||le.type==="dragover"?x(!0):le.type==="dragleave"&&x(!1)},P=le=>{le.preventDefault(),le.stopPropagation(),x(!1),le.dataTransfer.files&&le.dataTransfer.files[0]&&ee(le.dataTransfer.files)},J=le=>{le.preventDefault(),le.target.files&&le.target.files[0]&&ee(le.target.files)},ee=le=>{y(ce=>[...ce,...Array.from(le)])},ne=le=>{y(ce=>ce.filter(($,Z)=>Z!==le))},fe=async le=>{le.preventDefault(),s({success:"",error:""}),u(!0);const ce=new FormData;m.forEach($=>{const Z=$.name.toLowerCase();Z.includes("master")||Z.includes("item")?ce.append("item_master",$):Z.includes("280")||Z.includes("pedido")||Z.includes("reporte")?ce.append("grn_file",$):(Z.includes("240")||Z.includes("picking"))&&ce.append("picking_file",$)}),ce.append("update_option_280",w),M.length>0&&ce.append("selected_grns_280",JSON.stringify(_));try{const $=await fetch("/api/update",{method:"POST",body:ce}),Z=await $.json();$.ok?(s({success:Z.message,error:""}),y([]),H([]),C([])):s({success:"",error:Z.error||"Error uploading files"})}catch($){s({success:"",error:$.message})}finally{u(!1)}},Ne=async le=>{if(le.preventDefault(),!window.confirm("PELIGRO! Ests seguro de que quieres borrar TODOS los logs? Esta accin no se puede deshacer."))return;s({success:"",error:""}),u(!0);const ce=new FormData;ce.append("password",b);try{const $=await fetch("/api/clear_database",{method:"POST",body:ce}),Z=await $.json();$.ok?(s({success:Z.message,error:""}),T("")):s({success:"",error:Z.error||"Error clearing database"})}catch($){s({success:"",error:$.message})}finally{u(!1)}},K=async le=>{le.preventDefault(),s({success:"",error:""}),u(!0);const ce=new FormData;ce.append("password",j);try{const $=await fetch("/api/export_all_log",{method:"POST",body:ce});if($.ok){const Z=await $.blob(),Q=window.URL.createObjectURL(Z),xe=document.createElement("a");xe.href=Q,xe.download=`Backup_${new Date().toISOString().slice(0,10)}.xlsx`,document.body.appendChild(xe),xe.click(),xe.remove(),s({success:"Backup generado correctamente",error:""})}else{const Z=await $.json();s({success:"",error:Z.error||"Error generating backup"})}}catch($){s({success:"",error:$.message})}finally{u(!1)}};return c.jsxs("div",{className:"container-wrapper max-w-4xl mx-auto px-4 py-8",children:[t.error&&c.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:t.error}),t.success&&c.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:t.success}),c.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden mb-8 border border-gray-200",children:[c.jsx("div",{className:"bg-gray-100 px-6 py-4 border-b border-gray-200",children:c.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Actualizacin de Archivos"})}),c.jsxs("div",{className:"p-6",children:[c.jsx("p",{className:"text-gray-600 mb-6 text-sm",children:"Suba los ficheros para actualizar la base de datos maestra y de GRN."}),c.jsxs("form",{onSubmit:fe,children:[c.jsxs("div",{className:`border-2 border-dashed rounded-lg p-10 text-center transition-colors cursor-pointer mb-6 ${f?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:X,onDragLeave:X,onDragOver:X,onDrop:P,onClick:()=>document.getElementById("file-upload").click(),children:[c.jsx("input",{id:"file-upload",type:"file",multiple:!0,accept:".csv",className:"hidden",onChange:J}),c.jsxs("div",{className:"flex flex-col items-center justify-center",children:[c.jsx("svg",{className:"w-12 h-12 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),c.jsxs("p",{className:"text-gray-600 font-medium mb-1",children:[c.jsx("span",{className:"font-bold text-gray-700",children:"Click to upload"})," or drag and drop"]}),c.jsx("p",{className:"text-gray-400 text-sm",children:"CSV files (250, 280, 240)"})]})]}),m.length>0&&c.jsxs("div",{className:"mb-6 space-y-2",children:[c.jsx("h4",{className:"text-sm font-bold text-gray-700",children:"Archivos seleccionados:"}),m.map((le,ce)=>c.jsxs("div",{className:"flex items-center justify-between text-sm bg-gray-50 p-2 rounded border border-gray-200",children:[c.jsxs("span",{className:"flex items-center gap-2 text-gray-700",children:[c.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})}),le.name]}),c.jsx("button",{type:"button",onClick:()=>ne(ce),className:"text-red-500 hover:text-red-700",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]},ce))]}),M.length>0&&c.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[c.jsx("p",{className:"font-medium text-gray-700 mb-3",children:"Opcin de actualizacin para el archivo 280:"}),c.jsxs("div",{className:"flex items-center gap-6 mb-4",children:[c.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"radio",value:"combine",checked:w==="combine",onChange:le=>N(le.target.value),className:"form-radio text-blue-600 h-4 w-4"}),c.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Combinar (Agregar nuevas)"})]}),c.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[c.jsx("input",{type:"radio",value:"replace",checked:w==="replace",onChange:le=>N(le.target.value),className:"form-radio text-blue-600 h-4 w-4"}),c.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Reemplazar Todo"})]})]}),c.jsxs("div",{className:"border-t border-gray-200 pt-3",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("p",{className:"font-medium text-gray-700 text-sm",children:"Seleccionar GRNs a importar:"}),c.jsxs("div",{className:"text-xs",children:[c.jsx("button",{type:"button",onClick:()=>C([...M]),className:"text-blue-600 hover:underline mr-2",children:"Seleccionar Todas"}),c.jsx("span",{className:"text-gray-300",children:"|"}),c.jsx("button",{type:"button",onClick:()=>C([]),className:"text-blue-600 hover:underline ml-2",children:"Deseleccionar Todas"})]})]}),c.jsx("div",{className:"max-h-48 overflow-y-auto bg-white p-3 rounded border border-gray-200 grid grid-cols-2 gap-2",children:M.map(le=>c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:`grn-${le}`,checked:_.includes(le),onChange:ce=>{ce.target.checked?C($=>[...$,le]):C($=>$.filter(Z=>Z!==le))},className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500"}),c.jsx("label",{htmlFor:`grn-${le}`,className:"ml-2 text-xs text-gray-700 truncate cursor-pointer",title:le,children:le})]},le))}),c.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Solo se importarn las filas correspondientes a las GRNs marcadas."})]})]}),c.jsxs("button",{disabled:a||m.length===0,type:"submit",className:"w-full bg-[#1e73be] hover:bg-blue-700 text-white font-medium py-3 px-4 rounded transition-colors flex items-center justify-center gap-2 shadow-sm",children:[c.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),a?"Procesando...":"Subir y Actualizar Archivos"]})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"bg-red-50 shadow rounded-lg p-6 border border-red-200",children:[c.jsxs("h2",{className:"text-xl font-bold mb-4 text-red-800 flex items-center",children:[c.jsx("svg",{className:"w-6 h-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Zona de Peligro"]}),c.jsxs("form",{onSubmit:Ne,children:[c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Ingrese la contrasea administrativa para borrar TODO el historial."}),c.jsx("input",{type:"password",placeholder:"Contrasea Admin",value:b,onChange:le=>T(le.target.value),className:"w-full border p-2 rounded mb-4",required:!0}),c.jsx("button",{disabled:a,type:"submit",className:"w-full bg-red-600 text-white py-2 px-4 rounded hover:bg-red-700 font-bold",children:"Limpiar Base de Datos"})]})]}),c.jsxs("div",{className:"bg-green-50 shadow rounded-lg p-6 border border-green-200",children:[c.jsxs("h2",{className:"text-xl font-bold mb-4 text-green-800 flex items-center",children:[c.jsx("svg",{className:"w-6 h-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Backup Completo"]}),c.jsxs("form",{onSubmit:K,children:[c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Exportar todo el historial de logs (activo + archivado)."}),c.jsx("input",{type:"password",placeholder:"Contrasea Admin",value:j,onChange:le=>B(le.target.value),className:"w-full border p-2 rounded mb-4",required:!0}),c.jsx("button",{disabled:a,type:"submit",className:"w-full bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 font-bold",children:"Descargar Backup"})]})]})]})]})},g3=()=>{const e=Sn(),[t,s]=R.useState({username:"",password:"",confirmPassword:""}),[a,u]=R.useState(null),[f,x]=R.useState(null),m=async y=>{if(y.preventDefault(),u(null),x(null),t.password!==t.confirmPassword){x("Las contraseas no coinciden.");return}try{const w=new FormData;w.append("username",t.username),w.append("password",t.password);const N=await fetch("/api/register",{method:"POST",body:w}),b=await N.json();N.ok?(u(b.message),setTimeout(()=>e("/login"),3e3)):x(b.error||"Error en el registro.")}catch(w){x(w.message)}};return c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:c.jsxs("div",{className:"px-8 py-6 mt-4 text-left bg-white shadow-lg rounded-lg w-full max-w-md",children:[c.jsx("div",{className:"flex justify-center mb-6",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-12 h-12 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})})}),c.jsx("h3",{className:"text-2xl font-bold text-center text-gray-800",children:"Registro de Cuenta"}),c.jsx("p",{className:"mt-2 text-sm text-center text-gray-600",children:"nete al sistema Logix"}),a&&c.jsx("div",{className:"mt-4 p-3 bg-green-100 text-green-700 rounded text-sm",children:a}),f&&c.jsx("div",{className:"mt-4 p-3 bg-red-100 text-red-700 rounded text-sm",children:f}),c.jsxs("form",{onSubmit:m,className:"mt-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Usuario"}),c.jsx("input",{type:"text",name:"username",required:!0,className:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600",value:t.username,onChange:y=>s({...t,username:y.target.value})})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Contrasea"}),c.jsx("input",{type:"password",name:"password",required:!0,className:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600",value:t.password,onChange:y=>s({...t,password:y.target.value})})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Confirmar Contrasea"}),c.jsx("input",{type:"password",name:"confirmPassword",required:!0,className:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600",value:t.confirmPassword,onChange:y=>s({...t,confirmPassword:y.target.value})})]}),c.jsx("div",{className:"flex items-center justify-between mt-6",children:c.jsx("button",{type:"submit",className:"w-full px-6 py-2 leading-5 text-white transition-colors duration-200 transform bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:bg-blue-700",children:"Registrarse"})})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsx("a",{href:"/login",className:"text-sm text-blue-600 hover:underline",children:"Ya tienes cuenta? Inicia sesin"})})]})})},p3=()=>{const e=Sn(),[t]=Yh(),s=t.get("token"),[a,u]=R.useState({newPassword:"",confirmPassword:""}),[f,x]=R.useState(null),[m,y]=R.useState(null);R.useEffect(()=>{s||y("Token de seguridad no proporcionado o invlido.")},[s]);const w=async N=>{if(N.preventDefault(),x(null),y(null),a.newPassword!==a.confirmPassword){y("Las contraseas no coinciden.");return}try{const b=new FormData;b.append("token",s),b.append("new_password",a.newPassword),b.append("confirm_password",a.confirmPassword);const T=await fetch("/api/set_password",{method:"POST",body:b}),j=await T.json();T.ok?(x(j.message),setTimeout(()=>e("/login"),3e3)):y(j.error||"Error al restablecer la contrasea.")}catch(b){y(b.message)}};return c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:c.jsxs("div",{className:"px-8 py-6 mt-4 text-left bg-white shadow-lg rounded-lg w-full max-w-md",children:[c.jsx("div",{className:"flex justify-center mb-6",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-12 h-12 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),c.jsx("h3",{className:"text-2xl font-bold text-center text-gray-800",children:"Restablecer Contrasea"}),c.jsx("p",{className:"mt-2 text-sm text-center text-gray-600",children:"Establece tu nueva contrasea de acceso"}),f&&c.jsx("div",{className:"mt-4 p-3 bg-green-100 text-green-700 rounded text-sm",children:f}),m&&c.jsx("div",{className:"mt-4 p-3 bg-red-100 text-red-700 rounded text-sm",children:m}),s&&!f&&c.jsxs("form",{onSubmit:w,className:"mt-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nueva Contrasea"}),c.jsx("input",{type:"password",name:"newPassword",required:!0,className:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600",value:a.newPassword,onChange:N=>u({...a,newPassword:N.target.value})})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Confirmar Contrasea"}),c.jsx("input",{type:"password",name:"confirmPassword",required:!0,className:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600",value:a.confirmPassword,onChange:N=>u({...a,confirmPassword:N.target.value})})]}),c.jsx("div",{className:"flex items-center justify-between mt-6",children:c.jsx("button",{type:"submit",className:"w-full px-6 py-2 leading-5 text-white transition-colors duration-200 transform bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:bg-blue-700",children:"Guardar Contrasea"})})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsx("a",{href:"/login",className:"text-sm text-blue-600 hover:underline",children:"Volver a Inicio de Sesin"})})]})})},m3=()=>{const{id:e}=zh(),[t,s]=R.useState(null),[a,u]=R.useState(!0),[f,x]=R.useState(null);if(R.useEffect(()=>{(async()=>{try{const N=await fetch(`/api/picking/packing_list/${e}`);if(!N.ok)throw new Error("Error loading data");const b=await N.json();s(b)}catch(N){x(N.message)}finally{u(!1)}})()},[e]),a)return c.jsx("div",{className:"p-8",children:"Generando Packing List..."});if(f)return c.jsxs("div",{className:"p-8 text-red-600",children:["Error: ",f]});if(!t)return c.jsx("div",{className:"p-8",children:"No datos."});const{packages:m}=t,y=Object.keys(m).sort((w,N)=>parseInt(w)-parseInt(N));return c.jsxs("div",{className:"bg-white min-h-screen text-black p-8 font-sans",children:[c.jsx("style",{children:`
                @media print {
                    @page { margin: 1cm; size: A4; }
                    body { 
                        -webkit-print-color-adjust: exact; 
                        font-family: Arial, Helvetica, sans-serif !important;
                    }
                    .no-print { display: none !important; }
                    .page-break { page-break-inside: avoid; margin-bottom: 2rem; }
                }
            `}),c.jsxs("div",{className:"no-print mb-6 sticky top-0 bg-white border-b p-4 shadow-sm z-10 flex justify-between items-center",children:[c.jsx("h1",{className:"text-lg font-bold",children:"Vista Previa Packing List"}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:()=>window.close(),className:"bg-gray-200 text-gray-800 px-4 py-2 rounded hover:bg-gray-300",children:"Cerrar"}),c.jsx("button",{onClick:()=>window.print(),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 font-bold",children:"Imprimir"})]})]}),c.jsxs("div",{className:"max-w-3xl mx-auto border p-8 print:border-none print:p-0",children:[c.jsxs("div",{className:"text-center mb-8 border-b pb-4",children:[c.jsx("h1",{className:"text-3xl font-extrabold uppercase tracking-wide mb-2",children:"Packing List"}),c.jsx("div",{className:"text-sm text-gray-500",children:t.timestamp})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-8 text-sm",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-gray-500 uppercase text-xs",children:"Cliente"}),c.jsx("p",{className:"text-lg font-semibold",children:t.customer_name})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"font-bold text-gray-500 uppercase text-xs",children:"Total Bultos"}),c.jsx("p",{className:"text-lg font-semibold",children:t.total_packages})]}),c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-gray-500 uppercase text-xs",children:"Pedido"}),c.jsx("p",{className:"text-lg",children:t.order_number})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"font-bold text-gray-500 uppercase text-xs",children:"Despacho"}),c.jsx("p",{className:"text-lg",children:t.despatch_number})]})]}),c.jsx("div",{className:"space-y-6",children:y.length===0?c.jsx("p",{className:"text-center text-gray-500 italic py-8",children:"No hay items asignados a bultos."}):y.map(w=>c.jsxs("div",{className:"page-break border rounded-lg overflow-hidden break-inside-avoid shadow-sm print:shadow-none print:border-gray-300",children:[c.jsxs("div",{className:"bg-gray-100 px-4 py-2 border-b flex justify-between items-center print:bg-gray-50",children:[c.jsxs("h3",{className:"font-bold text-lg",children:["Bulto #",w]}),c.jsxs("span",{className:"text-xs text-gray-500 font-mono",children:["BOX-",w.padStart(3,"0")]})]}),c.jsxs("table",{className:"min-w-full text-sm",children:[c.jsx("thead",{className:"bg-gray-50 text-gray-500",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left w-1/4",children:"Cdigo"}),c.jsx("th",{className:"px-4 py-2 text-left w-1/2",children:"Descripcin"}),c.jsx("th",{className:"px-4 py-2 text-right w-1/4",children:"Cantidad"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-100",children:m[w].map((N,b)=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-2 font-mono text-gray-700",children:N.item_code}),c.jsx("td",{className:"px-4 py-2 text-gray-600 truncate max-w-xs",children:N.description}),c.jsx("td",{className:"px-4 py-2 text-right font-bold",children:N.quantity})]},b))})]})]},w))}),c.jsx("div",{className:"mt-12 pt-8 border-t text-center text-xs text-gray-400",children:c.jsx("p",{children:"Logix - Sistema de Gestin de Almacn"})})]})]})},y3=()=>{const e=Sn(),{setTitle:t}=sn(),[s,a]=R.useState([]),[u,f]=R.useState(!0),[x,m]=R.useState(null),[y,w]=R.useState("");R.useEffect(()=>{t("Logix - Registro de Conteos")},[t]),R.useEffect(()=>{(async()=>{try{const B=await fetch("/api/counts/recordings");if(!B.ok)throw new Error("Error loading recordings");const M=await B.json();a(M)}catch(B){m(B.message)}finally{f(!1)}})()},[]);const N=j=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(j),b=()=>{window.location.href="/api/counts/export_recordings"},T=s.filter(j=>j.item_code&&j.item_code.toLowerCase().includes(y.toLowerCase())||j.description&&j.description.toLowerCase().includes(y.toLowerCase())||j.username&&j.username.toLowerCase().includes(y.toLowerCase()));return c.jsxs("div",{className:"w-full bg-gray-50 min-h-screen font-sans text-[#333]",children:[c.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center sticky top-[48px] z-20",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:"Registro Histrico"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Detalle de todas las ejecuciones de conteo cclico"})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("input",{type:"text",placeholder:"Buscar...",className:"border border-gray-300 px-3 py-1.5 rounded text-sm w-64 focus:outline-none focus:border-blue-500",value:y,onChange:j=>w(j.target.value)}),c.jsxs("button",{onClick:b,className:"bg-white border border-blue-600 text-blue-600 hover:bg-blue-50 px-4 py-1.5 rounded text-sm font-medium flex items-center gap-2 transition-colors",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 011.414.586l2.914 2.914a1 1 0 01.586 1.414V19a2 2 0 01-2 2z"})}),"Exportar"]}),c.jsx("button",{onClick:()=>e("/counts"),className:"text-gray-500 hover:text-gray-700",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})]}),c.jsxs("div",{className:"p-4 overflow-x-auto",children:[u&&c.jsx("div",{className:"text-center p-8 text-sm text-gray-500",children:"Cargando datos..."}),x&&c.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded text-sm mb-4",children:x}),!u&&!x&&c.jsxs("table",{className:"w-full text-left border-collapse bg-white shadow-sm text-[11px] leading-tight",children:[c.jsx("thead",{className:"bg-gray-100 text-gray-600 border-b border-gray-200",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-2 py-3 font-bold uppercase tracking-wider",children:"STOCKROOM"}),c.jsx("th",{className:"px-2 py-3 font-bold uppercase tracking-wider",children:"ITEM CODE"}),c.jsx("th",{className:"px-2 py-3 font-bold uppercase tracking-wider w-64",children:"DESCRIPTION"}),c.jsx("th",{className:"px-2 py-3 font-bold uppercase tracking-wider",children:"ITEM TYPE"}),c.jsx("th",{className:"px-2 py-3 font-bold uppercase tracking-wider",children:"CLASS"}),c.jsx("th",{className:"px-2 py-3 font-bold uppercase tracking-wider",children:"GROUP"}),c.jsx("th",{className:"px-2 py-3 font-bold uppercase tracking-wider",children:"SIC (CO)"}),c.jsx("th",{className:"px-2 py-3 font-bold uppercase tracking-wider",children:"SIC (STK)"}),c.jsx("th",{className:"px-2 py-3 font-bold uppercase tracking-wider text-right",children:"WEIGHT"}),c.jsx("th",{className:"px-2 py-3 font-bold uppercase tracking-wider text-center",children:"ABC"}),c.jsx("th",{className:"px-2 py-3 font-bold uppercase tracking-wider",children:"BIN"}),c.jsx("th",{className:"px-2 py-3 font-bold uppercase tracking-wider text-right",children:"SYS STOCK"}),c.jsx("th",{className:"px-2 py-3 font-bold uppercase tracking-wider text-right",children:"COUNTED"}),c.jsx("th",{className:"px-2 py-3 font-bold uppercase tracking-wider text-right",children:"DIFF"}),c.jsx("th",{className:"px-2 py-3 font-bold uppercase tracking-wider text-right",children:"VALUE (DIFFERENCE)"}),c.jsx("th",{className:"px-2 py-3 font-bold uppercase tracking-wider text-right",children:"ITEM COST"}),c.jsx("th",{className:"px-2 py-3 font-bold uppercase tracking-wider text-right",children:"COUNT VALUE"}),c.jsx("th",{className:"px-2 py-3 font-bold uppercase tracking-wider text-right",children:"DATE"}),c.jsx("th",{className:"px-2 py-3 font-bold uppercase tracking-wider",children:"USER"})]})}),c.jsxs("tbody",{className:"divide-y divide-gray-100",children:[T.map((j,B)=>c.jsxs("tr",{className:`hover:bg-blue-50 transition-colors ${B%2===0?"bg-white":"bg-gray-50/30"}`,children:[c.jsx("td",{className:"px-2 py-2 font-medium text-gray-900",children:j.stockroom}),c.jsx("td",{className:"px-2 py-2",children:c.jsx("span",{className:"text-blue-600 font-medium hover:underline cursor-pointer",children:j.item_code})}),c.jsx("td",{className:"px-2 py-2 truncate max-w-[200px]",title:j.description,children:j.description}),c.jsx("td",{className:"px-2 py-2 text-gray-500",children:j.item_type}),c.jsx("td",{className:"px-2 py-2 text-gray-500",children:j.item_class}),c.jsx("td",{className:"px-2 py-2 text-gray-500",children:j.item_group}),c.jsx("td",{className:"px-2 py-2 text-gray-500",children:j.sic_company}),c.jsx("td",{className:"px-2 py-2 text-gray-500",children:j.sic_stockroom}),c.jsx("td",{className:"px-2 py-2 text-right",children:j.weight}),c.jsx("td",{className:"px-2 py-2 text-center",children:j.abc_code&&c.jsx("span",{className:`inline-block w-5 h-5 leading-5 rounded-full text-[9px] font-bold 
                                                ${j.abc_code==="A"?"bg-red-100 text-red-800":j.abc_code==="B"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:j.abc_code})}),c.jsx("td",{className:"px-2 py-2 font-mono text-gray-700",children:j.bin_location}),c.jsx("td",{className:"px-2 py-2 text-right font-medium text-gray-600",children:j.system_qty}),c.jsx("td",{className:"px-2 py-2 text-right font-bold text-gray-900",children:j.physical_qty}),c.jsx("td",{className:`px-2 py-2 text-right font-bold ${j.difference!==0?"text-red-600":"text-gray-300"}`,children:j.difference}),c.jsx("td",{className:"px-2 py-2 text-right text-gray-500",children:N(j.value_diff)}),c.jsx("td",{className:"px-2 py-2 text-right text-gray-500",children:N(j.cost)}),c.jsx("td",{className:"px-2 py-2 text-right text-gray-800 font-medium",children:N(j.count_value)}),c.jsx("td",{className:"px-2 py-2 text-right whitespace-nowrap text-gray-500",children:j.executed_date?new Date(j.executed_date).toISOString().slice(0,10):"-"}),c.jsx("td",{className:"px-2 py-2 text-gray-500 truncate max-w-[100px]",children:j.username})]},j.id)),T.length===0&&c.jsx("tr",{children:c.jsx("td",{colSpan:"19",className:"px-4 py-12 text-center text-gray-400",children:"No se encontraron registros que coincidan con la bsqueda."})})]})]})]})]})},w3=()=>{const[e,t]=R.useState([]),[s,a]=R.useState([]),[u,f]=R.useState(!1),[x,m]=R.useState(null),[y,w]=R.useState(null),[N,b]=R.useState(""),[T,j]=R.useState("all"),[B,M]=R.useState({open:!1,id:null,itemCode:"",desc:"",loc:"",system:0,counted:0}),[H,_]=R.useState({open:!1,id:null,itemCode:""});R.useEffect(()=>{C()},[]),R.useEffect(()=>{E()},[e,N,T]);const C=async()=>{f(!0),m(null);try{const P=await fetch("http://localhost:8000/api/counts/differences");if(!P.ok)throw new Error("Error al cargar datos");const J=await P.json();t(J.items||[])}catch(P){m(P.message)}finally{f(!1)}},E=()=>{let P=[...e];const J=N.toUpperCase();J&&(P=P.filter(ee=>ee.item_code.includes(J))),T==="negative"?P=P.filter(ee=>ee.difference<0):T==="positive"?P=P.filter(ee=>ee.difference>0):T==="zero"&&(P=P.filter(ee=>ee.difference===0)),a(P)},k=P=>{M({open:!0,id:P.count_id,itemCode:P.item_code,desc:P.description,loc:P.location,system:P.system_qty,counted:P.counted_qty})},V=async()=>{const P=parseInt(B.counted);if(isNaN(P)||P<0){alert("Cantidad invlida");return}try{if(!(await fetch(`http://localhost:8000/api/counts/${B.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({counted_qty:P})})).ok)throw new Error("Error al guardar");w("Cantidad actualizada exitosamente"),M({...B,open:!1}),C(),setTimeout(()=>w(null),3e3)}catch(J){alert(J.message)}},U=P=>{_({open:!0,id:P.count_id,itemCode:P.item_code})},L=async()=>{try{if(!(await fetch(`http://localhost:8000/api/counts/${H.id}`,{method:"DELETE"})).ok)throw new Error("Error al eliminar");w("Registro eliminado"),_({...H,open:!1}),C(),setTimeout(()=>w(null),3e3)}catch(P){alert(P.message)}},X=()=>{window.location.href="http://localhost:8000/api/export_counts"};return c.jsxs(Ds,{title:"Gestin de Diferencias de Conteo",children:[c.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-xl font-normal text-gray-800",children:"Gestin de Diferencias"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Verifica y edita las cantidades contadas vs. sistema"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:X,className:"btn-sap btn-secondary flex items-center gap-2",children:[c.jsx("span",{className:"text-green-600 font-bold",children:""})," Exportar Excel"]}),c.jsxs("button",{onClick:C,className:"btn-sap btn-secondary flex items-center gap-2",children:[c.jsx("span",{children:""})," Actualizar"]})]})]}),y&&c.jsx("div",{className:"bg-green-100 text-green-800 p-3 rounded mb-4 border border-green-200",children:y}),x&&c.jsx("div",{className:"bg-red-100 text-red-800 p-3 rounded mb-4 border border-red-200",children:x}),c.jsxs("div",{className:"bg-white p-4 rounded shadow border border-gray-200 mb-6 flex flex-wrap gap-4 items-end",children:[c.jsxs("div",{className:"flex-1 min-w-[200px]",children:[c.jsx("label",{className:"block text-xs font-bold uppercase text-gray-500 mb-1",children:"Filtrar por Item Code"}),c.jsx("input",{type:"text",className:"w-full border p-2 rounded text-sm uppercase",placeholder:"EJ: ABC123...",value:N,onChange:P=>b(P.target.value)})]}),c.jsxs("div",{className:"flex-1 min-w-[150px]",children:[c.jsx("label",{className:"block text-xs font-bold uppercase text-gray-500 mb-1",children:"Mostrar"}),c.jsxs("select",{className:"w-full border p-2 rounded text-sm",value:T,onChange:P=>j(P.target.value),children:[c.jsx("option",{value:"all",children:"Todas las diferencias"}),c.jsx("option",{value:"negative",children:"Solo negativas ( - )"}),c.jsx("option",{value:"positive",children:"Solo positivas ( + )"}),c.jsx("option",{value:"zero",children:"Diferencia 0"})]})]}),c.jsx("div",{children:c.jsx("button",{onClick:()=>{b(""),j("all")},className:"btn-sap btn-secondary h-[38px]",children:"Limpiar Filtros"})})]}),c.jsx("div",{className:"bg-white rounded shadow overflow-hidden border border-gray-200",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-sm text-left",children:[c.jsx("thead",{className:"uppercase font-semibold border-b",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-3 w-20",children:"Acciones"}),c.jsx("th",{className:"p-3",children:"Item Code"}),c.jsx("th",{className:"p-3",children:"Descripcin"}),c.jsx("th",{className:"p-3",children:"Ubicacin"}),c.jsx("th",{className:"p-3 text-right",children:"Qty Sistema"}),c.jsx("th",{className:"p-3 text-right",children:"Qty Contada"}),c.jsx("th",{className:"p-3 text-right",children:"Diferencia"}),c.jsx("th",{className:"p-3 text-right",children:"% Var"}),c.jsx("th",{className:"p-3",children:"Fecha"}),c.jsx("th",{className:"p-3",children:"Usuario"})]})}),c.jsxs("tbody",{className:"divide-y",children:[u&&c.jsx("tr",{children:c.jsx("td",{colSpan:"10",className:"p-6 text-center text-gray-500",children:"Cargando datos..."})}),!u&&s.length===0&&c.jsx("tr",{children:c.jsx("td",{colSpan:"10",className:"p-6 text-center text-gray-500",children:"No hay registros para mostrar."})}),s.map(P=>c.jsxs("tr",{className:`hover:bg-gray-50 ${P.difference!==0?"bg-orange-50/30":""}`,children:[c.jsxs("td",{className:"p-3 flex gap-2",children:[c.jsx("button",{onClick:()=>k(P),className:"text-blue-600 hover:text-blue-800",title:"Editar",children:""}),c.jsx("button",{onClick:()=>U(P),className:"text-red-600 hover:text-red-800",title:"Eliminar",children:""})]}),c.jsx("td",{className:"p-3 font-semibold text-blue-800",children:P.item_code}),c.jsx("td",{className:"p-3 truncate max-w-xs",title:P.description,children:P.description}),c.jsx("td",{className:"p-3",children:P.location}),c.jsx("td",{className:"p-3 text-right",children:P.system_qty}),c.jsx("td",{className:"p-3 text-right font-bold",children:P.counted_qty}),c.jsx("td",{className:`p-3 text-right font-bold ${P.difference>0?"text-blue-600":P.difference<0?"text-red-600":"text-gray-400"}`,children:P.difference>0?`+${P.difference}`:P.difference}),c.jsxs("td",{className:"p-3 text-right",children:[P.percentage_variance,"%"]}),c.jsx("td",{className:"p-3 text-xs text-gray-500 whitespace-nowrap",children:P.date}),c.jsx("td",{className:"p-3 text-xs text-gray-500",children:P.username})]},P.count_id))]})]})})})]}),B.open&&c.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[c.jsx("h2",{className:"text-lg font-bold mb-4",children:"Editar Cantidad Contada"}),c.jsxs("div",{className:"space-y-3 mb-6",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-semibold text-xs text-gray-500 uppercase",children:"Item Code:"})," ",c.jsx("div",{className:"font-mono",children:B.itemCode})]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-semibold text-xs text-gray-500 uppercase",children:"Descripcin:"})," ",c.jsx("div",{className:"text-sm",children:B.desc})]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-semibold text-xs text-gray-500 uppercase",children:"Ubicacin:"})," ",c.jsx("div",{children:B.loc})]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-semibold text-xs text-gray-500 uppercase",children:"Qty Sistema:"})," ",c.jsx("div",{children:B.system})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block font-bold mb-1",children:"Nueva Cantidad Contada"}),c.jsx("input",{type:"number",className:"w-full border-2 border-blue-500 rounded p-2 text-xl font-bold",value:B.counted,onChange:P=>M({...B,counted:P.target.value}),autoFocus:!0,min:"0"})]})]}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx("button",{onClick:()=>M({...B,open:!1}),className:"px-4 py-2 border rounded hover:bg-gray-100",children:"Cancelar"}),c.jsx("button",{onClick:V,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 font-bold",children:"Guardar Cambios"})]})]})}),H.open&&c.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-sm p-6 border-t-4 border-red-600",children:[c.jsx("h2",{className:"text-lg font-bold mb-2 text-red-700",children:"Confirmar Eliminacin"}),c.jsxs("p",{className:"mb-4 text-gray-700",children:["Ests seguro de que deseas eliminar el registro del item ",c.jsx("strong",{children:H.itemCode}),"?"]}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx("button",{onClick:()=>_({...H,open:!1}),className:"px-4 py-2 border rounded hover:bg-gray-100",children:"Cancelar"}),c.jsx("button",{onClick:L,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 font-bold",children:"Eliminar"})]})]})})]})},v3=()=>{const{setTitle:e}=sn(),[t,s]=R.useState(!1),[a,u]=R.useState([]),[f,x]=R.useState(""),[m,y]=R.useState(""),[w,N]=R.useState(""),[b,T]=R.useState(!0),[j,B]=R.useState(!1),[M,H]=R.useState(null),[_,C]=R.useState("");R.useEffect(()=>{e("Logix - Gestin de Diferencias"),E()},[e]);const E=async()=>{s(!0);try{const U=new URLSearchParams;f&&U.append("year",f),m&&U.append("month",m),U.append("only_differences",b);const L=await fetch(`/api/planner/cycle_count_differences?${U.toString()}`);if(L.ok){let X=await L.json();w&&(X=X.filter(P=>P.item_code.includes(w.toUpperCase()))),u(X)}else he.error("Error cargando diferencias")}catch{he.error("Error de conexin")}finally{s(!1)}},k=U=>{H(U),C(U.physical_qty),B(!0)},V=async()=>{if(M)try{(await fetch(`/api/planner/cycle_count_differences/${M.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({physical_qty:parseInt(_)})})).ok?(he.success("Cantidad actualizada"),B(!1),E()):he.error("Error al guardar")}catch{he.error("Error de conexin")}};return c.jsxs("div",{className:"container-wrapper max-w-6xl mx-auto px-4 py-6",children:[c.jsx(Ks,{position:"top-right",autoClose:3e3}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h1",{className:"text-xl font-normal text-gray-800 mb-2",children:"Gestin de Diferencias"}),c.jsx("p",{className:"text-sm text-gray-500",children:"Verifique y edite las cantidades encontradas en los conteos cclicos"})]}),c.jsxs("div",{className:"flex flex-wrap items-end gap-4 mb-6 bg-white p-4 rounded shadow-sm border border-gray-200",children:[c.jsxs("div",{children:[c.jsx("label",{className:"form-label text-xs",children:"Ao"}),c.jsx("input",{type:"number",value:f,onChange:U=>x(U.target.value),className:"w-24 p-1 border rounded",placeholder:"YYYY"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"form-label text-xs",children:"Mes"}),c.jsxs("select",{value:m,onChange:U=>y(U.target.value),className:"w-32 p-1 border rounded",children:[c.jsx("option",{value:"",children:"Todos"}),[...Array(12)].map((U,L)=>c.jsx("option",{value:L+1,children:new Date(0,L).toLocaleString("es",{month:"long"})},L))]})]}),c.jsxs("div",{className:"flex-grow",children:[c.jsx("label",{className:"form-label text-xs",children:"Cdigo Item"}),c.jsx("input",{type:"text",value:w,onChange:U=>N(U.target.value),className:"w-full p-1 border rounded uppercase",placeholder:"Buscar..."})]}),c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx("input",{type:"checkbox",checked:b,onChange:U=>T(U.target.checked),className:"mr-2"}),c.jsx("span",{className:"text-sm",children:"Solo diferencias"})]}),c.jsx("button",{onClick:E,className:"btn-sap btn-primary text-xs py-2 px-4 h-[34px]",children:"Filtrar"})]}),c.jsx("div",{className:"bg-white shadow rounded overflow-hidden border border-gray-200",children:t?c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Cargando..."}):a.length===0?c.jsx("div",{className:"p-8 text-center text-gray-500",children:"No se encontraron registros"}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-sm text-left",children:[c.jsx("thead",{className:"font-semibold uppercase text-xs border-b",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3",children:"Fecha"}),c.jsx("th",{className:"px-4 py-3",children:"Item"}),c.jsx("th",{className:"px-4 py-3",children:"Descripcin"}),c.jsx("th",{className:"px-4 py-3",children:"Ubicacin"}),c.jsx("th",{className:"px-4 py-3",children:"ABC"}),c.jsx("th",{className:"px-4 py-3 text-right",children:"Sis"}),c.jsx("th",{className:"px-4 py-3 text-right",children:"Fsico"}),c.jsx("th",{className:"px-4 py-3 text-right",children:"Dif"}),c.jsx("th",{className:"px-4 py-3",children:"Usuario"}),c.jsx("th",{className:"px-4 py-3",children:"Acciones"})]})}),c.jsx("tbody",{className:"divide-y divide-gray-100",children:a.map(U=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-4 py-2 text-xs",children:U.executed_date}),c.jsx("td",{className:"px-4 py-2 font-medium",children:U.item_code}),c.jsx("td",{className:"px-4 py-2 text-xs truncate max-w-[200px]",title:U.item_description,children:U.item_description}),c.jsx("td",{className:"px-4 py-2",children:U.bin_location}),c.jsx("td",{className:"px-4 py-2",children:c.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${U.abc_code==="A"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:U.abc_code})}),c.jsx("td",{className:"px-4 py-2 text-right",children:U.system_qty}),c.jsx("td",{className:"px-4 py-2 text-right font-bold",children:U.physical_qty}),c.jsxs("td",{className:`px-4 py-2 text-right font-bold ${U.difference!==0?"text-red-500":"text-gray-400"}`,children:[U.difference>0?"+":"",U.difference]}),c.jsx("td",{className:"px-4 py-2 text-xs text-gray-500",children:U.username}),c.jsx("td",{className:"px-4 py-2",children:c.jsx("button",{onClick:()=>k(U),className:"text-blue-600 hover:text-blue-800 text-xs font-semibold border border-blue-200 px-2 py-1 rounded bg-blue-50",children:"Editar"})})]},U.id))})]})})}),j&&M&&c.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full p-6",children:[c.jsx("h2",{className:"text-lg font-bold mb-4 text-gray-800",children:"Editar Cantidad"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"form-label",children:"Item"}),c.jsx("div",{className:"p-2 bg-gray-50 border rounded text-sm text-gray-600",children:M.item_code})]}),c.jsxs("div",{children:[c.jsx("label",{className:"form-label",children:"Cantidad Sistema"}),c.jsx("div",{className:"p-2 bg-gray-50 border rounded text-sm text-gray-600",children:M.system_qty})]}),c.jsxs("div",{children:[c.jsx("label",{className:"form-label",children:"Cantidad Fsica (Nueva)"}),c.jsx("input",{type:"number",value:_,onChange:U=>C(U.target.value),className:"w-full p-2 border rounded font-bold text-lg"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"form-label",children:"Diferencia Resultante"}),c.jsx("div",{className:`p-2 border rounded text-sm font-bold ${parseInt(_)-M.system_qty!==0?"text-red-600 bg-red-50":"text-green-600 bg-green-50"}`,children:parseInt(_)-M.system_qty})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[c.jsx("button",{onClick:()=>B(!1),className:"btn-sap btn-secondary",children:"Cancelar"}),c.jsx("button",{onClick:V,className:"btn-sap btn-primary",children:"Guardar"})]})]})})]})},b3=()=>{const e=Xh();return console.error(e),c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"max-w-md w-full text-center space-y-8 bg-white p-10 rounded-xl shadow-2xl",children:[c.jsx("div",{className:"text-red-500",children:c.jsx("svg",{className:"mx-auto h-24 w-24",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),c.jsxs("div",{children:[c.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Algo sali mal!"}),c.jsx("p",{className:"mt-2 text-sm text-gray-600",children:(e==null?void 0:e.statusText)||(e==null?void 0:e.message)||"Ha ocurrido un error inesperado."})]}),c.jsx("div",{className:"mt-8",children:c.jsx(or,{to:"/",className:"w-full flex items-center justify-center px-4 py-3 border border-transparent text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 md:py-4 md:text-lg transition duration-150 ease-in-out",children:"Volver al Inicio"})})]})})},C3=({children:e})=>e;function E3(){return c.jsx(_m,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:c.jsxs(wm,{children:[c.jsx(Ve,{path:"/login",element:c.jsx(ry,{})}),c.jsx(Ve,{path:"/register",element:c.jsx(g3,{})}),c.jsx(Ve,{path:"/set_password",element:c.jsx(p3,{})}),c.jsxs(Ve,{path:"/",element:c.jsx(C3,{children:c.jsx(Ds,{})}),children:[c.jsx(Ve,{index:!0,element:c.jsx(ny,{})}),c.jsx(Ve,{path:"inbound",element:c.jsx(e3,{})}),c.jsx(Ve,{path:"label",element:c.jsx(n3,{})}),c.jsx(Ve,{path:"stock",element:c.jsx(zy,{})}),c.jsx(Ve,{path:"update",element:c.jsx(x3,{})}),c.jsx(Ve,{path:"reconciliation",element:c.jsx(sy,{})}),c.jsx(Ve,{path:"view_picking_audits",element:c.jsx(Vy,{})}),c.jsx(Ve,{path:"counts",element:c.jsx(t3,{})}),c.jsx(Ve,{path:"counts/manage",element:c.jsx(u3,{})}),c.jsx(Ve,{path:"view_counts",element:c.jsx(d3,{})}),c.jsx(Ve,{path:"counts/manage_differences",element:c.jsx(w3,{})}),c.jsx(Ve,{path:"counts/edit/:id",element:c.jsx(f3,{})}),c.jsx(Ve,{path:"view_counts/recordings",element:c.jsx(y3,{})}),c.jsx(Ve,{path:"planner",element:c.jsx(r3,{})}),c.jsx(Ve,{path:"planner/execution",element:c.jsx(s3,{})}),c.jsx(Ve,{path:"planner/manage_differences",element:c.jsx(v3,{})}),c.jsx(Ve,{path:"picking",element:c.jsx(a3,{})}),c.jsx(Ve,{path:"view_logs",element:c.jsx(h3,{})}),c.jsx(Ve,{path:"packing_list/print/:id",element:c.jsx(m3,{})}),c.jsx(Ve,{path:"admin/login",element:c.jsx(o3,{})}),c.jsx(Ve,{path:"admin/users",element:c.jsx(l3,{})}),c.jsx(Ve,{path:"admin/inventory",element:c.jsx(c3,{})})]}),c.jsx(Ve,{path:"*",element:c.jsx(b3,{})})]})})}lc.createRoot(document.getElementById("root")).render(c.jsx(Pe.StrictMode,{children:c.jsx(E3,{})}));
