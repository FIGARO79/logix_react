import{j as e}from"./index-BGai6ft1.js";import{e as i,r as n}from"./react-vendor-BFe66WFD.js";import{b as a}from"./qrcode-vendor-ClTz9A3x.js";import{L as t,y as l}from"./ui-vendor-i8Pm06Jj.js";/* empty css                      *//* empty css              */const s=()=>{const{setTitle:s}=i();n.useEffect(()=>{s("Logix - Etiquetado")},[s]);const[d,o]=n.useState(""),[r,c]=n.useState(1),[m,p]=n.useState(null),[h,g]=n.useState(!1),[x,b]=n.useState(null),f=n.useRef(null),u=n.useRef(null);n.useEffect(()=>{(null==m?void 0:m.itemCode)?a.toDataURL(m.itemCode,{width:96,margin:1}).then(e=>b(e)).catch(e=>{}):b(null)},[m]);const v=async()=>{if(d.trim()){g(!0),p(null);try{const e=await fetch(`/api/get_item_details/${encodeURIComponent(d.toUpperCase())}`),i=await e.json();e.ok?(p({itemCode:i.item_code,description:i.description,binLocation:i.bin_location,aditionalBins:i.additional_bins,weight:i.weight_kg}),l.success("Item encontrado")):l.error(i.detail||"Item no encontrado")}catch(e){l.error("Error de conexión")}finally{g(!1)}}else l.error("Ingrese un código de item")},j=m?(parseFloat(m.weight||0)*parseInt(r||1)).toFixed(2):"N/A";return e.jsxs("div",{className:"container-wrapper px-4 py-4",children:[e.jsx(t,{position:"top-right",autoClose:3e3}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-5 bg-white p-6 rounded-md shadow-md border border-gray-200",children:[e.jsx("div",{className:"bg-gray-50 text-gray-900 px-4 py-3 -mx-6 -mt-6 rounded-t-md mb-6 border-b border-gray-200",children:e.jsx("h1",{className:"text-base font-semibold tracking-tight",children:"Imprimir Etiqueta"})}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Item Code"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{ref:f,type:"text",value:d,onChange:e=>o(e.target.value.toUpperCase()),onKeyDown:e=>"Enter"===e.key&&v(),className:"flex-grow uppercase",placeholder:"Ingrese código y presione Enter",autoFocus:!0}),e.jsx("button",{onClick:v,className:"btn-sap btn-secondary h-[38px] px-3 flex-shrink-0",disabled:h,children:h?"...":e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"})})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Item Description"}),e.jsx("div",{className:"data-field bg-gray-50",children:(null==m?void 0:m.description)||""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Quantity Received"}),e.jsx("input",{type:"number",value:r,onChange:e=>c(e.target.value),min:"1",className:"w-1/3"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Bin Location"}),e.jsx("div",{className:"data-field bg-gray-50",children:(null==m?void 0:m.binLocation)||""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Additional Bins"}),e.jsx("div",{className:"data-field bg-gray-50 text-xs",children:(null==m?void 0:m.aditionalBins)||""})]})]})]}),e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-700 mb-3 text-center",children:"Vista Previa"}),e.jsx("div",{className:"label-print-area flex justify-center",children:e.jsxs("div",{className:"label-container bg-white",children:[e.jsxs("div",{children:[e.jsx("img",{src:"/static/images/logoytpe_sandvik.png",alt:"Sandvik",className:"label-logo"}),e.jsx("p",{className:"label-item-code",children:(null==m?void 0:m.itemCode)||"ITEM CODE"}),e.jsx("p",{className:"label-item-description",children:(null==m?void 0:m.description)||"Item Description"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"label-data-field",children:[e.jsx("span",{children:"Quantity Received"}),e.jsx("span",{children:r})]}),e.jsxs("div",{className:"label-data-field",children:[e.jsx("span",{children:"Product weight"}),e.jsxs("span",{children:[j," ","N/A"!==j?"kg":""]})]}),e.jsxs("div",{className:"label-data-field",children:[e.jsx("span",{children:"Bin Location"}),e.jsx("span",{children:(null==m?void 0:m.binLocation)||"BIN"})]}),e.jsxs("div",{className:"label-data-field",children:[e.jsx("span",{children:"Packing Date"}),e.jsx("span",{children:(new Date).toLocaleDateString("es-CO",{year:"2-digit",month:"2-digit",day:"2-digit"})})]})]})]}),e.jsxs("div",{className:"label-bottom-section mt-auto pt-4 flex items-end justify-between",children:[e.jsx("p",{className:"label-disclaimer text-[10px] leading-tight text-gray-500 max-w-[60%]",children:"All trademarks and logotypes appearing on this label are owned by Sandvik Group"}),e.jsx("div",{id:"qrCodeContainer",className:"rounded p-1",children:x?e.jsx("img",{src:x,alt:"QR",className:"w-full h-full object-contain"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-gray-400",children:"QR Code"})})]})]})}),e.jsx("div",{className:"w-full flex justify-center mt-6",children:e.jsx("button",{onClick:()=>{const e=u.current;if(!e)return void l.error("Error: No se encontró el marco de impresión.");if(!m)return;const i=`\n            <!DOCTYPE html>\n            <html>\n            <head>\n                <title>Etiqueta ${m?m.itemCode:""}</title>\n                <style>\n                    @page { size: 70mm 100mm; margin: 0; }\n                    html, body { \n                        width: 70mm; height: 100mm; margin: 0; padding: 0; \n                        overflow: hidden; background: white; \n                        font-family: Arial, sans-serif; \n                    }\n                    .label-container {\n                        width: 100%; height: 100%; box-sizing: border-box;\n                        padding: 3mm; display: flex; flex-direction: column;\n                        justify-content: space-between; overflow: hidden;\n                        border: 1px solid #d1d5db;\n                        border-radius: 4px;\n                    }\n                    .label-logo { max-width: 50%; max-height: 8mm; margin-bottom: 3mm; display: block; }\n                    .label-item-code { font-size: 14pt; font-weight: bold; margin: 0 0 1mm 0; line-height: 1.1; color: #1f2937; }\n                    .label-item-description { font-size: 12pt; font-weight: bold; margin: 0 0 5mm 0; line-height: 1.1; color: #1f2937; max-height: 20mm; overflow: hidden; }\n                    \n                    .label-data-field { \n                        display: grid; grid-template-columns: auto 1fr; gap: 8px; \n                        align-items: start; margin-bottom: 0.5mm; font-size: 9pt; line-height: 1.25;\n                    }\n                    .label-data-field span:first-child { font-weight: 500; color: #4b5563; }\n                    .label-data-field span:last-child { text-align: right; font-weight: normal; color: #1f2937; }\n                    \n                    .label-bottom-section { \n                        display: flex; align-items: flex-end; justify-content: space-between; \n                        margin-top: auto; padding-top: 2mm;\n                    }\n                    .label-disclaimer { font-size: 6pt; color: #6b7280; max-width: 65%; line-height: 1; margin: 0; text-align: left; }\n                    #qrCodeContainer { width: 25mm; height: 25mm; display: flex; justify-content: center; align-items: center; }\n                    #qrCodeContainer img { width: 100%; height: 100%; object-fit: contain; }\n                </style>\n            </head>\n            <body>\n                <div class="label-container">\n                    <div>\n                        <img src="/static/images/logoytpe_sandvik.png" alt="Sandvik" class="label-logo" />\n                        <div class="label-item-code">${(null==m?void 0:m.itemCode)||"CODE"}</div>\n                        <div class="label-item-description">${(null==m?void 0:m.description)||"Description"}</div>\n\n                        <div class="label-data-field">\n                            <span>Quantity Received</span>\n                            <span>${r||1}</span>\n                        </div>\n                        <div class="label-data-field">\n                            <span>Product weight</span>\n                            <span>${j} ${"N/A"!==j?"kg":""}</span>\n                        </div>\n                        <div class="label-data-field">\n                            <span>Bin Location</span>\n                            <span>${(null==m?void 0:m.binLocation)||"BIN"}</span>\n                        </div>\n                        <div class="label-data-field">\n                            <span>Packing Date</span>\n                            <span>${(new Date).toLocaleDateString("es-CO",{year:"2-digit",month:"2-digit",day:"2-digit"})}</span>\n                        </div>\n                    </div>\n\n                    <div class="label-bottom-section">\n                        <p class="label-disclaimer">All trademarks and logotypes appearing on this label are owned by Sandvik Group</p>\n                        <div id="qrCodeContainer">\n                            ${x?`<img src="${x}" />`:""}\n                        </div>\n                    </div>\n                </div>\n                <script>\n                    window.onload = function() { setTimeout(function(){ window.print(); }, 200); }\n                <\/script>\n            </body>\n            </html>\n        `,n=e.contentWindow.document;n.open(),n.write(i),n.close()},disabled:!m,className:"btn-sap btn-primary btn-print-label h-10",children:"Imprimir Etiqueta"})})]})]}),e.jsx("iframe",{ref:u,title:"print-label-frame",style:{position:"fixed",top:"-1000px",left:"-1000px",width:"1px",height:"1px",border:"none"}})]})};export{s as default};
