import{j as e}from"./index-Ct3ZkX5-.js";import{e as t,r as s,R as r,L as a}from"./react-vendor-BFe66WFD.js";const d=()=>{const{setTitle:d}=t(),[l,i]=s.useState([]),[n,c]=s.useState(!0),[x,o]=s.useState(null),[h,m]=s.useState(null);s.useEffect(()=>{d("Historial de Auditorías de Picking")},[]),s.useEffect(()=>{(async()=>{try{const e=await fetch("/api/views/view_picking_audits",{credentials:"include"});if(!e.ok)throw new Error("Error al cargar auditorías");const t=await e.json();i(t)}catch(e){o(e.message)}finally{c(!1)}})()},[]);const p=e=>{if(!e)return"";return new Date(e).toLocaleString()};return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n&&e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#0070d2]"})}),x&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6",children:e.jsx("p",{className:"text-red-700",children:x})}),!n&&!x&&e.jsx("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden border border-gray-200",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full leading-normal",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 text-left text-xs font-bold uppercase tracking-wider",children:[e.jsx("th",{className:"px-5 py-3 text-center w-10"}),e.jsx("th",{className:"px-5 py-3",children:"ID"}),e.jsx("th",{className:"px-5 py-3",children:"Pedido"}),e.jsx("th",{className:"px-5 py-3",children:"Despacho"}),e.jsx("th",{className:"px-5 py-3",children:"Cliente"}),e.jsx("th",{className:"px-5 py-3",children:"Usuario"}),e.jsx("th",{className:"px-5 py-3",children:"Fecha"}),e.jsx("th",{className:"px-5 py-3 text-center",children:"Estado"}),e.jsx("th",{className:"px-5 py-3 text-center",children:"Acciones"})]})}),e.jsx("tbody",{children:l.map(t=>e.jsxs(r.Fragment,{children:[e.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50 transition-colors cursor-pointer "+(h===t.id?"bg-blue-50":""),onClick:()=>{return e=t.id,void m(h===e?null:e);var e},children:[e.jsx("td",{className:"px-5 py-4 text-center",children:e.jsx("svg",{className:"w-5 h-5 text-gray-500 transform transition-transform duration-200 "+(h===t.id?"rotate-90":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),e.jsx("td",{className:"px-5 py-4 text-sm font-medium text-gray-900",children:t.id}),e.jsx("td",{className:"px-5 py-4 text-sm text-[#0070d2] font-semibold",children:t.order_number}),e.jsx("td",{className:"px-5 py-4 text-sm text-gray-600",children:t.despatch_number}),e.jsx("td",{className:"px-5 py-4 text-sm text-gray-600",children:t.customer_name||"N/A"}),e.jsx("td",{className:"px-5 py-4 text-sm text-gray-600",children:t.username}),e.jsx("td",{className:"px-5 py-4 text-sm text-gray-600",children:p(t.timestamp)}),e.jsx("td",{className:"px-5 py-4 text-center",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+("Completado"===t.status||"Aprobado"===t.status?"bg-green-100 text-green-800":"Rechazado"===t.status||"Error"===t.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:t.status})}),e.jsx("td",{className:"px-5 py-4 text-center",children:e.jsx(a,{to:`/packing_list/print/${t.id}`,className:"text-gray-500 hover:text-[#0070d2]",onClick:e=>e.stopPropagation(),title:"Imprimir Packing List",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})})})})]}),h===t.id&&e.jsx("tr",{className:"bg-gray-50",children:e.jsx("td",{colSpan:"9",className:"p-4 border-b border-gray-200 shadow-inner",children:e.jsxs("div",{className:"bg-white rounded border border-gray-200 p-4",children:[e.jsx("h4",{className:"font-bold text-gray-700 mb-3 text-sm uppercase tracking-wide",children:"Detalle de Ítems Auditados"}),e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 text-gray-500",children:[e.jsx("th",{className:"py-2 text-left",children:"Código Item"}),e.jsx("th",{className:"py-2 text-left",children:"Descripción"}),e.jsx("th",{className:"py-2 text-right",children:"Cant. Req."}),e.jsx("th",{className:"py-2 text-right",children:"Cant. Escaneada"}),e.jsx("th",{className:"py-2 text-right",children:"Diferencia"})]})}),e.jsx("tbody",{children:t.items.map((t,s)=>e.jsxs("tr",{className:"border-b border-gray-100 last:border-0 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 font-medium",children:t.item_code}),e.jsx("td",{className:"py-2 text-gray-600",children:t.description}),e.jsx("td",{className:"py-2 text-right",children:t.qty_req}),e.jsx("td",{className:"py-2 text-right",children:t.qty_scan}),e.jsx("td",{className:"py-2 text-right font-bold "+(0!==t.difference?"text-red-600":"text-green-600"),children:t.difference>0?`+${t.difference}`:t.difference})]},s))})]})]})})})]},t.id))})]})})})]})};export{d as default};
