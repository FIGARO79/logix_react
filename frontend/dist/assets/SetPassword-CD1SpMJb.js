import{j as e}from"./index-D2N3aOe4.js";import{h as s,f as t,r as a}from"./react-vendor-BFe66WFD.js";const r=()=>{const r=s(),[n]=t(),o=n.get("token"),[l,d]=a.useState({newPassword:"",confirmPassword:""}),[i,c]=a.useState(null),[m,u]=a.useState(null);a.useEffect(()=>{o||u("Token de seguridad no proporcionado o inválido.")},[o]);return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:e.jsxs("div",{className:"px-8 py-6 mt-4 text-left bg-white shadow-lg rounded-lg w-full max-w-md",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-12 h-12 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),e.jsx("h3",{className:"text-2xl font-bold text-center text-gray-800",children:"Restablecer Contraseña"}),e.jsx("p",{className:"mt-2 text-sm text-center text-gray-600",children:"Establece tu nueva contraseña de acceso"}),i&&e.jsx("div",{className:"mt-4 p-3 bg-green-100 text-green-700 rounded text-sm",children:i}),m&&e.jsx("div",{className:"mt-4 p-3 bg-red-100 text-red-700 rounded text-sm",children:m}),o&&!i&&e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),c(null),u(null),l.newPassword===l.confirmPassword)try{const e=new FormData;e.append("token",o),e.append("new_password",l.newPassword),e.append("confirm_password",l.confirmPassword);const s=await fetch("/api/set_password",{method:"POST",body:e}),t=await s.json();s.ok?(c(t.message),setTimeout(()=>r("/login"),3e3)):u(t.error||"Error al restablecer la contraseña.")}catch(s){u(s.message)}else u("Las contraseñas no coinciden.")},className:"mt-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Nueva Contraseña"}),e.jsx("input",{type:"password",name:"newPassword",required:!0,className:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600",value:l.newPassword,onChange:e=>d({...l,newPassword:e.target.value})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Confirmar Contraseña"}),e.jsx("input",{type:"password",name:"confirmPassword",required:!0,className:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600",value:l.confirmPassword,onChange:e=>d({...l,confirmPassword:e.target.value})})]}),e.jsx("div",{className:"flex items-center justify-between mt-6",children:e.jsx("button",{type:"submit",className:"w-full px-6 py-2 leading-5 text-white transition-colors duration-200 transform bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:bg-blue-700",children:"Guardar Contraseña"})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("a",{href:"/login",className:"text-sm text-blue-600 hover:underline",children:"Volver a Inicio de Sesión"})})]})})};export{r as default};
