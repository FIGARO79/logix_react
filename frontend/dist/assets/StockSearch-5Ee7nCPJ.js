import{j as e}from"./index-Ct3ZkX5-.js";import{e as a,r as s,R as t}from"./react-vendor-BFe66WFD.js";import{L as r,y as l}from"./ui-vendor-i8Pm06Jj.js";/* empty css                      */import{S as i}from"./ScannerModal-Cl54tHGj.js";const n=()=>{const{setTitle:n}=a(),[o,d]=s.useState(""),[c,m]=s.useState(null),[x,h]=s.useState(!1),[p,b]=s.useState(""),[g,u]=s.useState(!1);t.useEffect(()=>{n("Logix - Consultar Stock")},[n]);const v=async e=>{if(e.trim()){h(!0),b(""),m(null);try{const a=await fetch(`/api/find_item/${encodeURIComponent(e)}/NA`),s=await a.json();a.ok?(m(s),(()=>{const e=new(window.AudioContext||window.webkitAudioContext),a=e.createOscillator(),s=e.createGain();a.type="sine",a.frequency.setValueAtTime(800,e.currentTime),a.frequency.exponentialRampToValueAtTime(400,e.currentTime+.1),s.gain.setValueAtTime(.5,e.currentTime),s.gain.exponentialRampToValueAtTime(.01,e.currentTime+.1),a.connect(s),s.connect(e.destination),a.start(),a.stop(e.currentTime+.15)})()):(b(s.error||"Item no encontrado"),l.error(s.error||"Item no encontrado"))}catch(a){b("Error de conexión"),l.error("Error de conexión al servidor")}finally{h(!1)}}};return e.jsxs("div",{className:"container-wrapper max-w-4xl mx-auto px-4 py-8",children:[e.jsx(r,{position:"top-right",autoClose:3e3}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden mb-6 border border-gray-200",children:[e.jsx("div",{className:"bg-gray-50 text-gray-900 px-6 py-4 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Búsqueda de Stock"]})}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),o.trim()&&v(o)},className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsx("label",{className:"form-label mb-1",children:"Código de Item"}),e.jsx("input",{type:"text",value:o,onChange:e=>d(e.target.value.toUpperCase()),className:"w-full uppercase",placeholder:"",autoFocus:!0})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>u(!0),className:"btn-sap btn-secondary h-[38px] px-3",title:"Escanear Código",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:[e.jsx("path",{d:"M0 .5A.5.5 0 0 1 .5 0h3a.5.5 0 0 1 0 1H1v2.5a.5.5 0 0 1-1 0zm12 0a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0V1h-2.5a.5.5 0 0 1-.5-.5M.5 12a.5.5 0 0 1 .5.5V15h2.5a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5m15 0a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1 0-1H15v-2.5a.5.5 0 0 1 .5-.5M4 4h1v1H4z"}),e.jsx("path",{d:"M7 2H2v5h5zM3 3h3v3H3zm2 8H4v1h1z"}),e.jsx("path",{d:"M7 9H2v5h5zm-4 1h3v3H3zm8-6h1v1h-1z"}),e.jsx("path",{d:"M9 2h5v5H9zm1 1v3h3V3zM8 8v2h1v1H8v1h2v-2h1v2h1v-1h2v-1h-3V8zm2 2H9V9h1zm4 2h-1v1h-2v1h3zm-4 2v-1H8v1z"}),e.jsx("path",{d:"M12 9h2V8h-2z"})]})}),e.jsx("button",{type:"submit",className:"btn-sap btn-primary h-[38px]",disabled:x,children:x?"Buscando...":"Consultar"}),e.jsx("button",{type:"button",onClick:()=>{d(""),m(null),b("")},className:"btn-sap btn-secondary h-[38px]",children:"Limpiar"})]})]})})]}),c&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden border border-gray-200 animate-fade-in",children:[e.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:c.itemCode}),e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-bold "+(parseInt(c.physicalQty||0)>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:parseInt(c.physicalQty||0)>0?"EN STOCK":"SIN STOCK"})]}),e.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx("label",{className:"form-label text-gray-500",children:"Descripción"}),e.jsx("div",{className:"text-gray-900 font-medium text-lg",children:c.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label text-gray-500",children:"Ubicación Principal"}),e.jsx("div",{className:"data-field bg-blue-50 text-blue-900 border-blue-200",children:c.binLocation||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label text-gray-500",children:"Stock Físico"}),e.jsx("div",{className:"data-field font-bold bg-blue-50 text-blue-900 border-blue-200",children:c.physicalQty||0})]}),c.aditionalBins&&e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx("label",{className:"form-label text-gray-500",children:"Ubicaciones Adicionales"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:c.aditionalBins.split(",").map((a,s)=>a.trim()&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-md text-sm font-medium bg-indigo-100 text-indigo-800 border border-indigo-200 shadow-sm",children:a.trim()},s))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 col-span-1 md:col-span-2 border-t pt-4 mt-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label text-gray-500",children:"Peso (kg)"}),e.jsx("div",{children:c.weight||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label text-gray-500",children:"Última Fecha Ingreso"}),e.jsx("div",{children:c.dateLastReceived||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label text-gray-500",children:"Reemplazado Por"}),e.jsx("div",{children:c.supersededBy||"-"})]})]})]})]}),!c&&!p&&e.jsxs("div",{className:"text-center text-gray-500 mt-12",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto mb-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),e.jsx("p",{children:"Ingrese un código de item para consultar su disponibilidad y ubicación."})]}),g&&e.jsx(i,{onScan:e=>{u(!1),d(e),v(e)},onClose:()=>u(!1)})]})};export{n as default};
