import{j as e}from"./index-CtfDg2Lg.js";import{e as i,r as n}from"./react-vendor-BFe66WFD.js";import{b as t}from"./qrcode-vendor-cb-SQVWm.js";import{L as l,y as a}from"./ui-vendor-i8Pm06Jj.js";/* empty css                      *//* empty css              */const s=()=>{const{setTitle:s}=i();n.useEffect(()=>{s("Logix - Etiquetado")},[s]);const[o,d]=n.useState(""),[r,m]=n.useState(1),[c,g]=n.useState(null),[h,p]=n.useState(!1),[b,x]=n.useState(null),v=n.useRef(null),f=n.useRef(null);n.useEffect(()=>{(null==c?void 0:c.itemCode)?t.toDataURL(c.itemCode,{width:96,margin:1}).then(e=>x(e)).catch(e=>{}):x(null)},[c]);const u=async()=>{if(o.trim()){p(!0),g(null);try{const e=await fetch(`/api/get_item_details/${encodeURIComponent(o.toUpperCase())}`),i=await e.json();e.ok?(g({itemCode:i.item_code,description:i.description,binLocation:i.bin_location,aditionalBins:i.additional_bins,weight:i.weight_kg}),a.success("Item encontrado")):a.error(i.detail||"Item no encontrado")}catch(e){a.error("Error de conexión")}finally{p(!1)}}else a.error("Ingrese un código de item")},y=c?(parseFloat(c.weight||0)*parseInt(r||1)).toFixed(2):"N/A";return e.jsxs("div",{className:"container-wrapper px-4 py-4",children:[e.jsx(l,{position:"top-right",autoClose:3e3}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-5 bg-white p-6 rounded-md shadow-md border border-gray-200",children:[e.jsx("div",{className:"bg-gray-50 text-gray-900 px-4 py-3 -mx-6 -mt-6 rounded-t-md mb-6 border-b border-gray-200",children:e.jsx("h1",{className:"text-base font-semibold tracking-tight",children:"Imprimir Etiqueta"})}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Item Code"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{ref:v,type:"text",value:o,onChange:e=>d(e.target.value.toUpperCase()),onKeyDown:e=>"Enter"===e.key&&u(),className:"flex-grow uppercase",placeholder:"Ingrese código y presione Enter",autoFocus:!0}),e.jsx("button",{onClick:u,className:"btn-sap btn-secondary h-[38px] px-3 flex-shrink-0",disabled:h,children:h?"...":e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"})})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Item Description"}),e.jsx("div",{className:"data-field bg-gray-50",children:(null==c?void 0:c.description)||""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Quantity Received"}),e.jsx("input",{type:"number",value:r,onChange:e=>m(e.target.value),min:"1",className:"w-1/3"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Bin Location"}),e.jsx("div",{className:"data-field bg-gray-50",children:(null==c?void 0:c.binLocation)||""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Additional Bins"}),e.jsx("div",{className:"data-field bg-gray-50 text-xs",children:(null==c?void 0:c.aditionalBins)||""})]})]})]}),e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-700 mb-3 text-center",children:"Vista Previa"}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{style:{width:"70mm",height:"100mm",padding:"3.5mm",boxSizing:"border-box",background:"white",border:"1px solid #ccc",position:"relative",fontFamily:"Arial, sans-serif"},children:[e.jsx("img",{src:"/static/images/logoytpe_sandvik.png",alt:"Sandvik",style:{height:"7mm",display:"block",marginBottom:"3.5mm"}}),e.jsx("div",{style:{fontSize:"12pt",fontWeight:"bold",lineHeight:1.2},children:(null==c?void 0:c.itemCode)||"ITEM CODE"}),e.jsx("div",{style:{fontSize:"12pt",fontWeight:"bold",lineHeight:1.2,marginBottom:"18mm"},children:(null==c?void 0:c.description)||"Description"}),e.jsxs("div",{style:{fontSize:"9pt",lineHeight:1.4,marginBottom:"9mm"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"28mm 1fr"},children:[e.jsx("div",{children:"Quantity/pack"}),e.jsxs("div",{children:[r," EA"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"28mm 1fr"},children:[e.jsx("div",{children:"Product weight"}),e.jsxs("div",{children:[y," kg"]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"28mm 1fr"},children:[e.jsx("div",{children:"Packaging date"}),e.jsx("div",{children:(new Date).toLocaleDateString("es-CO",{year:"2-digit",month:"2-digit",day:"2-digit"})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"28mm 1fr"},children:[e.jsx("div",{children:"Bin location"}),e.jsx("div",{children:(null==c?void 0:c.binLocation)||""})]})]}),e.jsxs("div",{style:{position:"absolute",bottom:"3.5mm",left:"3.5mm",right:"3.5mm",display:"flex",justifyContent:"space-between",alignItems:"flex-end"},children:[e.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-end",height:"25mm"},children:e.jsx("p",{style:{fontSize:"7pt",margin:0,maxWidth:"40mm",lineHeight:1.1,color:"#000"},children:"All trademarks and logotypes appearing on this label are owned by Sandvik Group"})}),e.jsx("div",{style:{width:"25mm",height:"25mm"},children:b?e.jsx("img",{src:b,alt:"QR",style:{width:"100%",height:"100%",objectFit:"contain"}}):e.jsx("div",{className:"border border-gray-200 w-full h-full"})})]})]})}),e.jsx("div",{className:"w-full flex justify-center mt-6",children:e.jsx("button",{onClick:()=>{const e=f.current;if(!e)return void a.error("Error: No se encontró el marco de impresión.");if(!c)return;const i=`\n            <!DOCTYPE html>\n            <html>\n            <head>\n                <title>Etiqueta ${c?c.itemCode:""}</title>\n                <style>\n                    @page { size: 70mm 100mm; margin: 0; }\n                    html, body { \n                        width: 70mm; height: 100mm; margin: 0; padding: 0; \n                        overflow: hidden; background: white; \n                        font-family: Arial, sans-serif; \n                    }\n                    .label-container {\n                        width: 70mm; height: 100mm; \n                        box-sizing: border-box;\n                        padding: 3.5mm; \n                        position: relative;\n                        background: white;\n                    }\n                    .label-logo { \n                        height: 7mm; \n                        display: block; \n                        margin-bottom: 3.5mm; \n                    }\n                    .label-item-code { \n                        font-family: Arial, sans-serif;\n                        font-size: 12pt; \n                        font-weight: bold; \n                        margin: 0; \n                        line-height: 1.2; \n                        color: #000; \n                    }\n                    .label-item-description { \n                        font-family: Arial, sans-serif;\n                        font-size: 12pt; \n                        font-weight: bold; \n                        margin: 0 0 18mm 0; \n                        line-height: 1.2; \n                        color: #000; \n                    }\n                    \n                    /* Grid Data Table */\n                    .label-data-table {\n                        width: 100%;\n                        font-size: 9pt;\n                        line-height: 1.4;\n                        margin-bottom: 9mm;\n                    }\n                    .label-row {\n                        display: grid;\n                        grid-template-columns: 28mm 1fr; /* Approx split */\n                    }\n                    .label-label {\n                         font-weight: normal; color: #000;\n                    }\n                    .label-value {\n                         font-weight: normal; color: #000;\n                    }\n                    \n                    /* Footer */\n                    .label-footer { \n                        position: absolute; \n                        bottom: 3.5mm; \n                        left: 3.5mm; \n                        right: 3.5mm;\n                        display: flex; \n                        align-items: flex-end; \n                        justify-content: space-between; \n                    }\n                    \n                    .label-disclaimer { \n                        font-size: 7pt; \n                        color: #000; \n                        max-width: 40mm; \n                        line-height: 1.1; \n                        margin: 0; \n                    }\n                    \n                    #qrCodeContainer { \n                        width: 25mm; \n                        height: 25mm; \n                        display: flex; \n                        justify-content: center; \n                        align-items: center; \n                    }\n                    #qrCodeContainer img { width: 100%; height: 100%; object-fit: contain; }\n                    \n                    .origin-text {\n                        position: absolute;\n                        bottom: 3.5mm;\n                        left: 3.5mm;\n                        font-size: 9pt;\n                    }\n                </style>\n            </head>\n            <body>\n                <div class="label-container">\n                    \x3c!-- Logo --\x3e\n                    <img src="/static/images/logoytpe_sandvik.png" alt="Sandvik" class="label-logo" />\n                    \n                    \x3c!-- Header --\x3e\n                    <div class="label-item-code">${(null==c?void 0:c.itemCode)||""}</div>\n                    <div class="label-item-description">${(null==c?void 0:c.description)||""}</div>\n\n                    \x3c!-- Data Grid --\x3e\n                    <div class="label-data-table">\n                        <div class="label-row">\n                            <div class="label-label">Quantity/pack</div>\n                            <div class="label-value">${r} EA</div>\n                        </div>\n                        <div class="label-row">\n                            <div class="label-label">Product weight</div>\n                            <div class="label-value">${y} kg</div>\n                        </div>\n                        <div class="label-row">\n                            <div class="label-label">Packaging date</div>\n                            <div class="label-value">${(new Date).toLocaleDateString("es-CO",{year:"2-digit",month:"2-digit",day:"2-digit"})}</div>\n                        </div>\n                        <div class="label-row">\n                            <div class="label-label">Bin location</div>\n                            <div class="label-value">${(null==c?void 0:c.binLocation)||""}</div>\n                        </div>\n                    </div>\n\n                    \x3c!-- Footer --\x3e\n                    <div class="label-footer">\n                        <div style="display:flex; flex-direction:column; justify-content:flex-end; height: 25mm;">\n                             <p class="label-disclaimer">All trademarks and logotypes appearing on this label are owned by Sandvik Group</p>\n                        </div>\n                     \n                        <div id="qrCodeContainer">\n                            ${b?`<img src="${b}" />`:""}\n                        </div>\n                    </div>\n                </div>\n                <script>\n                    window.onload = function() { setTimeout(function(){ window.print(); }, 200); }\n                <\/script>\n            </body>\n            </html>\n        `,n=e.contentWindow.document;n.open(),n.write(i),n.close()},disabled:!c,className:"btn-sap btn-primary btn-print-label h-10",children:"Imprimir Etiqueta"})})]})]}),e.jsx("iframe",{ref:f,title:"print-label-frame",style:{position:"fixed",top:"-1000px",left:"-1000px",width:"1px",height:"1px",border:"none"}})]})};export{s as default};
