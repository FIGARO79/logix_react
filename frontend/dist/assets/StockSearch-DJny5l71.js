const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/qrcode-vendor-ClTz9A3x.js","assets/react-vendor-BFe66WFD.js"])))=>i.map(i=>d[i]);
import{_ as e,j as r}from"./index-BGai6ft1.js";import{e as a,r as t,R as s}from"./react-vendor-BFe66WFD.js";import{y as l,L as n}from"./ui-vendor-i8Pm06Jj.js";/* empty css                      */const i=()=>{const{setTitle:i}=a(),[c,o]=t.useState(""),[d,h]=t.useState(null),[x,m]=t.useState(!1),[p,u]=t.useState(""),[g,b]=t.useState(!1),[v,j]=t.useState(!1),f=s.useRef(null);s.useEffect(()=>{i("Logix - Consultar Stock")},[i]),s.useEffect(()=>(g&&e(async()=>{const{Html5Qrcode:e}=await import("./qrcode-vendor-ClTz9A3x.js").then(e=>e.i);return{Html5Qrcode:e}},__vite__mapDeps([0,1])).then(({Html5Qrcode:e})=>{if(f.current)try{f.current.clear()}catch(a){}const r=new e("reader");f.current=r,r.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},async e=>{const t=e.toUpperCase();o(t);try{await r.stop(),r.clear()}catch(a){}b(!1),f.current=null,m(!0),u(""),h(null);try{const e=await fetch(`/api/find_item/${encodeURIComponent(t)}/NA`),r=await e.json();e.ok?h(r):(u(r.error||"Item no encontrado"),l.error(r.error||"Item no encontrado"))}catch(s){u("Error de conexión"),l.error("Error de conexión al servidor")}finally{m(!1)}},e=>{}).catch(e=>{l.error("Error al iniciar cámara: "+e),b(!1)})}),()=>{if(f.current)try{f.current.stop().catch(()=>{});try{f.current.clear()}catch(e){}}catch(e){}}),[g]);return r.jsxs("div",{className:"container-wrapper max-w-4xl mx-auto px-4 py-8",children:[r.jsx(n,{position:"top-right",autoClose:3e3}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden mb-6 border border-gray-200",children:[r.jsx("div",{className:"bg-gray-50 text-gray-900 px-6 py-4 border-b border-gray-200",children:r.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Búsqueda de Stock"]})}),r.jsx("div",{className:"p-6",children:r.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),c.trim()){m(!0),u(""),h(null);try{const e=await fetch(`/api/find_item/${encodeURIComponent(c)}/NA`),r=await e.json();e.ok?h(r):(u(r.error||"Item no encontrado"),l.error(r.error||"Item no encontrado"))}catch(r){u("Error de conexión"),l.error("Error de conexión al servidor")}finally{m(!1)}}},className:"flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"flex-grow",children:[r.jsx("label",{className:"form-label mb-1",children:"Código de Item"}),r.jsx("input",{type:"text",value:c,onChange:e=>o(e.target.value.toUpperCase()),className:"w-full uppercase",placeholder:"Ej: 80205555",autoFocus:!0})]}),r.jsxs("div",{className:"flex items-end gap-2",children:[r.jsx("button",{type:"button",onClick:()=>b(!0),className:"btn-sap btn-secondary h-[38px] px-3",title:"Escanear Código",children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",children:[r.jsx("path",{d:"M0 .5A.5.5 0 0 1 .5 0h3a.5.5 0 0 1 0 1H1v2.5a.5.5 0 0 1-1 0zm12 0a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0V1h-2.5a.5.5 0 0 1-.5-.5M.5 12a.5.5 0 0 1 .5.5V15h2.5a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5m15 0a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1 0-1H15v-2.5a.5.5 0 0 1 .5-.5M4 4h1v1H4z"}),r.jsx("path",{d:"M7 2H2v5h5zM3 3h3v3H3zm2 8H4v1h1z"}),r.jsx("path",{d:"M7 9H2v5h5zm-4 1h3v3H3zm8-6h1v1h-1z"}),r.jsx("path",{d:"M9 2h5v5H9zm1 1v3h3V3zM8 8v2h1v1H8v1h2v-2h1v2h1v-1h2v-1h-3V8zm2 2H9V9h1zm4 2h-1v1h-2v1h3zm-4 2v-1H8v1z"}),r.jsx("path",{d:"M12 9h2V8h-2z"})]})}),r.jsx("button",{type:"submit",className:"btn-sap btn-primary h-[38px]",disabled:x,children:x?"Buscando...":"Consultar"}),r.jsx("button",{type:"button",onClick:()=>{o(""),h(null),u("")},className:"btn-sap btn-secondary h-[38px]",children:"Limpiar"})]})]})})]}),d&&r.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden border border-gray-200 animate-fade-in",children:[r.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[r.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:d.itemCode}),r.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-bold "+(parseInt(d.physicalQty||0)>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:parseInt(d.physicalQty||0)>0?"EN STOCK":"SIN STOCK"})]}),r.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"col-span-1 md:col-span-2",children:[r.jsx("label",{className:"form-label text-gray-500",children:"Descripción"}),r.jsx("div",{className:"text-gray-900 font-medium text-lg",children:d.description})]}),r.jsxs("div",{children:[r.jsx("label",{className:"form-label text-gray-500",children:"Ubicación Principal"}),r.jsx("div",{className:"data-field bg-blue-50 text-blue-900 border-blue-200",children:d.binLocation||"N/A"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"form-label text-gray-500",children:"Stock Físico"}),r.jsx("div",{className:"data-field font-bold text-lg",children:d.physicalQty||0})]}),d.aditionalBins&&r.jsxs("div",{className:"col-span-1 md:col-span-2",children:[r.jsx("label",{className:"form-label text-gray-500",children:"Ubicaciones Adicionales"}),r.jsx("div",{className:"data-field text-sm",children:d.aditionalBins})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 col-span-1 md:col-span-2 border-t pt-4 mt-2",children:[r.jsxs("div",{children:[r.jsx("label",{className:"form-label text-gray-500",children:"Peso (kg)"}),r.jsx("div",{children:d.weight||"-"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"form-label text-gray-500",children:"Cantidad GRN"}),r.jsx("div",{children:d.defaultQtyGrn||"-"})]})]})]})]}),!d&&!p&&r.jsxs("div",{className:"text-center text-gray-500 mt-12",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto mb-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),r.jsx("p",{children:"Ingrese un código de item para consultar su disponibilidad y ubicación."})]}),g&&r.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg relative",children:[r.jsx("h3",{className:"text-center font-bold text-lg mb-4 text-gray-800",children:"Apunta la cámara al código de barras"}),r.jsx("div",{id:"reader",className:"rounded-lg overflow-hidden mb-4 border-2 border-gray-100"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:()=>{f.current&&f.current.applyVideoConstraints({advanced:[{torch:!v}]}).then(()=>j(!v)).catch(e=>{l.error("Flash no disponible")})},className:"flex-1 h-12 flex items-center justify-center gap-2 rounded bg-[#34495e] hover:bg-[#2c3e50] text-white font-medium transition-colors "+(v?"ring-2 ring-yellow-400":""),title:v?"Apagar Flash":"Encender Flash",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",viewBox:"0 0 16 16",children:r.jsx("path",{d:"M2 6a6 6 0 1 1 10.174 4.31c-.203.196-.359.4-.453.619l-.762 1.769A.5.5 0 0 1 10.5 13a.5.5 0 0 1 0 1 .5.5 0 0 1 0 1l-.224.447a1 1 0 0 1-.894.553H6.618a1 1 0 0 1-.894-.553L5.5 15a.5.5 0 0 1 0-1 .5.5 0 0 1 0-1 .5.5 0 0 1-.46-.302l-.761-1.77a1.964 1.964 0 0 0-.453-.618A5.984 5.984 0 0 1 2 6zm6-5a5 5 0 0 0-3.479 8.592c.263.254.514.564.676.941L5.83 12h4.342l.632-1.467c.162-.377.413-.687.676-.941A5 5 0 0 0 8 1z"})}),"Flash"]}),r.jsx("button",{onClick:()=>{f.current?f.current.stop().then(()=>{try{f.current.clear()}catch(e){}b(!1),f.current=null}).catch(e=>{b(!1)}):b(!1)},className:"flex-1 h-12 flex items-center justify-center bg-[#d32f2f] hover:bg-[#b71c1c] text-white font-medium rounded transition-colors",children:"Cancelar"})]})]})})]})};export{i as default};
