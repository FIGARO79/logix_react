import{j as e}from"./index-BYgTg5Ia.js";import{r as t}from"./react-vendor-BFe66WFD.js";const s=()=>{const[s,a]=t.useState([]),[r,n]=t.useState(!0),[i,o]=t.useState(""),[c,l]=t.useState({key:"GRN",direction:"ascending"});t.useEffect(()=>{n(!0),fetch("/api/views/reconciliation").then(e=>e.json()).then(e=>{e.data&&a(e.data),n(!1)}).catch(e=>{n(!1)})},[]);const d=t.useMemo(()=>{let e=[...s];return null!==c&&e.sort((e,t)=>{let s=e[c.key],a=t[c.key];return"number"==typeof s&&"number"==typeof a?"ascending"===c.direction?s-a:a-s:(s=s?s.toString().toLowerCase():"",a=a?a.toString().toLowerCase():"",s<a?"ascending"===c.direction?-1:1:s>a?"ascending"===c.direction?1:-1:0)}),e},[s,c]),x=t.useMemo(()=>d.filter(e=>!i||Object.values(e).some(e=>String(e).toLowerCase().includes(i.toLowerCase()))),[d,i]);return e.jsxs("div",{className:"p-2 sm:p-6 bg-gray-50 min-h-screen font-sans",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4 bg-white p-4 rounded shadow-sm border border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4 md:mb-0 flex items-center gap-2",children:"Reconciliación de Inventario"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full md:w-auto items-center",children:[e.jsx("input",{type:"text",placeholder:"Buscar en tabla...",className:"h-8 px-3 text-xs border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none w-full sm:w-52 transition-all duration-150",value:i,onChange:e=>o(e.target.value)}),e.jsxs("button",{onClick:()=>window.location.href="/api/views/reconciliation/export",className:"h-8 px-4 text-xs font-medium bg-emerald-600 text-white border border-emerald-700 rounded-md shadow-sm hover:bg-emerald-700 transition-all duration-150 flex items-center justify-center gap-1.5",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 011.414.586l2.914 2.914a1 1 0 01.586 1.414V19a2 2 0 01-2 2z"})}),"Exportar"]})]})]}),e.jsxs("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden border border-gray-200",children:[r?e.jsx("div",{className:"p-12 text-center text-gray-500 animate-pulse",children:"Cargando datos de reconciliación..."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs border-collapse",children:[e.jsx("thead",{className:"bg-slate-700 text-white",children:e.jsx("tr",{children:["GRN","Codigo_Item","Descripcion","Ubicacion","Reubicado","Cant_Esperada","Cant_Recibida","Diferencia"].map(t=>{return e.jsx("th",{onClick:()=>(e=>{let t="ascending";c.key===e&&"ascending"===c.direction&&(t="descending"),l({key:e,direction:t})})(t),className:"px-2 py-1.5 text-left font-medium cursor-pointer transition select-none whitespace-nowrap hover:bg-slate-600",children:e.jsxs("div",{className:"flex items-center",children:[t.replace("_"," "),(s=t,c.key!==s?e.jsx("span",{className:"ml-1 text-gray-400",children:"↕"}):"ascending"===c.direction?e.jsx("span",{className:"ml-1 text-black",children:"↑"}):e.jsx("span",{className:"ml-1 text-black",children:"↓"}))]})},t);var s})})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:x.length>0?x.map((t,s)=>{const a=0!==t.Diferencia,r=a?"bg-red-50 hover:bg-red-100":`${s%2==0?"bg-white":"bg-gray-50"} hover:bg-blue-50`,n=a?"text-red-600 font-semibold":"text-gray-600";return e.jsxs("tr",{className:`${r} transition-colors`,children:[e.jsx("td",{className:"px-2 py-1.5 whitespace-nowrap font-medium text-gray-900",children:t.GRN}),e.jsx("td",{className:"px-2 py-1.5 whitespace-nowrap font-mono",children:t.Codigo_Item}),e.jsx("td",{className:"px-2 py-1.5 truncate max-w-[180px]",title:t.Descripcion,children:t.Descripcion}),e.jsx("td",{className:"px-2 py-1.5 whitespace-nowrap text-gray-600",children:t.Ubicacion}),e.jsx("td",{className:"px-2 py-1.5 whitespace-nowrap text-blue-600 font-medium",children:t.Reubicado}),e.jsx("td",{className:"px-2 py-1.5 whitespace-nowrap text-center font-mono",children:t.Cant_Esperada}),e.jsx("td",{className:"px-2 py-1.5 whitespace-nowrap text-center font-mono",children:t.Cant_Recibida}),e.jsx("td",{className:`px-2 py-1.5 whitespace-nowrap text-center font-mono font-semibold ${n}`,children:t.Diferencia>0?`+${t.Diferencia}`:t.Diferencia})]},s)}):e.jsx("tr",{children:e.jsxs("td",{colSpan:"8",className:"px-2 py-4 text-center text-gray-500",children:["No se encontraron datos ",i&&`para "${i}"`]})})})]})}),!r&&e.jsxs("div",{className:"px-5 py-3 bg-gray-50 border-t border-gray-200 flex flex-col xs:flex-row items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["Mostrando ",x.length," registros"]}),e.jsx("span",{children:"Datos en tiempo real"})]})]})]})};export{s as default};
